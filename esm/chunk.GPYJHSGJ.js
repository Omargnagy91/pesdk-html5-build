import{a as w,g as vn,h as Do,l as H,m as mn,p as jn,q as Po,r as k,s as Fn,t as No,v as Bo,w as hn,x as Yr,y as Tn,z as je}from"./chunk.362UIITG.js";import{$ as Ce,C as fo,H as Ft,P as qe,S as _,T as er,a as ht,ba as In,c as Re,da as oe,ea as A,fa as bt,ga as m,ia as c,ja as Hn,ka as p,la as Xn,p as G}from"./chunk.ODTFEESR.js";import{I as F,M as tt,Q as ot,c as $,d as f,h as b,s as E}from"./chunk.AIZVSHMP.js";var et=tt((bs,Dt)=>{"use strict";var Or=!1,Nt=function(){};Or&&(_t=function(t,o){var n=arguments.length;o=new Array(n>1?n-1:0);for(var r=1;r<n;r++)o[r-1]=arguments[r];var i=0,s="Warning: "+t.replace(/%s/g,function(){return o[i++]});typeof console!="undefined"&&console.error(s);try{throw new Error(s)}catch(l){}},Nt=function(e,t,o){var n=arguments.length;o=new Array(n>2?n-2:0);for(var r=2;r<n;r++)o[r-2]=arguments[r];if(t===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");e||_t.apply(null,[t].concat(o))});var _t;Dt.exports=Nt});var it=tt((Ds,Wt)=>{"use strict";var Mr="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Wt.exports=Mr});var st=tt((Ns,Gt)=>{"use strict";var jr=it();function zt(){}function Vt(){}Vt.resetWarningCache=zt;Gt.exports=function(){function e(n,r,i,s,l,u){if(u!==jr){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}e.isRequired=e;function t(){return e}var o={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Vt,resetWarningCache:zt};return o.PropTypes=o,o}});var at=tt((Hs,Yt)=>{Yt.exports=st()();var _s,$s});import Ge from"react";import{ThemeProvider as Mn}from"styled-components";function Jn(e){return!Object.prototype.hasOwnProperty.call(e,"name")}function Qn(e){return!Object.prototype.hasOwnProperty.call(e,"name")}var Vo=class{};var Yo=class{};var Xo=class{constructor(t){this.name=t.name,this.coverImageUrl=t.coverImageUrl}loadCoverImage(t="anonymous"){return new Promise((o,n)=>{let r=new Image;r.addEventListener("load",()=>{o(r)}),r.addEventListener("error",()=>{n(new Error(`Failed to load image at ${this.coverImage}`))}),r.crossOrigin=t,r.src=this.coverImageUrl,this.coverImage=r})}};var Ko=class{constructor(t){this.title=t.title,this.category=t.category||t.title,this.thumbUrl=t.thumbUrl,this.rawUrl=t.rawUrl,this.authorName=t.authorName,this.authorAvatar=t.authorAvatar}loadThumbImage(t="anonymous"){return new Promise((o,n)=>{let r=new Image;r.addEventListener("load",()=>{o(r)}),r.addEventListener("error",()=>{n(new Error(`Failed to load image at ${this.thumbUrl}`))}),r.crossOrigin=t,r.src=this.thumbUrl,this.thumbImage=r})}getThumbImage(){return this.thumbUrl}};var Ye=class{getData(t){return new Promise((o,n)=>{let r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="json",r.onload=()=>{let{status:i}=r;i===200?o(r.response):n(new Error(`HTTP Status ${i}`))},r.send()})}},qo=Ye;var Ro=class{loadJSON(t){return new qo().getData(t)}getCategories(){return Promise.resolve([])}searchImages(t){return Promise.resolve([])}};import nr from"react";import Jo from"react";import Qo from"styled-components";var Zo=Qo(Ce)`
  width: ${e=>e.theme.measurements.advancedCard.large.width}px;
  height: ${e=>e.theme.measurements.advancedCard.large.height}px;
  margin-bottom: ${e=>e.theme.measurements.advancedSpacer}px;
  color: ${e=>e.theme.card.foreground};
`,tr=o=>{var{isActive:e}=o,t=er(o,["isActive"]);return Jo.createElement(Zo,F({},t))},gt=tr;import or from"styled-components";var vt=or(Ce)`
  width: ${e=>e.theme.measurements.advancedCard.medium.width}px;
  height: ${e=>e.theme.measurements.advancedCard.medium.height}px;
  margin-bottom: ${e=>e.theme.measurements.advancedSpacer}px;
  color: ${e=>e.theme.card.foreground};
  &:nth-child(2n + 1) {
    margin-right: ${e=>e.theme.measurements.advancedSpacer}px;
  }
`;import rr from"styled-components";var St=rr(Ce)`
  width: ${e=>e.theme.measurements.advancedCard.small.width}px;
  height: ${e=>e.theme.measurements.advancedCard.small.height}px;
  margin-bottom: ${e=>e.theme.measurements.advancedSpacer}px;
  color: ${e=>e.theme.card.foreground};
  &:nth-child(3n + 1),
  &:nth-child(3n + 2) {
    margin-right: ${e=>e.theme.measurements.advancedSpacer}px;
  }
`;var he=e=>{let t=e.type===E.LARGE,o=e.type===E.SMALL,n=vt;return t?n=gt:o&&(n=St),nr.createElement(n,F({},e))};import ir from"styled-components";var Ae=ir.div.attrs(e=>({"data-test":e["data-test"]||A.CardContainer}))`
  display: flex;
  flex-wrap: wrap;
  /* width - padding on both sides */
  width: ${e=>e.theme.measurements.advancedUIToolControlBar.width-48}px;
`;import sr from"react";import ar,{css as yt}from"styled-components";var mr=ar.div`
  display: flex;
  flex-direction: column;
  flex-shrink: 0;

  position: relative;
  width: ${e=>e.theme.measurements.advancedUIToolControlBar.width}px;
  /* for Firefox */
  min-height: 0;
  margin-bottom: ${e=>e.theme.measurements.advancedUIToolControlBar.marginBottom}px;

  z-index: ${e=>e.theme.measurements.zIndex.toolControlBar};

  background: ${e=>e.theme.toolControlBar.background};
  transition: width 0.4s ease-in;
  ${e=>e.reverse?yt`
          border-left: 1px solid ${e.theme.toolControlBar.borderColor};
        `:yt`
          border-right: 1px solid ${e.theme.toolControlBar.borderColor};
        `}
`,It=({reverse:e=!1,children:t})=>sr.createElement(mr,{"data-test":A.ToolControlBar,reverse:e},t);import lr,{css as Xe}from"styled-components";var Tt=lr.div.attrs(()=>({"data-test":A.CategoryItemsContainer}))`
  transition: max-height 0.8s ease-out, transform 0.8s ease-out;
  background: ${e=>e.theme.toolControlBar.background};
  visibility: hidden;
  opacity: 0;
  transform-origin: 0 0;
  display: none;
  flex-wrap: wrap;

  ${({show:e})=>e&&Xe`
      opacity: 1;
      visibility: visible;
      ${G()?Xe`
            display: block;
          `:Xe`
            display: flex;
          `}
    `}
`;import ke from"react";import xt,{css as dr}from"styled-components";var cr=xt.div`
  position: relative;
  flex-grow: 0;
  flex-shrink: 0;
  ${e=>e.shouldAnimateHeight&&dr`
      height: ${e.height}px;
    `}
  opacity: ${({opacity:e})=>e};
  visibility: ${({visibility:e})=>e};
  overflow: ${({shouldAnimateOverflow:e,overflow:t})=>e?t:void 0};
  transition: ${({shouldAnimateHeight:e})=>e?"opacity 0.5s ease-in, height 0.4s ease-out":"opacity 0.5s ease-in"};
  background: ${e=>e.theme.toolControlBar.background};
  color: ${e=>e.theme.toolControlBar.inputLabelForeground};
`,pr=xt.div`
  position: relative;
  padding: ${e=>e.theme.measurements.advancedUIToolControlBar.padding};
`,Ke=class extends ke.Component{constructor(t){super(t);this.contentRef=null;this.enableOverflow=()=>{let{show:t}=this.props;t&&this.contentRef.current&&this.setState({overflow:!0})};this.contentRef=ke.createRef(),this.state={height:0,mounted:!1,overflow:!1}}componentDidMount(){let{overflowAfterExpand:t}=this.props;this.contentRef.current&&(t&&this.contentRef.current.addEventListener("transitionend",this.enableOverflow),this.setState({height:this.contentRef.current.scrollHeight,mounted:!0}))}componentWillUnmount(){this.contentRef.current&&this.contentRef.current.removeEventListener("transitionend",this.enableOverflow)}render(){let{show:t,shouldAnimateOverflow:o,shouldAnimateHeight:n,children:r}=this.props,{height:i,mounted:s,overflow:l}=this.state,u=s&&(t&&o||!o),C=u?i:0,v=u?1:0,h=u?"visible":"hidden";return ke.createElement(cr,{"data-test":A.ToolControlBarControls,ref:this.contentRef,height:C,opacity:v,visibility:h,overflow:l?"visible":"hidden",shouldAnimateHeight:n,shouldAnimateOverflow:o},ke.createElement(pr,null,r))}};Ke.defaultProps={show:!0,shouldAnimateOverflow:!0,shouldAnimateHeight:!0};var Et=Ke;import ur,{css as fr}from"styled-components";var Je=ur(qe)`
  position: relative;
  padding: ${e=>e.theme.measurements.advancedUIToolControlBar.padding};
  width: ${e=>e.theme.measurements.advancedUIToolControlBar.width}px;

  box-sizing: border-box;

  /* for Firefox */
  min-height: 0;

  transition: height 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);
  background: ${e=>e.theme.toolControlBar.background};
  color: ${e=>e.theme.toolControlBar.inputLabelForeground};

  /* compensate the padding in IE and Edge */
  ${()=>G()||Re()?fr`
        > ul {
          padding-right: 34px;
          margin-right: -34px;
        }
      `:""}
`;Je.defaultProps={direction:"vertical"};import Cr,{css as hr}from"styled-components";var br=Cr.div`
  &:after {
    content: '';
    position: absolute;
    bottom: 0px;
    ${e=>e.full?hr`
            left: -${3*e.theme.measurements.advancedSpacer/2}px;
            width: calc(
              100% + ${3*e.theme.measurements.advancedSpacer}px
            );
          `:`
      left: ${3*e.theme.measurements.advancedSpacer/2}px;
      width: calc(100% - ${3*e.theme.measurements.advancedSpacer}px);
    `}
    border-bottom: 2px solid ${e=>e.theme.toolControlBar.separatorColor};
  }
`,we=br;import gr from"styled-components";var vr=gr.h2`
  color: ${e=>e.theme.toolControlBar.titleForeground};
  font-size: ${e=>e.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.headline2.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.headline2.case};
  font-weight: 500;
  min-height: ${e=>2*e.theme.measurements.advancedSpacer}px;
`,Ue=vr;import R from"react";import Sr from"styled-components";var yr=Sr.div`
  display: flex;
  flex-direction: column;
  position: relative;
  width: 100%;
  flex: 1 0 auto;
`,At=({name:e,isFirstCategory:t,isLastCategory:o,children:n})=>R.createElement(yr,null,!t&&R.createElement(m.Spacer,{count:2}),R.createElement(Ue,{"data-test":e},e),R.createElement(Ae,{"data-test":A.CategoryItemsContainer},n),!o&&R.createElement(R.Fragment,null,R.createElement(m.Spacer,{count:2}),R.createElement(we,{full:!0})));import Ir from"styled-components";var Tr=Ir.h1`
  /* Center text horizontally and vertically */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 0;
  padding: 0 4px;
  margin: 0;
  min-height: ${e=>e.theme.measurements.mainCanvasActionBar.height-2}px;
  font-size: ${e=>e.theme.measurements.fontSystem.headline1.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.headline1.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.headline1.case};
  background: ${e=>e.theme.toolControlBar.background};
  color: ${e=>e.theme.toolControlBar.titleForeground};
  border-bottom: 1px solid ${e=>e.theme.toolControlBar.separatorColor};
  font-weight: 500;
  text-align: center;
`,kt=Tr;import wt from"react";import xr,{css as Qe}from"styled-components";var Er=xr.div`
  display: flex;
  flex: 1 0 auto;
  flex-direction: column;
  align-items: center;
  height: 100%;
  width: ${e=>e.theme.measurements.advancedUIToolbar.width}px;

  z-index: ${e=>e.theme.measurements.zIndex.toolbar};

  background-color: ${e=>e.theme.toolbar.background};
  color: ${e=>e.theme.toolbar.foreground};
  ${e=>{let t=e.theme.toolbar.border?e.theme.toolbar.border:Qe`
          1px solid ${e.theme.toolbar.borderColor};
        `;return e.reverse?Qe`
          border-left: ${t};
        `:Qe`
          border-right: ${t};
        `}}
  margin-bottom: ${e=>e.theme.measurements.advancedUIToolbar.marginBottom}px;
`,Ut=({reverse:e,children:t})=>wt.createElement(Er,{reverse:e,"data-test":A.Toolbar},wt.createElement(qe,{direction:"vertical"},t));import Ot from"react";import Lt,{css as Ze}from"styled-components";var Ar=Lt(Ft)`
  width: inherit;
  height: inherit;
  padding: 0;
  margin: 0;
  ${G()?Ze`
        background-color: transparent;
      `:Ze`
        background-color: inherit;
      `}

  ${e=>e.isActive&&Ze`
      background-color: ${e.theme.toolbar.activeBackground};
      color: ${e.theme.toolbar.activeForeground};
    `}
`,kr=Lt.li.attrs({"aria-haspopup":!0,"aria-hidden":!0,role:"menuitem"})`
  height: ${e=>e.theme.measurements.advancedUIToolbar.itemHeight}px;
  cursor: pointer;
  position: relative;
`,Pt=e=>Ot.createElement(kr,null,Ot.createElement(Ar,F(F({},e),{"data-test":A.ToolbarItem})));import wr from"styled-components";var Ur=wr.li.attrs({role:"none"})`
  height: ${e=>e.theme.measurements.advancedUIToolbar.seperatorHeight}px;
  cursor: pointer;
  position: relative;
`,Bt=Ur;import Le,{useRef as Gr}from"react";import{useRef as Mt,createElement as _r}from"react";var Dr=ot(et());import*as vs from"react";import{useLayoutEffect as Lr,useEffect as Fr,isValidElement as ys,cloneElement as Is,createContext as Ts,forwardRef as xs,memo as Es,useRef as As,useState as Pr,useCallback as Br,useMemo as ks}from"react";var $t=Nr()?Lr:Fr;var ws=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();function Nr(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}function Ht(){var e=Pr(Object.create(null)),t=e[1];return Br(function(){t(Object.create(null))},[])}import{createPortal as $r}from"react-dom";var Hr=function(t){var o=t.children,n=t.type,r=n===void 0?"reach-portal":n,i=Mt(null),s=Mt(null),l=Ht();return $t(function(){if(!!i.current){var u=i.current.ownerDocument;return s.current=u==null?void 0:u.createElement(r),u.body.appendChild(s.current),l(),function(){s.current&&s.current.ownerDocument&&s.current.ownerDocument.body.removeChild(s.current)}}},[r,l]),s.current?$r(o,s.current):_r("span",{ref:i})},jt=Hr;function rt(e,t){if(e==null)return{};var o={},n=Object.keys(e),r,i;for(i=0;i<n.length;i++)r=n[i],!(t.indexOf(r)>=0)&&(o[r]=e[r]);return o}function nt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Ys=ot(at());import Oe from"react";import dt from"react-dom";var mt={disabled:!1};import Wr from"react";var lt=Wr.createContext(null);var be="unmounted",ee="exited",te="entering",le="entered",ct="exiting",z=function(e){nt(t,e);function t(n,r){var i;i=e.call(this,n,r)||this;var s=r,l=s&&!s.isMounting?n.enter:n.appear,u;return i.appearStatus=null,n.in?l?(u=ee,i.appearStatus=te):u=le:n.unmountOnExit||n.mountOnEnter?u=be:u=ee,i.state={status:u},i.nextCallback=null,i}t.getDerivedStateFromProps=function(r,i){var s=r.in;return s&&i.status===be?{status:ee}:null};var o=t.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(r){var i=null;if(r!==this.props){var s=this.state.status;this.props.in?s!==te&&s!==le&&(i=te):(s===te||s===le)&&(i=ct)}this.updateStatus(!1,i)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var r=this.props.timeout,i,s,l;return i=s=l=r,r!=null&&typeof r!="number"&&(i=r.exit,s=r.enter,l=r.appear!==void 0?r.appear:s),{exit:i,enter:s,appear:l}},o.updateStatus=function(r,i){r===void 0&&(r=!1),i!==null?(this.cancelNextCallback(),i===te?this.performEnter(r):this.performExit()):this.props.unmountOnExit&&this.state.status===ee&&this.setState({status:be})},o.performEnter=function(r){var i=this,s=this.props.enter,l=this.context?this.context.isMounting:r,u=this.props.nodeRef?[l]:[dt.findDOMNode(this),l],C=u[0],v=u[1],h=this.getTimeouts(),g=l?h.appear:h.enter;if(!r&&!s||mt.disabled){this.safeSetState({status:le},function(){i.props.onEntered(C)});return}this.props.onEnter(C,v),this.safeSetState({status:te},function(){i.props.onEntering(C,v),i.onTransitionEnd(g,function(){i.safeSetState({status:le},function(){i.props.onEntered(C,v)})})})},o.performExit=function(){var r=this,i=this.props.exit,s=this.getTimeouts(),l=this.props.nodeRef?void 0:dt.findDOMNode(this);if(!i||mt.disabled){this.safeSetState({status:ee},function(){r.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:ct},function(){r.props.onExiting(l),r.onTransitionEnd(s.exit,function(){r.safeSetState({status:ee},function(){r.props.onExited(l)})})})},o.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(r,i){i=this.setNextCallback(i),this.setState(r,i)},o.setNextCallback=function(r){var i=this,s=!0;return this.nextCallback=function(l){s&&(s=!1,i.nextCallback=null,r(l))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},o.onTransitionEnd=function(r,i){this.setNextCallback(i);var s=this.props.nodeRef?this.props.nodeRef.current:dt.findDOMNode(this),l=r==null&&!this.props.addEndListener;if(!s||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],C=u[0],v=u[1];this.props.addEndListener(C,v)}r!=null&&setTimeout(this.nextCallback,r)},o.render=function(){var r=this.state.status;if(r===be)return null;var i=this.props,s=i.children,l=i.in,u=i.mountOnEnter,C=i.unmountOnExit,v=i.appear,h=i.enter,g=i.exit,d=i.timeout,S=i.addEndListener,x=i.onEnter,X=i.onEntering,K=i.onEntered,Q=i.onExit,W=i.onExiting,Z=i.onExited,y=i.nodeRef,q=rt(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Oe.createElement(lt.Provider,{value:null},typeof s=="function"?s(r,q):Oe.cloneElement(Oe.Children.only(s),q))},t}(Oe.Component);z.contextType=lt;z.propTypes={};function de(){}z.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:de,onEntering:de,onEntered:de,onExit:de,onExiting:de,onExited:de};z.UNMOUNTED=be;z.EXITED=ee;z.ENTERING=te;z.ENTERED=le;z.EXITING=ct;var Xt=z;import Kt,{css as pt}from"styled-components";var zr=Kt.div`
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-family: '${e=>e.theme.typography.fontFamily}', sans-serif;

  ${G()?pt`
        position: -ms-device-fixed;
      `:pt`
        position: fixed;
      `}
  top: ${e=>e.position.y-5}px;
  transition: opacity 0.5s ease-in-out, left 0.25s ease-in-out,
    right 0.25s ease-in-out;
  z-index: ${e=>e.theme.measurements.zIndex.toolbar};
  pointer-events: none;
  cursor: pointer;

  &:before {
    content: ' ';
    position: absolute;
    top: 10px;
    left: -8px;
    width: 0;
    height: 0;
    border-right: 8px solid ${e=>e.theme.tooltip.background};
    border-bottom: 6px solid transparent;
    border-top: 6px solid transparent;
  }

  &:after {
    content: '${e=>e.label}';
    position: absolute;
    color: ${e=>e.theme.tooltip.foreground};
    background: ${e=>e.theme.tooltip.background};
    padding: 8px 12px;
    text-align: center;
    vertical-align: super;
    font-size: ${e=>e.theme.measurements.fontSystem.label.size}px;
    letter-spacing: ${e=>e.theme.measurements.fontSystem.label.letterSpacing}px;
    text-transform: ${e=>e.theme.measurements.fontSystem.label.case};
    border-radius: ${e=>e.theme.shape.radiusSmall}px;
    white-space: nowrap;
  }

  ${e=>e.reverse&&pt`
      direction: rtl;

      &:before {
        border-left: 8px solid ${e.theme.tooltip.background};
        border-right: none;
        right: -8px;
        left: unset;
        top: 10px;
      }
    `}
`,Vr=Kt.span`
  display: none;
`,qt=({show:e=!0,reverse:t,position:o,children:n})=>{let r=Gr(null),{config:i}=_(),{measurements:s}=i,l=typeof n=="string"?n:"",u=o.x+s.advancedUIToolbar.width-10,C=o.x+s.advancedUIToolbar.width+16,v=t?"right":"left",h={entering:{opacity:0,[v]:`${u}px`},entered:{opacity:1,[v]:`${C}px`},exiting:{opacity:0,[v]:`${u}px`},exited:{opacity:0,[v]:`${u}px`}};return Le.createElement(Xt,{nodeRef:r,in:e,timeout:{exit:500}},g=>g!=="exited"&&Le.createElement(jt,null,Le.createElement(zr,{ref:r,style:h[g],"data-test":A.Tooltip,reverse:t,position:o,label:l},Le.createElement(Vr,null,l))))};var a={Card:he,CardContainer:Ae,Toolbar:{Index:Ut,Item:Pt,Separator:Bt,Tooltip:qt},Itemsbar:Je,BarSeparator:"",ItemsSeparator:we,Controlsbar:Et,Sidebar:{Index:It,Heading:kt,SubHeading:Ue,TextCategory:At,ExpandableContainer:Tt}};import O from"react";import Nn from"styled-components";import ut from"react";import ge from"react";var Fe=class extends ge.Component{constructor(){super(...arguments);this.renderIcon=t=>{let{tool:o,config:n}=this.props,r=n.state.config[o];if(r.icon){let s=r.icon;return ge.createElement(s,null)}let i=Yr[t];return ge.createElement(i,null)||null};this.update=t=>{this.props.active.selectTool(t)}}getToolTitle(t){return this.props.config.locale[t].title}render(){let t=this.props.active.tool,{tool:o,custom:n}=this.props;if(o){let r=n.getAdvancedToolbarItem();return ge.createElement(r,{key:o,isActive:o===t,isReverse:this.props.isReverse,icon:this.renderIcon(o),onClick:()=>this.update(o),tool:o,label:this.getToolTitle(o)})}return ge.createElement(a.Toolbar.Separator,null)}};Fe=oe([p("active","config","custom"),c],Fe);var Rt=Fe;var ce=class extends ut.Component{render(){let{config:t}=this.props,o=t.config.order==="reverse";return ut.createElement(a.Toolbar.Index,{reverse:o},t.tools.map((n,r)=>ut.createElement(Rt,{key:n||r,tool:n,isReverse:o})))}};ce=oe([p("config"),c],ce);import I from"react";import ue from"react";import ft from"react";var Xr=({adjustmentsTool:e,custom:t})=>{let o=e.locale.controls,n=t.getButton("toolControlBarSecondaryButton"),r=()=>{e.reset()};return ft.createElement(a.Controlsbar,{show:e.isDirty},ft.createElement(n,{tool:f.ADJUSTMENT,label:o.buttonReset,ariaLabel:o.buttonReset,onClick:r,fullWidth:!0}),ft.createElement(a.ItemsSeparator,null))},Jt=p("adjustmentsTool","custom")(c(Xr));import pe from"react";import Kr from"styled-components";var qr=Kr(m.Input.Slider)`
  padding-bottom: 16px;
`,Rr=({adjustmentsTool:e})=>{let{categories:t,items:o,config:n,locale:r}=e,i=()=>{e.toolSnapshot()},s=(C,v)=>{e.editAdjustments({type:C,value:v})},l=C=>{let v=e.locale.categories[C.identifier]||C.name;return pe.createElement(qr,{identifier:C.identifier,adjust:!0,key:C.identifier,label:v,value:e[C.identifier],onChange:h=>s(C.identifier,h),onMouseUp:i,onTouchEnd:i,snap:0})},u=(C,v)=>{let h=r.categories[C.identifier]||C.name;return C.items?pe.createElement(a.Sidebar.TextCategory,{key:C.identifier,name:h,isFirstCategory:v===0,isLastCategory:v===t.length-1},C.items.map(l)):null};return n.flattenCategories?pe.createElement(pe.Fragment,null,o.map(l)):pe.createElement(pe.Fragment,null,t.map(u))},Qt=p("adjustmentsTool")(c(Rr));var Jr=({adjustmentsTool:e,displayTitle:t})=>ue.createElement(ue.Fragment,null,t&&ue.createElement(a.Sidebar.Heading,null,e.locale.title),ue.createElement(Jt,null),ue.createElement(a.Itemsbar,null,ue.createElement(Qt,null))),Zt=p("adjustmentsTool")(c(Jr));import Pe from"react";import P from"react";var Qr=({brushTool:e,custom:t})=>{let{colorList:o}=e,n=e.locale.controls,r=e.localeColor.colorPicker,i=t.getButton("toolControlBarSecondaryButton");return P.createElement(P.Fragment,null,P.createElement(a.Controlsbar,{show:e.isDirty},P.createElement(i,{tool:f.BRUSH,ariaLabel:n.buttonReset,onClick:e.reset,fullWidth:!0,label:n.buttonReset}),P.createElement(a.ItemsSeparator,null)),P.createElement(a.Controlsbar,{overflowAfterExpand:!0},P.createElement(m.Input.Selection,{label:n.selectColor},P.createElement(H,{activeColor:e.color,colors:o,labelsColor:r,onChange:e.changeColor})),P.createElement(m.Spacer,{count:2}),P.createElement(m.Input.Slider,{"data-test":A.BrushSize,label:n.sliderSize,value:e.relativeSize,min:1,max:100,divider:1,onChange:e.changeRelativeSize}),P.createElement(m.Spacer,{count:3}),P.createElement(m.Input.Slider,{"data-test":A.BrushHardness,label:n.sliderHardness,value:e.hardness,min:0,max:1,onChange:e.changeHardness}),P.createElement(m.Spacer,null)))},eo=p("brushTool","custom")(c(Qr));var Zr=({brushTool:e,displayTitle:t})=>Pe.createElement(Pe.Fragment,null,t&&Pe.createElement(a.Sidebar.Heading,null,e.locale.title),Pe.createElement(eo,null)),to=p("brushTool")(c(Zr));import Be from"react";var oo=({displayTitle:e})=>{let{config:t}=_(),o=t.state.config[f.CUSTOM].toolControlBar,{title:n}=t.state.locale[f.CUSTOM];return Be.createElement(Be.Fragment,null,e&&Be.createElement(a.Sidebar.Heading,null,n),Be.createElement(o,{language:t.state.locale[f.CUSTOM]}))};import ne from"react";import re from"react";var en=({filterTool:e,custom:t})=>{let o=e.locale.controls,n=e.state,r=t.getButton("toolControlBarSecondaryButton"),i=()=>{e.toolSnapshot()},s=()=>{e.reset()};return re.createElement(a.Controlsbar,{show:e.isOptionSelected},re.createElement(m.Input.Form,null,re.createElement(r,{tool:f.FILTER,ariaLabel:o.buttonReset,onClick:s,fullWidth:!0,label:o.buttonReset}),re.createElement(m.Spacer,{count:2}),re.createElement(m.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:o.sliderIntensity,value:n.intensity,min:0,max:1,onChange:e.changeIntensity,onMouseUp:i,onTouchEnd:i,snap:n.isDuotone?.5:null}),re.createElement(m.Spacer,null)),re.createElement(a.ItemsSeparator,null))},ro=p("filterTool","custom")(c(en));import B from"react";var tn=({filterTool:e,custom:t})=>{let{categories:o,config:n,items:r,locale:i}=e,s=t.getAdvancedItemCard(),l=t.getAdvancedCategoryCard(),u=(h,g)=>{let d=i.items[h.identifier]||h.name;return B.createElement(s,{tool:f.FILTER,type:E.MEDIUM,onClick:()=>e.selectFilter(h.identifier,h.defaultIntensity),key:h.identifier,image:h.thumbnailURI,label:d,style:{animationDelay:`${w(g)}s`},isActive:e.identifier===h.identifier},B.createElement(k,{withBackground:!0},d))},C=(h,g)=>{let{selectedCategoryIdentifier:d}=e,S=d===h.identifier,x=i.categories[h.identifier]||h.name;return h.items?B.createElement("div",{key:h.identifier},B.createElement(l,{isActive:S,tool:f.FILTER,type:E.LARGE,onClick:()=>e.toggleCategorySelection(h.identifier),image:h.thumbnailURI,label:x,style:{animationDelay:`${w(g)}s`}},B.createElement(k,{withBackground:!0,caret:!0,isActive:S},x)),B.createElement(a.Sidebar.ExpandableContainer,{show:S},h.items.map(u))):null},v=(h,g)=>{let d=i.categories[h.identifier]||h.name;return h.items?B.createElement(a.Sidebar.TextCategory,{key:h.identifier,name:d,isFirstCategory:g===0,isLastCategory:g===o.length-1},h.items.map(u)):null};return n.flattenCategories?B.createElement(B.Fragment,null,r.map(u)):n.categoryHeaderType===$.CARD?B.createElement(B.Fragment,null,o.map(C)):n.categoryHeaderType===$.TEXT?B.createElement(B.Fragment,null,o.map(v)):null},no=p("filterTool","custom")(c(tn));var on=({filterTool:e,displayTitle:t})=>ne.createElement(ne.Fragment,null,t&&ne.createElement(a.Sidebar.Heading,null,e.locale.title),ne.createElement(ro,null),ne.createElement(a.Itemsbar,{key:"filterToolItemsbar"},ne.createElement(a.CardContainer,null,ne.createElement(no,null)))),io=p("filterTool")(c(on));import ve from"react";import ie from"react";var so=c(()=>{let{focusTool:e,custom:t}=_(),o=e.locale.controls,n=t.getButton("toolControlBarSecondaryButton"),r=()=>{e.toolSnapshot(o.sliderIntensity)},i=()=>{e.reset()};return ie.createElement(a.Controlsbar,{show:e.isOptionSelected},ie.createElement(m.Input.Form,null,ie.createElement(n,{tool:f.FOCUS,ariaLabel:o.buttonReset,onClick:i,fullWidth:!0,label:o.buttonReset}),ie.createElement(m.Spacer,{count:2}),ie.createElement(m.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:o.sliderIntensity,value:e.relativeIntensity,min:0,max:100,divider:1,onChange:e.changeRelativeIntensity,onMouseUp:r,onTouchEnd:r})),ie.createElement(m.Spacer,{count:1}),ie.createElement(a.ItemsSeparator,null))});import De from"react";var rn=({focusTool:e,custom:t})=>{let{items:o}=e,n=(r,i)=>{let s=e.locale.items[r.identifier]||r.name,l=t.getAdvancedItemCard();return De.createElement(l,{tool:f.FOCUS,type:E.LARGE,onClick:()=>e.selectFocus(r.identifier),key:r.identifier,image:r.thumbnailURI,label:s,style:{animationDelay:`${w(i)}s`},isActive:r.identifier===e.identifier},De.createElement(k,{withBackground:!0},s))};return De.createElement(a.Itemsbar,null,De.createElement(a.CardContainer,null,o.map(n)))},ao=p("focusTool","custom")(c(rn));var mo=c(({displayTitle:e})=>{let{focusTool:t}=_();return ve.createElement(ve.Fragment,null,e&&ve.createElement(a.Sidebar.Heading,null,t.locale.title),ve.createElement(so,null),ve.createElement(ao,null))});import Se from"react";import M from"react";var nn=({frameTool:e,custom:t})=>{let o=e.locale.controls,n=e.localeColor.colorPicker,{tintable:r,colorList:i}=e,s=t.getButton("toolControlBarSecondaryButton"),l=()=>{e.reset()},u=C=>{e.toolSnapshot(C)};return M.createElement(a.Controlsbar,{show:e.isOptionSelected,overflowAfterExpand:!0},M.createElement(s,{tool:f.FRAME,ariaLabel:o.buttonReset,onClick:l,fullWidth:!0,label:o.buttonReset}),M.createElement(m.Spacer,{count:2}),M.createElement(m.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:o.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:()=>{u(o.sliderOpacity)},onTouchEnd:()=>{u(o.sliderOpacity)}}),M.createElement(m.Spacer,{count:2}),M.createElement(m.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:o.sliderSize,value:e.size,min:e.minSize,max:e.maxSize,divider:1,onChange:e.changeWidth,onMouseUp:()=>{u(o.sliderSize)},onTouchEnd:()=>{u(o.sliderSize)}}),M.createElement(m.Spacer,{count:2}),M.createElement(m.Input.Selection,{isDisabled:!r,label:o.selectColor},M.createElement(H,{activeColor:e.color,colors:i,labelsColor:n,isDisabled:!r,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot})),M.createElement(a.ItemsSeparator,null))},lo=p("frameTool","custom")(c(nn));import Ne from"react";var sn=({frameTool:e,custom:t})=>{let{items:o}=e,n=e.state?e.state.identifier:null,r=(i,s)=>{let l=e.locale.items[i.identifier]||i.name,u=t.getAdvancedItemCard();return Ne.createElement(u,{tool:f.FRAME,type:E.MEDIUM,onClick:()=>e.selectFrame(i.identifier),key:i.identifier,image:i.thumbnailURI,label:l,style:{backgroundSize:"75%",animationDelay:`${w(s)}s`},isActive:i.identifier===n},Ne.createElement(k,{hidden:!0},l))};return Ne.createElement(a.Itemsbar,null,Ne.createElement(a.CardContainer,null,o.map(r)))},co=p("frameTool","custom")(c(sn));var an=({frameTool:e,displayTitle:t})=>Se.createElement(Se.Fragment,null,t&&Se.createElement(a.Sidebar.Heading,null,e.locale.title),Se.createElement(lo,null),Se.createElement(co,null)),po=p("frameTool")(c(an));import se from"react";import N from"react";var ln=({library:e,active:t,custom:o})=>{let n=e.locale.controls.placeholderSearch,{config:r,libraryProvider:i}=e,s=o.getButton("toolControlBarPrimaryButton"),l=h=>{let{files:g}=h.target;if(g.length){let d=new FileReader;d.onload=S=>{t.newImage(S.target.result)},d.readAsDataURL(g[0])}},u=()=>{t.selectWebcam(!0)},C=()=>{let h=document.getElementById("fileUpload");h&&h.click()},v=h=>{e.fetchImages(h)};return N.createElement(a.Controlsbar,{shouldAnimateHeight:!1,shouldAnimateOverflow:!1},i&&N.createElement(N.Fragment,null,N.createElement(m.Input.Search,{onChange:v,placeholder:n}),N.createElement(m.Spacer,{count:2})),r.enableUpload&&N.createElement(N.Fragment,null,N.createElement(s,{tool:f.LIBRARY,ariaLabel:e.locale.controls.buttonUpload,onClick:C,fullWidth:!0,label:e.locale.controls.buttonUpload},N.createElement(m.Input.File,{onChange:l})),N.createElement(m.Spacer,null)),r.enableWebcam&&N.createElement(mn,{tool:f.LIBRARY,onClick:u,fullWidth:!0,label:e.locale.controls.buttonWebcamOpen}),N.createElement(a.ItemsSeparator,null))},uo=p("library","active","custom")(c(ln));import U from"react";var dn=({active:e,library:t,custom:o})=>{let{query:n,config:r,selectedCategoryIdentifier:i,categories:s,items:l}=t,u=o.getAdvancedCategoryCard(),C=o.getAdvancedItemCard(),v=(d,S)=>U.createElement(C,{tool:f.LIBRARY,type:E.MEDIUM,onClick:()=>e.newImage(d.rawUrl),key:`${d.identifier}-${S}`,image:d.thumbnailURI,label:d.name,style:{animationDelay:`${w(S)}s`},authorAvatar:d.authorAvatar,authorName:d.authorName},d.authorAvatar&&U.createElement(fo,{url:d.authorAvatar}),d.authorName&&U.createElement(k,{withBackground:!0},d.authorName)),h=(d,S)=>{let x=i===d.identifier;return d.items?U.createElement("div",{key:d.identifier},U.createElement(u,{isActive:x,tool:f.LIBRARY,type:E.LARGE,onClick:()=>t.toggleCategorySelection(d.identifier),image:d.thumbnailURI,label:d.name,style:{animationDelay:`${w(S)}s`}},U.createElement(k,{withBackground:!0,caret:!0,isActive:x},d.name)),U.createElement(a.Sidebar.ExpandableContainer,{show:x},d.items.map(v))):null},g=(d,S)=>d.items?U.createElement(a.Sidebar.TextCategory,{key:d.identifier,name:d.name,isFirstCategory:S===0,isLastCategory:S===s.length-1},d.items.map(v)):null;return n?l.length?U.createElement(U.Fragment,null,l.map(v)):U.createElement("p",{"data-test":A.NoResult},t.locale.controls.noResults):r.flattenCategories?U.createElement(U.Fragment,null,l.map(v)):r.categoryHeaderType===$.CARD?U.createElement(U.Fragment,null,s.map(h)):r.categoryHeaderType===$.TEXT?U.createElement(U.Fragment,null,s.map(g)):null},Co=p("library","active","custom")(c(dn));var cn=({library:e,displayTitle:t})=>se.createElement(se.Fragment,null,t&&se.createElement(a.Sidebar.Heading,null,e.locale.title),se.createElement(uo,null),se.createElement(a.Itemsbar,null,se.createElement(a.CardContainer,null,se.createElement(Co,null)))),ho=p("library")(c(cn));import ye from"react";import J from"react";var pn=({overlayTool:e,custom:t})=>{let o=e.locale.controls,{allBlendModes:n}=e,{blendMode:r}=e,i=t.getButton("toolControlBarSecondaryButton"),s=()=>{e.toolSnapshot()},l=C=>{e.changeBlendMode(C)},u=()=>{e.reset()};return J.createElement(a.Controlsbar,{show:e.isOptionSelected},J.createElement(i,{tool:f.OVERLAY,ariaLabel:o.buttonReset,onClick:u,fullWidth:!0,label:o.buttonReset}),J.createElement(m.Spacer,{count:2}),J.createElement(m.Input.CarouselSlider,{label:o.carouselBlendMode,defaultIdentifier:r,onSelect:l,list:n}),J.createElement(m.Spacer,{count:2}),J.createElement(m.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:o.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:s,onTouchEnd:s}),J.createElement(m.Spacer,null),J.createElement(a.ItemsSeparator,null))},bo=p("overlayTool","custom")(c(pn));import _e from"react";var un=({overlayTool:e,custom:t})=>{let{items:o,locale:n,identifier:r,selectOverlay:i}=e,s=(l,u)=>{let C=n.items[l.identifier]||l.name,v=t.getAdvancedItemCard();return _e.createElement(v,{tool:f.OVERLAY,type:E.MEDIUM,onClick:()=>i(l.identifier),key:l.identifier,image:l.thumbnailURI,label:C,style:{animationDelay:`${w(u)}s`},isActive:l.identifier===r},_e.createElement(k,{withBackground:!0},C))};return _e.createElement(a.Itemsbar,null,_e.createElement(a.CardContainer,null,o.map(s)))},go=p("overlayTool","custom")(c(un));var fn=({overlayTool:e,displayTitle:t})=>ye.createElement(ye.Fragment,null,t&&ye.createElement(a.Sidebar.Heading,null,e.locale.title),ye.createElement(bo,null),ye.createElement(go,null)),vo=p("overlayTool")(c(fn));import ae from"react";import j from"react";import Cn from"styled-components";var bn=Cn.input.attrs({type:"file",id:"fileUpload",accept:"image/*",multiple:!0})`
  ${hn.VisuallyHidden}
`,gn=({stickerTool:e,custom:t})=>{let{colorList:o}=e,n=e.locale.controls,r=e.localeColor.colorPicker,i=t.getButton("toolControlBarPrimaryButton"),s=()=>{e.toolSnapshot()},l=()=>{let h=document.getElementById("fileUpload");h&&(h.value=null,h.click())},u=h=>{let{files:g}=h.target;e.addFiles(g)},C=()=>e.isCustomStickerEnabled?j.createElement(i,{tool:f.STICKER,ariaLabel:n.buttonUpload,onClick:l,fullWidth:!0,label:n.buttonUpload},j.createElement(bn,{onChange:u})):null,v=!e.isStickerSelected||!e.tintable&&e.isStickerSelected;return j.createElement(a.Controlsbar,{shouldAnimateHeight:!1,shouldAnimateOverflow:!1,overflowAfterExpand:!0},j.createElement(m.Input.Form,null,C(),j.createElement(m.Spacer,{count:2}),j.createElement(m.Input.Slider,{isDisabled:!e.isStickerSelected,label:n.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:s,onTouchEnd:s}),j.createElement(m.Spacer,{count:2}),j.createElement(m.Input.Selection,{isDisabled:v,label:n.selectColor},j.createElement(H,{activeSprite:e.id,activeColor:e.tintColor,colors:o,labelsColor:r,isDisabled:v,onChange:e.changeTintColor,onAddSnapshot:e.tintColorSnapshot}))),j.createElement(a.ItemsSeparator,null))},So=p("stickerTool","custom")(c(gn));import D from"react";var Sn=({stickerTool:e,custom:t})=>{let{categories:o,selectedCategoryIdentifier:n,config:r,items:i,locale:s}=e,l=t.getAdvancedCategoryCard(),u=t.getAdvancedItemCard(),C=(g,d)=>{let S=s.items[g.identifier]||g.name;return D.createElement(u,{key:g.identifier,tool:f.STICKER,type:E.SMALL,onClick:()=>e.add(g.identifier),image:g.thumbnailURI,label:S,style:{backgroundSize:"75%",animationDelay:`${vn(d)}s`}},D.createElement(k,{hidden:!0},S))},v=(g,d)=>{let S=n===g.identifier,x=s.categories[g.identifier]||g.name;return g.items?D.createElement("div",{key:g.identifier},D.createElement(l,{isActive:S,tool:f.STICKER,type:E.LARGE,onClick:()=>e.toggleCategorySelection(g.identifier),image:g.thumbnailURI,label:x,style:{animationDelay:`${w(d)}s`}},D.createElement(k,{withBackground:!0,caret:!0,isActive:S},x)),D.createElement(a.Sidebar.ExpandableContainer,{show:S,key:`${g.identifier}-items`},g.items.map(C))):null},h=(g,d)=>{let S=s.categories[g.identifier]||g.name;return g.items?D.createElement(a.Sidebar.TextCategory,{key:g.identifier,name:S,isFirstCategory:d===0,isLastCategory:d===o.length-1},g.items.map(C)):null};return r.flattenCategories?D.createElement(D.Fragment,null,i.map(C)):r.categoryHeaderType===$.CARD?D.createElement(D.Fragment,null,o.map(v)):r.categoryHeaderType===$.TEXT?D.createElement(D.Fragment,null,o.map(h)):null},yo=p("stickerTool","custom")(c(Sn));var yn=({stickerTool:e,displayTitle:t})=>ae.createElement(ae.Fragment,null,t&&ae.createElement(a.Sidebar.Heading,null,e.locale.title),ae.createElement(So,null),ae.createElement(a.Itemsbar,null,ae.createElement(a.CardContainer,null,ae.createElement(yo,null)))),Io=p("stickerTool")(c(yn));import He from"react";import T from"react";import $e from"styled-components";var To=$e.div`
  position: relative;
`,xn=$e.div`
  display: flex;
  justify-content: space-between;
`,En=$e(m.Input.NumericInput)`
  max-width: 50%;
  margin-right: 16px;
`,An=$e(m.Input.Selection)`
  width: 50%;
`,kn=({textTool:e,custom:t})=>{let o=e.locale.controls,n=e.localeColor.colorPicker,{fontFamilies:r,alignment:i,isTextSelected:s,fontFamily:l,fontStyle:u,fontWeight:C,colorList:v,backgroundColorList:h}=e,g=["left","center","right"],d=t.getButton("textAlignment"),S=t.getButton("toolControlBarPrimaryButton"),x=()=>{e.toolSnapshot()},X=()=>{e.add()},K=y=>{let q=y?parseFloat(y):0;e.setFontSize(Math.max(10,Math.min(690,q)))},Q=()=>g.map(y=>{let q=Tn[y];return T.createElement(d,{tool:y,isDisabled:!s,ariaLabel:`Align ${y}`,isActive:y===i,key:y,style:{padding:"1px 3px 2px"},icon:T.createElement(q,null),onClick:()=>e.changeAlignment(y)})}),W=r.map(y=>({label:`${y.fontFamily} ${In.getDisplayFontStyle(y)}`,fontWeight:y.fontWeight,fontStyle:y.fontStyle,fontFamily:y.fontFamily,value:y.identifier})),Z=W.filter(({value:y})=>y===e.identifier)[0];return T.createElement(a.Controlsbar,{show:!0,overflowAfterExpand:!0,shouldAnimateHeight:!1},T.createElement(m.Input.Form,null,T.createElement(S,{tool:f.TEXT,ariaLabel:o.buttonNew,onClick:X,fullWidth:!0,label:o.buttonNew}),T.createElement(m.Spacer,{count:2}),T.createElement(m.Input.Dropdown,{isDisabled:!s,style:{fontFamily:l,fontStyle:u,fontWeight:C},itemStyle:y=>({fontFamily:y.fontFamily,fontStyle:y.fontStyle,fontWeight:y.fontWeight}),label:o.dropdownFontFamily,list:W,onSelect:e.changeFont,selectedItem:Z.label}),T.createElement(m.Spacer,{count:2}),T.createElement(xn,null,T.createElement(En,{value:e.fontSize.toFixed(0),onSubmit:K,label:o.textFontSize,isDisabled:!s}),T.createElement(An,{isDisabled:!s,inline:!0,label:o.selectAlignment,"data-test":A.TextAlignment},Q())),T.createElement(m.Spacer,{count:2}),T.createElement(To,null,T.createElement(a.ItemsSeparator,{full:!0})),T.createElement(m.Spacer,{count:2}),T.createElement(m.Input.Selection,{isDisabled:!s,label:o.selectFontColor},T.createElement(H,{activeSprite:e.id,activeColor:e.textColor,colors:v,labelsColor:n,isDisabled:!s,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot})),T.createElement(m.Spacer,{count:2}),T.createElement(m.Input.Selection,{isDisabled:!s,label:o.selectBackgroundColor},T.createElement(H,{activeSprite:e.id,activeColor:e.backgroundColor,colors:h,labelsColor:n,isDisabled:!s,onChange:e.changeBackgroundColor,onAddSnapshot:e.backgroundColorSnapshot})),T.createElement(m.Spacer,{count:2}),T.createElement(To,null,T.createElement(a.ItemsSeparator,{full:!0})),T.createElement(m.Spacer,{count:2}),T.createElement(m.Input.Slider,{isDisabled:!s,label:o.sliderLineSpacing,value:e.lineHeight,min:.5,max:3,onChange:e.changeLineHeight,onMouseUp:x,onTouchEnd:x,snap:1,divider:1,decimal:1}),T.createElement(m.Spacer,{count:1})))},xo=p("textTool","custom")(c(kn));var wn=({textTool:e,displayTitle:t})=>He.createElement(He.Fragment,null,t&&He.createElement(a.Sidebar.Heading,null,e.locale.title),He.createElement(xo,null)),Eo=p("textTool")(c(wn));import Ie from"react";import V from"react";var Un=({textDesignTool:e,custom:t})=>{let o=e.locale.controls,n=e.localeColor.colorPicker,{colorList:r}=e,i=e.isTextDesignSelected,s=t.getButton("toolControlBarPrimaryButton"),l=t.getButton("toolControlBarSecondaryButton"),u=()=>{e.add()},C=()=>{e.changeSeed()};return V.createElement(a.Controlsbar,{shouldAnimateOverflow:!1,shouldAnimateHeight:!1},V.createElement(m.Input.Form,null,V.createElement(s,{tool:f.TEXT_DESIGN,ariaLabel:o.buttonNew,onClick:u,fullWidth:!0,label:o.buttonNew}),V.createElement(m.Spacer,{count:2}),V.createElement(l,{tool:f.TEXT_DESIGN,ariaLabel:o.buttonShuffle,isDisabled:!i,onClick:C,fullWidth:!0,label:o.buttonShuffle}),V.createElement(m.Spacer,{count:2}),V.createElement(m.Input.Selection,{isDisabled:!i,label:o.selectColor},V.createElement(H,{activeSprite:e.id,activeColor:e.color,colors:r,labelsColor:n,isDisabled:!i,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))),V.createElement(a.ItemsSeparator,null))},Ao=p("textDesignTool","custom")(c(Un));import Me from"react";var On=({textDesignTool:e,custom:t})=>{let{items:o,identifier:n}=e,r=s=>{e.changeIdentifier(s)},i=(s,l)=>{let u=t.getAdvancedItemCard();return Me.createElement(u,{key:s.identifier,tool:f.TEXT_DESIGN,type:E.MEDIUM,onClick:()=>r(s.identifier),image:s.thumbnailURI,label:s.name||"",style:{animationDelay:`${w(l)}s`,backgroundSize:"60%"},isDisabled:!e.isTextDesignSelected,isActive:n===s.identifier},Me.createElement(k,{hidden:!0},s.name))};return Me.createElement(a.Itemsbar,null,Me.createElement(a.CardContainer,null,o.map(i)))},ko=p("textDesignTool","custom")(c(On));var Ln=({textDesignTool:e,displayTitle:t})=>Ie.createElement(Ie.Fragment,null,t&&Ie.createElement(a.Sidebar.Heading,null,e.locale.title),Ie.createElement(Ao,null),Ie.createElement(ko,null)),wo=p("textDesignTool")(c(Ln));import me from"react";import Y from"react";var Pn=({transformTool:e,custom:t})=>{let o=e.locale.controls,{forceDimensions:n,lockResolution:r,localOutputHeight:i,localOutputWidth:s}=e,l=t.getButton("toolControlBarSecondaryButton"),u=()=>{e.reset()},C=t.getCheckbox();return Y.createElement(a.Controlsbar,{shouldAnimateHeight:!1},Y.createElement(m.Input.Form,null,Y.createElement(l,{tool:f.TRANSFORM,ariaLabel:o.buttonReset,onClick:u,fullWidth:!0,label:o.buttonReset}),Y.createElement(m.Spacer,{count:2}),Y.createElement(C,{isDisabled:n,value:r,label:o.checkboxKeepResolution,checkMarkPosition:"right",onClick:e.changeLockResolution,style:{paddingTop:"5px",justifyContent:"space-between"}}),Y.createElement(m.Spacer,{count:2}),Y.createElement(Fn,{isDisabled:n,showLabel:!0,valueHeight:i,valueWidth:s,onSubmitWidth:e.onPixelWidth,onSubmitHeight:e.onPixelHeight,label:o.inputCropSize,labelHeight:o.inputHeight,labelWidth:o.inputWidth}),Y.createElement(m.Spacer,{count:1})),Y.createElement(a.ItemsSeparator,null))},Uo=p("transformTool","custom")(c(Pn));import L from"react";import{renderToStaticMarkup as Oo}from"react-dom/server";var Bn=({transformTool:e,custom:t,editor:o})=>{let{categories:n,items:r,identifier:i,config:s,locale:l}=e,u=t.getAdvancedItemCard(),C=t.getAdvancedCategoryCard(),v=(d,S)=>{let{theme:x,measurements:X}=o.configStore,K=l.items[d.identifier]||d.name,Q=d.thumbnailURI||"",W="80%";if(!e.checkIfTransformThumbnailExits(d.thumbnailURI)){let Z=d.identifier.includes("imgly_transform_common"),y=je.crops[d.identifier]||je.crops.imgly_transform_common_custom,q=L.createElement(y,{width:X.advancedCard.medium.width-(Z?42:0),height:X.advancedCard.medium.height-(Z?42:0),main:x.transform.crops.main,highlight:x.transform.crops.highlight,shadow:x.transform.crops.shadow});Q=`'data:image/svg+xml,${encodeURIComponent(Oo(q))}'`,W=G()||Re()?"auto":"unset"}return L.createElement(u,{key:d.identifier,tool:f.TRANSFORM,type:E.MEDIUM,onClick:()=>e.changeIdentifier(d.identifier,!0),image:Q,label:K,style:{backgroundSize:W,animationDelay:`${w(S)}s`},isActive:d.identifier===i},L.createElement(k,null,K))},h=(d,S)=>{let{theme:x,measurements:X}=o.configStore,K=e.selectedCategoryIdentifier===d.identifier,Q=l.categories[d.identifier]||d.name,W=d.thumbnailURI||"";if(!d.items)return null;if(!e.checkIfTransformThumbnailExits(d.thumbnailURI)){let Z=je.categories[d.identifier]||je.crops.imgly_transform_common_custom,y=L.createElement(Z,{width:X.advancedCard.large.width-42,height:X.advancedCard.large.height-42,main:x.transform.crops.main,highlight:x.transform.crops.highlight,shadow:x.transform.crops.shadow});W=`'data:image/svg+xml,${encodeURIComponent(Oo(y))}'`}return L.createElement("div",{key:d.identifier},L.createElement(C,{type:E.LARGE,onClick:()=>e.toggleCategorySelection(d.identifier),key:d.identifier,image:W,style:{animationDelay:`${w(S)}s`},label:d.name,tool:f.TRANSFORM},L.createElement(k,{caret:!0,isActive:K},Q)),L.createElement(a.Sidebar.ExpandableContainer,{show:K},d.items.map(v)))},g=(d,S)=>{let x=l.categories[d.identifier]||d.name;return d.items?L.createElement(a.Sidebar.TextCategory,{key:d.identifier,name:x,isFirstCategory:S===0,isLastCategory:S===n.length-1},d.items.map(v)):null};return s.flattenCategories?L.createElement(L.Fragment,null,r.map(v)):s.categoryHeaderType===$.CARD?L.createElement(L.Fragment,null,n.map(h)):s.categoryHeaderType===$.TEXT?L.createElement(L.Fragment,null,n.map(g)):null},Lo=p("transformTool","custom","editor")(c(Bn));var Dn=({transformTool:e,displayTitle:t})=>me.createElement(me.Fragment,null,t&&me.createElement(a.Sidebar.Heading,null,e.locale.title),me.createElement(Uo,null),me.createElement(a.Itemsbar,null,me.createElement(a.CardContainer,null,me.createElement(Lo,null)))),Fo=p("transformTool")(c(Dn));var fe=class extends I.Component{render(){let{config:t,active:o}=this.props,n=o.tool,r=t.config.displayToolControlBarTitle;return I.createElement(a.Sidebar.Index,{reverse:t.config.order==="reverse"},I.createElement(m.Switch.Index,{type:n},I.createElement(m.Switch.Case,{value:f.LIBRARY},I.createElement(ho,{displayTitle:r})),I.createElement(m.Switch.Case,{value:f.FILTER},I.createElement(io,{displayTitle:r})),I.createElement(m.Switch.Case,{value:f.FOCUS},I.createElement(mo,{displayTitle:r})),I.createElement(m.Switch.Case,{value:f.ADJUSTMENT},I.createElement(Zt,{displayTitle:r})),I.createElement(m.Switch.Case,{value:f.OVERLAY},I.createElement(vo,{displayTitle:r})),I.createElement(m.Switch.Case,{value:f.STICKER},I.createElement(Io,{displayTitle:r})),I.createElement(m.Switch.Case,{value:f.TEXT},I.createElement(Eo,{displayTitle:r})),I.createElement(m.Switch.Case,{value:f.TEXT_DESIGN},I.createElement(wo,{displayTitle:r})),I.createElement(m.Switch.Case,{value:f.FRAME},I.createElement(po,{displayTitle:r})),I.createElement(m.Switch.Case,{value:f.BRUSH},I.createElement(to,{displayTitle:r})),I.createElement(m.Switch.Case,{value:f.TRANSFORM},I.createElement(Fo,{displayTitle:r})),I.createElement(m.Switch.Case,{value:f.CUSTOM},I.createElement(oo,{displayTitle:r}))))}};fe=oe([p("active","config"),c],fe);var _o=Nn.div`
  position: absolute;
  height: 100%;
  width: ${e=>e.theme.measurements.advancedUIToolbar.width+e.theme.measurements.advancedUIToolControlBar.width}px;
  top: 0;
  background: ${e=>e.theme.webcam.backdrop};
  z-index: ${e=>e.theme.measurements.zIndex.disable};
`,Te=class extends O.Component{static getDerivedStateFromError(t){return console.error(t),{hasError:!0}}render(){let{config:t,active:o}=this.props;return t.isOrderDefault?O.createElement(m.Container,null,o.isWebcam?O.createElement(_o,{style:{left:0}}):null,O.createElement(No,null),O.createElement(ce,null),O.createElement(fe,null),O.createElement(Do,null,O.createElement(Bo,null),O.createElement(Po,null))):O.createElement(m.Container,null,o.isWebcam?O.createElement(_o,{style:{right:0}}):null,O.createElement(No,null),O.createElement(Do,null,O.createElement(Bo,null),O.createElement(Po,null)),O.createElement(fe,null),O.createElement(ce,null))}};Te=oe([p("config","active"),c],Te);import xe from"react";import _n from"styled-components";var $o=class extends xe.Component{constructor(t){super(t);this.ref=null;this.updatePosition=()=>{let{isReverse:t}=this.props,o={x:0,y:0};if(this.ref.current){let{top:n,height:r,left:i,right:s}=this.ref.current.getBoundingClientRect();o.y=n+r/4,o.x=t?window.innerWidth-s:i}this.setState({tooltipPosition:o})};this.mouseOver=t=>{this.updatePosition(),this.setState({hoverTool:t})};this.mouseOut=()=>{this.setState({hoverTool:null})};this.state={hoverTool:null,tooltipPosition:{x:0,y:0}},this.ref=xe.createRef()}componentDidMount(){this.updatePosition()}componentDidUpdate(t){let{isReverse:o}=this.props;o!==t.isReverse&&this.updatePosition()}render(){let{tool:t,isActive:o,isReverse:n,icon:r,label:i,onClick:s,className:l,children:u}=this.props,{hoverTool:C,tooltipPosition:v}=this.state;return xe.createElement($n,{ref:this.ref,onMouseOver:()=>this.mouseOver(t),onMouseOut:()=>this.mouseOut(),className:l},xe.createElement(a.Toolbar.Item,{ariaLabel:i,isActive:o,onClick:()=>s(t)},r,u),xe.createElement(a.Toolbar.Tooltip,{position:v,reverse:n,show:C===t},i))}},We=$o,$n=_n.div`
  position: relative;
`;var ze=class extends Ge.Component{componentDidMount(){let{editor:t,storeProps:o}=this.props;this.editor=t,this.storeProps=o;let n=new jn(this.editor.configStore.config.custom.components,{advancedUICategoryCard:a.Card,advancedUIItemCard:a.Card,advancedUIToolbarItem:We}),r={getAdvancedCategoryCard:n.getAdvancedCategoryCard,getAdvancedItemCard:n.getAdvancedItemCard,getAdvancedToolbarItem:n.getAdvancedToolbarItem,getDialog:n.getDialog,getButton:n.getButton,getColorItem:n.getColorItem,getCheckbox:n.getCheckbox};this.storeProps.custom=r,this.forceUpdate()}render(){return this.storeProps?Ge.createElement(Hn,F({},this.storeProps),Ge.createElement(Mn,{theme:F(F({},this.editor.configStore.theme),{measurements:this.editor.configStore.measurements})},Ge.createElement(Te,null))):null}};import Ct from"react";import Ho from"react-dom";import Ee,{Suspense as Wn,useMemo as Gn}from"react";var zn=Ee.lazy(()=>import("./ui/basic/index.js")),Vn=e=>({filterTool:e.filterToolStore,focusTool:e.focusToolStore,adjustmentsTool:e.adjustmentsToolStore,overlayTool:e.overlayToolStore,frameTool:e.frameToolStore,brushTool:e.brushToolStore,transformTool:e.transformToolStore,scale:e.scale,sprite:e.spriteStore,stickerTool:e.spriteStore.stickerToolStore,textTool:e.spriteStore.textToolStore,textDesignTool:e.spriteStore.textDesignToolStore,library:e.libraryStore,modal:e.modalStore,snapping:e.snappingStore,config:e.configStore,active:e.activeStore,canvas:e.canvasStore,history:e.historyStore,editor:e}),Ve=({editor:e})=>{let t=Gn(()=>Vn(e),[e]);return e.configStore.config.layout==="basic"?Ee.createElement(Wn,{fallback:Ee.createElement("div",null)},Ee.createElement(zn,{editor:e,storeProps:t})):Ee.createElement(ze,{editor:e,storeProps:t})};var Mo=class extends ht{constructor(t,o){super();this.dispose=()=>{this.container&&(Ho.unmountComponentAtNode(this.container),this.removeAllListeners(b.EXPORT),this.removeAllListeners(b.HISTORY_CHANGE),this.removeAllListeners(b.EDITOR_READY),this.removeAllListeners(b.ERROR_IMAGE_LOADING),this.removeAllListeners(b.IMAGE_LOAD),this.removeAllListeners(b.TOOL_ENTER),this.removeAllListeners(b.STICKER_UPLOAD_ADD))};this.serialize=t=>this.editor.serialize(t);this.deserialize=t=>this.editor.deserialize(t);this.export=t=>this.editor.export(t);this.close=()=>this.editor.close();this.setImage=t=>this.editor.setImage(t,!0);this.reset=()=>{this.editor.resetToolStates(),this.editor.resize()};this.container=o,this.editor=new bt(F({},t)),this.editor.configStore.events.on(b.EXPORT,n=>{this.emit(b.EXPORT,n)}),this.editor.configStore.events.on(b.CLOSE,()=>{this.dispose(),this.emit(b.CLOSE)}),this.editor.configStore.events.on(b.HISTORY_CHANGE,()=>{this.emit(b.HISTORY_CHANGE)}),this.editor.configStore.events.on(b.STICKER_UPLOAD_ADD,n=>{this.emit(b.STICKER_UPLOAD_ADD,n)})}hasChanges(){return this.editor.hasChanges()}},jo=class{constructor(){this.container=null}init(t){return new Promise((o,n)=>{this.container=typeof t.container=="string"?document.querySelector(t.container):t.container,this.container?(this.editorApi=new Mo(t,this.container),Ho.render(Ct.createElement(Wo,{editor:this.editorApi.editor}),this.container),this.editorApi.editor.configStore.events.on(b.EDITOR_READY,()=>{setTimeout(()=>{this.editorApi.emit(b.EDITOR_READY)},0),o(this.editorApi)}),this.editorApi.editor.configStore.events.on(b.ERROR_IMAGE_LOADING,r=>{setTimeout(()=>{this.editorApi.emit(b.ERROR_IMAGE_LOADING,r)},0),o(this.editorApi)}),this.editorApi.editor.configStore.events.on(b.IMAGE_LOAD,()=>{setTimeout(()=>{this.editorApi.emit(b.IMAGE_LOAD)},0),o(this.editorApi)}),this.editorApi.editor.configStore.events.on(b.TOOL_ENTER,r=>{setTimeout(()=>{this.editorApi.emit(b.TOOL_ENTER,r)},0),o(this.editorApi)})):n(new Error("Provide a container"))})}},Wo=class extends Ct.Component{componentWillUnmount(){let{editor:t}=this.props;t.engine.dispose(),t.configStore.events.removeAllListeners(b.EXPORT),t.configStore.events.removeAllListeners(b.CLOSE),t.configStore.events.removeAllListeners(b.HISTORY_CHANGE),t.configStore.events.removeAllListeners(b.EDITOR_READY),t.configStore.events.removeAllListeners(b.ERROR_IMAGE_LOADING),t.configStore.events.removeAllListeners(b.IMAGE_LOAD),t.configStore.events.removeAllListeners(b.TOOL_ENTER),t.configStore.events.removeAllListeners(b.STICKER_UPLOAD_ADD)}render(){let{editor:t}=this.props;return Ct.createElement(Ve,{editor:t})}},Yn={init:e=>new jo().init(e)};import Go from"react";var zo=class extends Go.Component{constructor(t){super(t);this.ui=new ht;this.serialize=t=>this.editor.serialize(t);this.deserialize=t=>this.editor.deserialize(t);this.export=t=>this.editor.export(t);this.close=()=>this.editor.close();this.setImage=t=>this.editor.setImage(t,!0);this.dispose=()=>{this.ui.removeAllListeners(b.EXPORT),this.ui.removeAllListeners(b.HISTORY_CHANGE),this.ui.removeAllListeners(b.EDITOR_READY),this.ui.removeAllListeners(b.ERROR_IMAGE_LOADING),this.ui.removeAllListeners(b.IMAGE_LOAD),this.ui.removeAllListeners(b.TOOL_ENTER),this.ui.removeAllListeners(b.STICKER_UPLOAD_ADD)};this.reset=()=>{this.editor.resetToolStates(),this.editor.resize()};this.editor=new bt(F({},t)),this.editor.configStore.events.on(b.EXPORT,o=>{this.ui.emit(b.EXPORT,o)}),this.editor.configStore.events.on(b.CLOSE,()=>{this.componentWillUnmount(),this.ui.emit(b.CLOSE)}),this.editor.configStore.events.on(b.HISTORY_CHANGE,()=>{this.ui.emit(b.HISTORY_CHANGE)}),this.editor.configStore.events.on(b.EDITOR_READY,()=>{this.ui.emit(b.EDITOR_READY)}),this.editor.configStore.events.on(b.ERROR_IMAGE_LOADING,o=>{this.ui.emit(b.ERROR_IMAGE_LOADING,o)}),this.editor.configStore.events.on(b.IMAGE_LOAD,()=>{this.ui.emit(b.IMAGE_LOAD)}),this.editor.configStore.events.on(b.TOOL_ENTER,o=>{this.ui.emit(b.TOOL_ENTER,o)}),this.editor.configStore.events.on(b.STICKER_UPLOAD_ADD,o=>{this.ui.emit(b.STICKER_UPLOAD_ADD,o)})}componentWillUnmount(){this.dispose()}hasChanges(){return this.editor.hasChanges()}render(){return Go.createElement(Ve,{editor:this.editor})}};var tu=()=>{let{active:e}=_();return e.newImage};var nu=()=>_().config.isLayoutAdvanced;Xn({isolateGlobalState:!0});var{Container:Au,Input:Kn,ColorItem:ku,ColorItemBase:wu,ColorItemBackground:Uu,ColorItemTiledBackground:Ou,ColorItemActiveOverlay:Lu,Dialog:Fu,DialogBase:Pu,DialogContainer:Bu,DialogBackdrop:Du,DialogHeader:Nu,DialogBody:_u,DialogFooter:$u,DialogSpinner:Hu}=m,{Search:qn,Label:Mu,Checkbox:ju,CheckboxBase:Wu,CheckboxInput:Gu,CheckboxCheckMark:zu}=Kn,Vu=he,Yu=he,Xu=qn;export{Xo as a,Ko as b,Jn as c,Yo as d,nu as e,tu as f,Qn as g,Ro as h,Vo as i,zo as j,Au as k,ku as l,wu as m,Uu as n,Ou as o,Lu as p,Fu as q,Pu as r,Bu as s,Du as t,Nu as u,_u as v,$u as w,Hu as x,Mu as y,We as z,ju as A,Wu as B,Gu as C,zu as D,Vu as E,Yu as F,Xu as G,Yn as H};
