var PhotoEditorSDK=(()=>{var lZ=Object.create,Xd=Object.defineProperty,cZ=Object.getPrototypeOf,lI=Object.prototype.hasOwnProperty,dZ=Object.getOwnPropertyNames,cI=Object.getOwnPropertyDescriptor,dI=Object.getOwnPropertySymbols,uZ=Object.prototype.propertyIsEnumerable,v=Object.assign,uI=e=>Xd(e,"__esModule",{value:!0}),ai=(e,t)=>{var r={};for(var i in e)lI.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&dI)for(var i of dI(e))t.indexOf(i)<0&&uZ.call(e,i)&&(r[i]=e[i]);return r},x=(e,t)=>()=>(t||(t={exports:{}},e(t.exports,t)),t.exports),Tt=(e,t)=>{uI(e);for(var r in t)Xd(e,r,{get:t[r],enumerable:!0})},pZ=(e,t,r)=>{if(uI(e),typeof t=="object"||typeof t=="function")for(let i of dZ(t))!lI.call(e,i)&&i!=="default"&&Xd(e,i,{get:()=>t[i],enumerable:!(r=cI(t,i))||r.enumerable});return e},_=e=>e&&e.__esModule?e:pZ(Xd(lZ(cZ(e)),"default",{value:e,enumerable:!0}),e),m=(e,t,r,i)=>{for(var o=i>1?void 0:i?cI(t,r):t,n=e.length-1,s;n>=0;n--)(s=e[n])&&(o=(i?s(t,r,o):s(o))||o);return i&&o&&Xd(t,r,o),o},re=(e,t,r)=>(typeof t!="symbol"&&(t+=""),t in e?Xd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r),se=(e,t,r)=>new Promise((i,o)=>{var n=l=>{try{a(r.next(l))}catch(c){o(c)}},s=l=>{try{a(r.throw(l))}catch(c){o(c)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(n,s);a((r=r.apply(e,t)).next())}),vI=x((gMe,hI)=>{"use strict";hI.exports=gw;function gw(e){Zn.length||(_b(),mI=!0),Zn[Zn.length]=e}var Zn=[],mI=!1,_b,Qn=0,hZ=1024;function fI(){for(;Qn<Zn.length;){var e=Qn;if(Qn=Qn+1,Zn[e].call(),Qn>hZ){for(var t=0,r=Zn.length-Qn;t<r;t++)Zn[t]=Zn[t+Qn];Zn.length-=Qn,Qn=0}}Zn.length=0,Qn=0,mI=!1}var gI=typeof global!="undefined"?global:self,bI=gI.MutationObserver||gI.WebKitMutationObserver;typeof bI=="function"?_b=mZ(fI):_b=yI(fI);gw.requestFlush=_b;function mZ(e){var t=1,r=new bI(e),i=document.createTextNode("");return r.observe(i,{characterData:!0}),function(){t=-t,i.data=t}}function yI(e){return function(){var r=setTimeout(o,0),i=setInterval(o,50);function o(){clearTimeout(r),clearInterval(i),e()}}}gw.makeRequestCallFromTimer=yI}),vw=x((bMe,_I)=>{"use strict";var fZ=vI();function xb(){}var Jd=null,Zd={};function gZ(e){try{return e.then}catch(t){return Jd=t,Zd}}function bZ(e,t){try{return e(t)}catch(r){return Jd=r,Zd}}function yZ(e,t,r){try{e(t,r)}catch(i){return Jd=i,Zd}}_I.exports=Ji;function Ji(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("Promise constructor's argument is not a function");if(this._U=0,this._V=0,this._W=null,this._X=null,e===xb)return;xI(e,this)}Ji._Y=null;Ji._Z=null;Ji._0=xb;Ji.prototype.then=function(e,t){if(this.constructor!==Ji)return vZ(this,e,t);var r=new Ji(xb);return wb(this,new wI(e,t,r)),r};function vZ(e,t,r){return new e.constructor(function(i,o){var n=new Ji(xb);n.then(i,o),wb(e,new wI(t,r,n))})}function wb(e,t){for(;e._V===3;)e=e._W;if(Ji._Y&&Ji._Y(e),e._V===0){if(e._U===0){e._U=1,e._X=t;return}if(e._U===1){e._U=2,e._X=[e._X,t];return}e._X.push(t);return}_Z(e,t)}function _Z(e,t){fZ(function(){var r=e._V===1?t.onFulfilled:t.onRejected;if(r===null){e._V===1?bw(t.promise,e._W):Qd(t.promise,e._W);return}var i=bZ(r,e._W);i===Zd?Qd(t.promise,Jd):bw(t.promise,i)})}function bw(e,t){if(t===e)return Qd(e,new TypeError("A promise cannot be resolved with itself."));if(t&&(typeof t=="object"||typeof t=="function")){var r=gZ(t);if(r===Zd)return Qd(e,Jd);if(r===e.then&&t instanceof Ji){e._V=3,e._W=t,yw(e);return}else if(typeof r=="function"){xI(r.bind(t),e);return}}e._V=1,e._W=t,yw(e)}function Qd(e,t){e._V=2,e._W=t,Ji._Z&&Ji._Z(e,t),yw(e)}function yw(e){if(e._U===1&&(wb(e,e._X),e._X=null),e._U===2){for(var t=0;t<e._X.length;t++)wb(e,e._X[t]);e._X=null}}function wI(e,t,r){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.promise=r}function xI(e,t){var r=!1,i=yZ(e,function(o){if(r)return;r=!0,bw(t,o)},function(o){if(r)return;r=!0,Qd(t,o)});!r&&i===Zd&&(r=!0,Qd(t,Jd))}}),kI=x(_w=>{"use strict";var Sb=vw(),SI=[ReferenceError,TypeError,RangeError],xw=!1;_w.disable=CI;function CI(){xw=!1,Sb._Y=null,Sb._Z=null}_w.enable=xZ;function xZ(e){e=e||{},xw&&CI(),xw=!0;var t=0,r=0,i={};Sb._Y=function(s){s._V===2&&i[s._1]&&(i[s._1].logged?n(s._1):clearTimeout(i[s._1].timeout),delete i[s._1])},Sb._Z=function(s,a){s._U===0&&(s._1=t++,i[s._1]={displayId:null,error:a,timeout:setTimeout(o.bind(null,s._1),TI(a,SI)?100:2e3),logged:!1})};function o(s){(e.allRejections||TI(i[s].error,e.whitelist||SI))&&(i[s].displayId=r++,e.onUnhandled?(i[s].logged=!0,e.onUnhandled(i[s].displayId,i[s].error)):(i[s].logged=!0,wZ(i[s].displayId,i[s].error)))}function n(s){i[s].logged&&(e.onHandled?e.onHandled(i[s].displayId,i[s].error):i[s].onUnhandled||(console.warn("Promise Rejection Handled (id: "+i[s].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+i[s].displayId+".")))}}function wZ(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):");var r=(t&&(t.stack||t))+"";r.split(`
`).forEach(function(i){console.warn("  "+i)})}function TI(e,t){return t.some(function(r){return e instanceof r})}}),DI=x((vMe,EI)=>{"use strict";var wr=vw();EI.exports=wr;var SZ=Ac(!0),CZ=Ac(!1),TZ=Ac(null),kZ=Ac(void 0),EZ=Ac(0),DZ=Ac("");function Ac(e){var t=new wr(wr._0);return t._V=1,t._W=e,t}wr.resolve=function(e){if(e instanceof wr)return e;if(e===null)return TZ;if(e===void 0)return kZ;if(e===!0)return SZ;if(e===!1)return CZ;if(e===0)return EZ;if(e==="")return DZ;if(typeof e=="object"||typeof e=="function")try{var t=e.then;if(typeof t=="function")return new wr(t.bind(e))}catch(r){return new wr(function(i,o){o(r)})}return Ac(e)};var Cb=function(e){return typeof Array.from=="function"?(Cb=Array.from,Array.from(e)):(Cb=function(t){return Array.prototype.slice.call(t)},Array.prototype.slice.call(e))};wr.all=function(e){var t=Cb(e);return new wr(function(r,i){if(t.length===0)return r([]);var o=t.length;function n(a,l){if(l&&(typeof l=="object"||typeof l=="function"))if(l instanceof wr&&l.then===wr.prototype.then){for(;l._V===3;)l=l._W;if(l._V===1)return n(a,l._W);l._V===2&&i(l._W),l.then(function(u){n(a,u)},i);return}else{var c=l.then;if(typeof c=="function"){var d=new wr(c.bind(l));d.then(function(u){n(a,u)},i);return}}t[a]=l,--o===0&&r(t)}for(var s=0;s<t.length;s++)n(s,t[s])})};wr.reject=function(e){return new wr(function(t,r){r(e)})};wr.race=function(e){return new wr(function(t,r){Cb(e).forEach(function(i){wr.resolve(i).then(t,r)})})};wr.prototype.catch=function(e){return this.then(null,e)}}),OI=x((Tb,II)=>{(function(e,t){typeof Tb=="object"&&typeof II!="undefined"?t(Tb):typeof define=="function"&&define.amd?define(["exports"],t):t(e.WHATWGFetch={})})(Tb,function(e){"use strict";var t=typeof globalThis!="undefined"&&globalThis||typeof self!="undefined"&&self||typeof t!="undefined"&&t,r={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(D){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function i(D){return D&&DataView.prototype.isPrototypeOf(D)}if(r.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=ArrayBuffer.isView||function(D){return D&&o.indexOf(Object.prototype.toString.call(D))>-1};function s(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(D)||D==="")throw new TypeError("Invalid character in header field name");return D.toLowerCase()}function a(D){return typeof D!="string"&&(D=String(D)),D}function l(D){var B={next:function(){var Y=D.shift();return{done:Y===void 0,value:Y}}};return r.iterable&&(B[Symbol.iterator]=function(){return B}),B}function c(D){this.map={},D instanceof c?D.forEach(function(B,Y){this.append(Y,B)},this):Array.isArray(D)?D.forEach(function(B){this.append(B[0],B[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(B){this.append(B,D[B])},this)}c.prototype.append=function(D,B){D=s(D),B=a(B);var Y=this.map[D];this.map[D]=Y?Y+", "+B:B},c.prototype.delete=function(D){delete this.map[s(D)]},c.prototype.get=function(D){return D=s(D),this.has(D)?this.map[D]:null},c.prototype.has=function(D){return this.map.hasOwnProperty(s(D))},c.prototype.set=function(D,B){this.map[s(D)]=a(B)},c.prototype.forEach=function(D,B){for(var Y in this.map)this.map.hasOwnProperty(Y)&&D.call(B,this.map[Y],Y,this)},c.prototype.keys=function(){var D=[];return this.forEach(function(B,Y){D.push(Y)}),l(D)},c.prototype.values=function(){var D=[];return this.forEach(function(B){D.push(B)}),l(D)},c.prototype.entries=function(){var D=[];return this.forEach(function(B,Y){D.push([Y,B])}),l(D)},r.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);function d(D){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}function u(D){return new Promise(function(B,Y){D.onload=function(){B(D.result)},D.onerror=function(){Y(D.error)}})}function p(D){var B=new FileReader,Y=u(B);return B.readAsArrayBuffer(D),Y}function h(D){var B=new FileReader,Y=u(B);return B.readAsText(D),Y}function b(D){for(var B=new Uint8Array(D),Y=new Array(B.length),de=0;de<B.length;de++)Y[de]=String.fromCharCode(B[de]);return Y.join("")}function y(D){if(D.slice)return D.slice(0);var B=new Uint8Array(D.byteLength);return B.set(new Uint8Array(D)),B.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(D){this.bodyUsed=this.bodyUsed,this._bodyInit=D,D?typeof D=="string"?this._bodyText=D:r.blob&&Blob.prototype.isPrototypeOf(D)?this._bodyBlob=D:r.formData&&FormData.prototype.isPrototypeOf(D)?this._bodyFormData=D:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)?this._bodyText=D.toString():r.arrayBuffer&&r.blob&&i(D)?(this._bodyArrayBuffer=y(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(D)||n(D))?this._bodyArrayBuffer=y(D):this._bodyText=D=Object.prototype.toString.call(D):this._bodyText="",this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var D=d(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var D=d(this);return D||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(p)}),this.text=function(){var D=d(this);if(D)return D;if(this._bodyBlob)return h(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(b(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(F)}),this.json=function(){return this.text().then(JSON.parse)},this}var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function T(D){var B=D.toUpperCase();return w.indexOf(B)>-1?B:D}function C(D,B){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');B=B||{};var Y=B.body;if(D instanceof C){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,B.headers||(this.headers=new c(D.headers)),this.method=D.method,this.mode=D.mode,this.signal=D.signal,!Y&&D._bodyInit!=null&&(Y=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=B.credentials||this.credentials||"same-origin",(B.headers||!this.headers)&&(this.headers=new c(B.headers)),this.method=T(B.method||this.method||"GET"),this.mode=B.mode||this.mode||null,this.signal=B.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Y)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(Y),(this.method==="GET"||this.method==="HEAD")&&(B.cache==="no-store"||B.cache==="no-cache")){var de=/([?&])_=[^&]*/;if(de.test(this.url))this.url=this.url.replace(de,"$1_="+new Date().getTime());else{var he=/\?/;this.url+=(he.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})};function F(D){var B=new FormData;return D.trim().split("&").forEach(function(Y){if(Y){var de=Y.split("="),he=de.shift().replace(/\+/g," "),ue=de.join("=").replace(/\+/g," ");B.append(decodeURIComponent(he),decodeURIComponent(ue))}}),B}function k(D){var B=new c,Y=D.replace(/\r?\n[\t ]+/g," ");return Y.split(/\r?\n/).forEach(function(de){var he=de.split(":"),ue=he.shift().trim();if(ue){var ct=he.join(":").trim();B.append(ue,ct)}}),B}f.call(C.prototype);function E(D,B){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');B||(B={}),this.type="default",this.status=B.status===void 0?200:B.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in B?B.statusText:"",this.headers=new c(B.headers),this.url=B.url||"",this._initBody(D)}f.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},E.error=function(){var D=new E(null,{status:0,statusText:""});return D.type="error",D};var W=[301,302,303,307,308];E.redirect=function(D,B){if(W.indexOf(B)===-1)throw new RangeError("Invalid status code");return new E(null,{status:B,headers:{location:D}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(D){e.DOMException=function(B,Y){this.message=B,this.name=Y;var de=Error(B);this.stack=de.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function K(D,B){return new Promise(function(Y,de){var he=new C(D,B);if(he.signal&&he.signal.aborted)return de(new e.DOMException("Aborted","AbortError"));var ue=new XMLHttpRequest;function ct(){ue.abort()}ue.onload=function(){var L={status:ue.status,statusText:ue.statusText,headers:k(ue.getAllResponseHeaders()||"")};L.url="responseURL"in ue?ue.responseURL:L.headers.get("X-Request-URL");var M="response"in ue?ue.response:ue.responseText;setTimeout(function(){Y(new E(M,L))},0)},ue.onerror=function(){setTimeout(function(){de(new TypeError("Network request failed"))},0)},ue.ontimeout=function(){setTimeout(function(){de(new TypeError("Network request failed"))},0)},ue.onabort=function(){setTimeout(function(){de(new e.DOMException("Aborted","AbortError"))},0)};function H(L){try{return L===""&&t.location.href?t.location.href:L}catch(M){return L}}ue.open(he.method,H(he.url),!0),he.credentials==="include"?ue.withCredentials=!0:he.credentials==="omit"&&(ue.withCredentials=!1),"responseType"in ue&&(r.blob?ue.responseType="blob":r.arrayBuffer&&he.headers.get("Content-Type")&&he.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(ue.responseType="arraybuffer")),B&&typeof B.headers=="object"&&!(B.headers instanceof c)?Object.getOwnPropertyNames(B.headers).forEach(function(L){ue.setRequestHeader(L,a(B.headers[L]))}):he.headers.forEach(function(L,M){ue.setRequestHeader(M,L)}),he.signal&&(he.signal.addEventListener("abort",ct),ue.onreadystatechange=function(){ue.readyState===4&&he.signal.removeEventListener("abort",ct)}),ue.send(typeof he._bodyInit=="undefined"?null:he._bodyInit)})}K.polyfill=!0,t.fetch||(t.fetch=K,t.Headers=c,t.Request=C,t.Response=E),e.Headers=c,e.Request=C,e.Response=E,e.fetch=K,Object.defineProperty(e,"__esModule",{value:!0})})}),FI=x((_Me,AI)=>{"use strict";var RI=Object.getOwnPropertySymbols,IZ=Object.prototype.hasOwnProperty,OZ=Object.prototype.propertyIsEnumerable;function AZ(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function RZ(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(t).map(function(n){return t[n]});if(i.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(n){o[n]=n}),!(Object.keys(Object.assign({},o)).join("")!=="abcdefghijklmnopqrst")}catch(n){return!1}}AI.exports=RZ()?Object.assign:function(e,t){for(var r,i=AZ(e),o,n=1;n<arguments.length;n++){r=Object(arguments[n]);for(var s in r)IZ.call(r,s)&&(i[s]=r[s]);if(RI){o=RI(r);for(var a=0;a<o.length;a++)OZ.call(r,o[a])&&(i[o[a]]=r[o[a]])}}return i}}),Ne=x((xMe,PI)=>{var kb=function(e){return e&&e.Math==Math&&e};PI.exports=kb(typeof globalThis=="object"&&globalThis)||kb(typeof window=="object"&&window)||kb(typeof self=="object"&&self)||kb(typeof global=="object"&&global)||Function("return this")()}),Se=x((wMe,MI)=>{MI.exports=function(e){try{return!!e()}catch(t){return!0}}}),st=x((SMe,BI)=>{var FZ=Se();BI.exports=!FZ(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})}),Xh=x(LI=>{"use strict";var zI={}.propertyIsEnumerable,NI=Object.getOwnPropertyDescriptor,PZ=NI&&!zI.call({1:2},1);LI.f=PZ?function(t){var r=NI(this,t);return!!r&&r.enumerable}:zI}),Ys=x((TMe,UI)=>{UI.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}}),Zi=x((kMe,jI)=>{var MZ={}.toString;jI.exports=function(e){return MZ.call(e).slice(8,-1)}}),eu=x((EMe,qI)=>{var BZ=Se(),LZ=Zi(),zZ="".split;qI.exports=BZ(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return LZ(e)=="String"?zZ.call(e,""):Object(e)}:Object}),Yr=x((DMe,GI)=>{GI.exports=function(e){if(e==null)throw TypeError("Can't call method on "+e);return e}}),Di=x((IMe,WI)=>{var NZ=eu(),UZ=Yr();WI.exports=function(e){return NZ(UZ(e))}}),Qe=x((OMe,HI)=>{HI.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}}),Do=x((AMe,VI)=>{var Eb=Qe();VI.exports=function(e,t){if(!Eb(e))return e;var r,i;if(t&&typeof(r=e.toString)=="function"&&!Eb(i=r.call(e)))return i;if(typeof(r=e.valueOf)=="function"&&!Eb(i=r.call(e)))return i;if(!t&&typeof(r=e.toString)=="function"&&!Eb(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}}),Jt=x((RMe,KI)=>{var jZ={}.hasOwnProperty;KI.exports=function(e,t){return jZ.call(e,t)}}),Db=x((FMe,$I)=>{var qZ=Ne(),YI=Qe(),ww=qZ.document,GZ=YI(ww)&&YI(ww.createElement);$I.exports=function(e){return GZ?ww.createElement(e):{}}}),Sw=x((PMe,XI)=>{var WZ=st(),HZ=Se(),VZ=Db();XI.exports=!WZ&&!HZ(function(){return Object.defineProperty(VZ("div"),"a",{get:function(){return 7}}).a!=7})}),zr=x(JI=>{var KZ=st(),$Z=Xh(),YZ=Ys(),XZ=Di(),JZ=Do(),ZZ=Jt(),QZ=Sw(),ZI=Object.getOwnPropertyDescriptor;JI.f=KZ?ZI:function(t,r){if(t=XZ(t),r=JZ(r,!0),QZ)try{return ZI(t,r)}catch(i){}if(ZZ(t,r))return YZ(!$Z.f.call(t,r),t[r])}}),ot=x((BMe,QI)=>{var eQ=Qe();QI.exports=function(e){if(!eQ(e))throw TypeError(String(e)+" is not an object");return e}}),It=x(eO=>{var tQ=st(),rQ=Sw(),tO=ot(),iQ=Do(),rO=Object.defineProperty;eO.f=tQ?rO:function(t,r,i){if(tO(t),r=iQ(r,!0),tO(i),rQ)try{return rO(t,r,i)}catch(o){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(t[r]=i.value),t}}),Xr=x((zMe,iO)=>{var oQ=st(),nQ=It(),sQ=Ys();iO.exports=oQ?function(e,t,r){return nQ.f(e,t,sQ(1,r))}:function(e,t,r){return e[t]=r,e}}),Ib=x((NMe,oO)=>{var nO=Ne(),aQ=Xr();oO.exports=function(e,t){try{aQ(nO,e,t)}catch(r){nO[e]=t}return t}}),Cw=x((UMe,sO)=>{var lQ=Ne(),cQ=Ib(),aO="__core-js_shared__",dQ=lQ[aO]||cQ(aO,{});sO.exports=dQ}),Ob=x((jMe,lO)=>{var Tw=Cw(),uQ=Function.toString;typeof Tw.inspectSource!="function"&&(Tw.inspectSource=function(e){return uQ.call(e)});lO.exports=Tw.inspectSource}),kw=x((qMe,cO)=>{var pQ=Ne(),hQ=Ob(),dO=pQ.WeakMap;cO.exports=typeof dO=="function"&&/native code/.test(hQ(dO))}),Io=x((GMe,uO)=>{uO.exports=!1}),Ab=x((WMe,pO)=>{var mQ=Io(),hO=Cw();(pO.exports=function(e,t){return hO[e]||(hO[e]=t!==void 0?t:{})})("versions",[]).push({version:"3.6.5",mode:mQ?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})}),tu=x((HMe,mO)=>{var fQ=0,gQ=Math.random();mO.exports=function(e){return"Symbol("+String(e===void 0?"":e)+")_"+(++fQ+gQ).toString(36)}}),Jh=x((VMe,fO)=>{var bQ=Ab(),yQ=tu(),gO=bQ("keys");fO.exports=function(e){return gO[e]||(gO[e]=yQ(e))}}),ru=x((KMe,bO)=>{bO.exports={}}),Jr=x(($Me,yO)=>{var vQ=kw(),_Q=Ne(),xQ=Qe(),wQ=Xr(),vO=Jt(),SQ=Jh(),CQ=ru(),TQ=_Q.WeakMap,Rb,Zh,Fb,kQ=function(e){return Fb(e)?Zh(e):Rb(e,{})},EQ=function(e){return function(t){var r;if(!xQ(t)||(r=Zh(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}};if(vQ){var iu=new TQ,DQ=iu.get,IQ=iu.has,OQ=iu.set;Rb=function(e,t){return OQ.call(iu,e,t),t},Zh=function(e){return DQ.call(iu,e)||{}},Fb=function(e){return IQ.call(iu,e)}}else{var Qh=SQ("state");CQ[Qh]=!0,Rb=function(e,t){return wQ(e,Qh,t),t},Zh=function(e){return vO(e,Qh)?e[Qh]:{}},Fb=function(e){return vO(e,Qh)}}yO.exports={set:Rb,get:Zh,has:Fb,enforce:kQ,getterFor:EQ}}),Nr=x((YMe,_O)=>{var AQ=Ne(),xO=Xr(),RQ=Jt(),FQ=Ib(),PQ=Ob(),wO=Jr(),MQ=wO.get,BQ=wO.enforce,LQ=String(String).split("String");(_O.exports=function(e,t,r,i){var o=i?!!i.unsafe:!1,n=i?!!i.enumerable:!1,s=i?!!i.noTargetGet:!1;if(typeof r=="function"&&(typeof t=="string"&&!RQ(r,"name")&&xO(r,"name",t),BQ(r).source=LQ.join(typeof t=="string"?t:"")),e===AQ){n?e[t]=r:FQ(t,r);return}else o?!s&&e[t]&&(n=!0):delete e[t];n?e[t]=r:xO(e,t,r)})(Function.prototype,"toString",function(){return typeof this=="function"&&MQ(this).source||PQ(this)})}),nl=x((XMe,SO)=>{var zQ=Ne();SO.exports=zQ}),Qi=x((JMe,CO)=>{var Ew=nl(),Dw=Ne(),TO=function(e){return typeof e=="function"?e:void 0};CO.exports=function(e,t){return arguments.length<2?TO(Ew[e])||TO(Dw[e]):Ew[e]&&Ew[e][t]||Dw[e]&&Dw[e][t]}}),eo=x((ZMe,kO)=>{var NQ=Math.ceil,UQ=Math.floor;kO.exports=function(e){return isNaN(e=+e)?0:(e>0?UQ:NQ)(e)}}),gt=x((QMe,EO)=>{var jQ=eo(),qQ=Math.min;EO.exports=function(e){return e>0?qQ(jQ(e),9007199254740991):0}}),Xs=x((eBe,DO)=>{var GQ=eo(),WQ=Math.max,HQ=Math.min;DO.exports=function(e,t){var r=GQ(e);return r<0?WQ(r+t,0):HQ(r,t)}}),ou=x((tBe,IO)=>{var VQ=Di(),KQ=gt(),$Q=Xs(),OO=function(e){return function(t,r,i){var o=VQ(t),n=KQ(o.length),s=$Q(i,n),a;if(e&&r!=r){for(;n>s;)if(a=o[s++],a!=a)return!0}else for(;n>s;s++)if((e||s in o)&&o[s]===r)return e||s||0;return!e&&-1}};IO.exports={includes:OO(!0),indexOf:OO(!1)}}),Ow=x((rBe,AO)=>{var Iw=Jt(),YQ=Di(),XQ=ou().indexOf,JQ=ru();AO.exports=function(e,t){var r=YQ(e),i=0,o=[],n;for(n in r)!Iw(JQ,n)&&Iw(r,n)&&o.push(n);for(;t.length>i;)Iw(r,n=t[i++])&&(~XQ(o,n)||o.push(n));return o}}),Pb=x((iBe,RO)=>{RO.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]}),sl=x(FO=>{var ZQ=Ow(),QQ=Pb(),eee=QQ.concat("length","prototype");FO.f=Object.getOwnPropertyNames||function(t){return ZQ(t,eee)}}),Mb=x(PO=>{PO.f=Object.getOwnPropertySymbols}),Bb=x((sBe,MO)=>{var tee=Qi(),ree=sl(),iee=Mb(),oee=ot();MO.exports=tee("Reflect","ownKeys")||function(t){var r=ree.f(oee(t)),i=iee.f;return i?r.concat(i(t)):r}}),Aw=x((aBe,BO)=>{var nee=Jt(),see=Bb(),aee=zr(),lee=It();BO.exports=function(e,t){for(var r=see(t),i=lee.f,o=aee.f,n=0;n<r.length;n++){var s=r[n];nee(e,s)||i(e,s,o(t,s))}}}),nu=x((lBe,LO)=>{var cee=Se(),dee=/#|\.prototype\./,em=function(e,t){var r=pee[uee(e)];return r==mee?!0:r==hee?!1:typeof t=="function"?cee(t):!!t},uee=em.normalize=function(e){return String(e).replace(dee,".").toLowerCase()},pee=em.data={},hee=em.NATIVE="N",mee=em.POLYFILL="P";LO.exports=em}),z=x((cBe,zO)=>{var Rw=Ne(),fee=zr().f,gee=Xr(),bee=Nr(),yee=Ib(),vee=Aw(),_ee=nu();zO.exports=function(e,t){var r=e.target,i=e.global,o=e.stat,n,s,a,l,c,d;if(i?s=Rw:o?s=Rw[r]||yee(r,{}):s=(Rw[r]||{}).prototype,s)for(a in t){if(c=t[a],e.noTargetGet?(d=fee(s,a),l=d&&d.value):l=s[a],n=_ee(i?a:r+(o?".":"#")+a,e.forced),!n&&l!==void 0){if(typeof c===typeof l)continue;vee(c,l)}(e.sham||l&&l.sham)&&gee(c,"sham",!0),bee(s,a,c,e)}}}),al=x((dBe,NO)=>{var xee=Zi();NO.exports=Array.isArray||function(t){return xee(t)=="Array"}}),Wt=x((uBe,UO)=>{var wee=Yr();UO.exports=function(e){return Object(wee(e))}}),ll=x((pBe,jO)=>{"use strict";var See=Do(),Cee=It(),Tee=Ys();jO.exports=function(e,t,r){var i=See(t);i in e?Cee.f(e,i,Tee(0,r)):e[i]=r}}),Lb=x((hBe,qO)=>{var kee=Se();qO.exports=!!Object.getOwnPropertySymbols&&!kee(function(){return!String(Symbol())})}),Fw=x((mBe,GO)=>{var Eee=Lb();GO.exports=Eee&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}),ht=x((fBe,WO)=>{var Dee=Ne(),Iee=Ab(),HO=Jt(),Oee=tu(),Aee=Lb(),Ree=Fw(),zb=Iee("wks"),tm=Dee.Symbol,Fee=Ree?tm:tm&&tm.withoutSetter||Oee;WO.exports=function(e){return HO(zb,e)||(Aee&&HO(tm,e)?zb[e]=tm[e]:zb[e]=Fee("Symbol."+e)),zb[e]}}),su=x((gBe,VO)=>{var Pee=Qe(),KO=al(),Mee=ht(),Bee=Mee("species");VO.exports=function(e,t){var r;return KO(e)&&(r=e.constructor,typeof r=="function"&&(r===Array||KO(r.prototype))?r=void 0:Pee(r)&&(r=r[Bee],r===null&&(r=void 0))),new(r===void 0?Array:r)(t===0?0:t)}}),rm=x((bBe,$O)=>{var Lee=Qi();$O.exports=Lee("navigator","userAgent")||""}),Ub=x((yBe,YO)=>{var zee=Ne(),Pw=rm(),XO=zee.process,JO=XO&&XO.versions,ZO=JO&&JO.v8,Js,Nb;ZO?(Js=ZO.split("."),Nb=Js[0]+Js[1]):Pw&&(Js=Pw.match(/Edge\/(\d+)/),(!Js||Js[1]>=74)&&(Js=Pw.match(/Chrome\/(\d+)/),Js&&(Nb=Js[1])));YO.exports=Nb&&+Nb}),au=x((vBe,QO)=>{var Nee=Se(),Uee=ht(),jee=Ub(),qee=Uee("species");QO.exports=function(e){return jee>=51||!Nee(function(){var t=[],r=t.constructor={};return r[qee]=function(){return{foo:1}},t[e](Boolean).foo!==1})}}),Mw=x(()=>{"use strict";var Gee=z(),Wee=Se(),Hee=al(),Vee=Qe(),Kee=Wt(),$ee=gt(),eA=ll(),Yee=su(),Xee=au(),Jee=ht(),Zee=Ub(),tA=Jee("isConcatSpreadable"),rA=9007199254740991,iA="Maximum allowed index exceeded",Qee=Zee>=51||!Wee(function(){var e=[];return e[tA]=!1,e.concat()[0]!==e}),ete=Xee("concat"),tte=function(e){if(!Vee(e))return!1;var t=e[tA];return t!==void 0?!!t:Hee(e)},rte=!Qee||!ete;Gee({target:"Array",proto:!0,forced:rte},{concat:function(t){var r=Kee(this),i=Yee(r,0),o=0,n,s,a,l,c;for(n=-1,a=arguments.length;n<a;n++)if(c=n===-1?r:arguments[n],tte(c)){if(l=$ee(c.length),o+l>rA)throw TypeError(iA);for(s=0;s<l;s++,o++)s in c&&eA(i,o,c[s])}else{if(o>=rA)throw TypeError(iA);eA(i,o++,c)}return i.length=o,i}})}),jb=x((wBe,oA)=>{var ite=ht(),ote=ite("toStringTag"),nA={};nA[ote]="z";oA.exports=String(nA)==="[object z]"}),lu=x((SBe,sA)=>{var nte=jb(),qb=Zi(),ste=ht(),ate=ste("toStringTag"),lte=qb(function(){return arguments}())=="Arguments",cte=function(e,t){try{return e[t]}catch(r){}};sA.exports=nte?qb:function(e){var t,r,i;return e===void 0?"Undefined":e===null?"Null":typeof(r=cte(t=Object(e),ate))=="string"?r:lte?qb(t):(i=qb(t))=="Object"&&typeof t.callee=="function"?"Arguments":i}}),lA=x((CBe,aA)=>{"use strict";var dte=jb(),ute=lu();aA.exports=dte?{}.toString:function(){return"[object "+ute(this)+"]"}}),Bw=x(()=>{var pte=jb(),hte=Nr(),mte=lA();pte||hte(Object.prototype,"toString",mte,{unsafe:!0})}),cu=x((EBe,cA)=>{var fte=Ow(),gte=Pb();cA.exports=Object.keys||function(t){return fte(t,gte)}}),Gb=x((DBe,dA)=>{var bte=st(),yte=It(),vte=ot(),_te=cu();dA.exports=bte?Object.defineProperties:function(t,r){vte(t);for(var i=_te(r),o=i.length,n=0,s;o>n;)yte.f(t,s=i[n++],r[s]);return t}}),Lw=x((IBe,uA)=>{var xte=Qi();uA.exports=xte("document","documentElement")}),es=x((OBe,pA)=>{var wte=ot(),Ste=Gb(),hA=Pb(),Cte=ru(),Tte=Lw(),kte=Db(),Ete=Jh(),mA=">",fA="<",zw="prototype",Nw="script",gA=Ete("IE_PROTO"),Uw=function(){},bA=function(e){return fA+Nw+mA+e+fA+"/"+Nw+mA},Dte=function(e){e.write(bA("")),e.close();var t=e.parentWindow.Object;return e=null,t},Ite=function(){var e=kte("iframe"),t="java"+Nw+":",r;return e.style.display="none",Tte.appendChild(e),e.src=String(t),r=e.contentWindow.document,r.open(),r.write(bA("document.F=Object")),r.close(),r.F},jw,Wb=function(){try{jw=document.domain&&new ActiveXObject("htmlfile")}catch(t){}Wb=jw?Dte(jw):Ite();for(var e=hA.length;e--;)delete Wb[zw][hA[e]];return Wb()};Cte[gA]=!0;pA.exports=Object.create||function(t,r){var i;return t!==null?(Uw[zw]=wte(t),i=new Uw,Uw[zw]=null,i[gA]=t):i=Wb(),r===void 0?i:Ste(i,r)}}),qw=x((ABe,yA)=>{var Ote=Di(),vA=sl().f,Ate={}.toString,_A=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Rte=function(e){try{return vA(e)}catch(t){return _A.slice()}};yA.exports.f=function(t){return _A&&Ate.call(t)=="[object Window]"?Rte(t):vA(Ote(t))}}),Gw=x(xA=>{var Fte=ht();xA.f=Fte}),ur=x((FBe,wA)=>{var SA=nl(),Pte=Jt(),Mte=Gw(),Bte=It().f;wA.exports=function(e){var t=SA.Symbol||(SA.Symbol={});Pte(t,e)||Bte(t,e,{value:Mte.f(e)})}}),ln=x((PBe,CA)=>{var Lte=It().f,zte=Jt(),Nte=ht(),TA=Nte("toStringTag");CA.exports=function(e,t,r){e&&!zte(e=r?e:e.prototype,TA)&&Lte(e,TA,{configurable:!0,value:t})}}),li=x((MBe,kA)=>{kA.exports=function(e){if(typeof e!="function")throw TypeError(String(e)+" is not a function");return e}}),ts=x((BBe,EA)=>{var Ute=li();EA.exports=function(e,t,r){if(Ute(e),t===void 0)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(i){return e.call(t,i)};case 2:return function(i,o){return e.call(t,i,o)};case 3:return function(i,o,n){return e.call(t,i,o,n)}}return function(){return e.apply(t,arguments)}}}),Sr=x((LBe,DA)=>{var jte=ts(),qte=eu(),Gte=Wt(),Wte=gt(),Hte=su(),Vte=[].push,Rc=function(e){var t=e==1,r=e==2,i=e==3,o=e==4,n=e==6,s=e==5||n;return function(a,l,c,d){for(var u=Gte(a),p=qte(u),h=jte(l,c,3),b=Wte(p.length),y=0,f=d||Hte,w=t?f(a,b):r?f(a,0):void 0,T,C;b>y;y++)if((s||y in p)&&(T=p[y],C=h(T,y,u),e)){if(t)w[y]=C;else if(C)switch(e){case 3:return!0;case 5:return T;case 6:return y;case 2:Vte.call(w,T)}else if(o)return!1}return n?-1:i||o?o:w}};DA.exports={forEach:Rc(0),map:Rc(1),filter:Rc(2),some:Rc(3),every:Rc(4),find:Rc(5),findIndex:Rc(6)}}),nS=x(()=>{"use strict";var du=z(),IA=Ne(),Kte=Qi(),$te=Io(),uu=st(),Fc=Lb(),Yte=Fw(),Ww=Se(),pr=Jt(),Xte=al(),Jte=Qe(),Hw=ot(),Zte=Wt(),Hb=Di(),Vw=Do(),Kw=Ys(),im=es(),OA=cu(),Qte=sl(),AA=qw(),$w=Mb(),RA=zr(),FA=It(),PA=Xh(),ere=Xr(),Yw=Nr(),om=Ab(),tre=Jh(),MA=ru(),BA=tu(),LA=ht(),rre=Gw(),ire=ur(),ore=ln(),zA=Jr(),Vb=Sr().forEach,Ii=tre("hidden"),Kb="Symbol",Zs="prototype",NA=LA("toPrimitive"),nre=zA.set,UA=zA.getterFor(Kb),Oo=Object[Zs],Oi=IA.Symbol,nm=Kte("JSON","stringify"),jA=RA.f,cl=FA.f,qA=AA.f,sre=PA.f,Qs=om("symbols"),sm=om("op-symbols"),Xw=om("string-to-symbol-registry"),Jw=om("symbol-to-string-registry"),are=om("wks"),Zw=IA.QObject,Qw=!Zw||!Zw[Zs]||!Zw[Zs].findChild,eS=uu&&Ww(function(){return im(cl({},"a",{get:function(){return cl(this,"a",{value:7}).a}})).a!=7})?function(e,t,r){var i=jA(Oo,t);i&&delete Oo[t],cl(e,t,r),i&&e!==Oo&&cl(Oo,t,i)}:cl,tS=function(e,t){var r=Qs[e]=im(Oi[Zs]);return nre(r,{type:Kb,tag:e,description:t}),uu||(r.description=t),r},rS=Yte?function(e){return typeof e=="symbol"}:function(e){return Object(e)instanceof Oi},$b=function(t,r,i){t===Oo&&$b(sm,r,i),Hw(t);var o=Vw(r,!0);return Hw(i),pr(Qs,o)?(i.enumerable?(pr(t,Ii)&&t[Ii][o]&&(t[Ii][o]=!1),i=im(i,{enumerable:Kw(0,!1)})):(pr(t,Ii)||cl(t,Ii,Kw(1,{})),t[Ii][o]=!0),eS(t,o,i)):cl(t,o,i)},GA=function(t,r){Hw(t);var i=Hb(r),o=OA(i).concat(oS(i));return Vb(o,function(n){(!uu||iS.call(i,n))&&$b(t,n,i[n])}),t},lre=function(t,r){return r===void 0?im(t):GA(im(t),r)},iS=function(t){var r=Vw(t,!0),i=sre.call(this,r);return this===Oo&&pr(Qs,r)&&!pr(sm,r)?!1:i||!pr(this,r)||!pr(Qs,r)||pr(this,Ii)&&this[Ii][r]?i:!0},WA=function(t,r){var i=Hb(t),o=Vw(r,!0);if(i===Oo&&pr(Qs,o)&&!pr(sm,o))return;var n=jA(i,o);return n&&pr(Qs,o)&&!(pr(i,Ii)&&i[Ii][o])&&(n.enumerable=!0),n},HA=function(t){var r=qA(Hb(t)),i=[];return Vb(r,function(o){!pr(Qs,o)&&!pr(MA,o)&&i.push(o)}),i},oS=function(t){var r=t===Oo,i=qA(r?sm:Hb(t)),o=[];return Vb(i,function(n){pr(Qs,n)&&(!r||pr(Oo,n))&&o.push(Qs[n])}),o};Fc||(Oi=function(){if(this instanceof Oi)throw TypeError("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),r=BA(t),i=function(o){this===Oo&&i.call(sm,o),pr(this,Ii)&&pr(this[Ii],r)&&(this[Ii][r]=!1),eS(this,r,Kw(1,o))};return uu&&Qw&&eS(Oo,r,{configurable:!0,set:i}),tS(r,t)},Yw(Oi[Zs],"toString",function(){return UA(this).tag}),Yw(Oi,"withoutSetter",function(e){return tS(BA(e),e)}),PA.f=iS,FA.f=$b,RA.f=WA,Qte.f=AA.f=HA,$w.f=oS,rre.f=function(e){return tS(LA(e),e)},uu&&(cl(Oi[Zs],"description",{configurable:!0,get:function(){return UA(this).description}}),$te||Yw(Oo,"propertyIsEnumerable",iS,{unsafe:!0})));du({global:!0,wrap:!0,forced:!Fc,sham:!Fc},{Symbol:Oi});Vb(OA(are),function(e){ire(e)});du({target:Kb,stat:!0,forced:!Fc},{for:function(e){var t=String(e);if(pr(Xw,t))return Xw[t];var r=Oi(t);return Xw[t]=r,Jw[r]=t,r},keyFor:function(t){if(!rS(t))throw TypeError(t+" is not a symbol");if(pr(Jw,t))return Jw[t]},useSetter:function(){Qw=!0},useSimple:function(){Qw=!1}});du({target:"Object",stat:!0,forced:!Fc,sham:!uu},{create:lre,defineProperty:$b,defineProperties:GA,getOwnPropertyDescriptor:WA});du({target:"Object",stat:!0,forced:!Fc},{getOwnPropertyNames:HA,getOwnPropertySymbols:oS});du({target:"Object",stat:!0,forced:Ww(function(){$w.f(1)})},{getOwnPropertySymbols:function(t){return $w.f(Zte(t))}});if(nm){var cre=!Fc||Ww(function(){var e=Oi();return nm([e])!="[null]"||nm({a:e})!="{}"||nm(Object(e))!="{}"});du({target:"JSON",stat:!0,forced:cre},{stringify:function(t,r,i){for(var o=[t],n=1,s;arguments.length>n;)o.push(arguments[n++]);return s=r,!Jte(r)&&t===void 0||rS(t)?void 0:(Xte(r)||(r=function(a,l){if(typeof s=="function"&&(l=s.call(this,a,l)),!rS(l))return l}),o[1]=r,nm.apply(null,o))}})}Oi[Zs][NA]||ere(Oi[Zs],NA,Oi[Zs].valueOf);ore(Oi,Kb);MA[Ii]=!0}),sS=x(()=>{var dre=ur();dre("asyncIterator")}),lS=x(()=>{"use strict";var ure=z(),pre=st(),hre=Ne(),mre=Jt(),fre=Qe(),gre=It().f,bre=Aw(),ea=hre.Symbol;if(pre&&typeof ea=="function"&&(!("description"in ea.prototype)||ea().description!==void 0)){var VA={},am=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),r=this instanceof am?new ea(t):t===void 0?ea():ea(t);return t===""&&(VA[r]=!0),r};bre(am,ea);var aS=am.prototype=ea.prototype;aS.constructor=am;var yre=aS.toString,vre=String(ea("test"))=="Symbol(test)",_re=/^Symbol\((.*)\)[^)]+$/;gre(aS,"description",{configurable:!0,get:function(){var t=fre(this)?this.valueOf():this,r=yre.call(t);if(mre(VA,t))return"";var i=vre?r.slice(7,-1):r.replace(_re,"$1");return i===""?void 0:i}}),ure({global:!0,forced:!0},{Symbol:am})}}),cS=x(()=>{var xre=ur();xre("hasInstance")}),dS=x(()=>{var wre=ur();wre("isConcatSpreadable")}),uS=x(()=>{var Sre=ur();Sre("iterator")}),pS=x(()=>{var Cre=ur();Cre("match")}),hS=x(()=>{var Tre=ur();Tre("matchAll")}),mS=x(()=>{var kre=ur();kre("replace")}),fS=x(()=>{var Ere=ur();Ere("search")}),gS=x(()=>{var Dre=ur();Dre("species")}),bS=x(()=>{var Ire=ur();Ire("split")}),yS=x(()=>{var Ore=ur();Ore("toPrimitive")}),vS=x(()=>{var Are=ur();Are("toStringTag")}),_S=x(()=>{var Rre=ur();Rre("unscopables")}),xS=x(()=>{var Fre=ln();Fre(Math,"Math",!0)}),wS=x(()=>{var Pre=Ne(),Mre=ln();Mre(Pre.JSON,"JSON",!0)}),$A=x((yLe,KA)=>{Mw();Bw();nS();sS();lS();cS();dS();uS();pS();hS();mS();fS();gS();bS();yS();vS();_S();xS();wS();var Bre=nl();KA.exports=Bre.Symbol}),YA=x(()=>{var Lre=ur();Lre("asyncDispose")}),XA=x(()=>{var zre=ur();zre("dispose")}),JA=x(()=>{var Nre=ur();Nre("observable")}),ZA=x(()=>{var Ure=ur();Ure("patternMatch")}),QA=x(()=>{var jre=ur();jre("replaceAll")}),tR=x((ILe,eR)=>{var qre=$A();YA();XA();JA();ZA();QA();eR.exports=qre}),lm=x((OLe,rR)=>{var Gre=eo(),Wre=Yr(),iR=function(e){return function(t,r){var i=String(Wre(t)),o=Gre(r),n=i.length,s,a;return o<0||o>=n?e?"":void 0:(s=i.charCodeAt(o),s<55296||s>56319||o+1===n||(a=i.charCodeAt(o+1))<56320||a>57343?e?i.charAt(o):s:e?i.slice(o,o+2):(s-55296<<10)+(a-56320)+65536)}};rR.exports={codeAt:iR(!1),charAt:iR(!0)}}),Yb=x((ALe,oR)=>{var Hre=Se();oR.exports=!Hre(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})}),Ao=x((RLe,nR)=>{var Vre=Jt(),Kre=Wt(),$re=Jh(),Yre=Yb(),sR=$re("IE_PROTO"),Xre=Object.prototype;nR.exports=Yre?Object.getPrototypeOf:function(e){return e=Kre(e),Vre(e,sR)?e[sR]:typeof e.constructor=="function"&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Xre:null}}),TS=x((FLe,aR)=>{"use strict";var lR=Ao(),Jre=Xr(),Zre=Jt(),Qre=ht(),eie=Io(),cR=Qre("iterator"),dR=!1,tie=function(){return this},pu,SS,CS;[].keys&&(CS=[].keys(),"next"in CS?(SS=lR(lR(CS)),SS!==Object.prototype&&(pu=SS)):dR=!0);pu==null&&(pu={});!eie&&!Zre(pu,cR)&&Jre(pu,cR,tie);aR.exports={IteratorPrototype:pu,BUGGY_SAFARI_ITERATORS:dR}}),hu=x((PLe,uR)=>{uR.exports={}}),Xb=x((MLe,pR)=>{"use strict";var rie=TS().IteratorPrototype,iie=es(),oie=Ys(),nie=ln(),sie=hu(),aie=function(){return this};pR.exports=function(e,t,r){var i=t+" Iterator";return e.prototype=iie(rie,{next:oie(1,r)}),nie(e,i,!1,!0),sie[i]=aie,e}}),kS=x((BLe,hR)=>{var lie=Qe();hR.exports=function(e){if(!lie(e)&&e!==null)throw TypeError("Can't set "+String(e)+" as a prototype");return e}}),dl=x((LLe,mR)=>{var cie=ot(),die=kS();mR.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},r;try{r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,r.call(t,[]),e=t instanceof Array}catch(i){}return function(o,n){return cie(o),die(n),e?r.call(o,n):o.__proto__=n,o}}():void 0)}),Qb=x((zLe,fR)=>{"use strict";var uie=z(),pie=Xb(),gR=Ao(),bR=dl(),hie=ln(),yR=Xr(),mie=Nr(),fie=ht(),ES=Io(),vR=hu(),_R=TS(),DS=_R.IteratorPrototype,Jb=_R.BUGGY_SAFARI_ITERATORS,cm=fie("iterator"),xR="keys",Zb="values",wR="entries",SR=function(){return this};fR.exports=function(e,t,r,i,o,n,s){pie(r,t,i);var a=function(w){if(w===o&&p)return p;if(!Jb&&w in d)return d[w];switch(w){case xR:return function(){return new r(this,w)};case Zb:return function(){return new r(this,w)};case wR:return function(){return new r(this,w)}}return function(){return new r(this)}},l=t+" Iterator",c=!1,d=e.prototype,u=d[cm]||d["@@iterator"]||o&&d[o],p=!Jb&&u||a(o),h=t=="Array"&&d.entries||u,b,y,f;if(h&&(b=gR(h.call(new e)),DS!==Object.prototype&&b.next&&(!ES&&gR(b)!==DS&&(bR?bR(b,DS):typeof b[cm]!="function"&&yR(b,cm,SR)),hie(b,l,!0,!0),ES&&(vR[l]=SR))),o==Zb&&u&&u.name!==Zb&&(c=!0,p=function(){return u.call(this)}),(!ES||s)&&d[cm]!==p&&yR(d,cm,p),vR[t]=p,o)if(y={values:a(Zb),keys:n?p:a(xR),entries:a(wR)},s)for(f in y)(Jb||c||!(f in d))&&mie(d,f,y[f]);else uie({target:t,proto:!0,forced:Jb||c},y);return y}}),ey=x(()=>{"use strict";var gie=lm().charAt,CR=Jr(),bie=Qb(),TR="String Iterator",yie=CR.set,vie=CR.getterFor(TR);bie(String,"String",function(e){yie(this,{type:TR,string:String(e),index:0})},function(){var t=vie(this),r=t.string,i=t.index,o;return i>=r.length?{value:void 0,done:!0}:(o=gie(r,i),t.index+=o.length,{value:o,done:!1})})}),IS=x((jLe,kR)=>{var ER=ot();kR.exports=function(e,t,r,i){try{return i?t(ER(r)[0],r[1]):t(r)}catch(n){var o=e.return;throw o!==void 0&&ER(o.call(e)),n}}}),ty=x((qLe,DR)=>{var _ie=ht(),xie=hu(),wie=_ie("iterator"),Sie=Array.prototype;DR.exports=function(e){return e!==void 0&&(xie.Array===e||Sie[wie]===e)}}),mu=x((GLe,IR)=>{var Cie=lu(),Tie=hu(),kie=ht(),Eie=kie("iterator");IR.exports=function(e){if(e!=null)return e[Eie]||e["@@iterator"]||Tie[Cie(e)]}}),OS=x((WLe,OR)=>{"use strict";var Die=ts(),Iie=Wt(),Oie=IS(),Aie=ty(),Rie=gt(),AR=ll(),Fie=mu();OR.exports=function(t){var r=Iie(t),i=typeof this=="function"?this:Array,o=arguments.length,n=o>1?arguments[1]:void 0,s=n!==void 0,a=Fie(r),l=0,c,d,u,p,h,b;if(s&&(n=Die(n,o>2?arguments[2]:void 0,2)),a!=null&&!(i==Array&&Aie(a)))for(p=a.call(r),h=p.next,d=new i;!(u=h.call(p)).done;l++)b=s?Oie(p,n,[u.value,l],!0):u.value,AR(d,l,b);else for(c=Rie(r.length),d=new i(c);c>l;l++)b=s?n(r[l],l):r[l],AR(d,l,b);return d.length=l,d}}),dm=x((HLe,RR)=>{var Pie=ht(),FR=Pie("iterator"),PR=!1;try{var Mie=0,MR={next:function(){return{done:!!Mie++}},return:function(){PR=!0}};MR[FR]=function(){return this},Array.from(MR,function(){throw 2})}catch(e){}RR.exports=function(e,t){if(!t&&!PR)return!1;var r=!1;try{var i={};i[FR]=function(){return{next:function(){return{done:r=!0}}}},e(i)}catch(o){}return r}}),AS=x(()=>{var Bie=z(),Lie=OS(),zie=dm(),Nie=!zie(function(e){Array.from(e)});Bie({target:"Array",stat:!0,forced:Nie},{from:Lie})}),LR=x(($Le,BR)=>{ey();AS();var Uie=nl();BR.exports=Uie.Array.from}),NR=x((YLe,zR)=>{var jie=LR();zR.exports=jie}),FS=x((XLe,UR)=>{"use strict";var jR=st(),qie=Se(),RS=cu(),Gie=Mb(),Wie=Xh(),Hie=Wt(),Vie=eu(),fu=Object.assign,qR=Object.defineProperty;UR.exports=!fu||qie(function(){if(jR&&fu({b:1},fu(qR({},"a",{enumerable:!0,get:function(){qR(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},r=Symbol(),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach(function(o){t[o]=o}),fu({},e)[r]!=7||RS(fu({},t)).join("")!=i})?function(t,r){for(var i=Hie(t),o=arguments.length,n=1,s=Gie.f,a=Wie.f;o>n;)for(var l=Vie(arguments[n++]),c=s?RS(l).concat(s(l)):RS(l),d=c.length,u=0,p;d>u;)p=c[u++],(!jR||a.call(l,p))&&(i[p]=l[p]);return i}:fu}),WR=x(()=>{var Kie=z(),GR=FS();Kie({target:"Object",stat:!0,forced:Object.assign!==GR},{assign:GR})}),HR=x(()=>{var $ie=z(),Yie=st(),Xie=es();$ie({target:"Object",stat:!0,sham:!Yie},{create:Xie})}),KR=x(()=>{var Jie=z(),VR=st(),Zie=It();Jie({target:"Object",stat:!0,forced:!VR,sham:!VR},{defineProperty:Zie.f})}),YR=x(()=>{var Qie=z(),$R=st(),eoe=Gb();Qie({target:"Object",stat:!0,forced:!$R,sham:!$R},{defineProperties:eoe})}),PS=x((n5e,XR)=>{var toe=st(),roe=cu(),ioe=Di(),ooe=Xh().f,JR=function(e){return function(t){for(var r=ioe(t),i=roe(r),o=i.length,n=0,s=[],a;o>n;)a=i[n++],(!toe||ooe.call(r,a))&&s.push(e?[a,r[a]]:r[a]);return s}};XR.exports={entries:JR(!0),values:JR(!1)}}),ZR=x(()=>{var noe=z(),soe=PS().entries;noe({target:"Object",stat:!0},{entries:function(t){return soe(t)}})}),gu=x((l5e,QR)=>{var aoe=Se();QR.exports=!aoe(function(){return Object.isExtensible(Object.preventExtensions({}))})}),ul=x((c5e,eF)=>{var loe=ru(),coe=Qe(),MS=Jt(),doe=It().f,uoe=tu(),poe=gu(),Pc=uoe("meta"),hoe=0,BS=Object.isExtensible||function(){return!0},LS=function(e){doe(e,Pc,{value:{objectID:"O"+ ++hoe,weakData:{}}})},moe=function(e,t){if(!coe(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!MS(e,Pc)){if(!BS(e))return"F";if(!t)return"E";LS(e)}return e[Pc].objectID},foe=function(e,t){if(!MS(e,Pc)){if(!BS(e))return!0;if(!t)return!1;LS(e)}return e[Pc].weakData},boe=function(e){return poe&&goe.REQUIRED&&BS(e)&&!MS(e,Pc)&&LS(e),e},goe=eF.exports={REQUIRED:!1,fastKey:moe,getWeakData:foe,onFreeze:boe};loe[Pc]=!0}),tF=x(()=>{var yoe=z(),voe=gu(),_oe=Se(),xoe=Qe(),woe=ul().onFreeze,zS=Object.freeze,Soe=_oe(function(){zS(1)});yoe({target:"Object",stat:!0,forced:Soe,sham:!voe},{freeze:function(t){return zS&&xoe(t)?zS(woe(t)):t}})}),Mc=x((p5e,rF)=>{var Coe=ot(),Toe=ty(),koe=gt(),Eoe=ts(),Doe=mu(),Ioe=IS(),um=function(e,t){this.stopped=e,this.result=t},Ooe=rF.exports=function(e,t,r,i,o){var n=Eoe(t,r,i?2:1),s,a,l,c,d,u,p;if(o)s=e;else{if(a=Doe(e),typeof a!="function")throw TypeError("Target is not iterable");if(Toe(a)){for(l=0,c=koe(e.length);c>l;l++)if(d=i?n(Coe(p=e[l])[0],p[1]):n(e[l]),d&&d instanceof um)return d;return new um(!1)}s=a.call(e)}for(u=s.next;!(p=u.call(s)).done;)if(d=Ioe(s,n,p.value,i),typeof d=="object"&&d&&d instanceof um)return d;return new um(!1)};Ooe.stop=function(e){return new um(!0,e)}}),iF=x(()=>{var Aoe=z(),Roe=Mc(),Foe=ll();Aoe({target:"Object",stat:!0},{fromEntries:function(t){var r={};return Roe(t,function(i,o){Foe(r,i,o)},void 0,!0),r}})}),sF=x(()=>{var Poe=z(),Moe=Se(),Boe=Di(),oF=zr().f,nF=st(),Loe=Moe(function(){oF(1)}),zoe=!nF||Loe;Poe({target:"Object",stat:!0,forced:zoe,sham:!nF},{getOwnPropertyDescriptor:function(t,r){return oF(Boe(t),r)}})}),aF=x(()=>{var Noe=z(),Uoe=st(),joe=Bb(),qoe=Di(),Goe=zr(),Woe=ll();Noe({target:"Object",stat:!0,sham:!Uoe},{getOwnPropertyDescriptors:function(t){for(var r=qoe(t),i=Goe.f,o=joe(r),n={},s=0,a,l;o.length>s;)l=i(r,a=o[s++]),l!==void 0&&Woe(n,a,l);return n}})}),lF=x(()=>{var Hoe=z(),Voe=Se(),Koe=qw().f,$oe=Voe(function(){return!Object.getOwnPropertyNames(1)});Hoe({target:"Object",stat:!0,forced:$oe},{getOwnPropertyNames:Koe})}),dF=x(()=>{var Yoe=z(),Xoe=Se(),Joe=Wt(),cF=Ao(),Zoe=Yb(),Qoe=Xoe(function(){cF(1)});Yoe({target:"Object",stat:!0,forced:Qoe,sham:!Zoe},{getPrototypeOf:function(t){return cF(Joe(t))}})}),NS=x((S5e,uF)=>{uF.exports=Object.is||function(t,r){return t===r?t!==0||1/t===1/r:t!=t&&r!=r}}),pF=x(()=>{var ene=z(),tne=NS();ene({target:"Object",stat:!0},{is:tne})}),hF=x(()=>{var rne=z(),ine=Se(),one=Qe(),US=Object.isExtensible,nne=ine(function(){US(1)});rne({target:"Object",stat:!0,forced:nne},{isExtensible:function(t){return one(t)?US?US(t):!0:!1}})}),mF=x(()=>{var sne=z(),ane=Se(),lne=Qe(),jS=Object.isFrozen,cne=ane(function(){jS(1)});sne({target:"Object",stat:!0,forced:cne},{isFrozen:function(t){return lne(t)?jS?jS(t):!1:!0}})}),fF=x(()=>{var dne=z(),une=Se(),pne=Qe(),qS=Object.isSealed,hne=une(function(){qS(1)});dne({target:"Object",stat:!0,forced:hne},{isSealed:function(t){return pne(t)?qS?qS(t):!1:!0}})}),bF=x(()=>{var mne=z(),fne=Wt(),gF=cu(),gne=Se(),bne=gne(function(){gF(1)});mne({target:"Object",stat:!0,forced:bne},{keys:function(t){return gF(fne(t))}})}),yF=x(()=>{var yne=z(),vne=Qe(),_ne=ul().onFreeze,xne=gu(),wne=Se(),GS=Object.preventExtensions,Sne=wne(function(){GS(1)});yne({target:"Object",stat:!0,forced:Sne,sham:!xne},{preventExtensions:function(t){return GS&&vne(t)?GS(_ne(t)):t}})}),vF=x(()=>{var Cne=z(),Tne=Qe(),kne=ul().onFreeze,Ene=gu(),Dne=Se(),WS=Object.seal,Ine=Dne(function(){WS(1)});Cne({target:"Object",stat:!0,forced:Ine,sham:!Ene},{seal:function(t){return WS&&Tne(t)?WS(kne(t)):t}})}),_F=x(()=>{var One=z(),Ane=dl();One({target:"Object",stat:!0},{setPrototypeOf:Ane})}),xF=x(()=>{var Rne=z(),Fne=PS().values;Rne({target:"Object",stat:!0},{values:function(t){return Fne(t)}})}),pm=x((q5e,wF)=>{"use strict";var Pne=Io(),Mne=Ne(),Bne=Se();wF.exports=Pne||!Bne(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete Mne[e]})}),SF=x(()=>{"use strict";var Lne=z(),zne=st(),Nne=pm(),Une=Wt(),jne=li(),qne=It();zne&&Lne({target:"Object",proto:!0,forced:Nne},{__defineGetter__:function(t,r){qne.f(Une(this),t,{get:jne(r),enumerable:!0,configurable:!0})}})}),CF=x(()=>{"use strict";var Gne=z(),Wne=st(),Hne=pm(),Vne=Wt(),Kne=li(),$ne=It();Wne&&Gne({target:"Object",proto:!0,forced:Hne},{__defineSetter__:function(t,r){$ne.f(Vne(this),t,{set:Kne(r),enumerable:!0,configurable:!0})}})}),TF=x(()=>{"use strict";var Yne=z(),Xne=st(),Jne=pm(),Zne=Wt(),Qne=Do(),ese=Ao(),tse=zr().f;Xne&&Yne({target:"Object",proto:!0,forced:Jne},{__lookupGetter__:function(t){var r=Zne(this),i=Qne(t,!0),o;do if(o=tse(r,i))return o.get;while(r=ese(r))}})}),kF=x(()=>{"use strict";var rse=z(),ise=st(),ose=pm(),nse=Wt(),sse=Do(),ase=Ao(),lse=zr().f;ise&&rse({target:"Object",proto:!0,forced:ose},{__lookupSetter__:function(t){var r=nse(this),i=sse(t,!0),o;do if(o=lse(r,i))return o.set;while(r=ase(r))}})}),VS=x((J5e,EF)=>{"use strict";var cse=li(),dse=Qe(),DF=[].slice,HS={},use=function(e,t,r){if(!(t in HS)){for(var i=[],o=0;o<t;o++)i[o]="a["+o+"]";HS[t]=Function("C,a","return new C("+i.join(",")+")")}return HS[t](e,r)};EF.exports=Function.bind||function(t){var r=cse(this),i=DF.call(arguments,1),o=function(){var s=i.concat(DF.call(arguments));return this instanceof o?use(r,s.length,s):r.apply(t,s)};return dse(r.prototype)&&(o.prototype=r.prototype),o}}),IF=x(()=>{var pse=z(),hse=VS();pse({target:"Function",proto:!0},{bind:hse})}),AF=x(()=>{var mse=st(),fse=It().f,KS=Function.prototype,gse=KS.toString,bse=/^\s*function ([^ (]*)/,OF="name";mse&&!(OF in KS)&&fse(KS,OF,{configurable:!0,get:function(){try{return gse.call(this).match(bse)[1]}catch(e){return""}}})}),MF=x(()=>{"use strict";var RF=Qe(),yse=It(),vse=Ao(),_se=ht(),FF=_se("hasInstance"),PF=Function.prototype;FF in PF||yse.f(PF,FF,{value:function(e){if(typeof this!="function"||!RF(e))return!1;if(!RF(this.prototype))return e instanceof this;for(;e=vse(e);)if(this.prototype===e)return!0;return!1}})}),BF=x(()=>{var xse=z(),wse=Ne();xse({global:!0},{globalThis:wse})}),LF=x(()=>{var Sse=z(),Cse=al();Sse({target:"Array",stat:!0},{isArray:Cse})}),zF=x(()=>{"use strict";var Tse=z(),kse=Se(),Ese=ll(),Dse=kse(function(){function e(){}return!(Array.of.call(e)instanceof e)});Tse({target:"Array",stat:!0,forced:Dse},{of:function(){for(var t=0,r=arguments.length,i=new(typeof this=="function"?this:Array)(r);r>t;)Ese(i,t,arguments[t++]);return i.length=r,i}})}),YS=x((d3e,NF)=>{"use strict";var Ise=Wt(),$S=Xs(),Ose=gt(),Ase=Math.min;NF.exports=[].copyWithin||function(t,r){var i=Ise(this),o=Ose(i.length),n=$S(t,o),s=$S(r,o),a=arguments.length>2?arguments[2]:void 0,l=Ase((a===void 0?o:$S(a,o))-s,o-n),c=1;for(s<n&&n<s+l&&(c=-1,s+=l-1,n+=l-1);l-- >0;)s in i?i[n]=i[s]:delete i[n],n+=c,s+=c;return i}}),ta=x((u3e,UF)=>{var Rse=ht(),Fse=es(),Pse=It(),XS=Rse("unscopables"),JS=Array.prototype;JS[XS]==null&&Pse.f(JS,XS,{configurable:!0,value:Fse(null)});UF.exports=function(e){JS[XS][e]=!0}}),jF=x(()=>{var Mse=z(),Bse=YS(),Lse=ta();Mse({target:"Array",proto:!0},{copyWithin:Bse});Lse("copyWithin")}),rs=x((m3e,qF)=>{"use strict";var zse=Se();qF.exports=function(e,t){var r=[][e];return!!r&&zse(function(){r.call(null,t||function(){throw 1},1)})}}),ci=x((f3e,GF)=>{var Nse=st(),Use=Se(),ry=Jt(),jse=Object.defineProperty,ZS={},WF=function(e){throw e};GF.exports=function(e,t){if(ry(ZS,e))return ZS[e];t||(t={});var r=[][e],i=ry(t,"ACCESSORS")?t.ACCESSORS:!1,o=ry(t,0)?t[0]:WF,n=ry(t,1)?t[1]:void 0;return ZS[e]=!!r&&!Use(function(){if(i&&!Nse)return!0;var s={length:-1};i?jse(s,1,{enumerable:!0,get:WF}):s[1]=1,r.call(s,o,n)})}}),HF=x(()=>{"use strict";var qse=z(),Gse=Sr().every,Wse=rs(),Hse=ci(),Vse=Wse("every"),Kse=Hse("every");qse({target:"Array",proto:!0,forced:!Vse||!Kse},{every:function(t){return Gse(this,t,arguments.length>1?arguments[1]:void 0)}})}),iy=x((y3e,VF)=>{"use strict";var $se=Wt(),KF=Xs(),Yse=gt();VF.exports=function(t){for(var r=$se(this),i=Yse(r.length),o=arguments.length,n=KF(o>1?arguments[1]:void 0,i),s=o>2?arguments[2]:void 0,a=s===void 0?i:KF(s,i);a>n;)r[n++]=t;return r}}),$F=x(()=>{var Xse=z(),Jse=iy(),Zse=ta();Xse({target:"Array",proto:!0},{fill:Jse});Zse("fill")}),YF=x(()=>{"use strict";var Qse=z(),eae=Sr().filter,tae=au(),rae=ci(),iae=tae("filter"),oae=rae("filter");Qse({target:"Array",proto:!0,forced:!iae||!oae},{filter:function(t){return eae(this,t,arguments.length>1?arguments[1]:void 0)}})}),QS=x(()=>{"use strict";var nae=z(),sae=Sr().find,aae=ta(),lae=ci(),oy="find",XF=!0,cae=lae(oy);oy in[]&&Array(1)[oy](function(){XF=!1});nae({target:"Array",proto:!0,forced:XF||!cae},{find:function(t){return sae(this,t,arguments.length>1?arguments[1]:void 0)}});aae(oy)}),ZF=x(()=>{"use strict";var dae=z(),uae=Sr().findIndex,pae=ta(),hae=ci(),ny="findIndex",JF=!0,mae=hae(ny);ny in[]&&Array(1)[ny](function(){JF=!1});dae({target:"Array",proto:!0,forced:JF||!mae},{findIndex:function(t){return uae(this,t,arguments.length>1?arguments[1]:void 0)}});pae(ny)}),eC=x((E3e,QF)=>{"use strict";var fae=al(),gae=gt(),bae=ts(),eP=function(e,t,r,i,o,n,s,a){for(var l=o,c=0,d=s?bae(s,a,3):!1,u;c<i;){if(c in r){if(u=d?d(r[c],c,t):r[c],n>0&&fae(u))l=eP(e,t,u,gae(u.length),l,n-1)-1;else{if(l>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[l]=u}l++}c++}return l};QF.exports=eP}),tP=x(()=>{"use strict";var yae=z(),vae=eC(),_ae=Wt(),xae=gt(),wae=eo(),Sae=su();yae({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,r=_ae(this),i=xae(r.length),o=Sae(r,0);return o.length=vae(o,r,r,i,0,t===void 0?1:wae(t)),o}})}),rP=x(()=>{"use strict";var Cae=z(),Tae=eC(),kae=Wt(),Eae=gt(),Dae=li(),Iae=su();Cae({target:"Array",proto:!0},{flatMap:function(t){var r=kae(this),i=Eae(r.length),o;return Dae(t),o=Iae(r,0),o.length=Tae(o,r,r,i,0,1,t,arguments.length>1?arguments[1]:void 0),o}})}),tC=x((R3e,iP)=>{"use strict";var Oae=Sr().forEach,Aae=rs(),Rae=ci(),Fae=Aae("forEach"),Pae=Rae("forEach");iP.exports=!Fae||!Pae?function(t){return Oae(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach}),nP=x(()=>{"use strict";var Mae=z(),oP=tC();Mae({target:"Array",proto:!0,forced:[].forEach!=oP},{forEach:oP})}),sP=x(()=>{"use strict";var Bae=z(),Lae=ou().includes,zae=ta(),Nae=ci(),Uae=Nae("indexOf",{ACCESSORS:!0,1:0});Bae({target:"Array",proto:!0,forced:!Uae},{includes:function(t){return Lae(this,t,arguments.length>1?arguments[1]:void 0)}});zae("includes")}),cP=x(()=>{"use strict";var jae=z(),qae=ou().indexOf,Gae=rs(),Wae=ci(),aP=[].indexOf,lP=!!aP&&1/[1].indexOf(1,-0)<0,Hae=Gae("indexOf"),Vae=Wae("indexOf",{ACCESSORS:!0,1:0});jae({target:"Array",proto:!0,forced:lP||!Hae||!Vae},{indexOf:function(t){return lP?aP.apply(this,arguments)||0:qae(this,t,arguments.length>1?arguments[1]:void 0)}})}),dP=x(()=>{"use strict";var Kae=z(),$ae=eu(),Yae=Di(),Xae=rs(),Jae=[].join,Zae=$ae!=Object,Qae=Xae("join",",");Kae({target:"Array",proto:!0,forced:Zae||!Qae},{join:function(t){return Jae.call(Yae(this),t===void 0?",":t)}})}),iC=x((j3e,uP)=>{"use strict";var ele=Di(),tle=eo(),rle=gt(),ile=rs(),ole=ci(),nle=Math.min,rC=[].lastIndexOf,pP=!!rC&&1/[1].lastIndexOf(1,-0)<0,sle=ile("lastIndexOf"),ale=ole("indexOf",{ACCESSORS:!0,1:0}),lle=pP||!sle||!ale;uP.exports=lle?function(t){if(pP)return rC.apply(this,arguments)||0;var r=ele(this),i=rle(r.length),o=i-1;for(arguments.length>1&&(o=nle(o,tle(arguments[1]))),o<0&&(o=i+o);o>=0;o--)if(o in r&&r[o]===t)return o||0;return-1}:rC}),mP=x(()=>{var cle=z(),hP=iC();cle({target:"Array",proto:!0,forced:hP!==[].lastIndexOf},{lastIndexOf:hP})}),oC=x(()=>{"use strict";var dle=z(),ule=Sr().map,ple=au(),hle=ci(),mle=ple("map"),fle=hle("map");dle({target:"Array",proto:!0,forced:!mle||!fle},{map:function(t){return ule(this,t,arguments.length>1?arguments[1]:void 0)}})}),hm=x((V3e,fP)=>{var gle=li(),ble=Wt(),yle=eu(),vle=gt(),gP=function(e){return function(t,r,i,o){gle(r);var n=ble(t),s=yle(n),a=vle(n.length),l=e?a-1:0,c=e?-1:1;if(i<2)for(;;){if(l in s){o=s[l],l+=c;break}if(l+=c,e?l<0:a<=l)throw TypeError("Reduce of empty array with no initial value")}for(;e?l>=0:a>l;l+=c)l in s&&(o=r(o,s[l],l,n));return o}};fP.exports={left:gP(!1),right:gP(!0)}}),bP=x(()=>{"use strict";var _le=z(),xle=hm().left,wle=rs(),Sle=ci(),Cle=wle("reduce"),Tle=Sle("reduce",{1:0});_le({target:"Array",proto:!0,forced:!Cle||!Tle},{reduce:function(t){return xle(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})}),yP=x(()=>{"use strict";var kle=z(),Ele=hm().right,Dle=rs(),Ile=ci(),Ole=Dle("reduceRight"),Ale=Ile("reduce",{1:0});kle({target:"Array",proto:!0,forced:!Ole||!Ale},{reduceRight:function(t){return Ele(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})}),_P=x(()=>{"use strict";var Rle=z(),Fle=al(),Ple=[].reverse,vP=[1,2];Rle({target:"Array",proto:!0,forced:String(vP)===String(vP.reverse())},{reverse:function(){return Fle(this)&&(this.length=this.length),Ple.call(this)}})}),SP=x(()=>{"use strict";var Mle=z(),Ble=Qe(),xP=al(),wP=Xs(),Lle=gt(),zle=Di(),Nle=ll(),Ule=ht(),jle=au(),qle=ci(),Gle=jle("slice"),Wle=qle("slice",{ACCESSORS:!0,0:0,1:2}),Hle=Ule("species"),Vle=[].slice,Kle=Math.max;Mle({target:"Array",proto:!0,forced:!Gle||!Wle},{slice:function(t,r){var i=zle(this),o=Lle(i.length),n=wP(t,o),s=wP(r===void 0?o:r,o),a,l,c;if(xP(i)&&(a=i.constructor,typeof a=="function"&&(a===Array||xP(a.prototype))?a=void 0:Ble(a)&&(a=a[Hle],a===null&&(a=void 0)),a===Array||a===void 0))return Vle.call(i,n,s);for(l=new(a===void 0?Array:a)(Kle(s-n,0)),c=0;n<s;n++,c++)n in i&&Nle(l,c,i[n]);return l.length=c,l}})}),CP=x(()=>{"use strict";var $le=z(),Yle=Sr().some,Xle=rs(),Jle=ci(),Zle=Xle("some"),Qle=Jle("some");$le({target:"Array",proto:!0,forced:!Zle||!Qle},{some:function(t){return Yle(this,t,arguments.length>1?arguments[1]:void 0)}})}),DP=x(()=>{"use strict";var ece=z(),tce=li(),TP=Wt(),kP=Se(),rce=rs(),nC=[],EP=nC.sort,ice=kP(function(){nC.sort(void 0)}),oce=kP(function(){nC.sort(null)}),nce=rce("sort"),sce=ice||!oce||!nce;ece({target:"Array",proto:!0,forced:sce},{sort:function(t){return t===void 0?EP.call(TP(this)):EP.call(TP(this),tce(t))}})}),IP=x(()=>{"use strict";var ace=z(),lce=Xs(),cce=eo(),dce=gt(),uce=Wt(),pce=su(),hce=ll(),mce=au(),fce=ci(),gce=mce("splice"),bce=fce("splice",{ACCESSORS:!0,0:0,1:2}),yce=Math.max,vce=Math.min,_ce=9007199254740991,xce="Maximum allowed length exceeded";ace({target:"Array",proto:!0,forced:!gce||!bce},{splice:function(t,r){var i=uce(this),o=dce(i.length),n=lce(t,o),s=arguments.length,a,l,c,d,u,p;if(s===0?a=l=0:s===1?(a=0,l=o-n):(a=s-2,l=vce(yce(cce(r),0),o-n)),o+a-l>_ce)throw TypeError(xce);for(c=pce(i,l),d=0;d<l;d++)u=n+d,u in i&&hce(c,d,i[u]);if(c.length=l,a<l){for(d=n;d<o-l;d++)u=d+l,p=d+a,u in i?i[p]=i[u]:delete i[p];for(d=o;d>o-l+a;d--)delete i[d-1]}else if(a>l)for(d=o-l;d>n;d--)u=d+l-1,p=d+a-1,u in i?i[p]=i[u]:delete i[p];for(d=0;d<a;d++)i[d+n]=arguments[d+2];return i.length=o-l+a,c}})}),Bc=x((aze,OP)=>{"use strict";var wce=Qi(),Sce=It(),Cce=ht(),Tce=st(),AP=Cce("species");OP.exports=function(e){var t=wce(e),r=Sce.f;Tce&&t&&!t[AP]&&r(t,AP,{configurable:!0,get:function(){return this}})}}),RP=x(()=>{var kce=Bc();kce("Array")}),FP=x(()=>{var Ece=ta();Ece("flat")}),PP=x(()=>{var Dce=ta();Dce("flatMap")}),mm=x((mze,MP)=>{"use strict";var Ice=Di(),sC=ta(),BP=hu(),LP=Jr(),Oce=Qb(),zP="Array Iterator",Ace=LP.set,Rce=LP.getterFor(zP);MP.exports=Oce(Array,"Array",function(e,t){Ace(this,{type:zP,target:Ice(e),index:0,kind:t})},function(){var e=Rce(this),t=e.target,r=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):r=="keys"?{value:i,done:!1}:r=="values"?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}},"values");BP.Arguments=BP.Array;sC("keys");sC("values");sC("entries")}),jP=x(()=>{var Fce=z(),Pce=Xs(),NP=String.fromCharCode,UP=String.fromCodePoint,Mce=!!UP&&UP.length!=1;Fce({target:"String",stat:!0,forced:Mce},{fromCodePoint:function(t){for(var r=[],i=arguments.length,o=0,n;i>o;){if(n=+arguments[o++],Pce(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?NP(n):NP(((n-=65536)>>10)+55296,n%1024+56320))}return r.join("")}})}),qP=x(()=>{var Bce=z(),Lce=Di(),zce=gt();Bce({target:"String",stat:!0},{raw:function(t){for(var r=Lce(t.raw),i=zce(r.length),o=arguments.length,n=[],s=0;i>s;)n.push(String(r[s++])),s<o&&n.push(String(arguments[s]));return n.join("")}})}),GP=x(()=>{"use strict";var Nce=z(),Uce=lm().codeAt;Nce({target:"String",proto:!0},{codePointAt:function(t){return Uce(this,t)}})}),fm=x((xze,WP)=>{var jce=Qe(),qce=Zi(),Gce=ht(),Wce=Gce("match");WP.exports=function(e){var t;return jce(e)&&((t=e[Wce])!==void 0?!!t:qce(e)=="RegExp")}}),sy=x((wze,HP)=>{var Hce=fm();HP.exports=function(e){if(Hce(e))throw TypeError("The method doesn't accept regular expressions");return e}}),ay=x((Sze,VP)=>{var Vce=ht(),Kce=Vce("match");VP.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[Kce]=!1,"/./"[e](t)}catch(i){}}return!1}}),XP=x(()=>{"use strict";var $ce=z(),Yce=zr().f,KP=gt(),Xce=sy(),Jce=Yr(),Zce=ay(),Qce=Io(),$P="".endsWith,ede=Math.min,YP=Zce("endsWith"),tde=!Qce&&!YP&&!!function(){var e=Yce(String.prototype,"endsWith");return e&&!e.writable}();$ce({target:"String",proto:!0,forced:!tde&&!YP},{endsWith:function(t){var r=String(Jce(this));Xce(t);var i=arguments.length>1?arguments[1]:void 0,o=KP(r.length),n=i===void 0?o:ede(KP(i),o),s=String(t);return $P?$P.call(r,s,n):r.slice(n-s.length,n)===s}})}),JP=x(()=>{"use strict";var rde=z(),ide=sy(),ode=Yr(),nde=ay();rde({target:"String",proto:!0,forced:!nde("includes")},{includes:function(t){return!!~String(ode(this)).indexOf(ide(t),arguments.length>1?arguments[1]:void 0)}})}),bu=x((Dze,ZP)=>{"use strict";var sde=ot();ZP.exports=function(){var e=sde(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}}),gm=x(aC=>{"use strict";var QP=Se();function eM(e,t){return RegExp(e,t)}aC.UNSUPPORTED_Y=QP(function(){var e=eM("a","y");return e.lastIndex=2,e.exec("abcd")!=null});aC.BROKEN_CARET=QP(function(){var e=eM("^r","gy");return e.lastIndex=2,e.exec("str")!=null})}),bm=x((Oze,tM)=>{"use strict";var ade=bu(),rM=gm(),ly=RegExp.prototype.exec,lde=String.prototype.replace,iM=ly,lC=function(){var e=/a/,t=/b*/g;return ly.call(e,"a"),ly.call(t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),oM=rM.UNSUPPORTED_Y||rM.BROKEN_CARET,cC=/()??/.exec("")[1]!==void 0,cde=lC||cC||oM;cde&&(iM=function(t){var r=this,i,o,n,s,a=oM&&r.sticky,l=ade.call(r),c=r.source,d=0,u=t;return a&&(l=l.replace("y",""),l.indexOf("g")===-1&&(l+="g"),u=String(t).slice(r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&t[r.lastIndex-1]!==`
`)&&(c="(?: "+c+")",u=" "+u,d++),o=new RegExp("^(?:"+c+")",l)),cC&&(o=new RegExp("^"+c+"$(?!\\s)",l)),lC&&(i=r.lastIndex),n=ly.call(a?o:r,u),a?n?(n.input=n.input.slice(d),n[0]=n[0].slice(d),n.index=r.lastIndex,r.lastIndex+=n[0].length):r.lastIndex=0:lC&&n&&(r.lastIndex=r.global?n.index+n[0].length:i),cC&&n&&n.length>1&&lde.call(n[0],o,function(){for(s=1;s<arguments.length-2;s++)arguments[s]===void 0&&(n[s]=void 0)}),n});tM.exports=iM}),cy=x(()=>{"use strict";var dde=z(),nM=bm();dde({target:"RegExp",proto:!0,forced:/./.exec!==nM},{exec:nM})}),ym=x((Fze,sM)=>{"use strict";cy();var aM=Nr(),dy=Se(),dC=ht(),ude=bm(),pde=Xr(),hde=dC("species"),mde=!dy(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"}),lM=function(){return"a".replace(/./,"$0")==="$0"}(),cM=dC("replace"),dM=function(){return/./[cM]?/./[cM]("a","$0")==="":!1}(),fde=!dy(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return r.length!==2||r[0]!=="a"||r[1]!=="b"});sM.exports=function(e,t,r,i){var o=dC(e),n=!dy(function(){var u={};return u[o]=function(){return 7},""[e](u)!=7}),s=n&&!dy(function(){var u=!1,p=/a/;return e==="split"&&(p={},p.constructor={},p.constructor[hde]=function(){return p},p.flags="",p[o]=/./[o]),p.exec=function(){return u=!0,null},p[o](""),!u});if(!n||!s||e==="replace"&&!(mde&&lM&&!dM)||e==="split"&&!fde){var a=/./[o],l=r(o,""[e],function(u,p,h,b,y){return p.exec===ude?n&&!y?{done:!0,value:a.call(p,h,b)}:{done:!0,value:u.call(h,p,b)}:{done:!1}},{REPLACE_KEEPS_$0:lM,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:dM}),c=l[0],d=l[1];aM(String.prototype,e,c),aM(RegExp.prototype,o,t==2?function(u,p){return d.call(u,this,p)}:function(u){return d.call(u,this)})}i&&pde(RegExp.prototype[o],"sham",!0)}}),vm=x((Pze,uM)=>{"use strict";var gde=lm().charAt;uM.exports=function(e,t,r){return t+(r?gde(e,t).length:1)}}),_m=x((Mze,pM)=>{var bde=Zi(),yde=bm();pM.exports=function(e,t){var r=e.exec;if(typeof r=="function"){var i=r.call(e,t);if(typeof i!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return i}if(bde(e)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return yde.call(e,t)}}),mM=x(()=>{"use strict";var vde=ym(),_de=ot(),xde=gt(),wde=Yr(),Sde=vm(),hM=_m();vde("match",1,function(e,t,r){return[function(o){var n=wde(this),s=o==null?void 0:o[e];return s!==void 0?s.call(o,n):new RegExp(o)[e](String(n))},function(i){var o=r(t,i,this);if(o.done)return o.value;var n=_de(i),s=String(this);if(!n.global)return hM(n,s);var a=n.unicode;n.lastIndex=0;for(var l=[],c=0,d;(d=hM(n,s))!==null;){var u=String(d[0]);l[c]=u,u===""&&(n.lastIndex=Sde(s,xde(n.lastIndex),a)),c++}return c===0?null:l}]})}),is=x((zze,fM)=>{var gM=ot(),Cde=li(),Tde=ht(),kde=Tde("species");fM.exports=function(e,t){var r=gM(e).constructor,i;return r===void 0||(i=gM(r)[kde])==null?t:Cde(i)}}),SM=x(()=>{"use strict";var Ede=z(),Dde=Xb(),bM=Yr(),yM=gt(),Ide=li(),Ode=ot(),Ade=Zi(),Rde=fm(),vM=bu(),Fde=Xr(),Pde=Se(),Mde=ht(),Bde=is(),Lde=vm(),_M=Jr(),uC=Io(),uy=Mde("matchAll"),xM="RegExp String",wM=xM+" Iterator",zde=_M.set,Nde=_M.getterFor(wM),xm=RegExp.prototype,Ude=xm.exec,pC="".matchAll,hC=!!pC&&!Pde(function(){"a".matchAll(/./)}),jde=function(e,t){var r=e.exec,i;if(typeof r=="function"){if(i=r.call(e,t),typeof i!="object")throw TypeError("Incorrect exec result");return i}return Ude.call(e,t)},qde=Dde(function(t,r,i,o){zde(this,{type:wM,regexp:t,string:r,global:i,unicode:o,done:!1})},xM,function(){var t=Nde(this);if(t.done)return{value:void 0,done:!0};var r=t.regexp,i=t.string,o=jde(r,i);return o===null?{value:void 0,done:t.done=!0}:t.global?(String(o[0])==""&&(r.lastIndex=Lde(i,yM(r.lastIndex),t.unicode)),{value:o,done:!1}):(t.done=!0,{value:o,done:!1})}),mC=function(e){var t=Ode(this),r=String(e),i,o,n,s,a,l;return i=Bde(t,RegExp),o=t.flags,o===void 0&&t instanceof RegExp&&!("flags"in xm)&&(o=vM.call(t)),n=o===void 0?"":String(o),s=new i(i===RegExp?t.source:t,n),a=!!~n.indexOf("g"),l=!!~n.indexOf("u"),s.lastIndex=yM(t.lastIndex),new qde(s,r,a,l)};Ede({target:"String",proto:!0,forced:hC},{matchAll:function(t){var r=bM(this),i,o,n,s;if(t!=null){if(Rde(t)&&(i=String(bM("flags"in xm?t.flags:vM.call(t))),!~i.indexOf("g")))throw TypeError("`.matchAll` does not allow non-global regexes");if(hC)return pC.apply(r,arguments);if(n=t[uy],n===void 0&&uC&&Ade(t)=="RegExp"&&(n=mC),n!=null)return Ide(n).call(t,r)}else if(hC)return pC.apply(r,arguments);return o=String(r),s=new RegExp(t,"g"),uC?mC.call(s,o):s[uy](o)}});uC||uy in xm||Fde(xm,uy,mC)}),py=x((jze,CM)=>{"use strict";var Gde=eo(),Wde=Yr();CM.exports="".repeat||function(t){var r=String(Wde(this)),i="",o=Gde(t);if(o<0||o==Infinity)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(r+=r))o&1&&(i+=r);return i}}),hy=x((qze,TM)=>{var Hde=gt(),Vde=py(),Kde=Yr(),$de=Math.ceil,kM=function(e){return function(t,r,i){var o=String(Kde(t)),n=o.length,s=i===void 0?" ":String(i),a=Hde(r),l,c;return a<=n||s==""?o:(l=a-n,c=Vde.call(s,$de(l/s.length)),c.length>l&&(c=c.slice(0,l)),e?o+c:c+o)}};TM.exports={start:kM(!1),end:kM(!0)}}),fC=x((Gze,EM)=>{var Yde=rm();EM.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(Yde)}),DM=x(()=>{"use strict";var Xde=z(),Jde=hy().end,Zde=fC();Xde({target:"String",proto:!0,forced:Zde},{padEnd:function(t){return Jde(this,t,arguments.length>1?arguments[1]:void 0)}})}),IM=x(()=>{"use strict";var Qde=z(),eue=hy().start,tue=fC();Qde({target:"String",proto:!0,forced:tue},{padStart:function(t){return eue(this,t,arguments.length>1?arguments[1]:void 0)}})}),OM=x(()=>{var rue=z(),iue=py();rue({target:"String",proto:!0},{repeat:iue})}),AM=x(()=>{"use strict";var oue=ym(),nue=ot(),sue=Wt(),aue=gt(),lue=eo(),cue=Yr(),due=vm(),uue=_m(),pue=Math.max,hue=Math.min,mue=Math.floor,fue=/\$([$&'`]|\d\d?|<[^>]*>)/g,gue=/\$([$&'`]|\d\d?)/g,bue=function(e){return e===void 0?e:String(e)};oue("replace",2,function(e,t,r,i){var o=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,n=i.REPLACE_KEEPS_$0,s=o?"$":"$0";return[function(c,d){var u=cue(this),p=c==null?void 0:c[e];return p!==void 0?p.call(c,u,d):t.call(String(u),c,d)},function(l,c){if(!o&&n||typeof c=="string"&&c.indexOf(s)===-1){var d=r(t,l,this,c);if(d.done)return d.value}var u=nue(l),p=String(this),h=typeof c=="function";h||(c=String(c));var b=u.global;if(b){var y=u.unicode;u.lastIndex=0}for(var f=[];;){var w=uue(u,p);if(w===null)break;if(f.push(w),!b)break;var T=String(w[0]);T===""&&(u.lastIndex=due(p,aue(u.lastIndex),y))}for(var C="",F=0,k=0;k<f.length;k++){w=f[k];for(var E=String(w[0]),W=pue(hue(lue(w.index),p.length),0),K=[],D=1;D<w.length;D++)K.push(bue(w[D]));var B=w.groups;if(h){var Y=[E].concat(K,W,p);B!==void 0&&Y.push(B);var de=String(c.apply(void 0,Y))}else de=a(E,p,W,K,B,c);W>=F&&(C+=p.slice(F,W)+de,F=W+E.length)}return C+p.slice(F)}];function a(l,c,d,u,p,h){var b=d+l.length,y=u.length,f=gue;return p!==void 0&&(p=sue(p),f=fue),t.call(h,f,function(w,T){var C;switch(T.charAt(0)){case"$":return"$";case"&":return l;case"`":return c.slice(0,d);case"'":return c.slice(b);case"<":C=p[T.slice(1,-1)];break;default:var F=+T;if(F===0)return w;if(F>y){var k=mue(F/10);return k===0?w:k<=y?u[k-1]===void 0?T.charAt(1):u[k-1]+T.charAt(1):w}C=u[F-1]}return C===void 0?"":C})}})}),FM=x(()=>{"use strict";var yue=ym(),vue=ot(),_ue=Yr(),RM=NS(),xue=_m();yue("search",1,function(e,t,r){return[function(o){var n=_ue(this),s=o==null?void 0:o[e];return s!==void 0?s.call(o,n):new RegExp(o)[e](String(n))},function(i){var o=r(t,i,this);if(o.done)return o.value;var n=vue(i),s=String(this),a=n.lastIndex;RM(a,0)||(n.lastIndex=0);var l=xue(n,s);return RM(n.lastIndex,a)||(n.lastIndex=a),l===null?-1:l.index}]})}),BM=x(()=>{"use strict";var wue=ym(),Sue=fm(),Cue=ot(),PM=Yr(),Tue=is(),kue=vm(),Eue=gt(),MM=_m(),Due=bm(),Iue=Se(),Oue=[].push,Aue=Math.min,gC=4294967295,yu=!Iue(function(){return!RegExp(gC,"y")});wue("split",2,function(e,t,r){var i;return"abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?i=function(o,n){var s=String(PM(this)),a=n===void 0?gC:n>>>0;if(a===0)return[];if(o===void 0)return[s];if(!Sue(o))return t.call(s,o,a);for(var l=[],c=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(o.sticky?"y":""),d=0,u=new RegExp(o.source,c+"g"),p,h,b;(p=Due.call(u,s))&&!(h=u.lastIndex,h>d&&(l.push(s.slice(d,p.index)),p.length>1&&p.index<s.length&&Oue.apply(l,p.slice(1)),b=p[0].length,d=h,l.length>=a));)u.lastIndex===p.index&&u.lastIndex++;return d===s.length?(b||!u.test(""))&&l.push(""):l.push(s.slice(d)),l.length>a?l.slice(0,a):l}:"0".split(void 0,0).length?i=function(o,n){return o===void 0&&n===0?[]:t.call(this,o,n)}:i=t,[function(n,s){var a=PM(this),l=n==null?void 0:n[e];return l!==void 0?l.call(n,a,s):i.call(String(a),n,s)},function(o,n){var s=r(i,o,this,n,i!==t);if(s.done)return s.value;var a=Cue(o),l=String(this),c=Tue(a,RegExp),d=a.unicode,u=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(yu?"y":"g"),p=new c(yu?a:"^(?:"+a.source+")",u),h=n===void 0?gC:n>>>0;if(h===0)return[];if(l.length===0)return MM(p,l)===null?[l]:[];for(var b=0,y=0,f=[];y<l.length;){p.lastIndex=yu?y:0;var w=MM(p,yu?l:l.slice(y)),T;if(w===null||(T=Aue(Eue(p.lastIndex+(yu?0:y)),l.length))===b)y=kue(l,y,d);else{if(f.push(l.slice(b,y)),f.length===h)return f;for(var C=1;C<=w.length-1;C++)if(f.push(w[C]),f.length===h)return f;y=b=T}}return f.push(l.slice(b)),f}]},!yu)}),NM=x(()=>{"use strict";var Rue=z(),Fue=zr().f,Pue=gt(),Mue=sy(),Bue=Yr(),Lue=ay(),zue=Io(),LM="".startsWith,Nue=Math.min,zM=Lue("startsWith"),Uue=!zue&&!zM&&!!function(){var e=Fue(String.prototype,"startsWith");return e&&!e.writable}();Rue({target:"String",proto:!0,forced:!Uue&&!zM},{startsWith:function(t){var r=String(Bue(this));Mue(t);var i=Pue(Nue(arguments.length>1?arguments[1]:void 0,r.length)),o=String(t);return LM?LM.call(r,o,i):r.slice(i,i+o.length)===o}})}),wm=x((o4e,UM)=>{UM.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`}),Lc=x((n4e,jM)=>{var jue=Yr(),que=wm(),my="["+que+"]",Gue=RegExp("^"+my+my+"*"),Wue=RegExp(my+my+"*$"),bC=function(e){return function(t){var r=String(jue(t));return e&1&&(r=r.replace(Gue,"")),e&2&&(r=r.replace(Wue,"")),r}};jM.exports={start:bC(1),end:bC(2),trim:bC(3)}}),fy=x((s4e,qM)=>{var Hue=Se(),GM=wm(),WM="\u200B\x85\u180E";qM.exports=function(e){return Hue(function(){return!!GM[e]()||WM[e]()!=WM||GM[e].name!==e})}}),HM=x(()=>{"use strict";var Vue=z(),Kue=Lc().trim,$ue=fy();Vue({target:"String",proto:!0,forced:$ue("trim")},{trim:function(){return Kue(this)}})}),$M=x(()=>{"use strict";var Yue=z(),Xue=Lc().start,Jue=fy(),VM=Jue("trimStart"),KM=VM?function(){return Xue(this)}:"".trimStart;Yue({target:"String",proto:!0,forced:VM},{trimStart:KM,trimLeft:KM})}),JM=x(()=>{"use strict";var Zue=z(),Que=Lc().end,epe=fy(),YM=epe("trimEnd"),XM=YM?function(){return Que(this)}:"".trimEnd;Zue({target:"String",proto:!0,forced:YM},{trimEnd:XM,trimRight:XM})}),Ai=x((h4e,ZM)=>{var tpe=Yr(),rpe=/"/g;ZM.exports=function(e,t,r,i){var o=String(tpe(e)),n="<"+t;return r!==""&&(n+=" "+r+'="'+String(i).replace(rpe,"&quot;")+'"'),n+">"+o+"</"+t+">"}}),Ri=x((m4e,QM)=>{var ipe=Se();QM.exports=function(e){return ipe(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})}}),eB=x(()=>{"use strict";var ope=z(),npe=Ai(),spe=Ri();ope({target:"String",proto:!0,forced:spe("anchor")},{anchor:function(t){return npe(this,"a","name",t)}})}),tB=x(()=>{"use strict";var ape=z(),lpe=Ai(),cpe=Ri();ape({target:"String",proto:!0,forced:cpe("big")},{big:function(){return lpe(this,"big","","")}})}),rB=x(()=>{"use strict";var dpe=z(),upe=Ai(),ppe=Ri();dpe({target:"String",proto:!0,forced:ppe("blink")},{blink:function(){return upe(this,"blink","","")}})}),iB=x(()=>{"use strict";var hpe=z(),mpe=Ai(),fpe=Ri();hpe({target:"String",proto:!0,forced:fpe("bold")},{bold:function(){return mpe(this,"b","","")}})}),oB=x(()=>{"use strict";var gpe=z(),bpe=Ai(),ype=Ri();gpe({target:"String",proto:!0,forced:ype("fixed")},{fixed:function(){return bpe(this,"tt","","")}})}),nB=x(()=>{"use strict";var vpe=z(),_pe=Ai(),xpe=Ri();vpe({target:"String",proto:!0,forced:xpe("fontcolor")},{fontcolor:function(t){return _pe(this,"font","color",t)}})}),sB=x(()=>{"use strict";var wpe=z(),Spe=Ai(),Cpe=Ri();wpe({target:"String",proto:!0,forced:Cpe("fontsize")},{fontsize:function(t){return Spe(this,"font","size",t)}})}),aB=x(()=>{"use strict";var Tpe=z(),kpe=Ai(),Epe=Ri();Tpe({target:"String",proto:!0,forced:Epe("italics")},{italics:function(){return kpe(this,"i","","")}})}),lB=x(()=>{"use strict";var Dpe=z(),Ipe=Ai(),Ope=Ri();Dpe({target:"String",proto:!0,forced:Ope("link")},{link:function(t){return Ipe(this,"a","href",t)}})}),cB=x(()=>{"use strict";var Ape=z(),Rpe=Ai(),Fpe=Ri();Ape({target:"String",proto:!0,forced:Fpe("small")},{small:function(){return Rpe(this,"small","","")}})}),dB=x(()=>{"use strict";var Ppe=z(),Mpe=Ai(),Bpe=Ri();Ppe({target:"String",proto:!0,forced:Bpe("strike")},{strike:function(){return Mpe(this,"strike","","")}})}),uB=x(()=>{"use strict";var Lpe=z(),zpe=Ai(),Npe=Ri();Lpe({target:"String",proto:!0,forced:Npe("sub")},{sub:function(){return zpe(this,"sub","","")}})}),pB=x(()=>{"use strict";var Upe=z(),jpe=Ai(),qpe=Ri();Upe({target:"String",proto:!0,forced:qpe("sup")},{sup:function(){return jpe(this,"sup","","")}})}),Sm=x((j4e,hB)=>{var Gpe=Qe(),mB=dl();hB.exports=function(e,t,r){var i,o;return mB&&typeof(i=t.constructor)=="function"&&i!==r&&Gpe(o=i.prototype)&&o!==r.prototype&&mB(e,o),e}}),yB=x(()=>{var Wpe=st(),fB=Ne(),Hpe=nu(),Vpe=Sm(),Kpe=It().f,$pe=sl().f,Ype=fm(),Xpe=bu(),Jpe=gm(),Zpe=Nr(),Qpe=Se(),ehe=Jr().set,the=Bc(),rhe=ht(),ihe=rhe("match"),os=fB.RegExp,yC=os.prototype,Cm=/a/g,vC=/a/g,_C=new os(Cm)!==Cm,xC=Jpe.UNSUPPORTED_Y,ohe=Wpe&&Hpe("RegExp",!_C||xC||Qpe(function(){return vC[ihe]=!1,os(Cm)!=Cm||os(vC)==vC||os(Cm,"i")!="/a/i"}));if(ohe){for(var ra=function(t,r){var i=this instanceof ra,o=Ype(t),n=r===void 0,s;if(!i&&o&&t.constructor===ra&&n)return t;_C?o&&!n&&(t=t.source):t instanceof ra&&(n&&(r=Xpe.call(t)),t=t.source),xC&&(s=!!r&&r.indexOf("y")>-1,s&&(r=r.replace(/y/g,"")));var a=Vpe(_C?new os(t,r):os(t,r),i?this:yC,ra);return xC&&s&&ehe(a,{sticky:s}),a},nhe=function(e){e in ra||Kpe(ra,e,{configurable:!0,get:function(){return os[e]},set:function(t){os[e]=t}})},gB=$pe(os),bB=0;gB.length>bB;)nhe(gB[bB++]);yC.constructor=ra,ra.prototype=yC,Zpe(fB,"RegExp",ra)}the("RegExp")}),vB=x(()=>{var she=st(),ahe=It(),lhe=bu(),che=gm().UNSUPPORTED_Y;she&&(/./g.flags!="g"||che)&&ahe.f(RegExp.prototype,"flags",{configurable:!0,get:lhe})}),_B=x(()=>{var dhe=st(),uhe=gm().UNSUPPORTED_Y,phe=It().f,hhe=Jr().get,mhe=RegExp.prototype;dhe&&uhe&&phe(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this===mhe)return;if(this instanceof RegExp)return!!hhe(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}})}),xB=x(()=>{"use strict";cy();var fhe=z(),ghe=Qe(),bhe=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},t.test("abc")===!0&&e}(),yhe=/./.test;fhe({target:"RegExp",proto:!0,forced:!bhe},{test:function(e){if(typeof this.exec!="function")return yhe.call(this,e);var t=this.exec(e);if(t!==null&&!ghe(t))throw new Error("RegExp exec method returned something other than an Object or null");return!!t}})}),CB=x(()=>{"use strict";var vhe=Nr(),_he=ot(),xhe=Se(),whe=bu(),wC="toString",wB=RegExp.prototype,SB=wB[wC],She=xhe(function(){return SB.call({source:"a",flags:"b"})!="/a/b"}),Che=SB.name!=wC;(She||Che)&&vhe(RegExp.prototype,wC,function(){var t=_he(this),r=String(t.source),i=t.flags,o=String(i===void 0&&t instanceof RegExp&&!("flags"in wB)?whe.call(t):i);return"/"+r+"/"+o},{unsafe:!0})}),SC=x((Z4e,TB)=>{var The=Ne(),khe=Lc().trim,kB=wm(),gy=The.parseInt,Ehe=/^[+-]?0[Xx]/,Dhe=gy(kB+"08")!==8||gy(kB+"0x16")!==22;TB.exports=Dhe?function(t,r){var i=khe(String(t));return gy(i,r>>>0||(Ehe.test(i)?16:10))}:gy}),DB=x(()=>{var Ihe=z(),EB=SC();Ihe({global:!0,forced:parseInt!=EB},{parseInt:EB})}),TC=x((t8e,IB)=>{var Ohe=Ne(),Ahe=Lc().trim,Rhe=wm(),CC=Ohe.parseFloat,Fhe=1/CC(Rhe+"-0")!==-Infinity;IB.exports=Fhe?function(t){var r=Ahe(String(t)),i=CC(r);return i===0&&r.charAt(0)=="-"?-0:i}:CC}),AB=x(()=>{var Phe=z(),OB=TC();Phe({global:!0,forced:parseFloat!=OB},{parseFloat:OB})}),LB=x(()=>{"use strict";var Mhe=st(),RB=Ne(),Bhe=nu(),Lhe=Nr(),FB=Jt(),PB=Zi(),zhe=Sm(),Nhe=Do(),Uhe=Se(),jhe=es(),qhe=sl().f,Ghe=zr().f,Whe=It().f,Hhe=Lc().trim,Tm="Number",pl=RB[Tm],by=pl.prototype,Vhe=PB(jhe(by))==Tm,MB=function(e){var t=Nhe(e,!1),r,i,o,n,s,a,l,c;if(typeof t=="string"&&t.length>2){if(t=Hhe(t),r=t.charCodeAt(0),r===43||r===45){if(i=t.charCodeAt(2),i===88||i===120)return NaN}else if(r===48){switch(t.charCodeAt(1)){case 66:case 98:o=2,n=49;break;case 79:case 111:o=8,n=55;break;default:return+t}for(s=t.slice(2),a=s.length,l=0;l<a;l++)if(c=s.charCodeAt(l),c<48||c>n)return NaN;return parseInt(s,o)}}return+t};if(Bhe(Tm,!pl(" 0o1")||!pl("0b1")||pl("+0x1"))){for(var zc=function(t){var r=arguments.length<1?0:t,i=this;return i instanceof zc&&(Vhe?Uhe(function(){by.valueOf.call(i)}):PB(i)!=Tm)?zhe(new pl(MB(r)),i,zc):MB(r)},BB=Mhe?qhe(pl):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),kC=0,yy;BB.length>kC;kC++)FB(pl,yy=BB[kC])&&!FB(zc,yy)&&Whe(zc,yy,Ghe(pl,yy));zc.prototype=by,by.constructor=zc,Lhe(RB,Tm,zc)}}),zB=x(()=>{var Khe=z();Khe({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})}),UB=x((l8e,NB)=>{var $he=Ne(),Yhe=$he.isFinite;NB.exports=Number.isFinite||function(t){return typeof t=="number"&&Yhe(t)}}),jB=x(()=>{var Xhe=z(),Jhe=UB();Xhe({target:"Number",stat:!0},{isFinite:Jhe})}),EC=x((u8e,qB)=>{var Zhe=Qe(),Qhe=Math.floor;qB.exports=function(t){return!Zhe(t)&&isFinite(t)&&Qhe(t)===t}}),GB=x(()=>{var eme=z(),tme=EC();eme({target:"Number",stat:!0},{isInteger:tme})}),WB=x(()=>{var rme=z();rme({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})}),HB=x(()=>{var ime=z(),ome=EC(),nme=Math.abs;ime({target:"Number",stat:!0},{isSafeInteger:function(t){return ome(t)&&nme(t)<=9007199254740991}})}),VB=x(()=>{var sme=z();sme({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})}),KB=x(()=>{var ame=z();ame({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})}),YB=x(()=>{var lme=z(),$B=TC();lme({target:"Number",stat:!0,forced:Number.parseFloat!=$B},{parseFloat:$B})}),JB=x(()=>{var cme=z(),XB=SC();cme({target:"Number",stat:!0,forced:Number.parseInt!=XB},{parseInt:XB})}),DC=x((k8e,ZB)=>{var dme=Zi();ZB.exports=function(e){if(typeof e!="number"&&dme(e)!="Number")throw TypeError("Incorrect invocation");return+e}}),tL=x(()=>{"use strict";var ume=z(),pme=eo(),hme=DC(),IC=py(),mme=Se(),QB=1 .toFixed,eL=Math.floor,vu=function(e,t,r){return t===0?r:t%2===1?vu(e,t-1,r*e):vu(e*e,t/2,r)},fme=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t},gme=QB&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||1000000000000000100 .toFixed(0)!=="1000000000000000128")||!mme(function(){QB.call({})});ume({target:"Number",proto:!0,forced:gme},{toFixed:function(t){var r=hme(this),i=pme(t),o=[0,0,0,0,0,0],n="",s="0",a,l,c,d,u=function(b,y){for(var f=-1,w=y;++f<6;)w+=b*o[f],o[f]=w%1e7,w=eL(w/1e7)},p=function(b){for(var y=6,f=0;--y>=0;)f+=o[y],o[y]=eL(f/b),f=f%b*1e7},h=function(){for(var b=6,y="";--b>=0;)if(y!==""||b===0||o[b]!==0){var f=String(o[b]);y=y===""?f:y+IC.call("0",7-f.length)+f}return y};if(i<0||i>20)throw RangeError("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return String(r);if(r<0&&(n="-",r=-r),r>1e-21)if(a=fme(r*vu(2,69,1))-69,l=a<0?r*vu(2,-a,1):r/vu(2,a,1),l*=4503599627370496,a=52-a,a>0){for(u(0,l),c=i;c>=7;)u(1e7,0),c-=7;for(u(vu(10,c,1),0),c=a-1;c>=23;)p(1<<23),c-=23;p(1<<c),u(1,1),p(2),s=h()}else u(0,l),u(1<<-a,0),s=h()+IC.call("0",i);return i>0?(d=s.length,s=n+(d<=i?"0."+IC.call("0",i-d)+s:s.slice(0,d-i)+"."+s.slice(d-i))):s=n+s,s}})}),oL=x(()=>{"use strict";var bme=z(),rL=Se(),iL=DC(),vy=1 .toPrecision,yme=rL(function(){return vy.call(1,void 0)!=="1"})||!rL(function(){vy.call({})});bme({target:"Number",proto:!0,forced:yme},{toPrecision:function(t){return t===void 0?vy.call(iL(this)):vy.call(iL(this),t)}})}),OC=x((A8e,nL)=>{var vme=Math.log;nL.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:vme(1+t)}}),aL=x(()=>{var _me=z(),xme=OC(),AC=Math.acosh,wme=Math.log,sL=Math.sqrt,Sme=Math.LN2,Cme=!AC||Math.floor(AC(Number.MAX_VALUE))!=710||AC(Infinity)!=Infinity;_me({target:"Math",stat:!0,forced:Cme},{acosh:function(t){return(t=+t)<1?NaN:t>9490626562425156e-8?wme(t)+Sme:xme(t-1+sL(t-1)*sL(t+1))}})}),dL=x(()=>{var Tme=z(),lL=Math.asinh,kme=Math.log,Eme=Math.sqrt;function cL(e){return!isFinite(e=+e)||e==0?e:e<0?-cL(-e):kme(e+Eme(e*e+1))}Tme({target:"Math",stat:!0,forced:!(lL&&1/lL(0)>0)},{asinh:cL})}),pL=x(()=>{var Dme=z(),uL=Math.atanh,Ime=Math.log;Dme({target:"Math",stat:!0,forced:!(uL&&1/uL(-0)<0)},{atanh:function(t){return(t=+t)==0?t:Ime((1+t)/(1-t))/2}})}),_y=x((z8e,hL)=>{hL.exports=Math.sign||function(t){return(t=+t)==0||t!=t?t:t<0?-1:1}}),mL=x(()=>{var Ome=z(),Ame=_y(),Rme=Math.abs,Fme=Math.pow;Ome({target:"Math",stat:!0},{cbrt:function(t){return Ame(t=+t)*Fme(Rme(t),1/3)}})}),fL=x(()=>{var Pme=z(),Mme=Math.floor,Bme=Math.log,Lme=Math.LOG2E;Pme({target:"Math",stat:!0},{clz32:function(t){return(t>>>=0)?31-Mme(Bme(t+.5)*Lme):32}})}),Em=x((G8e,gL)=>{var km=Math.expm1,zme=Math.exp;gL.exports=!km||km(10)>22025.465794806718||km(10)<22025.465794806718||km(-2e-17)!=-2e-17?function(t){return(t=+t)==0?t:t>-1e-6&&t<1e-6?t+t*t/2:zme(t)-1}:km}),yL=x(()=>{var Nme=z(),Ume=Em(),bL=Math.cosh,jme=Math.abs,RC=Math.E;Nme({target:"Math",stat:!0,forced:!bL||bL(710)===Infinity},{cosh:function(t){var r=Ume(jme(t)-1)+1;return(r+1/(r*RC*RC))*(RC/2)}})}),_L=x(()=>{var qme=z(),vL=Em();qme({target:"Math",stat:!0,forced:vL!=Math.expm1},{expm1:vL})}),wL=x(($8e,xL)=>{var Gme=_y(),Wme=Math.abs,xy=Math.pow,FC=xy(2,-52),wy=xy(2,-23),Hme=xy(2,127)*(2-wy),PC=xy(2,-126),Vme=function(e){return e+1/FC-1/FC};xL.exports=Math.fround||function(t){var r=Wme(t),i=Gme(t),o,n;return r<PC?i*Vme(r/PC/wy)*PC*wy:(o=(1+wy/FC)*r,n=o-(o-r),n>Hme||n!=n?i*Infinity:i*n)}}),SL=x(()=>{var Kme=z(),$me=wL();Kme({target:"Math",stat:!0},{fround:$me})}),TL=x(()=>{var Yme=z(),CL=Math.hypot,Xme=Math.abs,Jme=Math.sqrt,Zme=!!CL&&CL(Infinity,NaN)!==Infinity;Yme({target:"Math",stat:!0,forced:Zme},{hypot:function(t,r){for(var i=0,o=0,n=arguments.length,s=0,a,l;o<n;)a=Xme(arguments[o++]),s<a?(l=s/a,i=i*l*l+1,s=a):a>0?(l=a/s,i+=l*l):i+=a;return s===Infinity?Infinity:s*Jme(i)}})}),EL=x(()=>{var Qme=z(),efe=Se(),kL=Math.imul,tfe=efe(function(){return kL(4294967295,5)!=-5||kL.length!=2});Qme({target:"Math",stat:!0,forced:tfe},{imul:function(t,r){var i=65535,o=+t,n=+r,s=i&o,a=i&n;return 0|s*a+((i&o>>>16)*a+s*(i&n>>>16)<<16>>>0)}})}),DL=x(()=>{var rfe=z(),ife=Math.log,ofe=Math.LOG10E;rfe({target:"Math",stat:!0},{log10:function(t){return ife(t)*ofe}})}),IL=x(()=>{var nfe=z(),sfe=OC();nfe({target:"Math",stat:!0},{log1p:sfe})}),OL=x(()=>{var afe=z(),lfe=Math.log,cfe=Math.LN2;afe({target:"Math",stat:!0},{log2:function(t){return lfe(t)/cfe}})}),AL=x(()=>{var dfe=z(),ufe=_y();dfe({target:"Math",stat:!0},{sign:ufe})}),PL=x(()=>{var pfe=z(),hfe=Se(),RL=Em(),mfe=Math.abs,FL=Math.exp,ffe=Math.E,gfe=hfe(function(){return Math.sinh(-2e-17)!=-2e-17});pfe({target:"Math",stat:!0,forced:gfe},{sinh:function(t){return mfe(t=+t)<1?(RL(t)-RL(-t))/2:(FL(t-1)-FL(-t-1))*(ffe/2)}})}),LL=x(()=>{var bfe=z(),ML=Em(),BL=Math.exp;bfe({target:"Math",stat:!0},{tanh:function(t){var r=ML(t=+t),i=ML(-t);return r==Infinity?1:i==Infinity?-1:(r-i)/(BL(t)+BL(-t))}})}),zL=x(()=>{var yfe=z(),vfe=Math.ceil,_fe=Math.floor;yfe({target:"Math",stat:!0},{trunc:function(t){return(t>0?_fe:vfe)(t)}})}),NL=x(()=>{var xfe=z();xfe({target:"Date",stat:!0},{now:function(){return new Date().getTime()}})}),UL=x(()=>{"use strict";var wfe=z(),Sfe=Se(),Cfe=Wt(),Tfe=Do(),kfe=Sfe(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});wfe({target:"Date",proto:!0,forced:kfe},{toJSON:function(t){var r=Cfe(this),i=Tfe(r);return typeof i=="number"&&!isFinite(i)?null:r.toISOString()}})}),WL=x((v6e,jL)=>{"use strict";var qL=Se(),Nc=hy().start,Efe=Math.abs,GL=Date.prototype,Dfe=GL.getTime,MC=GL.toISOString;jL.exports=qL(function(){return MC.call(new Date(-5e13-1))!="0385-07-25T07:06:39.999Z"})||!qL(function(){MC.call(new Date(NaN))})?function(){if(!isFinite(Dfe.call(this)))throw RangeError("Invalid time value");var t=this,r=t.getUTCFullYear(),i=t.getUTCMilliseconds(),o=r<0?"-":r>9999?"+":"";return o+Nc(Efe(r),o?6:4,0)+"-"+Nc(t.getUTCMonth()+1,2,0)+"-"+Nc(t.getUTCDate(),2,0)+"T"+Nc(t.getUTCHours(),2,0)+":"+Nc(t.getUTCMinutes(),2,0)+":"+Nc(t.getUTCSeconds(),2,0)+"."+Nc(i,3,0)+"Z"}:MC}),VL=x(()=>{var Ife=z(),HL=WL();Ife({target:"Date",proto:!0,forced:Date.prototype.toISOString!==HL},{toISOString:HL})}),YL=x(()=>{var Ofe=Nr(),BC=Date.prototype,KL="Invalid Date",$L="toString",Afe=BC[$L],Rfe=BC.getTime;new Date(NaN)+""!=KL&&Ofe(BC,$L,function(){var t=Rfe.call(this);return t===t?Afe.call(this):KL})}),JL=x((C6e,XL)=>{"use strict";var Ffe=ot(),Pfe=Do();XL.exports=function(e){if(e!=="string"&&e!=="number"&&e!=="default")throw TypeError("Incorrect hint");return Pfe(Ffe(this),e!=="number")}}),e5=x(()=>{var Mfe=Xr(),Bfe=JL(),Lfe=ht(),ZL=Lfe("toPrimitive"),QL=Date.prototype;ZL in QL||Mfe(QL,ZL,Bfe)}),i5=x(()=>{var zfe=z(),Nfe=Qi(),Ufe=Se(),Sy=Nfe("JSON","stringify"),jfe=/[\uD800-\uDFFF]/g,t5=/^[\uD800-\uDBFF]$/,r5=/^[\uDC00-\uDFFF]$/,qfe=function(e,t,r){var i=r.charAt(t-1),o=r.charAt(t+1);return t5.test(e)&&!r5.test(o)||r5.test(e)&&!t5.test(i)?"\\u"+e.charCodeAt(0).toString(16):e},Gfe=Ufe(function(){return Sy("\uDF06\uD834")!=='"\\udf06\\ud834"'||Sy("\uDEAD")!=='"\\udead"'});Sy&&zfe({target:"JSON",stat:!0,forced:Gfe},{stringify:function(t,r,i){var o=Sy.apply(null,arguments);return typeof o=="string"?o.replace(jfe,qfe):o}})}),LC=x((I6e,o5)=>{var Wfe=Ne();o5.exports=Wfe.Promise}),Uc=x((O6e,n5)=>{var Hfe=Nr();n5.exports=function(e,t,r){for(var i in t)Hfe(e,i,t[i],r);return e}}),ia=x((A6e,s5)=>{s5.exports=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e}}),zC=x((R6e,a5)=>{var Vfe=rm();a5.exports=/(iphone|ipod|ipad).*applewebkit/i.test(Vfe)}),Cy=x((F6e,l5)=>{var ns=Ne(),Kfe=Se(),$fe=Zi(),Yfe=ts(),c5=Lw(),d5=Db(),Xfe=zC(),NC=ns.location,UC=ns.setImmediate,jC=ns.clearImmediate,u5=ns.process,p5=ns.MessageChannel,qC=ns.Dispatch,GC=0,Dm={},h5="onreadystatechange",jc,WC,HC,VC=function(e){if(Dm.hasOwnProperty(e)){var t=Dm[e];delete Dm[e],t()}},KC=function(e){return function(){VC(e)}},m5=function(e){VC(e.data)},f5=function(e){ns.postMessage(e+"",NC.protocol+"//"+NC.host)};(!UC||!jC)&&(UC=function(t){for(var r=[],i=1;arguments.length>i;)r.push(arguments[i++]);return Dm[++GC]=function(){(typeof t=="function"?t:Function(t)).apply(void 0,r)},jc(GC),GC},jC=function(t){delete Dm[t]},$fe(u5)=="process"?jc=function(e){u5.nextTick(KC(e))}:qC&&qC.now?jc=function(e){qC.now(KC(e))}:p5&&!Xfe?(WC=new p5,HC=WC.port2,WC.port1.onmessage=m5,jc=Yfe(HC.postMessage,HC,1)):ns.addEventListener&&typeof postMessage=="function"&&!ns.importScripts&&!Kfe(f5)&&NC.protocol!=="file:"?(jc=f5,ns.addEventListener("message",m5,!1)):h5 in d5("script")?jc=function(e){c5.appendChild(d5("script"))[h5]=function(){c5.removeChild(this),VC(e)}}:jc=function(e){setTimeout(KC(e),0)});l5.exports={set:UC,clear:jC}}),QC=x((P6e,g5)=>{var _u=Ne(),Jfe=zr().f,Zfe=Zi(),Qfe=Cy().set,ege=zC(),b5=_u.MutationObserver||_u.WebKitMutationObserver,$C=_u.process,YC=_u.Promise,y5=Zfe($C)=="process",v5=Jfe(_u,"queueMicrotask"),_5=v5&&v5.value,Im,qc,Om,xu,XC,JC,ZC,x5;_5||(Im=function(){var e,t;for(y5&&(e=$C.domain)&&e.exit();qc;){t=qc.fn,qc=qc.next;try{t()}catch(r){throw qc?xu():Om=void 0,r}}Om=void 0,e&&e.enter()},y5?xu=function(){$C.nextTick(Im)}:b5&&!ege?(XC=!0,JC=document.createTextNode(""),new b5(Im).observe(JC,{characterData:!0}),xu=function(){JC.data=XC=!XC}):YC&&YC.resolve?(ZC=YC.resolve(void 0),x5=ZC.then,xu=function(){x5.call(ZC,Im)}):xu=function(){Qfe.call(_u,Im)});g5.exports=_5||function(e){var t={fn:e,next:void 0};Om&&(Om.next=t),qc||(qc=t,xu()),Om=t}}),Ty=x((M6e,w5)=>{"use strict";var S5=li(),tge=function(e){var t,r;this.promise=new e(function(i,o){if(t!==void 0||r!==void 0)throw TypeError("Bad Promise constructor");t=i,r=o}),this.resolve=S5(t),this.reject=S5(r)};w5.exports.f=function(e){return new tge(e)}}),eT=x((B6e,C5)=>{var rge=ot(),ige=Qe(),oge=Ty();C5.exports=function(e,t){if(rge(e),ige(t)&&t.constructor===e)return t;var r=oge.f(e),i=r.resolve;return i(t),r.promise}}),k5=x((L6e,T5)=>{var nge=Ne();T5.exports=function(e,t){var r=nge.console;r&&r.error&&(arguments.length===1?r.error(e):r.error(e,t))}}),tT=x((z6e,E5)=>{E5.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}}),K5=x(()=>{"use strict";var Am=z(),ky=Io(),oa=Ne(),D5=Qi(),Ey=LC(),sge=Nr(),age=Uc(),lge=ln(),cge=Bc(),dge=Qe(),rT=li(),uge=ia(),pge=Zi(),hge=Ob(),I5=Mc(),mge=dm(),fge=is(),O5=Cy().set,A5=QC(),R5=eT(),gge=k5(),F5=Ty(),iT=tT(),oT=Jr(),bge=nu(),yge=ht(),P5=Ub(),vge=yge("species"),ss="Promise",M5=oT.get,_ge=oT.set,xge=oT.getterFor(ss),Zr=Ey,B5=oa.TypeError,nT=oa.document,Dy=oa.process,L5=D5("fetch"),wu=F5.f,wge=wu,Rm=pge(Dy)=="process",Sge=!!(nT&&nT.createEvent&&oa.dispatchEvent),z5="unhandledrejection",Cge="rejectionhandled",N5=0,U5=1,Tge=2,sT=1,j5=2,Iy,q5,aT,G5,Fm=bge(ss,function(){var e=hge(Zr)!==String(Zr);if(!e){if(P5===66)return!0;if(!Rm&&typeof PromiseRejectionEvent!="function")return!0}if(ky&&!Zr.prototype.finally)return!0;if(P5>=51&&/native code/.test(Zr))return!1;var t=Zr.resolve(1),r=function(o){o(function(){},function(){})},i=t.constructor={};return i[vge]=r,!(t.then(function(){})instanceof r)}),kge=Fm||!mge(function(e){Zr.all(e).catch(function(){})}),W5=function(e){var t;return dge(e)&&typeof(t=e.then)=="function"?t:!1},lT=function(e,t,r){if(t.notified)return;t.notified=!0;var i=t.reactions;A5(function(){for(var o=t.value,n=t.state==U5,s=0;i.length>s;){var a=i[s++],l=n?a.ok:a.fail,c=a.resolve,d=a.reject,u=a.domain,p,h,b;try{l?(n||(t.rejection===j5&&Dge(e,t),t.rejection=sT),l===!0?p=o:(u&&u.enter(),p=l(o),u&&(u.exit(),b=!0)),p===a.promise?d(B5("Promise-chain cycle")):(h=W5(p))?h.call(p,c,d):c(p)):d(o)}catch(y){u&&!b&&u.exit(),d(y)}}t.reactions=[],t.notified=!1,r&&!t.rejection&&Ege(e,t)})},H5=function(e,t,r){var i,o;Sge?(i=nT.createEvent("Event"),i.promise=t,i.reason=r,i.initEvent(e,!1,!0),oa.dispatchEvent(i)):i={promise:t,reason:r},(o=oa["on"+e])?o(i):e===z5&&gge("Unhandled promise rejection",r)},Ege=function(e,t){O5.call(oa,function(){var r=t.value,i=V5(t),o;if(i&&(o=iT(function(){Rm?Dy.emit("unhandledRejection",r,e):H5(z5,e,r)}),t.rejection=Rm||V5(t)?j5:sT,o.error))throw o.value})},V5=function(e){return e.rejection!==sT&&!e.parent},Dge=function(e,t){O5.call(oa,function(){Rm?Dy.emit("rejectionHandled",e):H5(Cge,e,t.value)})},Su=function(e,t,r,i){return function(o){e(t,r,o,i)}},Cu=function(e,t,r,i){if(t.done)return;t.done=!0,i&&(t=i),t.value=r,t.state=Tge,lT(e,t,!0)},cT=function(e,t,r,i){if(t.done)return;t.done=!0,i&&(t=i);try{if(e===r)throw B5("Promise can't be resolved itself");var o=W5(r);o?A5(function(){var n={done:!1};try{o.call(r,Su(cT,e,n,t),Su(Cu,e,n,t))}catch(s){Cu(e,n,s,t)}}):(t.value=r,t.state=U5,lT(e,t,!1))}catch(n){Cu(e,{done:!1},n,t)}};Fm&&(Zr=function(t){uge(this,Zr,ss),rT(t),Iy.call(this);var r=M5(this);try{t(Su(cT,this,r),Su(Cu,this,r))}catch(i){Cu(this,r,i)}},Iy=function(t){_ge(this,{type:ss,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:N5,value:void 0})},Iy.prototype=age(Zr.prototype,{then:function(t,r){var i=xge(this),o=wu(fge(this,Zr));return o.ok=typeof t=="function"?t:!0,o.fail=typeof r=="function"&&r,o.domain=Rm?Dy.domain:void 0,i.parent=!0,i.reactions.push(o),i.state!=N5&&lT(this,i,!1),o.promise},catch:function(e){return this.then(void 0,e)}}),q5=function(){var e=new Iy,t=M5(e);this.promise=e,this.resolve=Su(cT,e,t),this.reject=Su(Cu,e,t)},F5.f=wu=function(e){return e===Zr||e===aT?new q5(e):wge(e)},!ky&&typeof Ey=="function"&&(G5=Ey.prototype.then,sge(Ey.prototype,"then",function(t,r){var i=this;return new Zr(function(o,n){G5.call(i,o,n)}).then(t,r)},{unsafe:!0}),typeof L5=="function"&&Am({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return R5(Zr,L5.apply(oa,arguments))}})));Am({global:!0,wrap:!0,forced:Fm},{Promise:Zr});lge(Zr,ss,!1,!0);cge(ss);aT=D5(ss);Am({target:ss,stat:!0,forced:Fm},{reject:function(t){var r=wu(this);return r.reject.call(void 0,t),r.promise}});Am({target:ss,stat:!0,forced:ky||Fm},{resolve:function(t){return R5(ky&&this===aT?Zr:this,t)}});Am({target:ss,stat:!0,forced:kge},{all:function(t){var r=this,i=wu(r),o=i.resolve,n=i.reject,s=iT(function(){var a=rT(r.resolve),l=[],c=0,d=1;I5(t,function(u){var p=c++,h=!1;l.push(void 0),d++,a.call(r,u).then(function(b){if(h)return;h=!0,l[p]=b,--d||o(l)},n)}),--d||o(l)});return s.error&&n(s.value),i.promise},race:function(t){var r=this,i=wu(r),o=i.reject,n=iT(function(){var s=rT(r.resolve);I5(t,function(a){s.call(r,a).then(i.resolve,o)})});return n.error&&o(n.value),i.promise}})}),$5=x(()=>{"use strict";var Ige=z(),Oge=li(),Age=Ty(),Rge=tT(),Fge=Mc();Ige({target:"Promise",stat:!0},{allSettled:function(t){var r=this,i=Age.f(r),o=i.resolve,n=i.reject,s=Rge(function(){var a=Oge(r.resolve),l=[],c=0,d=1;Fge(t,function(u){var p=c++,h=!1;l.push(void 0),d++,a.call(r,u).then(function(b){if(h)return;h=!0,l[p]={status:"fulfilled",value:b},--d||o(l)},function(b){if(h)return;h=!0,l[p]={status:"rejected",reason:b},--d||o(l)})}),--d||o(l)});return s.error&&n(s.value),i.promise}})}),J5=x(()=>{"use strict";var Pge=z(),Mge=Io(),Pm=LC(),Bge=Se(),Y5=Qi(),Lge=is(),X5=eT(),zge=Nr(),Nge=!!Pm&&Bge(function(){Pm.prototype.finally.call({then:function(){}},function(){})});Pge({target:"Promise",proto:!0,real:!0,forced:Nge},{finally:function(e){var t=Lge(this,Y5("Promise")),r=typeof e=="function";return this.then(r?function(i){return X5(t,e()).then(function(){return i})}:e,r?function(i){return X5(t,e()).then(function(){throw i})}:e)}});!Mge&&typeof Pm=="function"&&!Pm.prototype.finally&&zge(Pm.prototype,"finally",Y5("Promise").prototype.finally)}),Mm=x((H6e,Z5)=>{"use strict";var Uge=z(),jge=Ne(),Q5=nu(),qge=Nr(),Gge=ul(),Wge=Mc(),Hge=ia(),dT=Qe(),uT=Se(),Vge=dm(),Kge=ln(),$ge=Sm();Z5.exports=function(e,t,r){var i=e.indexOf("Map")!==-1,o=e.indexOf("Weak")!==-1,n=i?"set":"add",s=jge[e],a=s&&s.prototype,l=s,c={},d=function(f){var w=a[f];qge(a,f,f=="add"?function(C){return w.call(this,C===0?0:C),this}:f=="delete"?function(T){return o&&!dT(T)?!1:w.call(this,T===0?0:T)}:f=="get"?function(C){return o&&!dT(C)?void 0:w.call(this,C===0?0:C)}:f=="has"?function(C){return o&&!dT(C)?!1:w.call(this,C===0?0:C)}:function(C,F){return w.call(this,C===0?0:C,F),this})};if(Q5(e,typeof s!="function"||!(o||a.forEach&&!uT(function(){new s().entries().next()}))))l=r.getConstructor(t,e,i,n),Gge.REQUIRED=!0;else if(Q5(e,!0)){var u=new l,p=u[n](o?{}:-0,1)!=u,h=uT(function(){u.has(1)}),b=Vge(function(f){new s(f)}),y=!o&&uT(function(){for(var f=new s,w=5;w--;)f[n](w,w);return!f.has(-0)});b||(l=t(function(f,w){Hge(f,l,e);var T=$ge(new s,f,l);return w!=null&&Wge(w,T[n],T,i),T}),l.prototype=a,a.constructor=l),(h||y)&&(d("delete"),d("has"),i&&d("get")),(y||p)&&d(n),o&&a.clear&&delete a.clear}return c[e]=l,Uge({global:!0,forced:l!=s},c),Kge(l,e),o||r.setStrong(l,e,i),l}}),hT=x((V6e,e3)=>{"use strict";var Yge=It().f,Xge=es(),t3=Uc(),Jge=ts(),Zge=ia(),Qge=Mc(),ebe=Qb(),tbe=Bc(),Bm=st(),r3=ul().fastKey,i3=Jr(),o3=i3.set,pT=i3.getterFor;e3.exports={getConstructor:function(e,t,r,i){var o=e(function(l,c){Zge(l,o,t),o3(l,{type:t,index:Xge(null),first:void 0,last:void 0,size:0}),Bm||(l.size=0),c!=null&&Qge(c,l[i],l,r)}),n=pT(t),s=function(l,c,d){var u=n(l),p=a(l,c),h,b;return p?p.value=d:(u.last=p={index:b=r3(c,!0),key:c,value:d,previous:h=u.last,next:void 0,removed:!1},u.first||(u.first=p),h&&(h.next=p),Bm?u.size++:l.size++,b!=="F"&&(u.index[b]=p)),l},a=function(l,c){var d=n(l),u=r3(c),p;if(u!=="F")return d.index[u];for(p=d.first;p;p=p.next)if(p.key==c)return p};return t3(o.prototype,{clear:function(){for(var c=this,d=n(c),u=d.index,p=d.first;p;)p.removed=!0,p.previous&&(p.previous=p.previous.next=void 0),delete u[p.index],p=p.next;d.first=d.last=void 0,Bm?d.size=0:c.size=0},delete:function(l){var c=this,d=n(c),u=a(c,l);if(u){var p=u.next,h=u.previous;delete d.index[u.index],u.removed=!0,h&&(h.next=p),p&&(p.previous=h),d.first==u&&(d.first=p),d.last==u&&(d.last=h),Bm?d.size--:c.size--}return!!u},forEach:function(c){for(var d=n(this),u=Jge(c,arguments.length>1?arguments[1]:void 0,3),p;p=p?p.next:d.first;)for(u(p.value,p.key,this);p&&p.removed;)p=p.previous},has:function(c){return!!a(this,c)}}),t3(o.prototype,r?{get:function(c){var d=a(this,c);return d&&d.value},set:function(c,d){return s(this,c===0?0:c,d)}}:{add:function(c){return s(this,c=c===0?0:c,c)}}),Bm&&Yge(o.prototype,"size",{get:function(){return n(this).size}}),o},setStrong:function(e,t,r){var i=t+" Iterator",o=pT(t),n=pT(i);ebe(e,t,function(s,a){o3(this,{type:i,target:s,state:o(s),kind:a,last:void 0})},function(){for(var s=n(this),a=s.kind,l=s.last;l&&l.removed;)l=l.previous;return!s.target||!(s.last=l=l?l.next:s.state.first)?(s.target=void 0,{value:void 0,done:!0}):a=="keys"?{value:l.key,done:!1}:a=="values"?{value:l.value,done:!1}:{value:[l.key,l.value],done:!1}},r?"entries":"values",!r,!0),tbe(t)}}}),s3=x((K6e,n3)=>{"use strict";var rbe=Mm(),ibe=hT();n3.exports=rbe("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},ibe)}),l3=x(($6e,a3)=>{"use strict";var obe=Mm(),nbe=hT();a3.exports=obe("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},nbe)}),gT=x((Y6e,c3)=>{"use strict";var d3=Uc(),Oy=ul().getWeakData,sbe=ot(),mT=Qe(),abe=ia(),lbe=Mc(),u3=Sr(),p3=Jt(),h3=Jr(),cbe=h3.set,dbe=h3.getterFor,ube=u3.find,pbe=u3.findIndex,hbe=0,Ay=function(e){return e.frozen||(e.frozen=new m3)},m3=function(){this.entries=[]},fT=function(e,t){return ube(e.entries,function(r){return r[0]===t})};m3.prototype={get:function(e){var t=fT(this,e);if(t)return t[1]},has:function(e){return!!fT(this,e)},set:function(e,t){var r=fT(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=pbe(this.entries,function(r){return r[0]===e});return~t&&this.entries.splice(t,1),!!~t}};c3.exports={getConstructor:function(e,t,r,i){var o=e(function(a,l){abe(a,o,t),cbe(a,{type:t,id:hbe++,frozen:void 0}),l!=null&&lbe(l,a[i],a,r)}),n=dbe(t),s=function(a,l,c){var d=n(a),u=Oy(sbe(l),!0);return u===!0?Ay(d).set(l,c):u[d.id]=c,a};return d3(o.prototype,{delete:function(a){var l=n(this);if(!mT(a))return!1;var c=Oy(a);return c===!0?Ay(l).delete(a):c&&p3(c,l.id)&&delete c[l.id]},has:function(l){var c=n(this);if(!mT(l))return!1;var d=Oy(l);return d===!0?Ay(c).has(l):d&&p3(d,c.id)}}),d3(o.prototype,r?{get:function(l){var c=n(this);if(mT(l)){var d=Oy(l);return d===!0?Ay(c).get(l):d?d[c.id]:void 0}},set:function(l,c){return s(this,l,c)}}:{add:function(l){return s(this,l,!0)}}),o}}}),w3=x((X6e,f3)=>{"use strict";var g3=Ne(),mbe=Uc(),fbe=ul(),gbe=Mm(),b3=gT(),Ry=Qe(),Fy=Jr().enforce,bbe=kw(),ybe=!g3.ActiveXObject&&"ActiveXObject"in g3,Py=Object.isExtensible,Lm,y3=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},vbe=f3.exports=gbe("WeakMap",y3,b3);if(bbe&&ybe){Lm=b3.getConstructor(y3,"WeakMap",!0),fbe.REQUIRED=!0;var zm=vbe.prototype,v3=zm.delete,My=zm.has,_3=zm.get,x3=zm.set;mbe(zm,{delete:function(e){if(Ry(e)&&!Py(e)){var t=Fy(this);return t.frozen||(t.frozen=new Lm),v3.call(this,e)||t.frozen.delete(e)}return v3.call(this,e)},has:function(t){if(Ry(t)&&!Py(t)){var r=Fy(this);return r.frozen||(r.frozen=new Lm),My.call(this,t)||r.frozen.has(t)}return My.call(this,t)},get:function(t){if(Ry(t)&&!Py(t)){var r=Fy(this);return r.frozen||(r.frozen=new Lm),My.call(this,t)?_3.call(this,t):r.frozen.get(t)}return _3.call(this,t)},set:function(t,r){if(Ry(t)&&!Py(t)){var i=Fy(this);i.frozen||(i.frozen=new Lm),My.call(this,t)?x3.call(this,t,r):i.frozen.set(t,r)}else x3.call(this,t,r);return this}})}}),S3=x(()=>{"use strict";var _be=Mm(),xbe=gT();_be("WeakSet",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},xbe)}),By=x((Q6e,C3)=>{C3.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"}),bT=x((eNe,T3)=>{var wbe=eo(),Sbe=gt();T3.exports=function(e){if(e===void 0)return 0;var t=wbe(e),r=Sbe(t);if(t!==r)throw RangeError("Wrong length or index");return r}}),E3=x((tNe,k3)=>{var yT=1/0,Cbe=Math.abs,na=Math.pow,Tbe=Math.floor,kbe=Math.log,Ebe=Math.LN2,Dbe=function(e,t,r){var i=new Array(r),o=r*8-t-1,n=(1<<o)-1,s=n>>1,a=t===23?na(2,-24)-na(2,-77):0,l=e<0||e===0&&1/e<0?1:0,c=0,d,u,p;for(e=Cbe(e),e!=e||e===yT?(u=e!=e?1:0,d=n):(d=Tbe(kbe(e)/Ebe),e*(p=na(2,-d))<1&&(d--,p*=2),d+s>=1?e+=a/p:e+=a*na(2,1-s),e*p>=2&&(d++,p/=2),d+s>=n?(u=0,d=n):d+s>=1?(u=(e*p-1)*na(2,t),d=d+s):(u=e*na(2,s-1)*na(2,t),d=0));t>=8;i[c++]=u&255,u/=256,t-=8);for(d=d<<t|u,o+=t;o>0;i[c++]=d&255,d/=256,o-=8);return i[--c]|=l*128,i},Ibe=function(e,t){var r=e.length,i=r*8-t-1,o=(1<<i)-1,n=o>>1,s=i-7,a=r-1,l=e[a--],c=l&127,d;for(l>>=7;s>0;c=c*256+e[a],a--,s-=8);for(d=c&(1<<-s)-1,c>>=-s,s+=t;s>0;d=d*256+e[a],a--,s-=8);if(c===0)c=1-n;else{if(c===o)return d?NaN:l?-yT:yT;d=d+na(2,t),c=c-n}return(l?-1:1)*d*na(2,c-t)};k3.exports={pack:Dbe,unpack:Ibe}}),Um=x((rNe,D3)=>{"use strict";var vT=Ne(),_T=st(),Obe=By(),Abe=Xr(),I3=Uc(),xT=Se(),Ly=ia(),Rbe=eo(),Fbe=gt(),zy=bT(),O3=E3(),Pbe=Ao(),A3=dl(),Mbe=sl().f,Bbe=It().f,Lbe=iy(),R3=ln(),F3=Jr(),Tu=F3.get,P3=F3.set,Ny="ArrayBuffer",Uy="DataView",Nm="prototype",zbe="Wrong length",M3="Wrong index",cn=vT[Ny],to=cn,dn=vT[Uy],jy=dn&&dn[Nm],B3=Object.prototype,qy=vT.RangeError,L3=O3.pack,z3=O3.unpack,N3=function(e){return[e&255]},U3=function(e){return[e&255,e>>8&255]},j3=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]},q3=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Nbe=function(e){return L3(e,23,4)},Ube=function(e){return L3(e,52,8)},Gy=function(e,t){Bbe(e[Nm],t,{get:function(){return Tu(this)[t]}})},hl=function(e,t,r,i){var o=zy(r),n=Tu(e);if(o+t>n.byteLength)throw qy(M3);var s=Tu(n.buffer).bytes,a=o+n.byteOffset,l=s.slice(a,a+t);return i?l:l.reverse()},ml=function(e,t,r,i,o,n){var s=zy(r),a=Tu(e);if(s+t>a.byteLength)throw qy(M3);for(var l=Tu(a.buffer).bytes,c=s+a.byteOffset,d=i(+o),u=0;u<t;u++)l[c+u]=d[n?u:t-u-1]};if(!Obe)to=function(t){Ly(this,to,Ny);var r=zy(t);P3(this,{bytes:Lbe.call(new Array(r),0),byteLength:r}),_T||(this.byteLength=r)},dn=function(t,r,i){Ly(this,dn,Uy),Ly(t,to,Uy);var o=Tu(t).byteLength,n=Rbe(r);if(n<0||n>o)throw qy("Wrong offset");if(i=i===void 0?o-n:Fbe(i),n+i>o)throw qy(zbe);P3(this,{buffer:t,byteLength:i,byteOffset:n}),_T||(this.buffer=t,this.byteLength=i,this.byteOffset=n)},_T&&(Gy(to,"byteLength"),Gy(dn,"buffer"),Gy(dn,"byteLength"),Gy(dn,"byteOffset")),I3(dn[Nm],{getInt8:function(t){return hl(this,1,t)[0]<<24>>24},getUint8:function(t){return hl(this,1,t)[0]},getInt16:function(t){var r=hl(this,2,t,arguments.length>1?arguments[1]:void 0);return(r[1]<<8|r[0])<<16>>16},getUint16:function(t){var r=hl(this,2,t,arguments.length>1?arguments[1]:void 0);return r[1]<<8|r[0]},getInt32:function(t){return q3(hl(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return q3(hl(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return z3(hl(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return z3(hl(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,r){ml(this,1,t,N3,r)},setUint8:function(t,r){ml(this,1,t,N3,r)},setInt16:function(t,r){ml(this,2,t,U3,r,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,r){ml(this,2,t,U3,r,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,r){ml(this,4,t,j3,r,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,r){ml(this,4,t,j3,r,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,r){ml(this,4,t,Nbe,r,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,r){ml(this,8,t,Ube,r,arguments.length>2?arguments[2]:void 0)}});else{if(!xT(function(){cn(1)})||!xT(function(){new cn(-1)})||xT(function(){return new cn,new cn(1.5),new cn(NaN),cn.name!=Ny})){to=function(t){return Ly(this,to),new cn(zy(t))};for(var jbe=to[Nm]=cn[Nm],G3=Mbe(cn),W3=0,wT;G3.length>W3;)(wT=G3[W3++])in to||Abe(to,wT,cn[wT]);jbe.constructor=to}A3&&Pbe(jy)!==B3&&A3(jy,B3);var Wy=new dn(new to(2)),H3=jy.setInt8;Wy.setInt8(0,2147483648),Wy.setInt8(1,2147483649),(Wy.getInt8(0)||!Wy.getInt8(1))&&I3(jy,{setInt8:function(t,r){H3.call(this,t,r<<24>>24)},setUint8:function(t,r){H3.call(this,t,r<<24>>24)}},{unsafe:!0})}R3(to,Ny);R3(dn,Uy);D3.exports={ArrayBuffer:to,DataView:dn}}),K3=x(()=>{"use strict";var qbe=z(),Gbe=Ne(),Wbe=Um(),Hbe=Bc(),ST="ArrayBuffer",V3=Wbe[ST],Vbe=Gbe[ST];qbe({global:!0,forced:Vbe!==V3},{ArrayBuffer:V3});Hbe(ST)}),bt=x((nNe,$3)=>{"use strict";var Kbe=By(),CT=st(),Fi=Ne(),Y3=Qe(),ku=Jt(),TT=lu(),$be=Xr(),kT=Nr(),Ybe=It().f,ET=Ao(),Eu=dl(),Xbe=ht(),Jbe=tu(),jm=Fi.Int8Array,DT=jm&&jm.prototype,X3=Fi.Uint8ClampedArray,J3=X3&&X3.prototype,sa=jm&&ET(jm),un=DT&&ET(DT),Z3=Object.prototype,Q3=Z3.isPrototypeOf,ez=Xbe("toStringTag"),IT=Jbe("TYPED_ARRAY_TAG"),aa=Kbe&&!!Eu&&TT(Fi.opera)!=="Opera",tz=!1,ro,pn={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Zbe=function(t){var r=TT(t);return r==="DataView"||ku(pn,r)},rz=function(e){return Y3(e)&&ku(pn,TT(e))},Qbe=function(e){if(rz(e))return e;throw TypeError("Target is not a typed array")},eye=function(e){if(Eu){if(Q3.call(sa,e))return e}else for(var t in pn)if(ku(pn,ro)){var r=Fi[t];if(r&&(e===r||Q3.call(r,e)))return e}throw TypeError("Target is not a typed array constructor")},tye=function(e,t,r){if(!CT)return;if(r)for(var i in pn){var o=Fi[i];o&&ku(o.prototype,e)&&delete o.prototype[e]}(!un[e]||r)&&kT(un,e,r?t:aa&&DT[e]||t)},rye=function(e,t,r){var i,o;if(!CT)return;if(Eu){if(r)for(i in pn)o=Fi[i],o&&ku(o,e)&&delete o[e];if(!sa[e]||r)try{return kT(sa,e,r?t:aa&&jm[e]||t)}catch(n){}else return}for(i in pn)o=Fi[i],o&&(!o[e]||r)&&kT(o,e,t)};for(ro in pn)Fi[ro]||(aa=!1);if((!aa||typeof sa!="function"||sa===Function.prototype)&&(sa=function(){throw TypeError("Incorrect invocation")},aa))for(ro in pn)Fi[ro]&&Eu(Fi[ro],sa);if((!aa||!un||un===Z3)&&(un=sa.prototype,aa))for(ro in pn)Fi[ro]&&Eu(Fi[ro].prototype,un);aa&&ET(J3)!==un&&Eu(J3,un);if(CT&&!ku(un,ez)){tz=!0,Ybe(un,ez,{get:function(){return Y3(this)?this[IT]:void 0}});for(ro in pn)Fi[ro]&&$be(Fi[ro],IT,ro)}$3.exports={NATIVE_ARRAY_BUFFER_VIEWS:aa,TYPED_ARRAY_TAG:tz&&IT,aTypedArray:Qbe,aTypedArrayConstructor:eye,exportTypedArrayMethod:tye,exportTypedArrayStaticMethod:rye,isView:Zbe,isTypedArray:rz,TypedArray:sa,TypedArrayPrototype:un}}),oz=x(()=>{var iye=z(),iz=bt(),oye=iz.NATIVE_ARRAY_BUFFER_VIEWS;iye({target:"ArrayBuffer",stat:!0,forced:!oye},{isView:iz.isView})}),dz=x(()=>{"use strict";var nye=z(),sye=Se(),nz=Um(),sz=ot(),az=Xs(),aye=gt(),lye=is(),OT=nz.ArrayBuffer,lz=nz.DataView,cz=OT.prototype.slice,cye=sye(function(){return!new OT(2).slice(1,void 0).byteLength});nye({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:cye},{slice:function(t,r){if(cz!==void 0&&r===void 0)return cz.call(sz(this),t);for(var i=sz(this).byteLength,o=az(t,i),n=az(r===void 0?i:r,i),s=new(lye(this,OT))(aye(n-o)),a=new lz(this),l=new lz(s),c=0;o<n;)l.setUint8(c++,a.getUint8(o++));return s}})}),uz=x(()=>{var dye=z(),uye=Um(),pye=By();dye({global:!0,forced:!pye},{DataView:uye.DataView})}),Hy=x((pNe,pz)=>{var hz=Ne(),AT=Se(),hye=dm(),mye=bt().NATIVE_ARRAY_BUFFER_VIEWS,fye=hz.ArrayBuffer,Gc=hz.Int8Array;pz.exports=!mye||!AT(function(){Gc(1)})||!AT(function(){new Gc(-1)})||!hye(function(e){new Gc,new Gc(null),new Gc(1.5),new Gc(e)},!0)||AT(function(){return new Gc(new fye(2),1,void 0).length!==1})}),fz=x((hNe,mz)=>{var gye=eo();mz.exports=function(e){var t=gye(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}}),RT=x((mNe,gz)=>{var bye=fz();gz.exports=function(e,t){var r=bye(e);if(r%t)throw RangeError("Wrong offset");return r}}),FT=x((fNe,bz)=>{var yye=Wt(),vye=gt(),_ye=mu(),xye=ty(),wye=ts(),Sye=bt().aTypedArrayConstructor;bz.exports=function(t){var r=yye(t),i=arguments.length,o=i>1?arguments[1]:void 0,n=o!==void 0,s=_ye(r),a,l,c,d,u,p;if(s!=null&&!xye(s))for(u=s.call(r),p=u.next,r=[];!(d=p.call(u)).done;)r.push(d.value);for(n&&i>2&&(o=wye(o,arguments[2],2)),l=vye(r.length),c=new(Sye(this))(l),a=0;l>a;a++)c[a]=n?o(r[a],a):r[a];return c}}),as=x((gNe,PT)=>{"use strict";var yz=z(),vz=Ne(),Cye=st(),Tye=Hy(),Du=bt(),_z=Um(),xz=ia(),kye=Ys(),qm=Xr(),Eye=gt(),wz=bT(),MT=RT(),Sz=Do(),Gm=Jt(),Dye=lu(),BT=Qe(),Iye=es(),Vy=dl(),Oye=sl().f,Cz=FT(),Aye=Sr().forEach,Rye=Bc(),Tz=It(),kz=zr(),Ez=Jr(),Fye=Sm(),LT=Ez.get,Pye=Ez.set,zT=Tz.f,Mye=kz.f,Bye=Math.round,NT=vz.RangeError,Dz=_z.ArrayBuffer,Lye=_z.DataView,Ky=Du.NATIVE_ARRAY_BUFFER_VIEWS,Iz=Du.TYPED_ARRAY_TAG,Oz=Du.TypedArray,Wm=Du.TypedArrayPrototype,zye=Du.aTypedArrayConstructor,UT=Du.isTypedArray,$y="BYTES_PER_ELEMENT",jT="Wrong length",Az=function(e,t){for(var r=0,i=t.length,o=new(zye(e))(i);i>r;)o[r]=t[r++];return o},Yy=function(e,t){zT(e,t,{get:function(){return LT(this)[t]}})},Rz=function(e){var t;return e instanceof Dz||(t=Dye(e))=="ArrayBuffer"||t=="SharedArrayBuffer"},Fz=function(e,t){return UT(e)&&typeof t!="symbol"&&t in e&&String(+t)==String(t)},Pz=function(t,r){return Fz(t,r=Sz(r,!0))?kye(2,t[r]):Mye(t,r)},Mz=function(t,r,i){return Fz(t,r=Sz(r,!0))&&BT(i)&&Gm(i,"value")&&!Gm(i,"get")&&!Gm(i,"set")&&!i.configurable&&(!Gm(i,"writable")||i.writable)&&(!Gm(i,"enumerable")||i.enumerable)?(t[r]=i.value,t):zT(t,r,i)};Cye?(Ky||(kz.f=Pz,Tz.f=Mz,Yy(Wm,"buffer"),Yy(Wm,"byteOffset"),Yy(Wm,"byteLength"),Yy(Wm,"length")),yz({target:"Object",stat:!0,forced:!Ky},{getOwnPropertyDescriptor:Pz,defineProperty:Mz}),PT.exports=function(e,t,r){var i=e.match(/\d+$/)[0]/8,o=e+(r?"Clamped":"")+"Array",n="get"+e,s="set"+e,a=vz[o],l=a,c=l&&l.prototype,d={},u=function(b,y){var f=LT(b);return f.view[n](y*i+f.byteOffset,!0)},p=function(b,y,f){var w=LT(b);r&&(f=(f=Bye(f))<0?0:f>255?255:f&255),w.view[s](y*i+w.byteOffset,f,!0)},h=function(b,y){zT(b,y,{get:function(){return u(this,y)},set:function(f){return p(this,y,f)},enumerable:!0})};Ky?Tye&&(l=t(function(b,y,f,w){return xz(b,l,o),Fye(function(){return BT(y)?Rz(y)?w!==void 0?new a(y,MT(f,i),w):f!==void 0?new a(y,MT(f,i)):new a(y):UT(y)?Az(l,y):Cz.call(l,y):new a(wz(y))}(),b,l)}),Vy&&Vy(l,Oz),Aye(Oye(a),function(b){b in l||qm(l,b,a[b])}),l.prototype=c):(l=t(function(b,y,f,w){xz(b,l,o);var T=0,C=0,F,k,E;if(!BT(y))E=wz(y),k=E*i,F=new Dz(k);else if(Rz(y)){F=y,C=MT(f,i);var W=y.byteLength;if(w===void 0){if(W%i)throw NT(jT);if(k=W-C,k<0)throw NT(jT)}else if(k=Eye(w)*i,k+C>W)throw NT(jT);E=k/i}else return UT(y)?Az(l,y):Cz.call(l,y);for(Pye(b,{buffer:F,byteOffset:C,byteLength:k,length:E,view:new Lye(F)});T<E;)h(b,T++)}),Vy&&Vy(l,Oz),c=l.prototype=Iye(Wm)),c.constructor!==l&&qm(c,"constructor",l),Iz&&qm(c,Iz,o),d[o]=l,yz({global:!0,forced:l!=a,sham:!Ky},d),$y in l||qm(l,$y,i),$y in c||qm(c,$y,i),Rye(o)}):PT.exports=function(){}}),Bz=x(()=>{var Nye=as();Nye("Int8",function(e){return function(r,i,o){return e(this,r,i,o)}})}),Lz=x(()=>{var Uye=as();Uye("Uint8",function(e){return function(r,i,o){return e(this,r,i,o)}})}),zz=x(()=>{var jye=as();jye("Uint8",function(e){return function(r,i,o){return e(this,r,i,o)}},!0)}),Nz=x(()=>{var qye=as();qye("Int16",function(e){return function(r,i,o){return e(this,r,i,o)}})}),Uz=x(()=>{var Gye=as();Gye("Uint16",function(e){return function(r,i,o){return e(this,r,i,o)}})}),jz=x(()=>{var Wye=as();Wye("Int32",function(e){return function(r,i,o){return e(this,r,i,o)}})}),qz=x(()=>{var Hye=as();Hye("Uint32",function(e){return function(r,i,o){return e(this,r,i,o)}})}),Gz=x(()=>{var Vye=as();Vye("Float32",function(e){return function(r,i,o){return e(this,r,i,o)}})}),Wz=x(()=>{var Kye=as();Kye("Float64",function(e){return function(r,i,o){return e(this,r,i,o)}})}),Hz=x(()=>{"use strict";var $ye=Hy(),Yye=bt().exportTypedArrayStaticMethod,Xye=FT();Yye("from",Xye,$ye)}),Kz=x(()=>{"use strict";var Vz=bt(),Jye=Hy(),Zye=Vz.aTypedArrayConstructor,Qye=Vz.exportTypedArrayStaticMethod;Qye("of",function(){for(var t=0,r=arguments.length,i=new(Zye(this))(r);r>t;)i[t]=arguments[t++];return i},Jye)}),Yz=x(()=>{"use strict";var $z=bt(),eve=YS(),tve=$z.aTypedArray,rve=$z.exportTypedArrayMethod;rve("copyWithin",function(t,r){return eve.call(tve(this),t,r,arguments.length>2?arguments[2]:void 0)})}),Jz=x(()=>{"use strict";var Xz=bt(),ive=Sr().every,ove=Xz.aTypedArray,nve=Xz.exportTypedArrayMethod;nve("every",function(t){return ive(ove(this),t,arguments.length>1?arguments[1]:void 0)})}),Qz=x(()=>{"use strict";var Zz=bt(),sve=iy(),ave=Zz.aTypedArray,lve=Zz.exportTypedArrayMethod;lve("fill",function(t){return sve.apply(ave(this),arguments)})}),e4=x(()=>{"use strict";var qT=bt(),cve=Sr().filter,dve=is(),uve=qT.aTypedArray,pve=qT.aTypedArrayConstructor,hve=qT.exportTypedArrayMethod;hve("filter",function(t){for(var r=cve(uve(this),t,arguments.length>1?arguments[1]:void 0),i=dve(this,this.constructor),o=0,n=r.length,s=new(pve(i))(n);n>o;)s[o]=r[o++];return s})}),r4=x(()=>{"use strict";var t4=bt(),mve=Sr().find,fve=t4.aTypedArray,gve=t4.exportTypedArrayMethod;gve("find",function(t){return mve(fve(this),t,arguments.length>1?arguments[1]:void 0)})}),o4=x(()=>{"use strict";var i4=bt(),bve=Sr().findIndex,yve=i4.aTypedArray,vve=i4.exportTypedArrayMethod;vve("findIndex",function(t){return bve(yve(this),t,arguments.length>1?arguments[1]:void 0)})}),s4=x(()=>{"use strict";var n4=bt(),_ve=Sr().forEach,xve=n4.aTypedArray,wve=n4.exportTypedArrayMethod;wve("forEach",function(t){_ve(xve(this),t,arguments.length>1?arguments[1]:void 0)})}),l4=x(()=>{"use strict";var a4=bt(),Sve=ou().includes,Cve=a4.aTypedArray,Tve=a4.exportTypedArrayMethod;Tve("includes",function(t){return Sve(Cve(this),t,arguments.length>1?arguments[1]:void 0)})}),d4=x(()=>{"use strict";var c4=bt(),kve=ou().indexOf,Eve=c4.aTypedArray,Dve=c4.exportTypedArrayMethod;Dve("indexOf",function(t){return kve(Eve(this),t,arguments.length>1?arguments[1]:void 0)})}),g4=x(()=>{"use strict";var Ive=Ne(),u4=bt(),GT=mm(),Ove=ht(),p4=Ove("iterator"),h4=Ive.Uint8Array,Ave=GT.values,Rve=GT.keys,Fve=GT.entries,WT=u4.aTypedArray,Xy=u4.exportTypedArrayMethod,HT=h4&&h4.prototype[p4],m4=!!HT&&(HT.name=="values"||HT.name==null),f4=function(){return Ave.call(WT(this))};Xy("entries",function(){return Fve.call(WT(this))});Xy("keys",function(){return Rve.call(WT(this))});Xy("values",f4,!m4);Xy(p4,f4,!m4)}),y4=x(()=>{"use strict";var b4=bt(),Pve=b4.aTypedArray,Mve=b4.exportTypedArrayMethod,Bve=[].join;Mve("join",function(t){return Bve.apply(Pve(this),arguments)})}),_4=x(()=>{"use strict";var v4=bt(),Lve=iC(),zve=v4.aTypedArray,Nve=v4.exportTypedArrayMethod;Nve("lastIndexOf",function(t){return Lve.apply(zve(this),arguments)})}),x4=x(()=>{"use strict";var VT=bt(),Uve=Sr().map,jve=is(),qve=VT.aTypedArray,Gve=VT.aTypedArrayConstructor,Wve=VT.exportTypedArrayMethod;Wve("map",function(t){return Uve(qve(this),t,arguments.length>1?arguments[1]:void 0,function(r,i){return new(Gve(jve(r,r.constructor)))(i)})})}),S4=x(()=>{"use strict";var w4=bt(),Hve=hm().left,Vve=w4.aTypedArray,Kve=w4.exportTypedArrayMethod;Kve("reduce",function(t){return Hve(Vve(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)})}),T4=x(()=>{"use strict";var C4=bt(),$ve=hm().right,Yve=C4.aTypedArray,Xve=C4.exportTypedArrayMethod;Xve("reduceRight",function(t){return $ve(Yve(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)})}),E4=x(()=>{"use strict";var k4=bt(),Jve=k4.aTypedArray,Zve=k4.exportTypedArrayMethod,Qve=Math.floor;Zve("reverse",function(){for(var t=this,r=Jve(t).length,i=Qve(r/2),o=0,n;o<i;)n=t[o],t[o++]=t[--r],t[r]=n;return t})}),I4=x(()=>{"use strict";var D4=bt(),e_e=gt(),t_e=RT(),r_e=Wt(),i_e=Se(),o_e=D4.aTypedArray,n_e=D4.exportTypedArrayMethod,s_e=i_e(function(){new Int8Array(1).set({})});n_e("set",function(t){o_e(this);var r=t_e(arguments.length>1?arguments[1]:void 0,1),i=this.length,o=r_e(t),n=e_e(o.length),s=0;if(n+r>i)throw RangeError("Wrong length");for(;s<n;)this[r+s]=o[s++]},s_e)}),O4=x(()=>{"use strict";var KT=bt(),a_e=is(),l_e=Se(),c_e=KT.aTypedArray,d_e=KT.aTypedArrayConstructor,u_e=KT.exportTypedArrayMethod,p_e=[].slice,h_e=l_e(function(){new Int8Array(1).slice()});u_e("slice",function(t,r){for(var i=p_e.call(c_e(this),t,r),o=a_e(this,this.constructor),n=0,s=i.length,a=new(d_e(o))(s);s>n;)a[n]=i[n++];return a},h_e)}),R4=x(()=>{"use strict";var A4=bt(),m_e=Sr().some,f_e=A4.aTypedArray,g_e=A4.exportTypedArrayMethod;g_e("some",function(t){return m_e(f_e(this),t,arguments.length>1?arguments[1]:void 0)})}),P4=x(()=>{"use strict";var F4=bt(),b_e=F4.aTypedArray,y_e=F4.exportTypedArrayMethod,v_e=[].sort;y_e("sort",function(t){return v_e.call(b_e(this),t)})}),L4=x(()=>{"use strict";var M4=bt(),__e=gt(),B4=Xs(),x_e=is(),w_e=M4.aTypedArray,S_e=M4.exportTypedArrayMethod;S_e("subarray",function(t,r){var i=w_e(this),o=i.length,n=B4(t,o);return new(x_e(i,i.constructor))(i.buffer,i.byteOffset+n*i.BYTES_PER_ELEMENT,__e((r===void 0?o:B4(r,o))-n))})}),j4=x(()=>{"use strict";var C_e=Ne(),z4=bt(),$T=Se(),Jy=C_e.Int8Array,N4=z4.aTypedArray,T_e=z4.exportTypedArrayMethod,U4=[].toLocaleString,k_e=[].slice,E_e=!!Jy&&$T(function(){U4.call(new Jy(1))}),D_e=$T(function(){return[1,2].toLocaleString()!=new Jy([1,2]).toLocaleString()})||!$T(function(){Jy.prototype.toLocaleString.call([1,2])});T_e("toLocaleString",function(){return U4.apply(E_e?k_e.call(N4(this)):N4(this),arguments)},D_e)}),G4=x(()=>{"use strict";var I_e=bt().exportTypedArrayMethod,O_e=Se(),A_e=Ne(),q4=A_e.Uint8Array,R_e=q4&&q4.prototype||{},Zy=[].toString,F_e=[].join;O_e(function(){Zy.call({})})&&(Zy=function(){return F_e.call(this)});var P_e=R_e.toString!=Zy;I_e("toString",Zy,P_e)}),W4=x(()=>{var M_e=z(),B_e=Qi(),L_e=li(),z_e=ot(),N_e=Se(),YT=B_e("Reflect","apply"),U_e=Function.apply,j_e=!N_e(function(){YT(function(){})});M_e({target:"Reflect",stat:!0,forced:j_e},{apply:function(t,r,i){return L_e(t),z_e(i),YT?YT(t,r,i):U_e.call(t,r,i)}})}),J4=x(()=>{var q_e=z(),G_e=Qi(),H4=li(),W_e=ot(),V4=Qe(),H_e=es(),V_e=VS(),K4=Se(),XT=G_e("Reflect","construct"),$4=K4(function(){function e(){}return!(XT(function(){},[],e)instanceof e)}),Y4=!K4(function(){XT(function(){})}),X4=$4||Y4;q_e({target:"Reflect",stat:!0,forced:X4,sham:X4},{construct:function(t,r){H4(t),W_e(r);var i=arguments.length<3?t:H4(arguments[2]);if(Y4&&!$4)return XT(t,r,i);if(t==i){switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3])}var o=[null];return o.push.apply(o,r),new(V_e.apply(t,o))}var n=i.prototype,s=H_e(V4(n)?n:Object.prototype),a=Function.apply.call(t,s,r);return V4(a)?a:s}})}),e8=x(()=>{var K_e=z(),$_e=st(),Z4=ot(),Y_e=Do(),Q4=It(),X_e=Se(),J_e=X_e(function(){Reflect.defineProperty(Q4.f({},1,{value:1}),1,{value:2})});K_e({target:"Reflect",stat:!0,forced:J_e,sham:!$_e},{defineProperty:function(t,r,i){Z4(t);var o=Y_e(r,!0);Z4(i);try{return Q4.f(t,o,i),!0}catch(n){return!1}}})}),t8=x(()=>{var Z_e=z(),Q_e=ot(),exe=zr().f;Z_e({target:"Reflect",stat:!0},{deleteProperty:function(t,r){var i=exe(Q_e(t),r);return i&&!i.configurable?!1:delete t[r]}})}),i8=x(()=>{var txe=z(),rxe=Qe(),ixe=ot(),oxe=Jt(),nxe=zr(),sxe=Ao();function r8(e,t){var r=arguments.length<3?e:arguments[2],i,o;if(ixe(e)===r)return e[t];if(i=nxe.f(e,t))return oxe(i,"value")?i.value:i.get===void 0?void 0:i.get.call(r);if(rxe(o=sxe(e)))return r8(o,t,r)}txe({target:"Reflect",stat:!0},{get:r8})}),o8=x(()=>{var axe=z(),lxe=st(),cxe=ot(),dxe=zr();axe({target:"Reflect",stat:!0,sham:!lxe},{getOwnPropertyDescriptor:function(t,r){return dxe.f(cxe(t),r)}})}),n8=x(()=>{var uxe=z(),pxe=ot(),hxe=Ao(),mxe=Yb();uxe({target:"Reflect",stat:!0,sham:!mxe},{getPrototypeOf:function(t){return hxe(pxe(t))}})}),s8=x(()=>{var fxe=z();fxe({target:"Reflect",stat:!0},{has:function(t,r){return r in t}})}),l8=x(()=>{var gxe=z(),bxe=ot(),a8=Object.isExtensible;gxe({target:"Reflect",stat:!0},{isExtensible:function(t){return bxe(t),a8?a8(t):!0}})}),c8=x(()=>{var yxe=z(),vxe=Bb();yxe({target:"Reflect",stat:!0},{ownKeys:vxe})}),d8=x(()=>{var _xe=z(),xxe=Qi(),wxe=ot(),Sxe=gu();_xe({target:"Reflect",stat:!0,sham:!Sxe},{preventExtensions:function(t){wxe(t);try{var r=xxe("Object","preventExtensions");return r&&r(t),!0}catch(i){return!1}}})}),g8=x(()=>{var Cxe=z(),Txe=ot(),u8=Qe(),kxe=Jt(),Exe=Se(),JT=It(),p8=zr(),h8=Ao(),m8=Ys();function f8(e,t,r){var i=arguments.length<4?e:arguments[3],o=p8.f(Txe(e),t),n,s;if(!o){if(u8(s=h8(e)))return f8(s,t,r,i);o=m8(0)}if(kxe(o,"value")){if(o.writable===!1||!u8(i))return!1;if(n=p8.f(i,t)){if(n.get||n.set||n.writable===!1)return!1;n.value=r,JT.f(i,t,n)}else JT.f(i,t,m8(0,r));return!0}return o.set===void 0?!1:(o.set.call(i,r),!0)}var Dxe=Exe(function(){var e=JT.f({},"a",{configurable:!0});return Reflect.set(h8(e),"a",1,e)!==!1});Cxe({target:"Reflect",stat:!0,forced:Dxe},{set:f8})}),y8=x(()=>{var Ixe=z(),Oxe=ot(),Axe=kS(),b8=dl();b8&&Ixe({target:"Reflect",stat:!0},{setPrototypeOf:function(t,r){Oxe(t),Axe(r);try{return b8(t,r),!0}catch(i){return!1}}})}),_8=x((i9e,v8)=>{nS();sS();lS();cS();dS();uS();pS();hS();mS();fS();gS();bS();yS();vS();_S();WR();HR();KR();YR();ZR();tF();iF();sF();aF();lF();dF();pF();hF();mF();fF();bF();yF();vF();_F();xF();Bw();SF();CF();TF();kF();IF();AF();MF();BF();AS();LF();zF();Mw();jF();HF();$F();YF();QS();ZF();tP();rP();nP();sP();cP();dP();mP();oC();bP();yP();_P();SP();CP();DP();IP();RP();FP();PP();mm();jP();qP();GP();XP();JP();mM();SM();DM();IM();OM();AM();FM();BM();NM();HM();$M();JM();ey();eB();tB();rB();iB();oB();nB();sB();aB();lB();cB();dB();uB();pB();yB();cy();vB();_B();xB();CB();DB();AB();LB();zB();jB();GB();WB();HB();VB();KB();YB();JB();tL();oL();aL();dL();pL();mL();fL();yL();_L();SL();TL();EL();DL();IL();OL();AL();PL();LL();xS();zL();NL();UL();VL();YL();e5();i5();wS();K5();$5();J5();s3();l3();w3();S3();K3();oz();dz();uz();Bz();Lz();zz();Nz();Uz();jz();qz();Gz();Wz();Hz();Kz();Yz();Jz();Qz();e4();r4();o4();s4();l4();d4();g4();y4();_4();x4();S4();T4();E4();I4();O4();R4();P4();L4();j4();G4();W4();J4();e8();t8();i8();o8();n8();s8();l8();c8();d8();g8();y8();var Rxe=nl();v8.exports=Rxe}),ZT=x((o9e,x8)=>{x8.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}),S8=x(()=>{var Fxe=Ne(),Pxe=ZT(),QT=tC(),Mxe=Xr();for(var Bxe in Pxe){var w8=Fxe[Bxe],Qy=w8&&w8.prototype;if(Qy&&Qy.forEach!==QT)try{Mxe(Qy,"forEach",QT)}catch(e){Qy.forEach=QT}}}),D8=x(()=>{var Lxe=Ne(),C8=ZT(),Hm=mm(),e1=Xr(),T8=ht(),t1=T8("iterator"),k8=T8("toStringTag"),r1=Hm.values;for(var i1 in C8){var E8=Lxe[i1],la=E8&&E8.prototype;if(la){if(la[t1]!==r1)try{e1(la,t1,r1)}catch(e){la[t1]=r1}if(la[k8]||e1(la,k8,i1),C8[i1]){for(var Iu in Hm)if(la[Iu]!==Hm[Iu])try{e1(la,Iu,Hm[Iu])}catch(e){la[Iu]=Hm[Iu]}}}}}),A8=x(()=>{var zxe=z(),I8=Ne(),O8=Cy(),Nxe=!I8.setImmediate||!I8.clearImmediate;zxe({global:!0,bind:!0,enumerable:!0,forced:Nxe},{setImmediate:O8.set,clearImmediate:O8.clear})}),F8=x(()=>{var Uxe=z(),jxe=Ne(),qxe=QC(),Gxe=Zi(),R8=jxe.process,Wxe=Gxe(R8)=="process";Uxe({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(t){var r=Wxe&&R8.domain;qxe(r?r.bind(t):t)}})}),B8=x(()=>{var Hxe=z(),P8=Ne(),Vxe=rm(),Kxe=[].slice,$xe=/MSIE .\./.test(Vxe),M8=function(e){return function(t,r){var i=arguments.length>2,o=i?Kxe.call(arguments,2):void 0;return e(i?function(){(typeof t=="function"?t:Function(t)).apply(this,o)}:t,r)}};Hxe({global:!0,bind:!0,forced:$xe},{setTimeout:M8(P8.setTimeout),setInterval:M8(P8.setInterval)})}),o1=x((f9e,L8)=>{var Yxe=Se(),Xxe=ht(),Jxe=Io(),Zxe=Xxe("iterator");L8.exports=!Yxe(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach(function(i,o){t.delete("b"),r+=o+i}),Jxe&&!e.toJSON||!t.sort||e.href!=="http://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[Zxe]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||r!=="a1c3"||new URL("http://x",void 0).host!=="x"})}),q8=x((g9e,z8)=>{"use strict";var n1=2147483647,Vm=36,N8=1,s1=26,Qxe=38,e0e=700,t0e=72,r0e=128,i0e="-",o0e=/[^\0-\u007E]/,n0e=/[.\u3002\uFF0E\uFF61]/g,U8="Overflow: input needs wider integers to process",a1=Vm-N8,Ou=Math.floor,l1=String.fromCharCode,s0e=function(e){for(var t=[],r=0,i=e.length;r<i;){var o=e.charCodeAt(r++);if(o>=55296&&o<=56319&&r<i){var n=e.charCodeAt(r++);(n&64512)==56320?t.push(((o&1023)<<10)+(n&1023)+65536):(t.push(o),r--)}else t.push(o)}return t},j8=function(e){return e+22+75*(e<26)},a0e=function(e,t,r){var i=0;for(e=r?Ou(e/e0e):e>>1,e+=Ou(e/t);e>a1*s1>>1;i+=Vm)e=Ou(e/a1);return Ou(i+(a1+1)*e/(e+Qxe))},l0e=function(e){var t=[];e=s0e(e);var r=e.length,i=r0e,o=0,n=t0e,s,a;for(s=0;s<e.length;s++)a=e[s],a<128&&t.push(l1(a));var l=t.length,c=l;for(l&&t.push(i0e);c<r;){var d=n1;for(s=0;s<e.length;s++)a=e[s],a>=i&&a<d&&(d=a);var u=c+1;if(d-i>Ou((n1-o)/u))throw RangeError(U8);for(o+=(d-i)*u,i=d,s=0;s<e.length;s++){if(a=e[s],a<i&&++o>n1)throw RangeError(U8);if(a==i){for(var p=o,h=Vm;;h+=Vm){var b=h<=n?N8:h>=n+s1?s1:h-n;if(p<b)break;var y=p-b,f=Vm-b;t.push(l1(j8(b+y%f))),p=Ou(y/f)}t.push(l1(j8(p))),n=a0e(o,u,c==l),o=0,++c}}++o,++i}return t.join("")};z8.exports=function(e){var t=[],r=e.toLowerCase().replace(n0e,".").split("."),i,o;for(i=0;i<r.length;i++)o=r[i],t.push(o0e.test(o)?"xn--"+l0e(o):o);return t.join(".")}}),W8=x((b9e,G8)=>{var c0e=ot(),d0e=mu();G8.exports=function(e){var t=d0e(e);if(typeof t!="function")throw TypeError(String(e)+" is not iterable");return c0e(t.call(e))}}),p1=x((y9e,H8)=>{"use strict";mm();var V8=z(),K8=Qi(),$8=o1(),Y8=Nr(),u0e=Uc(),p0e=ln(),h0e=Xb(),c1=Jr(),m0e=ia(),f0e=Jt(),g0e=ts(),b0e=lu(),y0e=ot(),X8=Qe(),v0e=es(),J8=Ys(),Z8=W8(),_0e=mu(),x0e=ht(),Q8=K8("fetch"),d1=K8("Headers"),w0e=x0e("iterator"),Au="URLSearchParams",e6=Au+"Iterator",t6=c1.set,hn=c1.getterFor(Au),S0e=c1.getterFor(e6),C0e=/\+/g,r6=Array(4),T0e=function(e){return r6[e-1]||(r6[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},k0e=function(e){try{return decodeURIComponent(e)}catch(t){return e}},i6=function(e){var t=e.replace(C0e," "),r=4;try{return decodeURIComponent(t)}catch(i){for(;r;)t=t.replace(T0e(r--),k0e);return t}},E0e=/[!'()~]|%20/g,D0e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},I0e=function(e){return D0e[e]},o6=function(e){return encodeURIComponent(e).replace(E0e,I0e)},n6=function(e,t){if(t)for(var r=t.split("&"),i=0,o,n;i<r.length;)o=r[i++],o.length&&(n=o.split("="),e.push({key:i6(n.shift()),value:i6(n.join("="))}))},O0e=function(e){this.entries.length=0,n6(this.entries,e)},Ru=function(e,t){if(e<t)throw TypeError("Not enough arguments")},u1=h0e(function(t,r){t6(this,{type:e6,iterator:Z8(hn(t).entries),kind:r})},"Iterator",function(){var t=S0e(this),r=t.kind,i=t.iterator.next(),o=i.value;return i.done||(i.value=r==="keys"?o.key:r==="values"?o.value:[o.key,o.value]),i}),Km=function(){m0e(this,Km,Au);var t=arguments.length>0?arguments[0]:void 0,r=this,i=[],o,n,s,a,l,c,d,u,p;if(t6(r,{type:Au,entries:i,updateURL:function(){},updateSearchParams:O0e}),t!==void 0)if(X8(t))if(o=_0e(t),typeof o=="function")for(n=o.call(t),s=n.next;!(a=s.call(n)).done;){if(l=Z8(y0e(a.value)),c=l.next,(d=c.call(l)).done||(u=c.call(l)).done||!c.call(l).done)throw TypeError("Expected sequence with length 2");i.push({key:d.value+"",value:u.value+""})}else for(p in t)f0e(t,p)&&i.push({key:p,value:t[p]+""});else n6(i,typeof t=="string"?t.charAt(0)==="?"?t.slice(1):t:t+"")},ev=Km.prototype;u0e(ev,{append:function(t,r){Ru(arguments.length,2);var i=hn(this);i.entries.push({key:t+"",value:r+""}),i.updateURL()},delete:function(e){Ru(arguments.length,1);for(var t=hn(this),r=t.entries,i=e+"",o=0;o<r.length;)r[o].key===i?r.splice(o,1):o++;t.updateURL()},get:function(t){Ru(arguments.length,1);for(var r=hn(this).entries,i=t+"",o=0;o<r.length;o++)if(r[o].key===i)return r[o].value;return null},getAll:function(t){Ru(arguments.length,1);for(var r=hn(this).entries,i=t+"",o=[],n=0;n<r.length;n++)r[n].key===i&&o.push(r[n].value);return o},has:function(t){Ru(arguments.length,1);for(var r=hn(this).entries,i=t+"",o=0;o<r.length;)if(r[o++].key===i)return!0;return!1},set:function(t,r){Ru(arguments.length,1);for(var i=hn(this),o=i.entries,n=!1,s=t+"",a=r+"",l=0,c;l<o.length;l++)c=o[l],c.key===s&&(n?o.splice(l--,1):(n=!0,c.value=a));n||o.push({key:s,value:a}),i.updateURL()},sort:function(){var t=hn(this),r=t.entries,i=r.slice(),o,n,s;for(r.length=0,s=0;s<i.length;s++){for(o=i[s],n=0;n<s;n++)if(r[n].key>o.key){r.splice(n,0,o);break}n===s&&r.push(o)}t.updateURL()},forEach:function(t){for(var r=hn(this).entries,i=g0e(t,arguments.length>1?arguments[1]:void 0,3),o=0,n;o<r.length;)n=r[o++],i(n.value,n.key,this)},keys:function(){return new u1(this,"keys")},values:function(){return new u1(this,"values")},entries:function(){return new u1(this,"entries")}},{enumerable:!0});Y8(ev,w0e,ev.entries);Y8(ev,"toString",function(){for(var t=hn(this).entries,r=[],i=0,o;i<t.length;)o=t[i++],r.push(o6(o.key)+"="+o6(o.value));return r.join("&")},{enumerable:!0});p0e(Km,Au);V8({global:!0,forced:!$8},{URLSearchParams:Km});!$8&&typeof Q8=="function"&&typeof d1=="function"&&V8({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var r=[t],i,o,n;return arguments.length>1&&(i=arguments[1],X8(i)&&(o=i.body,b0e(o)===Au&&(n=i.headers?new d1(i.headers):new d1,n.has("content-type")||n.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),i=v0e(i,{body:J8(0,String(o)),headers:J8(0,n)}))),r.push(i)),Q8.apply(this,r)}});H8.exports={URLSearchParams:Km,getState:hn}}),B6=x(()=>{"use strict";ey();var A0e=z(),h1=st(),R0e=o1(),F0e=Ne(),P0e=Gb(),tv=Nr(),M0e=ia(),m1=Jt(),f1=FS(),Fu=OS(),B0e=lm().codeAt,L0e=q8(),z0e=ln(),s6=p1(),a6=Jr(),$m=F0e.URL,N0e=s6.URLSearchParams,g1=s6.getState,U0e=a6.set,Zt=a6.getterFor("URL"),j0e=Math.floor,l6=Math.pow,q0e="Invalid authority",b1="Invalid scheme",Wc="Invalid host",c6="Invalid port",d6=/[A-Za-z]/,G0e=/[\d+-.A-Za-z]/,y1=/\d/,W0e=/^(0x|0X)/,H0e=/^[0-7]+$/,V0e=/^\d+$/,u6=/^[\dA-Fa-f]+$/,K0e=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,$0e=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,Y0e=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,X0e=/[\u0009\u000A\u000D]/g,Ro,v1=function(e,t){var r,i,o;if(t.charAt(0)=="["){if(t.charAt(t.length-1)!="]")return Wc;if(r=Z0e(t.slice(1,-1)),!r)return Wc;e.host=r}else if(Cr(e)){if(t=L0e(t),K0e.test(t))return Wc;if(r=J0e(t),r===null)return Wc;e.host=r}else{if($0e.test(t))return Wc;for(r="",i=Fu(t),o=0;o<i.length;o++)r+=fl(i[o],rv);e.host=r}},J0e=function(e){var t=e.split("."),r,i,o,n,s,a,l;if(t.length&&t[t.length-1]==""&&t.pop(),r=t.length,r>4)return e;for(i=[],o=0;o<r;o++){if(n=t[o],n=="")return e;if(s=10,n.length>1&&n.charAt(0)=="0"&&(s=W0e.test(n)?16:8,n=n.slice(s==8?1:2)),n==="")a=0;else{if(!(s==10?V0e:s==8?H0e:u6).test(n))return e;a=parseInt(n,s)}i.push(a)}for(o=0;o<r;o++)if(a=i[o],o==r-1){if(a>=l6(256,5-r))return null}else if(a>255)return null;for(l=i.pop(),o=0;o<i.length;o++)l+=i[o]*l6(256,3-o);return l},Z0e=function(e){var t=[0,0,0,0,0,0,0,0],r=0,i=null,o=0,n,s,a,l,c,d,u,p=function(){return e.charAt(o)};if(p()==":"){if(e.charAt(1)!=":")return;o+=2,r++,i=r}for(;p();){if(r==8)return;if(p()==":"){if(i!==null)return;o++,r++,i=r;continue}for(n=s=0;s<4&&u6.test(p());)n=n*16+parseInt(p(),16),o++,s++;if(p()=="."){if(s==0)return;if(o-=s,r>6)return;for(a=0;p();){if(l=null,a>0)if(p()=="."&&a<4)o++;else return;if(!y1.test(p()))return;for(;y1.test(p());){if(c=parseInt(p(),10),l===null)l=c;else{if(l==0)return;l=l*10+c}if(l>255)return;o++}t[r]=t[r]*256+l,a++,(a==2||a==4)&&r++}if(a!=4)return;break}else if(p()==":"){if(o++,!p())return}else if(p())return;t[r++]=n}if(i!==null)for(d=r-i,r=7;r!=0&&d>0;)u=t[r],t[r--]=t[i+d-1],t[i+--d]=u;else if(r!=8)return;return t},Q0e=function(e){for(var t=null,r=1,i=null,o=0,n=0;n<8;n++)e[n]!==0?(o>r&&(t=i,r=o),i=null,o=0):(i===null&&(i=n),++o);return o>r&&(t=i,r=o),t},Ym=function(e){var t,r,i,o;if(typeof e=="number"){for(t=[],r=0;r<4;r++)t.unshift(e%256),e=j0e(e/256);return t.join(".")}else if(typeof e=="object"){for(t="",i=Q0e(e),r=0;r<8;r++){if(o&&e[r]===0)continue;o&&(o=!1),i===r?(t+=r?":":"::",o=!0):(t+=e[r].toString(16),r<7&&(t+=":"))}return"["+t+"]"}return e},rv={},p6=f1({},rv,{" ":1,'"':1,"<":1,">":1,"`":1}),h6=f1({},p6,{"#":1,"?":1,"{":1,"}":1}),_1=f1({},h6,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),fl=function(e,t){var r=B0e(e,0);return r>32&&r<127&&!m1(t,e)?e:encodeURIComponent(e)},iv={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Cr=function(e){return m1(iv,e.scheme)},x1=function(e){return e.username!=""||e.password!=""},w1=function(e){return!e.host||e.cannotBeABaseURL||e.scheme=="file"},Xm=function(e,t){var r;return e.length==2&&d6.test(e.charAt(0))&&((r=e.charAt(1))==":"||!t&&r=="|")},m6=function(e){var t;return e.length>1&&Xm(e.slice(0,2))&&(e.length==2||((t=e.charAt(2))==="/"||t==="\\"||t==="?")||t==="#")},f6=function(e){var t=e.path,r=t.length;r&&(e.scheme!="file"||r!=1||!Xm(t[0],!0))&&t.pop()},ewe=function(e){return e==="."||e.toLowerCase()==="%2e"},twe=function(e){return e=e.toLowerCase(),e===".."||e==="%2e."||e===".%2e"||e==="%2e%2e"},S1={},g6={},C1={},b6={},y6={},T1={},v6={},_6={},ov={},nv={},k1={},E1={},D1={},I1={},x6={},O1={},Pu={},ls={},w6={},Hc={},ca={},cs=function(e,t,r,i){var o=r||S1,n=0,s="",a=!1,l=!1,c=!1,d,u,p,h;for(r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(Y0e,"")),t=t.replace(X0e,""),d=Fu(t);n<=d.length;){u=d[n];switch(o){case S1:if(u&&d6.test(u))s+=u.toLowerCase(),o=g6;else{if(r)return b1;o=C1;continue}break;case g6:if(u&&(G0e.test(u)||u=="+"||u=="-"||u=="."))s+=u.toLowerCase();else if(u==":"){if(r&&(Cr(e)!=m1(iv,s)||s=="file"&&(x1(e)||e.port!==null)||e.scheme=="file"&&!e.host))return;if(e.scheme=s,r){Cr(e)&&iv[e.scheme]==e.port&&(e.port=null);return}s="",e.scheme=="file"?o=I1:Cr(e)&&i&&i.scheme==e.scheme?o=b6:Cr(e)?o=_6:d[n+1]=="/"?(o=y6,n++):(e.cannotBeABaseURL=!0,e.path.push(""),o=w6)}else{if(r)return b1;s="",o=C1,n=0;continue}break;case C1:if(!i||i.cannotBeABaseURL&&u!="#")return b1;if(i.cannotBeABaseURL&&u=="#"){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,o=ca;break}o=i.scheme=="file"?I1:T1;continue;case b6:if(u=="/"&&d[n+1]=="/")o=ov,n++;else{o=T1;continue}break;case y6:if(u=="/"){o=nv;break}else{o=ls;continue}case T1:if(e.scheme=i.scheme,u==Ro)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if(u=="/"||u=="\\"&&Cr(e))o=v6;else if(u=="?")e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",o=Hc;else if(u=="#")e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",o=ca;else{e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),o=ls;continue}break;case v6:if(Cr(e)&&(u=="/"||u=="\\"))o=ov;else if(u=="/")o=nv;else{e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,o=ls;continue}break;case _6:if(o=ov,u!="/"||s.charAt(n+1)!="/")continue;n++;break;case ov:if(u!="/"&&u!="\\"){o=nv;continue}break;case nv:if(u=="@"){a&&(s="%40"+s),a=!0,p=Fu(s);for(var b=0;b<p.length;b++){var y=p[b];if(y==":"&&!c){c=!0;continue}var f=fl(y,_1);c?e.password+=f:e.username+=f}s=""}else if(u==Ro||u=="/"||u=="?"||u=="#"||u=="\\"&&Cr(e)){if(a&&s=="")return q0e;n-=Fu(s).length+1,s="",o=k1}else s+=u;break;case k1:case E1:if(r&&e.scheme=="file"){o=O1;continue}else if(u==":"&&!l){if(s=="")return Wc;if(h=v1(e,s),h)return h;if(s="",o=D1,r==E1)return}else if(u==Ro||u=="/"||u=="?"||u=="#"||u=="\\"&&Cr(e)){if(Cr(e)&&s=="")return Wc;if(r&&s==""&&(x1(e)||e.port!==null))return;if(h=v1(e,s),h)return h;if(s="",o=Pu,r)return;continue}else u=="["?l=!0:u=="]"&&(l=!1),s+=u;break;case D1:if(y1.test(u))s+=u;else if(u==Ro||u=="/"||u=="?"||u=="#"||u=="\\"&&Cr(e)||r){if(s!=""){var w=parseInt(s,10);if(w>65535)return c6;e.port=Cr(e)&&w===iv[e.scheme]?null:w,s=""}if(r)return;o=Pu;continue}else return c6;break;case I1:if(e.scheme="file",u=="/"||u=="\\")o=x6;else if(i&&i.scheme=="file")if(u==Ro)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if(u=="?")e.host=i.host,e.path=i.path.slice(),e.query="",o=Hc;else if(u=="#")e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",o=ca;else{m6(d.slice(n).join(""))||(e.host=i.host,e.path=i.path.slice(),f6(e)),o=ls;continue}else{o=ls;continue}break;case x6:if(u=="/"||u=="\\"){o=O1;break}i&&i.scheme=="file"&&!m6(d.slice(n).join(""))&&(Xm(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),o=ls;continue;case O1:if(u==Ro||u=="/"||u=="\\"||u=="?"||u=="#"){if(!r&&Xm(s))o=ls;else if(s==""){if(e.host="",r)return;o=Pu}else{if(h=v1(e,s),h)return h;if(e.host=="localhost"&&(e.host=""),r)return;s="",o=Pu}continue}else s+=u;break;case Pu:if(Cr(e)){if(o=ls,u!="/"&&u!="\\")continue}else if(!r&&u=="?")e.query="",o=Hc;else if(!r&&u=="#")e.fragment="",o=ca;else if(u!=Ro&&(o=ls,u!="/"))continue;break;case ls:if(u==Ro||u=="/"||u=="\\"&&Cr(e)||!r&&(u=="?"||u=="#")){if(twe(s)?(f6(e),u!="/"&&!(u=="\\"&&Cr(e))&&e.path.push("")):ewe(s)?u!="/"&&!(u=="\\"&&Cr(e))&&e.path.push(""):(e.scheme=="file"&&!e.path.length&&Xm(s)&&(e.host&&(e.host=""),s=s.charAt(0)+":"),e.path.push(s)),s="",e.scheme=="file"&&(u==Ro||u=="?"||u=="#"))for(;e.path.length>1&&e.path[0]==="";)e.path.shift();u=="?"?(e.query="",o=Hc):u=="#"&&(e.fragment="",o=ca)}else s+=fl(u,h6);break;case w6:u=="?"?(e.query="",o=Hc):u=="#"?(e.fragment="",o=ca):u!=Ro&&(e.path[0]+=fl(u,rv));break;case Hc:!r&&u=="#"?(e.fragment="",o=ca):u!=Ro&&(u=="'"&&Cr(e)?e.query+="%27":u=="#"?e.query+="%23":e.query+=fl(u,rv));break;case ca:u!=Ro&&(e.fragment+=fl(u,p6));break}n++}},Vc=function(t){var r=M0e(this,Vc,"URL"),i=arguments.length>1?arguments[1]:void 0,o=String(t),n=U0e(r,{type:"URL"}),s,a;if(i!==void 0){if(i instanceof Vc)s=Zt(i);else if(a=cs(s={},String(i)),a)throw TypeError(a)}if(a=cs(n,o,null,s),a)throw TypeError(a);var l=n.searchParams=new N0e,c=g1(l);c.updateSearchParams(n.query),c.updateURL=function(){n.query=String(l)||null},h1||(r.href=sv.call(r),r.origin=S6.call(r),r.protocol=C6.call(r),r.username=T6.call(r),r.password=k6.call(r),r.host=E6.call(r),r.hostname=D6.call(r),r.port=I6.call(r),r.pathname=O6.call(r),r.search=A6.call(r),r.searchParams=R6.call(r),r.hash=F6.call(r))},A1=Vc.prototype,sv=function(){var e=Zt(this),t=e.scheme,r=e.username,i=e.password,o=e.host,n=e.port,s=e.path,a=e.query,l=e.fragment,c=t+":";return o!==null?(c+="//",x1(e)&&(c+=r+(i?":"+i:"")+"@"),c+=Ym(o),n!==null&&(c+=":"+n)):t=="file"&&(c+="//"),c+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",a!==null&&(c+="?"+a),l!==null&&(c+="#"+l),c},S6=function(){var e=Zt(this),t=e.scheme,r=e.port;if(t=="blob")try{return new URL(t.path[0]).origin}catch(i){return"null"}return t=="file"||!Cr(e)?"null":t+"://"+Ym(e.host)+(r!==null?":"+r:"")},C6=function(){return Zt(this).scheme+":"},T6=function(){return Zt(this).username},k6=function(){return Zt(this).password},E6=function(){var e=Zt(this),t=e.host,r=e.port;return t===null?"":r===null?Ym(t):Ym(t)+":"+r},D6=function(){var e=Zt(this).host;return e===null?"":Ym(e)},I6=function(){var e=Zt(this).port;return e===null?"":String(e)},O6=function(){var e=Zt(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},A6=function(){var e=Zt(this).query;return e?"?"+e:""},R6=function(){return Zt(this).searchParams},F6=function(){var e=Zt(this).fragment;return e?"#"+e:""},Fo=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};h1&&P0e(A1,{href:Fo(sv,function(e){var t=Zt(this),r=String(e),i=cs(t,r);if(i)throw TypeError(i);g1(t.searchParams).updateSearchParams(t.query)}),origin:Fo(S6),protocol:Fo(C6,function(e){var t=Zt(this);cs(t,String(e)+":",S1)}),username:Fo(T6,function(e){var t=Zt(this),r=Fu(String(e));if(w1(t))return;t.username="";for(var i=0;i<r.length;i++)t.username+=fl(r[i],_1)}),password:Fo(k6,function(e){var t=Zt(this),r=Fu(String(e));if(w1(t))return;t.password="";for(var i=0;i<r.length;i++)t.password+=fl(r[i],_1)}),host:Fo(E6,function(e){var t=Zt(this);if(t.cannotBeABaseURL)return;cs(t,String(e),k1)}),hostname:Fo(D6,function(e){var t=Zt(this);if(t.cannotBeABaseURL)return;cs(t,String(e),E1)}),port:Fo(I6,function(e){var t=Zt(this);if(w1(t))return;e=String(e),e==""?t.port=null:cs(t,e,D1)}),pathname:Fo(O6,function(e){var t=Zt(this);if(t.cannotBeABaseURL)return;t.path=[],cs(t,e+"",Pu)}),search:Fo(A6,function(e){var t=Zt(this);e=String(e),e==""?t.query=null:(e.charAt(0)=="?"&&(e=e.slice(1)),t.query="",cs(t,e,Hc)),g1(t.searchParams).updateSearchParams(t.query)}),searchParams:Fo(R6),hash:Fo(F6,function(e){var t=Zt(this);if(e=String(e),e==""){t.fragment=null;return}e.charAt(0)=="#"&&(e=e.slice(1)),t.fragment="",cs(t,e,ca)})});tv(A1,"toJSON",function(){return sv.call(this)},{enumerable:!0});tv(A1,"toString",function(){return sv.call(this)},{enumerable:!0});if($m){var P6=$m.createObjectURL,M6=$m.revokeObjectURL;P6&&tv(Vc,"createObjectURL",function(t){return P6.apply($m,arguments)}),M6&&tv(Vc,"revokeObjectURL",function(t){return M6.apply($m,arguments)})}z0e(Vc,"URL");A0e({global:!0,forced:!R0e,sham:!h1},{URL:Vc})}),L6=x(()=>{"use strict";var rwe=z();rwe({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})}),N6=x((S9e,z6)=>{S8();D8();A8();F8();B8();B6();L6();p1();var iwe=nl();z6.exports=iwe}),j6=x((C9e,U6)=>{_8();N6();var owe=nl();U6.exports=owe}),G6=x((T9e,R1)=>{var q6=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,i,o=typeof Symbol=="function"?Symbol:{},n=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function l(H,L,M){return Object.defineProperty(H,L,{value:M,enumerable:!0,configurable:!0,writable:!0}),H[L]}try{l({},"")}catch(H){l=function(L,M,q){return L[M]=q}}function c(H,L,M,q){var G=L&&L.prototype instanceof f?L:f,we=Object.create(G.prototype),Q=new he(q||[]);return we._invoke=D(H,M,Q),we}e.wrap=c;function d(H,L,M){try{return{type:"normal",arg:H.call(L,M)}}catch(q){return{type:"throw",arg:q}}}var u="suspendedStart",p="suspendedYield",h="executing",b="completed",y={};function f(){}function w(){}function T(){}var C={};C[n]=function(){return this};var F=Object.getPrototypeOf,k=F&&F(F(ue([])));k&&k!==t&&r.call(k,n)&&(C=k);var E=T.prototype=f.prototype=Object.create(C);w.prototype=E.constructor=T,T.constructor=w,w.displayName=l(T,a,"GeneratorFunction");function W(H){["next","throw","return"].forEach(function(L){l(H,L,function(M){return this._invoke(L,M)})})}e.isGeneratorFunction=function(H){var L=typeof H=="function"&&H.constructor;return L?L===w||(L.displayName||L.name)==="GeneratorFunction":!1},e.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,T):(H.__proto__=T,l(H,a,"GeneratorFunction")),H.prototype=Object.create(E),H},e.awrap=function(H){return{__await:H}};function K(H,L){function M(we,Q,oe,ae){var ze=d(H[we],H,Q);if(ze.type==="throw")ae(ze.arg);else{var St=ze.arg,Kr=St.value;return Kr&&typeof Kr=="object"&&r.call(Kr,"__await")?L.resolve(Kr.__await).then(function(Lr){M("next",Lr,oe,ae)},function(Lr){M("throw",Lr,oe,ae)}):L.resolve(Kr).then(function(Lr){St.value=Lr,oe(St)},function(Lr){return M("throw",Lr,oe,ae)})}}var q;function G(we,Q){function oe(){return new L(function(ae,ze){M(we,Q,ae,ze)})}return q=q?q.then(oe,oe):oe()}this._invoke=G}W(K.prototype),K.prototype[s]=function(){return this},e.AsyncIterator=K,e.async=function(H,L,M,q,G){G===void 0&&(G=Promise);var we=new K(c(H,L,M,q),G);return e.isGeneratorFunction(L)?we:we.next().then(function(Q){return Q.done?Q.value:we.next()})};function D(H,L,M){var q=u;return function(we,Q){if(q===h)throw new Error("Generator is already running");if(q===b){if(we==="throw")throw Q;return ct()}for(M.method=we,M.arg=Q;;){var oe=M.delegate;if(oe){var ae=B(oe,M);if(ae){if(ae===y)continue;return ae}}if(M.method==="next")M.sent=M._sent=M.arg;else if(M.method==="throw"){if(q===u)throw q=b,M.arg;M.dispatchException(M.arg)}else M.method==="return"&&M.abrupt("return",M.arg);q=h;var ze=d(H,L,M);if(ze.type==="normal"){if(q=M.done?b:p,ze.arg===y)continue;return{value:ze.arg,done:M.done}}else ze.type==="throw"&&(q=b,M.method="throw",M.arg=ze.arg)}}}function B(H,L){var M=H.iterator[L.method];if(M===i){if(L.delegate=null,L.method==="throw"){if(H.iterator.return&&(L.method="return",L.arg=i,B(H,L),L.method==="throw"))return y;L.method="throw",L.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var q=d(M,H.iterator,L.arg);if(q.type==="throw")return L.method="throw",L.arg=q.arg,L.delegate=null,y;var G=q.arg;if(!G)return L.method="throw",L.arg=new TypeError("iterator result is not an object"),L.delegate=null,y;if(G.done)L[H.resultName]=G.value,L.next=H.nextLoc,L.method!=="return"&&(L.method="next",L.arg=i);else return G;return L.delegate=null,y}W(E),l(E,a,"Generator"),E[n]=function(){return this},E.toString=function(){return"[object Generator]"};function Y(H){var L={tryLoc:H[0]};1 in H&&(L.catchLoc=H[1]),2 in H&&(L.finallyLoc=H[2],L.afterLoc=H[3]),this.tryEntries.push(L)}function de(H){var L=H.completion||{};L.type="normal",delete L.arg,H.completion=L}function he(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(Y,this),this.reset(!0)}e.keys=function(H){var L=[];for(var M in H)L.push(M);return L.reverse(),function q(){for(;L.length;){var G=L.pop();if(G in H)return q.value=G,q.done=!1,q}return q.done=!0,q}};function ue(H){if(H){var L=H[n];if(L)return L.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length)){var M=-1,q=function G(){for(;++M<H.length;)if(r.call(H,M))return G.value=H[M],G.done=!1,G;return G.value=i,G.done=!0,G};return q.next=q}}return{next:ct}}e.values=ue;function ct(){return{value:i,done:!0}}return he.prototype={constructor:he,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(de),!H)for(var L in this)L.charAt(0)==="t"&&r.call(this,L)&&!isNaN(+L.slice(1))&&(this[L]=i)},stop:function(){this.done=!0;var H=this.tryEntries[0],L=H.completion;if(L.type==="throw")throw L.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var L=this;function M(ae,ze){return we.type="throw",we.arg=H,L.next=ae,ze&&(L.method="next",L.arg=i),!!ze}for(var q=this.tryEntries.length-1;q>=0;--q){var G=this.tryEntries[q],we=G.completion;if(G.tryLoc==="root")return M("end");if(G.tryLoc<=this.prev){var Q=r.call(G,"catchLoc"),oe=r.call(G,"finallyLoc");if(Q&&oe){if(this.prev<G.catchLoc)return M(G.catchLoc,!0);if(this.prev<G.finallyLoc)return M(G.finallyLoc)}else if(Q){if(this.prev<G.catchLoc)return M(G.catchLoc,!0)}else if(oe){if(this.prev<G.finallyLoc)return M(G.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(H,L){for(var M=this.tryEntries.length-1;M>=0;--M){var q=this.tryEntries[M];if(q.tryLoc<=this.prev&&r.call(q,"finallyLoc")&&this.prev<q.finallyLoc){var G=q;break}}G&&(H==="break"||H==="continue")&&G.tryLoc<=L&&L<=G.finallyLoc&&(G=null);var we=G?G.completion:{};return we.type=H,we.arg=L,G?(this.method="next",this.next=G.finallyLoc,y):this.complete(we)},complete:function(H,L){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&L&&(this.next=L),y},finish:function(H){for(var L=this.tryEntries.length-1;L>=0;--L){var M=this.tryEntries[L];if(M.finallyLoc===H)return this.complete(M.completion,M.afterLoc),de(M),y}},catch:function(H){for(var L=this.tryEntries.length-1;L>=0;--L){var M=this.tryEntries[L];if(M.tryLoc===H){var q=M.completion;if(q.type==="throw"){var G=q.arg;de(M)}return G}}throw new Error("illegal catch attempt")},delegateYield:function(H,L,M){return this.delegate={iterator:ue(H),resultName:L,nextLoc:M},this.method==="next"&&(this.arg=i),y}},e}(typeof R1=="object"?R1.exports:{});try{regeneratorRuntime=q6}catch(e){Function("r","regeneratorRuntime = r")(q6)}}),F1=x((k9e,W6)=>{var nwe=Ne(),swe=ts(),awe=Function.call;W6.exports=function(e,t,r){return swe(awe,nwe[e].prototype[t],r)}}),V6=x((E9e,H6)=>{QS();var lwe=F1();H6.exports=lwe("Array","find")}),$6=x((D9e,K6)=>{var cwe=V6();K6.exports=cwe}),X6=x((I9e,Y6)=>{oC();var dwe=F1();Y6.exports=dwe("Array","map")}),Z6=x((O9e,J6)=>{var uwe=X6();J6.exports=uwe}),Ge=x((pwe,P1)=>{Tt(pwe,{$mobx:()=>ZN,FlowCancellationError:()=>vv,IDerivationState:()=>at,ObservableMap:()=>tf,ObservableSet:()=>rf,Reaction:()=>df,_allowStateChanges:()=>Gwe,_allowStateChangesInsideComputed:()=>Wwe,_allowStateReadsEnd:()=>Uu,_allowStateReadsStart:()=>fv,_endAction:()=>wN,_getAdministration:()=>hs,_getGlobalState:()=>Ywe,_interceptReads:()=>ySe,_isComputingDerivation:()=>Lwe,_resetGlobalState:()=>Xwe,_startAction:()=>xN,action:()=>xl,autorun:()=>Q1,comparer:()=>$c,computed:()=>fN,configure:()=>uSe,createAtom:()=>q1,decorate:()=>pSe,entries:()=>kSe,extendObservable:()=>$1,extendShallowObservable:()=>hSe,flow:()=>bSe,get:()=>DSe,getAtom:()=>xn,getDebugName:()=>xv,getDependencyTree:()=>DN,getObserverTree:()=>mSe,has:()=>jN,intercept:()=>xSe,isAction:()=>aSe,isArrayLike:()=>xwe,isBoxedObservable:()=>Z1,isComputed:()=>wSe,isComputedProp:()=>SSe,isFlowCancellationError:()=>gSe,isObservable:()=>Lu,isObservableArray:()=>Qr,isObservableMap:()=>Tr,isObservableObject:()=>pi,isObservableProp:()=>CSe,isObservableSet:()=>ui,keys:()=>Gu,observable:()=>kr,observe:()=>ASe,onBecomeObserved:()=>nN,onBecomeUnobserved:()=>j1,onReactionError:()=>Qwe,reaction:()=>dSe,remove:()=>ESe,runInAction:()=>sSe,set:()=>UN,spy:()=>AN,toJS:()=>FSe,trace:()=>IN,transaction:()=>ms,untracked:()=>J1,values:()=>TSe,when:()=>BSe});var hwe="An invariant failed, however the error is obfuscated because this is an production build.",av=[];Object.freeze(av);var M1={};Object.freeze(M1);var mwe={};function Mu(){return typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:mwe}function di(){return++le.mobxGuid}function Ke(e){throw Pi(!1,e),"X"}function Pi(e,t){if(!e)throw new Error("[mobx] "+(t||hwe))}var Q6=[];function mn(e,t){return!1;if(t)return mn("'"+e+"', use '"+t+"' instead.");if(Q6.indexOf(e)!==-1)return!1}function B1(e){var t=!1;return function(){return t?void 0:(t=!0,e.apply(this,arguments))}}var lv=function(){};function fwe(e){var t=[];return e.forEach(function(r){t.indexOf(r)===-1&&t.push(r)}),t}function L1(e){return e!==null&&typeof e=="object"}function Kc(e){if(e===null||typeof e!="object")return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}function gwe(e){if(Bu(e)||Tr(e))return e;if(Array.isArray(e))return new Map(e);if(Kc(e)){var t=new Map;for(var r in e)t.set(r,e[r]);return t}else return Ke("Cannot convert to map from '"+e+"'")}function bwe(e,t){for(var r=0;r<t.length;r++)da(e,t[r],e[t[r]])}function da(e,t,r){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:r})}function Jm(e,t,r){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}function ywe(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!r||r.configurable!==!1&&r.writable!==!1}function vwe(e,t){}function gl(e,t){var r="isMobX"+e;return t.prototype[r]=!0,function(i){return L1(i)&&i[r]===!0}}function _we(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)}function xwe(e){return Array.isArray(e)||Qr(e)}function Bu(e){return Mu().Map!==void 0&&e instanceof Mu().Map}function Zm(e){return e instanceof Set}function fn(e){for(var t=[];;){var r=e.next();if(r.done)break;t.push(r.value)}return t}function eN(){return typeof Symbol=="function"&&Symbol.toPrimitive||"@@toPrimitive"}function tN(e){return e===null?null:typeof e=="object"?""+e:e}function rN(e,t){for(var r=e.next();!r.done;)t(r.value),r=e.next()}function iN(){return typeof Symbol=="function"&&Symbol.iterator||"@@iterator"}function z1(e,t){Jm(e,iN(),t)}function Qm(e){return e[iN()]=wwe,e}function N1(){return typeof Symbol=="function"&&Symbol.toStringTag||"@@toStringTag"}function wwe(){return this}var cv=function(){function e(t){t===void 0&&(t="Atom@"+di()),this.name=t,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=at.NOT_TRACKING}return e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.reportObserved=function(){return oN(this)},e.prototype.reportChanged=function(){gn(),Swe(this),bn()},e.prototype.toString=function(){return this.name},e}(),U1=gl("Atom",cv);function q1(e,t,r){t===void 0&&(t=lv),r===void 0&&(r=lv);var i=new cv(e);return nN(i,t),j1(i,r),i}function sN(e,t){return e===t}function Cwe(e,t){return G1(e,t)}function Twe(e,t){return G1(e,t,1)}function kwe(e,t){return _we(e,t)||sN(e,t)}var $c={identity:sN,structural:Cwe,default:kwe,shallow:Twe};var W1=function(e,t){return W1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},W1(e,t)};function aN(e,t){W1(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var kt=function(){return kt=Object.assign||function(t){for(var r,i=1,o=arguments.length;i<o;i++){r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kt.apply(this,arguments)};function H1(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),o,n=[],s;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)n.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return n}function V1(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(H1(arguments[t]));return e}var Ewe={},Dwe={};function Iwe(e,t){var r=t?Ewe:Dwe;return r[e]||(r[e]={configurable:!0,enumerable:t,get:function(){return Yc(this),this[e]},set:function(i){Yc(this),this[e]=i}})}function Yc(e){if(e.__mobxDidRunLazyInitializers===!0)return;var t=e.__mobxDecorators;if(t){da(e,"__mobxDidRunLazyInitializers",!0);for(var r in t){var i=t[r];i.propertyCreator(e,i.prop,i.descriptor,i.decoratorTarget,i.decoratorArguments)}}}function cN(e,t){return function(){var i,o=function(s,a,l,c){if(c===!0)return t(s,a,l,s,i),null;if(!Object.prototype.hasOwnProperty.call(s,"__mobxDecorators")){var d=s.__mobxDecorators;da(s,"__mobxDecorators",kt({},d))}return s.__mobxDecorators[a]={prop:a,propertyCreator:t,descriptor:l,decoratorTarget:s,decoratorArguments:i},Iwe(a,e)};return lN(arguments)?(i=av,o.apply(null,arguments)):(i=Array.prototype.slice.call(arguments),o)}}function lN(e){return(e.length===2||e.length===3)&&typeof e[1]=="string"||e.length===4&&e[3]===!0}function ef(e,t,r){return Lu(e)?e:Array.isArray(e)?kr.array(e,{name:r}):Kc(e)?kr.object(e,void 0,{name:r}):Bu(e)?kr.map(e,{name:r}):Zm(e)?kr.set(e,{name:r}):e}function Owe(e,t,r){return e==null||(pi(e)||Qr(e)||Tr(e)||ui(e))?e:Array.isArray(e)?kr.array(e,{name:r,deep:!1}):Kc(e)?kr.object(e,void 0,{name:r,deep:!1}):Bu(e)?kr.map(e,{name:r,deep:!1}):Zm(e)?kr.set(e,{name:r,deep:!1}):Ke(!1)}function dv(e){return e}function Awe(e,t,r){return G1(e,t)?t:e}function uv(e){Pi(e);var t=cN(!0,function(i,o,n,s,a){var l=n?n.initializer?n.initializer.call(i):n.value:void 0;dN(i,o,l,e)}),r=typeof process!="undefined"&&process.env&&!1?function(){return arguments.length<2?Ke("Incorrect decorator invocation. @observable decorator doesn't expect any arguments"):t.apply(null,arguments)}:t;return r.enhancer=e,r}var uN={deep:!0,name:void 0,defaultDecorator:void 0},pN={deep:!1,name:void 0,defaultDecorator:void 0};Object.freeze(uN);Object.freeze(pN);function zu(e){return e==null?uN:typeof e=="string"?{name:e,deep:!0}:e}function pv(e){return e.defaultDecorator?e.defaultDecorator.enhancer:e.deep===!1?dv:ef}var K1=uv(ef),Rwe=uv(Owe),hN=uv(dv),Fwe=uv(Awe);function Pwe(e,t,r){if(typeof arguments[1]=="string")return K1.apply(null,arguments);if(Lu(e))return e;var i=Kc(e)?kr.object(e,t,r):Array.isArray(e)?kr.array(e,t):Bu(e)?kr.map(e,t):Zm(e)?kr.set(e,t):e;if(i!==e)return i;Ke(!1)}var mN={box:function(e,t){arguments.length>2&&ua("box");var r=zu(t);return new bl(e,pv(r),r.name,!0,r.equals)},shallowBox:function(e,t){return arguments.length>2&&ua("shallowBox"),mn("observable.shallowBox","observable.box(value, { deep: false })"),kr.box(e,{name:t,deep:!1})},array:function(e,t){arguments.length>2&&ua("array");var r=zu(t);return new ds(e,pv(r),r.name)},shallowArray:function(e,t){return arguments.length>2&&ua("shallowArray"),mn("observable.shallowArray","observable.array(values, { deep: false })"),kr.array(e,{name:t,deep:!1})},map:function(e,t){arguments.length>2&&ua("map");var r=zu(t);return new tf(e,pv(r),r.name)},shallowMap:function(e,t){return arguments.length>2&&ua("shallowMap"),mn("observable.shallowMap","observable.map(values, { deep: false })"),kr.map(e,{name:t,deep:!1})},set:function(e,t){arguments.length>2&&ua("set");var r=zu(t);return new rf(e,pv(r),r.name)},object:function(e,t,r){typeof arguments[1]=="string"&&ua("object");var i=zu(r);return $1({},e,t,i)},shallowObject:function(e,t){return typeof arguments[1]=="string"&&ua("shallowObject"),mn("observable.shallowObject","observable.object(values, {}, { deep: false })"),kr.object(e,{},{name:t,deep:!1})},ref:hN,shallow:Rwe,deep:K1,struct:Fwe},kr=Pwe;Object.keys(mN).forEach(function(e){return kr[e]=mN[e]});function ua(e){Ke("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}var hv=cN(!1,function(e,t,r,i,o){var n=r.get,s=r.set,a=o[0]||{};Mwe(e,t,kt({get:n,set:s},a))}),Bwe=hv({equals:$c.structural}),fN=function(t,r,i){if(typeof r=="string")return hv.apply(null,arguments);if(t!==null&&typeof t=="object"&&arguments.length===1)return hv.apply(null,arguments);var o=typeof r=="object"?r:{};return o.get=t,o.set=typeof r=="function"?r:o.set,o.name=o.name||t.name||"",new yl(o)};fN.struct=Bwe;var at;(function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"})(at||(at={}));var yn;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(yn||(yn={}));var mv=function(){function e(t){this.cause=t}return e}();function of(e){return e instanceof mv}function Y1(e){switch(e.dependenciesState){case at.UP_TO_DATE:return!1;case at.NOT_TRACKING:case at.STALE:return!0;case at.POSSIBLY_STALE:{for(var t=fv(!0),r=Nu(),i=e.observing,o=i.length,n=0;n<o;n++){var s=i[n];if(ju(s)){if(le.disableErrorBoundaries)s.get();else try{s.get()}catch(a){return vl(r),Uu(t),!0}if(e.dependenciesState===at.STALE)return vl(r),Uu(t),!0}}return gN(e),vl(r),Uu(t),!1}}}function Lwe(){return le.trackingDerivation!==null}function qu(e){var t=e.observers.length>0;le.computationDepth>0&&t&&Ke(!1),!le.allowStateChanges&&(t||le.enforceActions==="strict")&&Ke(!1)}function zwe(e){}function bN(e,t,r){var i=fv(!0);gN(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++le.runId;var o=le.trackingDerivation;le.trackingDerivation=e;var n;if(le.disableErrorBoundaries===!0)n=t.call(r);else try{n=t.call(r)}catch(s){n=new mv(s)}return le.trackingDerivation=o,Uwe(e),e.observing.length===0&&Nwe(e),Uu(i),n}function Nwe(e){return}function Uwe(e){for(var t=e.observing,r=e.observing=e.newObserving,i=at.UP_TO_DATE,o=0,n=e.unboundDepsCount,s=0;s<n;s++){var a=r[s];a.diffValue===0&&(a.diffValue=1,o!==s&&(r[o]=a),o++),a.dependenciesState>i&&(i=a.dependenciesState)}for(r.length=o,e.newObserving=null,n=t.length;n--;){var a=t[n];a.diffValue===0&&yN(a,e),a.diffValue=0}for(;o--;){var a=r[o];a.diffValue===1&&(a.diffValue=0,jwe(a,e))}i!==at.UP_TO_DATE&&(e.dependenciesState=i,e.onBecomeStale())}function X1(e){var t=e.observing;e.observing=[];for(var r=t.length;r--;)yN(t[r],e);e.dependenciesState=at.NOT_TRACKING}function J1(e){var t=Nu(),r=e();return vl(t),r}function Nu(){var e=le.trackingDerivation;return le.trackingDerivation=null,e}function vl(e){le.trackingDerivation=e}function fv(e){var t=le.allowStateReads;return le.allowStateReads=e,t}function Uu(e){le.allowStateReads=e}function gN(e){if(e.dependenciesState===at.UP_TO_DATE)return;e.dependenciesState=at.UP_TO_DATE;for(var t=e.observing,r=t.length;r--;)t[r].lowestObserverState=at.UP_TO_DATE}var gv=0,qwe=1,vN=Object.getOwnPropertyDescriptor(function(){},"name"),A9e=vN&&vN.configurable;function _l(e,t){var r=function(){return _N(e,t,this,arguments)};return r.isMobxAction=!0,r}function _N(e,t,r,i){var o=xN(e,r,i);try{return t.apply(r,i)}catch(n){throw o.error=n,n}finally{wN(o)}}function xN(e,t,r){var i=Ur()&&!!e,o=0;if(i){o=Date.now();var n=r&&r.length||0,s=new Array(n);if(n>0)for(var a=0;a<n;a++)s[a]=r[a];io({type:"action",name:e,object:t,arguments:s})}var l=Nu();gn();var c=nf(!0),d=fv(!0),u={prevDerivation:l,prevAllowStateChanges:c,prevAllowStateReads:d,notifySpy:i,startTime:o,actionId:qwe++,parentActionId:gv};return gv=u.actionId,u}function wN(e){gv!==e.actionId&&Ke("invalid action stack. did you forget to finish an action?"),gv=e.parentActionId,e.error!==void 0&&(le.suppressReactionErrors=!0),sf(e.prevAllowStateChanges),Uu(e.prevAllowStateReads),bn(),vl(e.prevDerivation),e.notifySpy&&oo({time:Date.now()-e.startTime}),le.suppressReactionErrors=!1}function Gwe(e,t){var r=nf(e),i;try{i=t()}finally{sf(r)}return i}function nf(e){var t=le.allowStateChanges;return le.allowStateChanges=e,t}function sf(e){le.allowStateChanges=e}function Wwe(e){var t=le.computationDepth;le.computationDepth=0;var r;try{r=e()}finally{le.computationDepth=t}return r}var bl=function(e){aN(t,e);function t(r,i,o,n,s){o===void 0&&(o="ObservableValue@"+di()),n===void 0&&(n=!0),s===void 0&&(s=$c.default);var a=e.call(this,o)||this;return a.enhancer=i,a.name=o,a.equals=s,a.hasUnreportedChange=!1,a.value=i(r,void 0,o),n&&Ur()&&Xc({type:"create",name:a.name,newValue:""+a.value}),a}return t.prototype.dehanceValue=function(r){return this.dehancer!==void 0?this.dehancer(r):r},t.prototype.set=function(r){var i=this.value;if(r=this.prepareNewValue(r),r!==le.UNCHANGED){var o=Ur();o&&io({type:"update",name:this.name,newValue:r,oldValue:i}),this.setNewValue(r),o&&oo()}},t.prototype.prepareNewValue=function(r){if(qu(this),us(this)){var i=ps(this,{object:this,type:"update",newValue:r});if(!i)return le.UNCHANGED;r=i.newValue}return r=this.enhancer(r,this.value,this.name),this.equals(this.value,r)?le.UNCHANGED:r},t.prototype.setNewValue=function(r){var i=this.value;this.value=r,this.reportChanged(),vn(this)&&_n(this,{type:"update",object:this,newValue:r,oldValue:i})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(r){return af(this,r)},t.prototype.observe=function(r,i){return i&&r({object:this,type:"update",newValue:this.value,oldValue:void 0}),lf(this,r)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t.prototype.valueOf=function(){return tN(this.get())},t}(cv);bl.prototype[eN()]=bl.prototype.valueOf;var Z1=gl("ObservableValue",bl),yl=function(){function e(t){this.dependenciesState=at.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=at.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+di(),this.value=new mv(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=yn.NONE,Pi(t.get,"missing option for computed: get"),this.derivation=t.get,this.name=t.name||"ComputedValue@"+di(),t.set&&(this.setter=_l(this.name+"-setter",t.set)),this.equals=t.equals||(t.compareStructural||t.struct?$c.structural:$c.default),this.scope=t.context,this.requiresReaction=!!t.requiresReaction,this.keepAlive=!!t.keepAlive}return e.prototype.onBecomeStale=function(){Vwe(this)},e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.get=function(){this.isComputing&&Ke("Cycle detected in computation "+this.name+": "+this.derivation),le.inBatch===0&&this.observers.length===0&&!this.keepAlive?Y1(this)&&(this.warnAboutUntrackedRead(),gn(),this.value=this.computeValue(!1),bn()):(oN(this),Y1(this)&&(this.trackAndCompute()&&Hwe(this)));var t=this.value;if(of(t))throw t.cause;return t},e.prototype.peek=function(){var t=this.computeValue(!1);if(of(t))throw t.cause;return t},e.prototype.set=function(t){if(this.setter){Pi(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,t)}finally{this.isRunningSetter=!1}}else Pi(!1,!1)},e.prototype.trackAndCompute=function(){Ur()&&Xc({object:this.scope,type:"compute",name:this.name});var t=this.value,r=this.dependenciesState===at.NOT_TRACKING,i=this.computeValue(!0),o=r||of(t)||of(i)||!this.equals(t,i);return o&&(this.value=i),o},e.prototype.computeValue=function(t){this.isComputing=!0,le.computationDepth++;var r;if(t)r=bN(this,this.derivation,this.scope);else if(le.disableErrorBoundaries===!0)r=this.derivation.call(this.scope);else try{r=this.derivation.call(this.scope)}catch(i){r=new mv(i)}return le.computationDepth--,this.isComputing=!1,r},e.prototype.suspend=function(){this.keepAlive||(X1(this),this.value=void 0)},e.prototype.observe=function(t,r){var i=this,o=!0,n=void 0;return Q1(function(){var s=i.get();if(!o||r){var a=Nu();t({type:"update",object:i,newValue:s,oldValue:n}),vl(a)}o=!1,n=s})},e.prototype.warnAboutUntrackedRead=function(){return},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return tN(this.get())},e}();yl.prototype[eN()]=yl.prototype.valueOf;var ju=gl("ComputedValue",yl),Kwe=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","allowStateReads","disableErrorBoundaries","runId","UNCHANGED"],cf=function(){function e(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1}return e}(),bv=!0,SN=!1,le=function(){var e=Mu();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(bv=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new cf().version&&(bv=!1),bv?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new cf):(setTimeout(function(){SN||Ke("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new cf)}();function $we(){(le.pendingReactions.length||le.inBatch||le.isRunningReactions)&&Ke("isolateGlobalState should be called before MobX is running any reactions"),SN=!0,bv&&(--Mu().__mobxInstanceCount===0&&(Mu().__mobxGlobals=void 0),le=new cf)}function Ywe(){return le}function Xwe(){var e=new cf;for(var t in e)Kwe.indexOf(t)===-1&&(le[t]=e[t]);le.allowStateChanges=!le.enforceActions}function Jwe(e){return e.observers&&e.observers.length>0}function Zwe(e){return e.observers}function jwe(e,t){var r=e.observers.length;r&&(e.observersIndexes[t.__mapid]=r),e.observers[r]=t,e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function yN(e,t){if(e.observers.length===1)e.observers.length=0,CN(e);else{var r=e.observers,i=e.observersIndexes,o=r.pop();if(o!==t){var n=i[t.__mapid]||0;n?i[o.__mapid]=n:delete i[o.__mapid],r[n]=o}delete i[t.__mapid]}}function CN(e){e.isPendingUnobservation===!1&&(e.isPendingUnobservation=!0,le.pendingUnobservations.push(e))}function gn(){le.inBatch++}function bn(){if(--le.inBatch===0){TN();for(var e=le.pendingUnobservations,t=0;t<e.length;t++){var r=e[t];r.isPendingUnobservation=!1,r.observers.length===0&&(r.isBeingObserved&&(r.isBeingObserved=!1,r.onBecomeUnobserved()),r instanceof yl&&r.suspend())}le.pendingUnobservations=[]}}function oN(e){zwe(e);var t=le.trackingDerivation;return t!==null?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(e.observers.length===0&&le.inBatch>0&&CN(e),!1)}function Swe(e){if(e.lowestObserverState===at.STALE)return;e.lowestObserverState=at.STALE;for(var t=e.observers,r=t.length;r--;){var i=t[r];i.dependenciesState===at.UP_TO_DATE&&(i.isTracing!==yn.NONE&&kN(i,e),i.onBecomeStale()),i.dependenciesState=at.STALE}}function Hwe(e){if(e.lowestObserverState===at.STALE)return;e.lowestObserverState=at.STALE;for(var t=e.observers,r=t.length;r--;){var i=t[r];i.dependenciesState===at.POSSIBLY_STALE?i.dependenciesState=at.STALE:i.dependenciesState===at.UP_TO_DATE&&(e.lowestObserverState=at.UP_TO_DATE)}}function Vwe(e){if(e.lowestObserverState!==at.UP_TO_DATE)return;e.lowestObserverState=at.POSSIBLY_STALE;for(var t=e.observers,r=t.length;r--;){var i=t[r];i.dependenciesState===at.UP_TO_DATE&&(i.dependenciesState=at.POSSIBLY_STALE,i.isTracing!==yn.NONE&&kN(i,e),i.onBecomeStale())}}function kN(e,t){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+t.name+"'"),e.isTracing===yn.BREAK){var r=[];EN(DN(e),r,1),new Function(`debugger;
/*
Tracing '`+e.name+`'

You are entering this break point because derivation '`+e.name+"' is being traced and '"+t.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(e instanceof yl?e.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+r.join(`
`)+`
*/
    `)()}}function EN(e,t,r){if(t.length>=1e3){t.push("(and many more)");return}t.push(""+new Array(r).join("	")+e.name),e.dependencies&&e.dependencies.forEach(function(i){return EN(i,t,r+1)})}var df=function(){function e(t,r,i,o){t===void 0&&(t="Reaction@"+di()),o===void 0&&(o=!1),this.name=t,this.onInvalidate=r,this.errorHandler=i,this.requiresObservable=o,this.observing=[],this.newObserving=[],this.dependenciesState=at.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+di(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=yn.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,le.pendingReactions.push(this),TN())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(gn(),this._isScheduled=!1,Y1(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&Ur()&&Xc({name:this.name,type:"scheduled-reaction"})}catch(t){this.reportExceptionInDerivation(t)}}bn()}},e.prototype.track=function(t){gn();var r=Ur(),i;r&&(i=Date.now(),io({name:this.name,type:"reaction"})),this._isRunning=!0;var o=bN(this,t,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&X1(this),of(o)&&this.reportExceptionInDerivation(o.cause),r&&oo({time:Date.now()-i}),bn()},e.prototype.reportExceptionInDerivation=function(t){var r=this;if(this.errorHandler){this.errorHandler(t,this);return}if(le.disableErrorBoundaries)throw t;var i="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";le.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(i,t),Ur()&&Xc({type:"error",name:this.name,message:i,error:""+t}),le.globalReactionErrorHandlers.forEach(function(o){return o(t,r)})},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(gn(),X1(this),bn()))},e.prototype.getDisposer=function(){var t=this.dispose.bind(this);return t.$mobx=this,t},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(t){t===void 0&&(t=!1),IN(this,t)},e}();function Qwe(e){return le.globalReactionErrorHandlers.push(e),function(){var t=le.globalReactionErrorHandlers.indexOf(e);t>=0&&le.globalReactionErrorHandlers.splice(t,1)}}var ON=100,ek=function(e){return e()};function TN(){if(le.inBatch>0||le.isRunningReactions)return;ek(eSe)}function eSe(){le.isRunningReactions=!0;for(var e=le.pendingReactions,t=0;e.length>0;){++t===ON&&(console.error("Reaction doesn't converge to a stable state after "+ON+" iterations."+(" Probably there is a cycle in the reactive function: "+e[0])),e.splice(0));for(var r=e.splice(0),i=0,o=r.length;i<o;i++)r[i].runReaction()}le.isRunningReactions=!1}var yv=gl("Reaction",df);function tSe(e){var t=ek;ek=function(r){return e(function(){return t(r)})}}function Ur(){return!!le.spyListeners.length}function Xc(e){if(!le.spyListeners.length)return;for(var t=le.spyListeners,r=0,i=t.length;r<i;r++)t[r](e)}function io(e){var t=kt(kt({},e),{spyReportStart:!0});Xc(t)}var rSe={spyReportEnd:!0};function oo(e){Xc(e?kt(kt({},e),{spyReportEnd:!0}):rSe)}function AN(e){return le.spyListeners.push(e),B1(function(){le.spyListeners=le.spyListeners.filter(function(t){return t!==e})})}function iSe(){Ke(!1)}function RN(e){return function(t,r,i){if(i){if(i.value)return{value:_l(e,i.value),enumerable:!1,configurable:!0,writable:!0};var o=i.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return _l(e,o.call(this))}}}return oSe(e).apply(this,arguments)}}function oSe(e){return function(t,r,i){Object.defineProperty(t,r,{configurable:!0,enumerable:!1,get:function(){return},set:function(o){da(this,r,xl(e,o))}})}}function nSe(e,t,r,i){return i===!0?(tk(e,t,r.value),null):r?{configurable:!0,enumerable:!1,get:function(){return tk(this,t,r.value||r.initializer.call(this)),this[t]},set:iSe}:{enumerable:!1,configurable:!0,set:function(o){tk(this,t,o)},get:function(){return}}}var xl=function(t,r,i,o){if(arguments.length===1&&typeof t=="function")return _l(t.name||"<unnamed action>",t);if(arguments.length===2&&typeof r=="function")return _l(t,r);if(arguments.length===1&&typeof t=="string")return RN(t);if(o===!0)t[r]=_l(t.name||r,i.value);else return RN(r).apply(null,arguments)};xl.bound=nSe;function sSe(e,t){var r=typeof e=="string"?e:e.name||"<unnamed action>",i=typeof e=="function"?e:t;return _N(r,i,this,void 0)}function aSe(e){return typeof e=="function"&&e.isMobxAction===!0}function tk(e,t,r){da(e,t,_l(t,r.bind(e)))}function Q1(e,t){t===void 0&&(t=M1);var r=t&&t.name||e.name||"Autorun@"+di(),i=!t.scheduler&&!t.delay,o;if(i)o=new df(r,function(){this.track(a)},t.onError,t.requiresObservable);else{var n=FN(t),s=!1;o=new df(r,function(){s||(s=!0,n(function(){s=!1,o.isDisposed||o.track(a)}))},t.onError,t.requiresObservable)}function a(){e(o)}return o.schedule(),o.getDisposer()}var lSe=function(e){return e()};function FN(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:lSe}function dSe(e,t,r){r===void 0&&(r=M1),typeof r=="boolean"&&(r={fireImmediately:r},mn("Using fireImmediately as argument is deprecated. Use '{ fireImmediately: true }' instead"));var i=r.name||"Reaction@"+di(),o=xl(i,r.onError?cSe(r.onError,t):t),n=!r.scheduler&&!r.delay,s=FN(r),a=!0,l=!1,c,d=r.compareStructural?$c.structural:r.equals||$c.default,u=new df(i,function(){a||n?p():l||(l=!0,s(p))},r.onError,r.requiresObservable);function p(){if(l=!1,u.isDisposed)return;var h=!1;u.track(function(){var b=e(u);h=a||!d(c,b),c=b}),a&&r.fireImmediately&&o(c,u),!a&&h===!0&&o(c,u),a&&(a=!1)}return u.schedule(),u.getDisposer()}function cSe(e,t){return function(){try{return t.apply(this,arguments)}catch(r){e.call(this,r)}}}function nN(e,t,r){return PN("onBecomeObserved",e,t,r)}function j1(e,t,r){return PN("onBecomeUnobserved",e,t,r)}function PN(e,t,r,i){var o=typeof i=="function"?xn(t,r):xn(t),n=typeof i=="function"?i:r,s=o[e];return typeof s!="function"?Ke(!1):(o[e]=function(){s.call(this),n.call(this)},function(){o[e]=s})}function uSe(e){var t=e.enforceActions,r=e.computedRequiresReaction,i=e.computedConfigurable,o=e.disableErrorBoundaries,n=e.arrayBuffer,s=e.reactionScheduler,a=e.reactionRequiresObservable,l=e.observableRequiresReaction;if(e.isolateGlobalState===!0&&$we(),t!==void 0){(typeof t=="boolean"||t==="strict")&&mn(`Deprecated value for 'enforceActions', use 'false' => '"never"', 'true' => '"observed"', '"strict"' => "'always'" instead`);var c=void 0;switch(t){case!0:case"observed":c=!0;break;case!1:case"never":c=!1;break;case"strict":case"always":c="strict";break;default:Ke("Invalid value for 'enforceActions': '"+t+"', expected 'never', 'always' or 'observed'")}le.enforceActions=c,le.allowStateChanges=!(c===!0||c==="strict")}r!==void 0&&(le.computedRequiresReaction=!!r),a!==void 0&&(le.reactionRequiresObservable=!!a),l!==void 0&&(le.observableRequiresReaction=!!l,le.allowStateReads=!le.observableRequiresReaction),i!==void 0&&(le.computedConfigurable=!!i),o!==void 0&&(o===!0&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors if this is on."),le.disableErrorBoundaries=!!o),typeof n=="number"&&rk(n),s&&tSe(s)}function pSe(e,t){var r=typeof e=="function"?e.prototype:e,i=function(n){var s=t[n];Array.isArray(s)||(s=[s]);var a=Object.getOwnPropertyDescriptor(r,n),l=s.reduce(function(c,d){return d(r,n,c)},a);l&&Object.defineProperty(r,n,l)};for(var o in t)i(o);return e}function hSe(e,t,r){return mn("'extendShallowObservable' is deprecated, use 'extendObservable(target, props, { deep: false })' instead"),$1(e,t,r,pN)}function $1(e,t,r,i){if(!1&&r)for(var o in r);i=zu(i);var n=i.defaultDecorator||(i.deep===!1?hN:K1);Yc(e),ik(e,i.name,n.enhancer),gn();try{for(var s=Object.getOwnPropertyNames(t),a=0,l=s.length;a<l;a++){var o=s[a],c=Object.getOwnPropertyDescriptor(t,o),d=r&&o in r?r[o]:c.get?hv:n,u=d(e,o,c,!0);u&&Object.defineProperty(e,o,u)}}finally{bn()}return e}function DN(e,t){return MN(xn(e,t))}function MN(e){var t={name:e.name};return e.observing&&e.observing.length>0&&(t.dependencies=fwe(e.observing).map(MN)),t}function mSe(e,t){return BN(xn(e,t))}function BN(e){var t={name:e.name};return Jwe(e)&&(t.observers=Zwe(e).map(BN)),t}var fSe=0;function vv(){this.message="FLOW_CANCELLED"}vv.prototype=Object.create(Error.prototype);function gSe(e){return e instanceof vv}function bSe(e){arguments.length!==1&&Ke("Flow expects one 1 argument and cannot be used as decorator");var t=e.name||"<unnamed flow>";return function(){var r=this,i=arguments,o=++fSe,n=xl(t+" - runid: "+o+" - init",e).apply(r,i),s,a=void 0,l=new Promise(function(c,d){var u=0;s=d;function p(y){a=void 0;var f;try{f=xl(t+" - runid: "+o+" - yield "+u++,n.next).call(n,y)}catch(w){return d(w)}b(f)}function h(y){a=void 0;var f;try{f=xl(t+" - runid: "+o+" - yield "+u++,n.throw).call(n,y)}catch(w){return d(w)}b(f)}function b(y){if(y&&typeof y.then=="function"){y.then(b,d);return}return y.done?c(y.value):(a=Promise.resolve(y.value),a.then(p,h))}p(void 0)});return l.cancel=xl(t+" - runid: "+o+" - cancel",function(){try{a&&LN(a);var c=n.return(void 0),d=Promise.resolve(c.value);d.then(lv,lv),LN(d),s(new vv)}catch(u){s(u)}}),l}}function LN(e){typeof e.cancel=="function"&&e.cancel()}function ySe(e,t,r){var i;if(Tr(e)||Qr(e)||Z1(e))i=hs(e);else if(pi(e)){if(typeof t!="string")return Ke(!1);i=hs(e,t)}else return Ke(!1);return i.dehancer!==void 0?Ke(!1):(i.dehancer=typeof t=="function"?t:r,function(){i.dehancer=void 0})}function xSe(e,t,r){return typeof r=="function"?_Se(e,t,r):vSe(e,t)}function vSe(e,t){return hs(e).intercept(t)}function _Se(e,t,r){return hs(e,t).intercept(r)}function zN(e,t){if(e==null)return!1;if(t!==void 0){if(pi(e)===!1)return!1;if(!e.$mobx.values[t])return!1;var r=xn(e,t);return ju(r)}return ju(e)}function wSe(e){return arguments.length>1?Ke(!1):zN(e)}function SSe(e,t){return typeof t!="string"?Ke(!1):zN(e,t)}function NN(e,t){if(e==null)return!1;if(t!==void 0){if(pi(e)){var r=e.$mobx;return r.values&&!!r.values[t]}return!1}return pi(e)||!!e.$mobx||U1(e)||yv(e)||ju(e)}function Lu(e){return arguments.length!==1&&Ke(!1),NN(e)}function CSe(e,t){return typeof t!="string"?Ke(!1):NN(e,t)}function Gu(e){return pi(e)?e.$mobx.getKeys():Tr(e)||ui(e)?fn(e.keys()):Qr(e)?e.map(function(t,r){return r}):Ke(!1)}function TSe(e){return pi(e)?Gu(e).map(function(t){return e[t]}):Tr(e)?Gu(e).map(function(t){return e.get(t)}):ui(e)?fn(e.values()):Qr(e)?e.slice():Ke(!1)}function kSe(e){return pi(e)?Gu(e).map(function(t){return[t,e[t]]}):Tr(e)?Gu(e).map(function(t){return[t,e.get(t)]}):ui(e)?fn(e.entries()):Qr(e)?e.map(function(t,r){return[r,t]}):Ke(!1)}function UN(e,t,r){if(arguments.length===2&&!ui(e)){gn();var i=t;try{for(var o in i)UN(e,o,i[o])}finally{bn()}return}if(pi(e)){var n=e.$mobx,s=n.values[t];s?n.write(e,t,r):dN(e,t,r,n.defaultEnhancer)}else if(Tr(e))e.set(t,r);else if(ui(e))e.add(t);else if(Qr(e))typeof t!="number"&&(t=parseInt(t,10)),Pi(t>=0,"Not a valid index: '"+t+"'"),gn(),t>=e.length&&(e.length=t+1),e[t]=r,bn();else return Ke(!1)}function ESe(e,t){if(pi(e))e.$mobx.remove(t);else if(Tr(e))e.delete(t);else if(ui(e))e.delete(t);else if(Qr(e))typeof t!="number"&&(t=parseInt(t,10)),Pi(t>=0,"Not a valid index: '"+t+"'"),e.splice(t,1);else return Ke(!1)}function jN(e,t){if(pi(e)){var r=hs(e);return r.getKeys(),!!r.values[t]}else return Tr(e)||ui(e)?e.has(t):Qr(e)?t>=0&&t<e.length:Ke(!1)}function DSe(e,t){return jN(e,t)?pi(e)?e[t]:Tr(e)?e.get(t):Qr(e)?e[t]:Ke(!1):void 0}function ASe(e,t,r,i){return typeof r=="function"?OSe(e,t,r,i):ISe(e,t,r)}function ISe(e,t,r){return hs(e).observe(t,r)}function OSe(e,t,r,i){return hs(e,t).observe(r,i)}var RSe={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Wu(e,t,r,i){return i.detectCycles&&e.set(t,r),r}function wl(e,t,r){if(!t.recurseEverything&&!Lu(e))return e;if(typeof e!="object")return e;if(e===null)return null;if(e instanceof Date)return e;if(Z1(e))return wl(e.get(),t,r);Lu(e)&&Gu(e);var i=t.detectCycles===!0;if(i&&e!==null&&r.has(e))return r.get(e);if(Qr(e)||Array.isArray(e)){var o=Wu(r,e,[],t),n=e.map(function(b){return wl(b,t,r)});o.length=n.length;for(var s=0,a=n.length;s<a;s++)o[s]=n[s];return o}if(ui(e)||Object.getPrototypeOf(e)===Set.prototype)if(t.exportMapsAsObjects===!1){var l=Wu(r,e,new Set,t);return e.forEach(function(b){l.add(wl(b,t,r))}),l}else{var c=Wu(r,e,[],t);return e.forEach(function(b){c.push(wl(b,t,r))}),c}if(Tr(e)||Object.getPrototypeOf(e)===Map.prototype)if(t.exportMapsAsObjects===!1){var d=Wu(r,e,new Map,t);return e.forEach(function(b,y){d.set(y,wl(b,t,r))}),d}else{var u=Wu(r,e,{},t);return e.forEach(function(b,y){u[y]=wl(b,t,r)}),u}var p=Wu(r,e,{},t);for(var h in e)p[h]=wl(e[h],t,r);return p}function FSe(e,t){typeof t=="boolean"&&(t={detectCycles:t}),t||(t=RSe),t.detectCycles=t.detectCycles===void 0?t.recurseEverything===!0:t.detectCycles===!0;var r;return t.detectCycles&&(r=new Map),wl(e,t,r)}function IN(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=!1;typeof e[e.length-1]=="boolean"&&(r=e.pop());var i=PSe(e);if(!i)return Ke(!1);i.isTracing===yn.NONE&&console.log("[mobx.trace] '"+i.name+"' tracing enabled"),i.isTracing=r?yn.BREAK:yn.LOG}function PSe(e){switch(e.length){case 0:return le.trackingDerivation;case 1:return xn(e[0]);case 2:return xn(e[0],e[1])}}function ms(e,t){t===void 0&&(t=void 0),gn();try{return e.apply(t)}finally{bn()}}function BSe(e,t,r){return arguments.length===1||t&&typeof t=="object"?MSe(e,t):qN(e,t,r||{})}function qN(e,t,r){var i;typeof r.timeout=="number"&&(i=setTimeout(function(){if(!n.$mobx.isDisposed){n();var s=new Error("WHEN_TIMEOUT");if(r.onError)r.onError(s);else throw s}},r.timeout)),r.name=r.name||"When@"+di();var o=_l(r.name+"-effect",t),n=Q1(function(s){e()&&(s.dispose(),i&&clearTimeout(i),o())},r);return n}function MSe(e,t){var r,i=new Promise(function(o,n){var s=qN(e,o,kt(kt({},t),{onError:n}));r=function(){s(),n("WHEN_CANCELLED")}});return i.cancel=r,i}function us(e){return e.interceptors!==void 0&&e.interceptors.length>0}function af(e,t){var r=e.interceptors||(e.interceptors=[]);return r.push(t),B1(function(){var i=r.indexOf(t);i!==-1&&r.splice(i,1)})}function ps(e,t){var r=Nu();try{var i=e.interceptors;if(i)for(var o=0,n=i.length;o<n&&!(t=i[o](t),Pi(!t||t.type,"Intercept handlers should return nothing or a change object"),!t);o++);return t}finally{vl(r)}}function vn(e){return e.changeListeners!==void 0&&e.changeListeners.length>0}function lf(e,t){var r=e.changeListeners||(e.changeListeners=[]);return r.push(t),B1(function(){var i=r.indexOf(t);i!==-1&&r.splice(i,1)})}function _n(e,t){var r=Nu(),i=e.changeListeners;if(!i)return;i=i.slice();for(var o=0,n=i.length;o<n;o++)i[o](t);vl(r)}var LSe=1e4,zSe=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)["0"]=1,e===!1}(),ok=0,nk=function(){function e(){}return e}();function NSe(e,t){typeof Object.setPrototypeOf!="undefined"?Object.setPrototypeOf(e.prototype,t):typeof e.prototype.__proto__!="undefined"?e.prototype.__proto__=t:e.prototype=t}NSe(nk,Array.prototype);Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(e){Object.defineProperty(nk.prototype,e,{configurable:!0,writable:!0,value:Array.prototype[e]})});var GN=function(){function e(t,r,i,o){this.array=i,this.owned=o,this.values=[],this.lastKnownLength=0,this.atom=new cv(t||"ObservableArray@"+di()),this.enhancer=function(n,s){return r(n,s,t+"[..]")}}return e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.dehanceValues=function(t){return this.dehancer!==void 0&&t.length>0?t.map(this.dehancer):t},e.prototype.intercept=function(t){return af(this,t)},e.prototype.observe=function(t,r){return r===void 0&&(r=!1),r&&t({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),lf(this,t)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(t){if(typeof t!="number"||t<0)throw new Error("[mobx.array] Out of range: "+t);var r=this.values.length;if(t===r)return;if(t>r){for(var i=new Array(t-r),o=0;o<t-r;o++)i[o]=void 0;this.spliceWithArray(r,0,i)}else this.spliceWithArray(t,r-t)},e.prototype.updateArrayLength=function(t,r){if(t!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=r,r>0&&t+r+1>ok&&rk(t+r+1)},e.prototype.spliceWithArray=function(t,r,i){var o=this;qu(this.atom);var n=this.values.length;if(t===void 0?t=0:t>n?t=n:t<0&&(t=Math.max(0,n+t)),arguments.length===1?r=n-t:r==null?r=0:r=Math.max(0,Math.min(r,n-t)),i===void 0&&(i=av),us(this)){var s=ps(this,{object:this.array,type:"splice",index:t,removedCount:r,added:i});if(!s)return av;r=s.removedCount,i=s.added}i=i.length===0?i:i.map(function(c){return o.enhancer(c,void 0)});var a=i.length-r;this.updateArrayLength(n,a);var l=this.spliceItemsIntoValues(t,r,i);return(r!==0||i.length!==0)&&this.notifyArraySplice(t,i,l),this.dehanceValues(l)},e.prototype.spliceItemsIntoValues=function(t,r,i){var o;if(i.length<LSe)return(o=this.values).splice.apply(o,V1([t,r],i));var n=this.values.slice(t,t+r);return this.values=this.values.slice(0,t).concat(i,this.values.slice(t+r)),n},e.prototype.notifyArrayChildUpdate=function(t,r,i){var o=!this.owned&&Ur(),n=vn(this),s=n||o?{object:this.array,type:"update",index:t,newValue:r,oldValue:i}:null;o&&io(kt(kt({},s),{name:this.atom.name})),this.atom.reportChanged(),n&&_n(this,s),o&&oo()},e.prototype.notifyArraySplice=function(t,r,i){var o=!this.owned&&Ur(),n=vn(this),s=n||o?{object:this.array,type:"splice",index:t,removed:i,added:r,removedCount:i.length,addedCount:r.length}:null;o&&io(kt(kt({},s),{name:this.atom.name})),this.atom.reportChanged(),n&&_n(this,s),o&&oo()},e}(),ds=function(e){aN(t,e);function t(r,i,o,n){o===void 0&&(o="ObservableArray@"+di()),n===void 0&&(n=!1);var s=e.call(this)||this,a=new GN(o,i,s,n);if(Jm(s,"$mobx",a),r&&r.length){var l=nf(!0);s.spliceWithArray(0,0,r),sf(l)}return zSe&&Object.defineProperty(a.array,"0",USe),s}return t.prototype.intercept=function(r){return this.$mobx.intercept(r)},t.prototype.observe=function(r,i){return i===void 0&&(i=!1),this.$mobx.observe(r,i)},t.prototype.clear=function(){return this.splice(0)},t.prototype.concat=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),r.map(function(o){return Qr(o)?o.peek():o}))},t.prototype.replace=function(r){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,r)},t.prototype.toJS=function(){return this.slice()},t.prototype.toJSON=function(){return this.toJS()},t.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},t.prototype.find=function(r,i,o){o===void 0&&(o=0),arguments.length===3&&mn("The array.find fromIndex argument to find will not be supported anymore in the next major");var n=this.findIndex.apply(this,arguments);return n===-1?void 0:this.get(n)},t.prototype.findIndex=function(r,i,o){o===void 0&&(o=0),arguments.length===3&&mn("The array.findIndex fromIndex argument to find will not be supported anymore in the next major");for(var n=this.peek(),s=n.length,a=o;a<s;a++)if(r.call(i,n[a],a,this))return a;return-1},t.prototype.splice=function(r,i){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(r);case 2:return this.$mobx.spliceWithArray(r,i)}return this.$mobx.spliceWithArray(r,i,o)},t.prototype.spliceWithArray=function(r,i,o){return this.$mobx.spliceWithArray(r,i,o)},t.prototype.push=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=this.$mobx;return o.spliceWithArray(o.values.length,0,r),o.values.length},t.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},t.prototype.shift=function(){return this.splice(0,1)[0]},t.prototype.unshift=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=this.$mobx;return o.spliceWithArray(0,0,r),o.values.length},t.prototype.reverse=function(){var r=this.slice();return r.reverse.apply(r,arguments)},t.prototype.sort=function(r){var i=this.slice();return i.sort.apply(i,arguments)},t.prototype.remove=function(r){var i=this.$mobx.dehanceValues(this.$mobx.values).indexOf(r);return i>-1?(this.splice(i,1),!0):!1},t.prototype.move=function(r,i){mn("observableArray.move is deprecated, use .slice() & .replace() instead");function o(a){if(a<0)throw new Error("[mobx.array] Index out of bounds: "+a+" is negative");var l=this.$mobx.values.length;if(a>=l)throw new Error("[mobx.array] Index out of bounds: "+a+" is not smaller than "+l)}if(o.call(this,r),o.call(this,i),r===i)return;var n=this.$mobx.values,s;r<i?s=V1(n.slice(0,r),n.slice(r+1,i+1),[n[r]],n.slice(i+1)):s=V1(n.slice(0,i),[n[r]],n.slice(i,r),n.slice(r+1)),this.replace(s)},t.prototype.get=function(r){var i=this.$mobx;if(i){if(r<i.values.length)return i.atom.reportObserved(),i.dehanceValue(i.values[r]);console.warn("[mobx.array] Attempt to read an array index ("+r+") that is out of bounds ("+i.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}return},t.prototype.set=function(r,i){var o=this.$mobx,n=o.values;if(r<n.length){qu(o.atom);var s=n[r];if(us(o)){var a=ps(o,{type:"update",object:this,index:r,newValue:i});if(!a)return;i=a.newValue}i=o.enhancer(i,s);var l=i!==s;l&&(n[r]=i,o.notifyArrayChildUpdate(r,i,s))}else if(r===n.length)o.spliceWithArray(r,0,[i]);else throw new Error("[mobx.array] Index out of bounds, "+r+" is larger than "+n.length)},t}(nk);z1(ds.prototype,function(){this.$mobx.atom.reportObserved();var e=this,t=0;return Qm({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})});Object.defineProperty(ds.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(e){this.$mobx.setArrayLength(e)}});da(ds.prototype,N1(),"Array");["indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(e){var t=Array.prototype[e];Pi(typeof t=="function","Base function not defined on Array prototype: '"+e+"'"),da(ds.prototype,e,function(){return t.apply(this.peek(),arguments)})});["every","filter","forEach","map","some"].forEach(function(e){var t=Array.prototype[e];Pi(typeof t=="function","Base function not defined on Array prototype: '"+e+"'"),da(ds.prototype,e,function(r,i){var o=this,n=this.$mobx;n.atom.reportObserved();var s=n.dehanceValues(n.values);return s[e](function(a,l){return r.call(i,a,l,o)},i)})});["reduce","reduceRight"].forEach(function(e){da(ds.prototype,e,function(){var t=this,r=this.$mobx;r.atom.reportObserved();var i=arguments[0];return arguments[0]=function(o,n,s){return n=r.dehanceValue(n),i(o,n,s,t)},r.values[e].apply(r.values,arguments)})});bwe(ds.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var USe=WN(0);function WN(e){return{enumerable:!1,configurable:!1,get:function(){return this.get(e)},set:function(t){this.set(e,t)}}}function jSe(e){Object.defineProperty(ds.prototype,""+e,WN(e))}function rk(e){for(var t=ok;t<e;t++)jSe(t);ok=e}rk(1e3);var qSe=gl("ObservableArrayAdministration",GN);function Qr(e){return L1(e)&&qSe(e.$mobx)}var GSe={},tf=function(){function e(t,r,i){if(r===void 0&&(r=ef),i===void 0&&(i="ObservableMap@"+di()),this.enhancer=r,this.name=i,this.$mobx=GSe,this._keysAtom=q1(this.name+".keys()"),typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(t)}return e.prototype._has=function(t){return this._data.has(t)},e.prototype.has=function(t){var r=this;if(!le.trackingDerivation)return this._has(t);var i=this._hasMap.get(t);if(!i){var o=i=new bl(this._has(t),dv,this.name+"."+_v(t)+"?",!1);this._hasMap.set(t,o),j1(o,function(){return r._hasMap.delete(t)})}return i.get()},e.prototype.set=function(t,r){var i=this._has(t);if(us(this)){var o=ps(this,{type:i?"update":"add",object:this,newValue:r,name:t});if(!o)return this;r=o.newValue}return i?this._updateValue(t,r):this._addValue(t,r),this},e.prototype.delete=function(t){var r=this;if(qu(this._keysAtom),us(this)){var i=ps(this,{type:"delete",object:this,name:t});if(!i)return!1}if(this._has(t)){var o=Ur(),n=vn(this),i=n||o?{type:"delete",object:this,oldValue:this._data.get(t).value,name:t}:null;return o&&io(kt(kt({},i),{name:this.name,key:t})),ms(function(){r._keysAtom.reportChanged(),r._updateHasMapEntry(t,!1);var a=r._data.get(t);a.setNewValue(void 0),r._data.delete(t)}),n&&_n(this,i),o&&oo(),!0}return!1},e.prototype._updateHasMapEntry=function(t,r){var i=this._hasMap.get(t);i&&i.setNewValue(r)},e.prototype._updateValue=function(t,r){var i=this._data.get(t);if(r=i.prepareNewValue(r),r!==le.UNCHANGED){var o=Ur(),n=vn(this),s=n||o?{type:"update",object:this,oldValue:i.value,name:t,newValue:r}:null;o&&io(kt(kt({},s),{name:this.name,key:t})),i.setNewValue(r),n&&_n(this,s),o&&oo()}},e.prototype._addValue=function(t,r){var i=this;qu(this._keysAtom),ms(function(){var a=new bl(r,i.enhancer,i.name+"."+_v(t),!1);i._data.set(t,a),r=a.value,i._updateHasMapEntry(t,!0),i._keysAtom.reportChanged()});var o=Ur(),n=vn(this),s=n||o?{type:"add",object:this,name:t,newValue:r}:null;o&&io(kt(kt({},s),{name:this.name,key:t})),n&&_n(this,s),o&&oo()},e.prototype.get=function(t){return this.has(t)?this.dehanceValue(this._data.get(t).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},e.prototype.values=function(){var t=this,r=this.keys();return Qm({next:function(){var i=r.next(),o=i.done,n=i.value;return{done:o,value:o?void 0:t.get(n)}}})},e.prototype.entries=function(){var t=this,r=this.keys();return Qm({next:function(){var i=r.next(),o=i.done,n=i.value;return{done:o,value:o?void 0:[n,t.get(n)]}}})},e.prototype.forEach=function(t,r){var i=this;this._keysAtom.reportObserved(),this._data.forEach(function(o,n){return t.call(r,i.get(n),n,i)})},e.prototype.merge=function(t){var r=this;return Tr(t)&&(t=t.toJS()),ms(function(){var i=nf(!0);try{Kc(t)?Object.keys(t).forEach(function(o){return r.set(o,t[o])}):Array.isArray(t)?t.forEach(function(o){var n=H1(o,2),s=n[0],a=n[1];return r.set(s,a)}):Bu(t)?t.constructor!==Map?Ke("Cannot initialize from classes that inherit from Map: "+t.constructor.name):t.forEach(function(o,n){return r.set(n,o)}):t!=null&&Ke("Cannot initialize map from "+t)}finally{sf(i)}}),this},e.prototype.clear=function(){var t=this;ms(function(){J1(function(){t._data.forEach(function(r,i){return t.delete(i)})})})},e.prototype.replace=function(t){var r=this;return ms(function(){var i=gwe(t),o=new Map,n=!1;if(rN(r._data.keys(),function(d){if(!i.has(d)){var u=r.delete(d);if(u)n=!0;else{var p=r._data.get(d);o.set(d,p)}}}),rN(i.entries(),function(d){var u=H1(d,2),p=u[0],h=u[1],b=r._data.has(p);if(r.set(p,h),r._data.has(p)){var y=r._data.get(p);o.set(p,y),b||(n=!0)}}),!n)if(r._data.size!==o.size)r._keysAtom.reportChanged();else for(var s=r._data.keys(),a=o.keys(),l=s.next(),c=a.next();!l.done;){if(l.value!==c.value){r._keysAtom.reportChanged();break}l=s.next(),c=a.next()}r._data=o}),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var t=this,r={};return this.forEach(function(i,o){return r[typeof o=="symbol"?o:_v(o)]=t.get(o)}),r},e.prototype.toJS=function(){return new Map(this)},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var t=this;return this.name+"[{ "+fn(this.keys()).map(function(r){return _v(r)+": "+(""+t.get(r))}).join(", ")+" }]"},e.prototype.observe=function(t,r){return lf(this,t)},e.prototype.intercept=function(t){return af(this,t)},e}();function _v(e){return e&&e.toString?e.toString():new String(e).toString()}z1(tf.prototype,function(){return this.entries()});Jm(tf.prototype,N1(),"Map");var Tr=gl("ObservableMap",tf),WSe={},rf=function(){function e(t,r,i){if(r===void 0&&(r=ef),i===void 0&&(i="ObservableSet@"+di()),this.name=i,this.$mobx=WSe,this._data=new Set,this._atom=q1(this.name),typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(o,n){return r(o,n,i)},t&&this.replace(t)}return e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.clear=function(){var t=this;ms(function(){J1(function(){t._data.forEach(function(r){t.delete(r)})})})},e.prototype.forEach=function(t,r){var i=this;this._atom.reportObserved(),this._data.forEach(function(o){t.call(r,o,o,i)})},Object.defineProperty(e.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.add=function(t){var r=this;if(qu(this._atom),us(this)){var i=ps(this,{type:"add",object:this,newValue:t});if(!i)return this}if(!this.has(t)){ms(function(){r._data.add(r.enhancer(t,void 0)),r._atom.reportChanged()});var o=Ur(),n=vn(this),i=n||o?{type:"add",object:this,newValue:t}:null;o&&!1&&io(i),n&&_n(this,i),o&&!1&&oo()}return this},e.prototype.delete=function(t){var r=this;if(us(this)){var i=ps(this,{type:"delete",object:this,oldValue:t});if(!i)return!1}if(this.has(t)){var o=Ur(),n=vn(this),i=n||o?{type:"delete",object:this,oldValue:t}:null;return o&&!1&&io(kt(kt({},i),{name:this.name})),ms(function(){r._atom.reportChanged(),r._data.delete(t)}),n&&_n(this,i),o&&!1&&oo(),!0}return!1},e.prototype.has=function(t){return this._atom.reportObserved(),this._data.has(this.dehanceValue(t))},e.prototype.entries=function(){var t=0,r=fn(this.keys()),i=fn(this.values());return Qm({next:function(){var o=t;return t+=1,o<i.length?{value:[r[o],i[o]],done:!1}:{done:!0}}})},e.prototype.keys=function(){return this.values()},e.prototype.values=function(){this._atom.reportObserved();var t=this,r=0,i;return this._data.values!==void 0?i=fn(this._data.values()):(i=[],this._data.forEach(function(o){return i.push(o)})),Qm({next:function(){return r<i.length?{value:t.dehanceValue(i[r++]),done:!1}:{done:!0}}})},e.prototype.replace=function(t){var r=this;return ui(t)&&(t=t.toJS()),ms(function(){var i=nf(!0);try{Array.isArray(t)?(r.clear(),t.forEach(function(o){return r.add(o)})):Zm(t)?(r.clear(),t.forEach(function(o){return r.add(o)})):t!=null&&Ke("Cannot initialize set from "+t)}finally{sf(i)}}),this},e.prototype.observe=function(t,r){return lf(this,t)},e.prototype.intercept=function(t){return af(this,t)},e.prototype.toJS=function(){return new Set(this)},e.prototype.toString=function(){return this.name+"[ "+fn(this.keys()).join(", ")+" ]"},e}();z1(rf.prototype,function(){return this.values()});Jm(rf.prototype,N1(),"Set");var ui=gl("ObservableSet",rf),HN=function(){function e(t,r,i){this.target=t,this.name=r,this.defaultEnhancer=i,this.values={}}return e.prototype.read=function(t,r){return this.target!==t&&(this.illegalAccess(t,r),!this.values[r])?void 0:this.values[r].get()},e.prototype.write=function(t,r,i){var o=this.target;o!==t&&this.illegalAccess(t,r);var n=this.values[r];if(n instanceof yl){n.set(i);return}if(us(this)){var s=ps(this,{type:"update",object:o,name:r,newValue:i});if(!s)return;i=s.newValue}if(i=n.prepareNewValue(i),i!==le.UNCHANGED){var a=vn(this),l=Ur(),s=a||l?{type:"update",object:o,oldValue:n.value,name:r,newValue:i}:null;l&&io(kt(kt({},s),{name:this.name,key:r})),n.setNewValue(i),a&&_n(this,s),l&&oo()}},e.prototype.remove=function(t){if(!this.values[t])return;var r=this.target;if(us(this)){var i=ps(this,{object:r,name:t,type:"remove"});if(!i)return}try{gn();var o=vn(this),n=Ur(),s=this.values[t].get();this.keys&&this.keys.remove(t),delete this.values[t],delete this.target[t];var i=o||n?{type:"remove",object:r,oldValue:s,name:t}:null;n&&io(kt(kt({},i),{name:this.name,key:t})),o&&_n(this,i),n&&oo()}finally{bn()}},e.prototype.illegalAccess=function(t,r){console.warn("Property '"+r+"' of '"+t+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(t,r){return lf(this,t)},e.prototype.intercept=function(t){return af(this,t)},e.prototype.getKeys=function(){var t=this;return this.keys===void 0&&(this.keys=new ds(Object.keys(this.values).filter(function(r){return t.values[r]instanceof bl}),dv,"keys("+this.name+")",!0)),this.keys.slice()},e}();function ik(e,t,r){t===void 0&&(t=""),r===void 0&&(r=ef);var i=e.$mobx;return i||(Kc(e)||(t=(e.constructor.name||"ObservableObject")+"@"+di()),t||(t="ObservableObject@"+di()),i=new HN(e,t,r),Jm(e,"$mobx",i),i)}function dN(e,t,r,i){var o=ik(e);if(vwe(e,t),us(o)){var n=ps(o,{object:e,name:t,type:"add",newValue:r});if(!n)return;r=n.newValue}var s=o.values[t]=new bl(r,i,o.name+"."+t,!1);r=s.value,Object.defineProperty(e,t,HSe(t)),o.keys&&o.keys.push(t),VSe(o,e,t,r)}function Mwe(e,t,r){var i=ik(e);r.name=i.name+"."+t,r.context=e,i.values[t]=new yl(r),Object.defineProperty(e,t,KSe(t))}var VN=Object.create(null),KN=Object.create(null);function HSe(e){return VN[e]||(VN[e]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,e)},set:function(t){this.$mobx.write(this,e,t)}})}function $N(e){var t=e.$mobx;return t||(Yc(e),e.$mobx)}function KSe(e){return KN[e]||(KN[e]={configurable:le.computedConfigurable,enumerable:!1,get:function(){return $N(this).read(this,e)},set:function(t){$N(this).write(this,e,t)}})}function VSe(e,t,r,i){var o=vn(e),n=Ur(),s=o||n?{type:"add",object:t,name:r,newValue:i}:null;n&&io(kt(kt({},s),{name:e.name,key:r})),o&&_n(e,s),n&&oo()}var $Se=gl("ObservableObjectAdministration",HN);function pi(e){return L1(e)?(Yc(e),$Se(e.$mobx)):!1}function xn(e,t){if(typeof e=="object"&&e!==null){if(Qr(e))return t!==void 0&&Ke(!1),e.$mobx.atom;if(ui(e))return e.$mobx;if(Tr(e)){var r=e;if(t===void 0)return r._keysAtom;var i=r._data.get(t)||r._hasMap.get(t);return i||Ke(!1),i}if(Yc(e),t&&!e.$mobx&&e[t],pi(e)){if(!t)return Ke(!1);var i=e.$mobx.values[t];return i||Ke(!1),i}if(U1(e)||ju(e)||yv(e))return e}else if(typeof e=="function"&&yv(e.$mobx))return e.$mobx;return Ke(!1)}function hs(e,t){if(e||Ke("Expecting some object"),t!==void 0)return hs(xn(e,t));if(U1(e)||ju(e)||yv(e))return e;if(Tr(e)||ui(e))return e;if(Yc(e),e.$mobx)return e.$mobx;Ke(!1)}function xv(e,t){var r;return t!==void 0?r=xn(e,t):pi(e)||Tr(e)||ui(e)?r=hs(e):r=xn(e),r.name}var YN=Object.prototype.toString;function G1(e,t,r){return r===void 0&&(r=-1),sk(e,t,r)}function sk(e,t,r,i,o){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var n=typeof e;if(n!=="function"&&n!=="object"&&typeof t!="object")return!1;e=XN(e),t=XN(t);var s=YN.call(e);if(s!==YN.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":return+e!==+e?+t!==+t:+e===0?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return typeof Symbol!="undefined"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t)}var a=s==="[object Array]";if(!a){if(typeof e!="object"||typeof t!="object")return!1;var l=e.constructor,c=t.constructor;if(l!==c&&!(typeof l=="function"&&l instanceof l&&typeof c=="function"&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}if(r===0)return!1;r<0&&(r=-1),i=i||[],o=o||[];for(var d=i.length;d--;)if(i[d]===e)return o[d]===t;if(i.push(e),o.push(t),a){if(d=e.length,d!==t.length)return!1;for(;d--;)if(!sk(e[d],t[d],r-1,i,o))return!1}else{var u=Object.keys(e),p=void 0;if(d=u.length,Object.keys(t).length!==d)return!1;for(;d--;)if(p=u[d],!(YSe(t,p)&&sk(e[p],t[p],r-1,i,o)))return!1}return i.pop(),o.pop(),!0}function XN(e){return Qr(e)?e.peek():Bu(e)||Tr(e)||(Zm(e)||ui(e))?fn(e.entries()):e}function YSe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}try{}catch(e){var JN=Mu();typeof process=="undefined"&&(JN.process={}),JN.process.env={}}(function(){function e(){}if(e.name!=="testCodeMinification"&&!1&&typeof process!="undefined"&&process.env.IGNORE_MOBX_MINIFY_WARNING!=="true"){var t=["process","env","NODE_ENV"].join(".");console.warn("[mobx] you are running a minified build, but '"+t+"' was not set to 'production' in your bundler. This results in an unnecessarily large and slow bundle")}})();var ZN="$mobx";typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:AN,extras:{getDebugName:xv},$mobx:ZN});if(!1)var R9e}),Ik=x((O7e,JU)=>{var ACe="Expected a function",ZU=0/0,RCe="[object Symbol]",FCe=/^\s+|\s+$/g,PCe=/^[-+]0x[0-9a-f]+$/i,MCe=/^0b[01]+$/i,BCe=/^0o[0-7]+$/i,LCe=parseInt,zCe=typeof global=="object"&&global&&global.Object===Object&&global,NCe=typeof self=="object"&&self&&self.Object===Object&&self,UCe=zCe||NCe||Function("return this")(),jCe=Object.prototype,qCe=jCe.toString,GCe=Math.max,WCe=Math.min,Ek=function(){return UCe.Date.now()};function HCe(e,t,r){var i,o,n,s,a,l,c=0,d=!1,u=!1,p=!0;if(typeof e!="function")throw new TypeError(ACe);t=QU(t)||0,Dk(r)&&(d=!!r.leading,u="maxWait"in r,n=u?GCe(QU(r.maxWait)||0,t):n,p="trailing"in r?!!r.trailing:p);function h(E){var W=i,K=o;return i=o=void 0,c=E,s=e.apply(K,W),s}function b(E){return c=E,a=setTimeout(w,t),d?h(E):s}function y(E){var W=E-l,K=E-c,D=t-W;return u?WCe(D,n-K):D}function f(E){var W=E-l,K=E-c;return l===void 0||W>=t||W<0||u&&K>=n}function w(){var E=Ek();if(f(E))return T(E);a=setTimeout(w,y(E))}function T(E){return a=void 0,p&&i?h(E):(i=o=void 0,s)}function C(){a!==void 0&&clearTimeout(a),c=0,i=l=o=a=void 0}function F(){return a===void 0?s:T(Ek())}function k(){var E=Ek(),W=f(E);if(i=arguments,o=this,l=E,W){if(a===void 0)return b(l);if(u)return a=setTimeout(w,t),h(l)}return a===void 0&&(a=setTimeout(w,t)),s}return k.cancel=C,k.flush=F,k}function Dk(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function VCe(e){return!!e&&typeof e=="object"}function KCe(e){return typeof e=="symbol"||VCe(e)&&qCe.call(e)==RCe}function QU(e){if(typeof e=="number")return e;if(KCe(e))return ZU;if(Dk(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Dk(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(FCe,"");var r=MCe.test(e);return r||BCe.test(e)?LCe(e.slice(2),r?2:8):PCe.test(e)?ZU:+e}JU.exports=HCe}),rj=x((hKe,Z9)=>{var Q9="Expected a function",ej=0/0,PTe="[object Symbol]",MTe=/^\s+|\s+$/g,BTe=/^[-+]0x[0-9a-f]+$/i,LTe=/^0b[01]+$/i,zTe=/^0o[0-7]+$/i,NTe=parseInt,UTe=typeof global=="object"&&global&&global.Object===Object&&global,jTe=typeof self=="object"&&self&&self.Object===Object&&self,qTe=UTe||jTe||Function("return this")(),GTe=Object.prototype,WTe=GTe.toString,HTe=Math.max,VTe=Math.min,Gk=function(){return qTe.Date.now()};function KTe(e,t,r){var i,o,n,s,a,l,c=0,d=!1,u=!1,p=!0;if(typeof e!="function")throw new TypeError(Q9);t=tj(t)||0,P_(r)&&(d=!!r.leading,u="maxWait"in r,n=u?HTe(tj(r.maxWait)||0,t):n,p="trailing"in r?!!r.trailing:p);function h(E){var W=i,K=o;return i=o=void 0,c=E,s=e.apply(K,W),s}function b(E){return c=E,a=setTimeout(w,t),d?h(E):s}function y(E){var W=E-l,K=E-c,D=t-W;return u?VTe(D,n-K):D}function f(E){var W=E-l,K=E-c;return l===void 0||W>=t||W<0||u&&K>=n}function w(){var E=Gk();if(f(E))return T(E);a=setTimeout(w,y(E))}function T(E){return a=void 0,p&&i?h(E):(i=o=void 0,s)}function C(){a!==void 0&&clearTimeout(a),c=0,i=l=o=a=void 0}function F(){return a===void 0?s:T(Gk())}function k(){var E=Gk(),W=f(E);if(i=arguments,o=this,l=E,W){if(a===void 0)return b(l);if(u)return a=setTimeout(w,t),h(l)}return a===void 0&&(a=setTimeout(w,t)),s}return k.cancel=C,k.flush=F,k}function $Te(e,t,r){var i=!0,o=!0;if(typeof e!="function")throw new TypeError(Q9);return P_(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),KTe(e,t,{leading:i,maxWait:t,trailing:o})}function P_(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function YTe(e){return!!e&&typeof e=="object"}function XTe(e){return typeof e=="symbol"||YTe(e)&&WTe.call(e)==PTe}function tj(e){if(typeof e=="number")return e;if(XTe(e))return ej;if(P_(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=P_(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(MTe,"");var r=LTe.test(e);return r||zTe.test(e)?NTe(e.slice(2),r?2:8):BTe.test(e)?ej:+e}Z9.exports=$Te}),jq=x(d2e=>{Tt(d2e,{glGet:()=>rx,webUtils:()=>m2e});const rx=e=>{const t={preserveDrawingBuffer:!0};return e.getContext("webgl",t)||e.getContext("experimental-webgl",t)},u2e=()=>{const e=rx(Gf()),t=e.getParameter(e.MAX_TEXTURE_SIZE),r=e.getExtension("WEBGL_lose_context");return r&&r.loseContext(),t},p2e=(e,t)=>{if(t instanceof Wf)e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.width,t.height,0,e.RGBA,e.UNSIGNED_BYTE,t.data);else{const r=Uq(t);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}},h2e=e=>Boolean(e.tagName&&e.tagName.toUpperCase()==="IMG"),m2e={isSupported:()=>Boolean(rx(Gf())),isCanvas:e=>e.constructor.name==="Canvas"||Boolean(e.tagName&&e.tagName.toUpperCase()==="CANVAS"),isImage:h2e,Image:window.Image,glMaxTexture:u2e,glGet:rx,createCanvas:Gf,glResize(e,t){return e},glTexImage:p2e}}),Kq=x((hp,mp)=>{(function(e){var t=typeof hp=="object"&&hp&&!hp.nodeType&&hp,r=typeof mp=="object"&&mp&&!mp.nodeType&&mp,i=typeof global=="object"&&global;(i.global===i||i.window===i||i.self===i)&&(e=i);var o,n=2147483647,s=36,a=1,l=26,c=38,d=700,u=72,p=128,h="-",b=/^xn--/,y=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=s-a,C=Math.floor,F=String.fromCharCode,k;function E(M){throw RangeError(w[M])}function W(M,q){for(var G=M.length,we=[];G--;)we[G]=q(M[G]);return we}function K(M,q){var G=M.split("@"),we="";G.length>1&&(we=G[0]+"@",M=G[1]),M=M.replace(f,".");var Q=M.split("."),oe=W(Q,q).join(".");return we+oe}function D(M){for(var q=[],G=0,we=M.length,Q,oe;G<we;)Q=M.charCodeAt(G++),Q>=55296&&Q<=56319&&G<we?(oe=M.charCodeAt(G++),(oe&64512)==56320?q.push(((Q&1023)<<10)+(oe&1023)+65536):(q.push(Q),G--)):q.push(Q);return q}function B(M){return W(M,function(q){var G="";return q>65535&&(q-=65536,G+=F(q>>>10&1023|55296),q=56320|q&1023),G+=F(q),G}).join("")}function Y(M){return M-48<10?M-22:M-65<26?M-65:M-97<26?M-97:s}function de(M,q){return M+22+75*(M<26)-((q!=0)<<5)}function he(M,q,G){var we=0;for(M=G?C(M/d):M>>1,M+=C(M/q);M>T*l>>1;we+=s)M=C(M/T);return C(we+(T+1)*M/(M+c))}function ue(M){var q=[],G=M.length,we,Q=0,oe=p,ae=u,ze,St,Kr,Lr,$r,Eo,an,ol,Oc;for(ze=M.lastIndexOf(h),ze<0&&(ze=0),St=0;St<ze;++St)M.charCodeAt(St)>=128&&E("not-basic"),q.push(M.charCodeAt(St));for(Kr=ze>0?ze+1:0;Kr<G;){for(Lr=Q,$r=1,Eo=s;!(Kr>=G&&E("invalid-input"),an=Y(M.charCodeAt(Kr++)),(an>=s||an>C((n-Q)/$r))&&E("overflow"),Q+=an*$r,ol=Eo<=ae?a:Eo>=ae+l?l:Eo-ae,an<ol);Eo+=s)Oc=s-ol,$r>C(n/Oc)&&E("overflow"),$r*=Oc;we=q.length+1,ae=he(Q-Lr,we,Lr==0),C(Q/we)>n-oe&&E("overflow"),oe+=C(Q/we),Q%=we,q.splice(Q++,0,oe)}return B(q)}function ct(M){var q,G,we,Q,oe,ae,ze,St,Kr,Lr,$r,Eo=[],an,ol,Oc,fw;for(M=D(M),an=M.length,q=p,G=0,oe=u,ae=0;ae<an;++ae)$r=M[ae],$r<128&&Eo.push(F($r));for(we=Q=Eo.length,Q&&Eo.push(h);we<an;){for(ze=n,ae=0;ae<an;++ae)$r=M[ae],$r>=q&&$r<ze&&(ze=$r);for(ol=we+1,ze-q>C((n-G)/ol)&&E("overflow"),G+=(ze-q)*ol,q=ze,ae=0;ae<an;++ae)if($r=M[ae],$r<q&&++G>n&&E("overflow"),$r==q){for(St=G,Kr=s;!(Lr=Kr<=oe?a:Kr>=oe+l?l:Kr-oe,St<Lr);Kr+=s)fw=St-Lr,Oc=s-Lr,Eo.push(F(de(Lr+fw%Oc,0))),St=C(fw/Oc);Eo.push(F(de(St,0))),oe=he(G,ol,we==Q),G=0,++we}++G,++q}return Eo.join("")}function H(M){return K(M,function(q){return b.test(q)?ue(q.slice(4).toLowerCase()):q})}function L(M){return K(M,function(q){return y.test(q)?"xn--"+ct(q):q})}if(o={version:"1.3.2",ucs2:{decode:D,encode:B},decode:ue,encode:ct,toASCII:L,toUnicode:H},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return o});else if(t&&r)if(mp.exports==t)r.exports=o;else for(k in o)o.hasOwnProperty(k)&&(t[k]=o[k]);else e.punycode=o})(hp)}),Yq=x((bet,$q)=>{"use strict";$q.exports={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}}}),Jq=x((yet,Xq)=>{"use strict";function _2e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}Xq.exports=function(e,t,r,i){t=t||"&",r=r||"=";var o={};if(typeof e!="string"||e.length===0)return o;var n=/\+/g;e=e.split(t);var s=1e3;i&&typeof i.maxKeys=="number"&&(s=i.maxKeys);var a=e.length;s>0&&a>s&&(a=s);for(var l=0;l<a;++l){var c=e[l].replace(n,"%20"),d=c.indexOf(r),u,p,h,b;d>=0?(u=c.substr(0,d),p=c.substr(d+1)):(u=c,p=""),h=decodeURIComponent(u),b=decodeURIComponent(p),_2e(o,h)?Array.isArray(o[h])?o[h].push(b):o[h]=[o[h],b]:o[h]=b}return o}}),Qq=x((vet,Zq)=>{"use strict";var Hf=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};Zq.exports=function(e,t,r,i){return t=t||"&",r=r||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(o){var n=encodeURIComponent(Hf(o))+r;return Array.isArray(e[o])?e[o].map(function(s){return n+encodeURIComponent(Hf(s))}).join(t):n+encodeURIComponent(Hf(e[o]))}).join(t):i?encodeURIComponent(Hf(i))+r+encodeURIComponent(Hf(e)):""}}),eG=x(Vf=>{"use strict";Vf.decode=Vf.parse=Jq();Vf.encode=Vf.stringify=Qq()}),oG=x(fp=>{"use strict";var x2e=Kq(),Es=Yq();fp.parse=Kf;fp.resolve=w2e;fp.resolveObject=S2e;fp.format=C2e;fp.Url=Wo;function Wo(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var T2e=/^([a-z0-9.+-]+:)/i,k2e=/:[0-9]*$/,E2e=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,D2e=["<",">",'"',"`"," ","\r",`
`,"	"],I2e=["{","}","|","\\","^","`"].concat(D2e),a2=["'"].concat(I2e),tG=["%","/","?",";","#"].concat(a2),rG=["/","?","#"],O2e=255,iG=/^[+a-z0-9A-Z_-]{0,63}$/,A2e=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,R2e={javascript:!0,"javascript:":!0},l2={javascript:!0,"javascript:":!0},gp={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},c2=eG();function Kf(e,t,r){if(e&&Es.isObject(e)&&e instanceof Wo)return e;var i=new Wo;return i.parse(e,t,r),i}Wo.prototype.parse=function(e,t,r){if(!Es.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),o=i!==-1&&i<e.indexOf("#")?"?":"#",n=e.split(o),s=/\\/g;n[0]=n[0].replace(s,"/"),e=n.join(o);var a=e;if(a=a.trim(),!r&&e.split("#").length===1){var l=E2e.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=c2.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var c=T2e.exec(a);if(c){c=c[0];var d=c.toLowerCase();this.protocol=d,a=a.substr(c.length)}if(r||c||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var u=a.substr(0,2)==="//";u&&!(c&&l2[c])&&(a=a.substr(2),this.slashes=!0)}if(!l2[c]&&(u||c&&!gp[c])){for(var p=-1,h=0;h<rG.length;h++){var b=a.indexOf(rG[h]);b!==-1&&(p===-1||b<p)&&(p=b)}var y,f;p===-1?f=a.lastIndexOf("@"):f=a.lastIndexOf("@",p),f!==-1&&(y=a.slice(0,f),a=a.slice(f+1),this.auth=decodeURIComponent(y)),p=-1;for(var h=0;h<tG.length;h++){var b=a.indexOf(tG[h]);b!==-1&&(p===-1||b<p)&&(p=b)}p===-1&&(p=a.length),this.host=a.slice(0,p),a=a.slice(p),this.parseHost(),this.hostname=this.hostname||"";var w=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!w)for(var T=this.hostname.split(/\./),h=0,C=T.length;h<C;h++){var F=T[h];if(!F)continue;if(!F.match(iG)){for(var k="",E=0,W=F.length;E<W;E++)F.charCodeAt(E)>127?k+="x":k+=F[E];if(!k.match(iG)){var K=T.slice(0,h),D=T.slice(h+1),B=F.match(A2e);B&&(K.push(B[1]),D.unshift(B[2])),D.length&&(a="/"+D.join(".")+a),this.hostname=K.join(".");break}}}this.hostname.length>O2e?this.hostname="":this.hostname=this.hostname.toLowerCase(),w||(this.hostname=x2e.toASCII(this.hostname));var Y=this.port?":"+this.port:"",de=this.hostname||"";this.host=de+Y,this.href+=this.host,w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!R2e[d])for(var h=0,C=a2.length;h<C;h++){var he=a2[h];if(a.indexOf(he)===-1)continue;var ue=encodeURIComponent(he);ue===he&&(ue=escape(he)),a=a.split(he).join(ue)}var ct=a.indexOf("#");ct!==-1&&(this.hash=a.substr(ct),a=a.slice(0,ct));var H=a.indexOf("?");if(H!==-1?(this.search=a.substr(H),this.query=a.substr(H+1),t&&(this.query=c2.parse(this.query)),a=a.slice(0,H)):t&&(this.search="",this.query={}),a&&(this.pathname=a),gp[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Y=this.pathname||"",L=this.search||"";this.path=Y+L}return this.href=this.format(),this};function C2e(e){return Es.isString(e)&&(e=Kf(e)),e instanceof Wo?e.format():Wo.prototype.format.call(e)}Wo.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",i=this.hash||"",o=!1,n="";this.host?o=e+this.host:this.hostname&&(o=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&Es.isObject(this.query)&&Object.keys(this.query).length&&(n=c2.stringify(this.query));var s=this.search||n&&"?"+n||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||gp[t])&&o!==!1?(o="//"+(o||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):o||(o=""),i&&i.charAt(0)!=="#"&&(i="#"+i),s&&s.charAt(0)!=="?"&&(s="?"+s),r=r.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),s=s.replace("#","%23"),t+o+r+s+i};function w2e(e,t){return Kf(e,!1,!0).resolve(t)}Wo.prototype.resolve=function(e){return this.resolveObject(Kf(e,!1,!0)).format()};function S2e(e,t){return e?Kf(e,!1,!0).resolveObject(t):t}Wo.prototype.resolveObject=function(e){if(Es.isString(e)){var t=new Wo;t.parse(e,!1,!0),e=t}for(var r=new Wo,i=Object.keys(this),o=0;o<i.length;o++){var n=i[o];r[n]=this[n]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),a=0;a<s.length;a++){var l=s[a];l!=="protocol"&&(r[l]=e[l])}return gp[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!gp[e.protocol]){for(var c=Object.keys(e),d=0;d<c.length;d++){var u=c[d];r[u]=e[u]}return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!l2[e.protocol]){for(var C=(e.pathname||"").split("/");C.length&&!(e.host=C.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),C[0]!==""&&C.unshift(""),C.length<2&&C.unshift(""),r.pathname=C.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var p=r.pathname||"",h=r.search||"";r.path=p+h}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&r.pathname.charAt(0)==="/",y=e.host||e.pathname&&e.pathname.charAt(0)==="/",f=y||b||r.host&&e.pathname,w=f,T=r.pathname&&r.pathname.split("/")||[],C=e.pathname&&e.pathname.split("/")||[],F=r.protocol&&!gp[r.protocol];if(F&&(r.hostname="",r.port=null,r.host&&(T[0]===""?T[0]=r.host:T.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(C[0]===""?C[0]=e.host:C.unshift(e.host)),e.host=null),f=f&&(C[0]===""||T[0]==="")),y)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,T=C;else if(C.length)T||(T=[]),T.pop(),T=T.concat(C),r.search=e.search,r.query=e.query;else if(!Es.isNullOrUndefined(e.search)){if(F){r.hostname=r.host=T.shift();var k=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;k&&(r.auth=k.shift(),r.host=r.hostname=k.shift())}return r.search=e.search,r.query=e.query,(!Es.isNull(r.pathname)||!Es.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!T.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var E=T.slice(-1)[0],W=(r.host||e.host||T.length>1)&&(E==="."||E==="..")||E==="",K=0,D=T.length;D>=0;D--)E=T[D],E==="."?T.splice(D,1):E===".."?(T.splice(D,1),K++):K&&(T.splice(D,1),K--);if(!f&&!w)for(;K--;K)T.unshift("..");f&&T[0]!==""&&(!T[0]||T[0].charAt(0)!=="/")&&T.unshift(""),W&&T.join("/").substr(-1)!=="/"&&T.push("");var B=T[0]===""||T[0]&&T[0].charAt(0)==="/";if(F){r.hostname=r.host=B?"":T.length?T.shift():"";var k=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;k&&(r.auth=k.shift(),r.host=r.hostname=k.shift())}return f=f||r.host&&T.length,f&&!B&&T.unshift(""),T.length?r.pathname=T.join("/"):(r.pathname=null,r.path=null),(!Es.isNull(r.pathname)||!Es.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r};Wo.prototype.parseHost=function(){var e=this.host,t=k2e.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}}),Jf=x((xG,Xf)=>{(function(){var e,t,r,i,o,n;typeof performance!="undefined"&&performance!==null&&performance.now?Xf.exports=function(){return performance.now()}:typeof process!="undefined"&&process!==null&&process.hrtime?(Xf.exports=function(){return(e()-o)/1e6},t=process.hrtime,e=function(){var s;return s=t(),s[0]*1e9+s[1]},i=e(),n=process.uptime()*1e9,o=i-n):Date.now?(Xf.exports=function(){return Date.now()-r},r=Date.now()):(Xf.exports=function(){return new Date().getTime()-r},r=new Date().getTime())}).call(xG)}),kG=x((Hrt,g2)=>{var Zf=function(){function e(d){return i.appendChild(d.dom),d}function t(d){for(var u=0;u<i.children.length;u++)i.children[u].style.display=u===d?"block":"none";r=d}var r=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",function(d){d.preventDefault(),t(++r%i.children.length)},!1);var o=(performance||Date).now(),n=o,s=0,a=e(new Zf.Panel("FPS","#0ff","#002")),l=e(new Zf.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=e(new Zf.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:i,addPanel:e,showPanel:t,begin:function(){o=(performance||Date).now()},end:function(){s++;var d=(performance||Date).now();if(l.update(d-o,200),d>n+1e3&&(a.update(1e3*s/(d-n),100),n=d,s=0,c)){var u=performance.memory;c.update(u.usedJSHeapSize/1048576,u.jsHeapSizeLimit/1048576)}return d},update:function(){o=this.end()},domElement:i,setMode:t}};Zf.Panel=function(e,t,r){var i=Infinity,o=0,n=Math.round,s=n(window.devicePixelRatio||1),a=80*s,l=48*s,c=3*s,d=2*s,u=3*s,p=15*s,h=74*s,b=30*s,y=document.createElement("canvas");y.width=a,y.height=l,y.style.cssText="width:80px;height:48px";var f=y.getContext("2d");return f.font="bold "+9*s+"px Helvetica,Arial,sans-serif",f.textBaseline="top",f.fillStyle=r,f.fillRect(0,0,a,l),f.fillStyle=t,f.fillText(e,c,d),f.fillRect(u,p,h,b),f.fillStyle=r,f.globalAlpha=.9,f.fillRect(u,p,h,b),{dom:y,update:function(w,T){i=Math.min(i,w),o=Math.max(o,w),f.fillStyle=r,f.globalAlpha=1,f.fillRect(0,0,a,p),f.fillStyle=t,f.fillText(n(w)+" "+e+" ("+n(i)+"-"+n(o)+")",c,d),f.drawImage(y,u+s,p,h-s,b,u,p,h-s,b),f.fillRect(u+h-s,p,s,b),f.fillStyle=r,f.globalAlpha=.9,f.fillRect(u+h-s,p,s,n((1-w/T)*b))}}};typeof g2=="object"&&(g2.exports=Zf)}),FV=x((tht,RV)=>{"use strict";RV.exports=(e,t=1,r)=>{if(r=v({indent:" ",includeEmptyLines:!1},r),typeof e!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof e}\``);if(typeof t!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof t}\``);if(typeof r.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof r.indent}\``);if(t===0)return e;const i=r.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return e.replace(i,r.indent.repeat(t))}}),PV=x(()=>{}),zV=x((oht,MV)=>{"use strict";const BV=PV(),LV=/\s+at.*(?:\(|\s)(.*)\)?/,LIe=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,zIe=typeof BV.homedir=="undefined"?"":BV.homedir();MV.exports=(e,t)=>(t=Object.assign({pretty:!1},t),e.replace(/\\/g,"/").split(`
`).filter(r=>{const i=r.match(LV);if(i===null||!i[1])return!0;const o=i[1];return o.includes(".app/Contents/Resources/electron.asar")||o.includes(".app/Contents/Resources/default_app.asar")?!1:!LIe.test(o)}).filter(r=>r.trim()!=="").map(r=>t.pretty?r.replace(LV,(i,o)=>i.replace(o,o.replace(zIe,"~"))):r).join(`
`))}),UV=x((nht,NV)=>{"use strict";const NIe=FV(),UIe=zV(),jIe=e=>e.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,"");class qIe extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);e=[...e].map(r=>r instanceof Error?r:r!==null&&typeof r=="object"?Object.assign(new Error(r.message),r):new Error(r));let t=e.map(r=>typeof r.stack=="string"?jIe(UIe(r.stack)):String(r)).join(`
`);t=`
`+NIe(t,4),super(t),this.name="AggregateError",Object.defineProperty(this,"_errors",{value:e})}*[Symbol.iterator](){for(const e of this._errors)yield e}}NV.exports=qIe}),r0=x((J2,jV)=>{"use strict";const GIe=UV();jV.exports=(o,n,...s)=>se(J2,[o,n,...s],function*(e,t,{concurrency:r=Infinity,stopOnError:i=!0}={}){return new Promise((a,l)=>{if(typeof t!="function")throw new TypeError("Mapper function is required");if(!((Number.isSafeInteger(r)||r===Infinity)&&r>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${r}\` (${typeof r})`);const c=[],d=[],u=e[Symbol.iterator]();let p=!1,h=!1,b=0,y=0;const f=()=>{if(p)return;const w=u.next(),T=y;if(y++,w.done){h=!0,b===0&&(!i&&d.length!==0?l(new GIe(d)):a(c));return}b++,(()=>se(J2,null,function*(){try{const C=yield w.value;c[T]=yield t(C,T),b--,f()}catch(C){i?(p=!0,l(C)):(d.push(C),b--,f())}}))()};for(let w=0;w<r&&!(f(),h);w++);})})}),pK=x(wOe=>{Tt(wOe,{default:()=>yE});class yE{constructor(e){this._editor=e}serialize(...e){const t=new Xp(this._editor);return t.serialize(...e)}deserialize(e){const t=new $p(this._editor,e);return t.deserialize()}}yE.version="1.0.0"}),mK=x(SOe=>{Tt(SOe,{default:()=>vE});class vE{constructor(e){this._editor=e}serialize(...e){const t=new Zp(this._editor);return t.serialize(...e)}deserialize(e){const t=new Jp(this._editor,e);return t.deserialize()}}vE.version="1.0.1"}),fK=x(TOe=>{Tt(TOe,{default:()=>wE});class wE{constructor(e){this._editor=e}serialize(...e){const t=new rh(this._editor);return t.serialize(...e)}deserialize(e){const t=new th(this._editor,e);return t.deserialize()}}wE.version="2.0.0"}),gK=x(kOe=>{Tt(kOe,{default:()=>CE});class CE{constructor(e){this._editor=e}serialize(...e){const t=new nh(this._editor);return t.serialize(...e)}deserialize(e){const t=new ih(this._editor,e);return t.deserialize()}}CE.version="3.0.0"}),bK=x(EOe=>{Tt(EOe,{default:()=>TE});class TE{constructor(e){this._editor=e}serialize(...e){const t=new ah(this._editor);return t.serialize(...e)}deserialize(e){const t=new sh(this._editor,e);return t.deserialize()}}TE.version="3.1.0"}),yK=x(DOe=>{Tt(DOe,{default:()=>kE});class kE{constructor(e){this._editor=e}serialize(...e){const t=new ch(this._editor);return t.serialize(...e)}deserialize(e){const t=new lh(this._editor,e);return t.deserialize()}}kE.version="3.2.0"}),vK=x(IOe=>{Tt(IOe,{default:()=>EE});class EE{constructor(e){this._editor=e}serialize(...e){const t=new uh(this._editor);return t.serialize(...e)}deserialize(e){const t=new dh(this._editor,e);return t.deserialize()}}EE.version="3.4.0"}),_K=x(OOe=>{Tt(OOe,{default:()=>DE});class DE{constructor(e){this._editor=e}serialize(...e){const t=new hh(this._editor);return t.serialize(...e)}deserialize(e){const t=new ph(this._editor,e);return t.deserialize()}}DE.version="3.5.0"}),xK=x(AOe=>{Tt(AOe,{default:()=>IE});class IE{constructor(e){this._editor=e}serialize(...e){const t=new fh(this._editor);return t.serialize(...e)}deserialize(e){const t=new mh(this._editor,e);return t.deserialize()}}IE.version="3.6.0"}),wK=x(ROe=>{Tt(ROe,{default:()=>OE});class OE{constructor(e){this._editor=e}serialize(...e){const t=new bh(this._editor);return t.serialize(...e)}deserialize(e){const t=new gh(this._editor,e);return t.deserialize()}}OE.version="3.7.0"}),SK=x(FOe=>{Tt(FOe,{default:()=>AE});class AE{constructor(e){this._editor=e}serialize(...e){const t=new vh(this._editor);return t.serialize(...e)}deserialize(e){const t=new yh(this._editor,e);return t.deserialize()}}AE.version="3.8.0"}),TK=x(POe=>{Tt(POe,{default:()=>RE});class RE{constructor(e){this._editor=e}serialize(...e){const t=new b0(this._editor);return t.serialize(...e)}deserialize(e){const t=new g0(this._editor,e);return t.deserialize()}}RE.version="3.9.0"}),QE=x(SAe=>{Tt(SAe,{Deserializer:()=>ii,Serializer:()=>Fd})}),B$=x(_Re=>{Tt(_Re,{Color:()=>nn,ColorPicker:()=>_D})}),iI=x(cMe=>{Tt(cMe,{BasicUI:()=>zJ})}),aZ=x(mMe=>{Tt(mMe,{AdjustmentConfiguration:()=>Kv,AdjustmentIdentifier:()=>Ue,AdjustmentIdentifierKeys:()=>Vv,AdvancedUICardLabel:()=>Mt,AdvancedUICategoryCard:()=>nZ,AdvancedUIItemCard:()=>sZ,AdvancedUIToolbarItem:()=>Kh,BlendMode:()=>Oe,BrushConfiguration:()=>o_,CanvasAction:()=>_e,CanvasBarTextSecondaryButton:()=>Pf,CardAvatar:()=>Ol,CardType:()=>Ee,CategoryHeaderType:()=>Vt,Checkbox:()=>tZ,CheckboxBase:()=>rZ,CheckboxCheckMark:()=>oZ,CheckboxInput:()=>iZ,ColorItem:()=>jJ,ColorItemActiveOverlay:()=>HJ,ColorItemBackground:()=>GJ,ColorItemBase:()=>qJ,ColorItemTiledBackground:()=>WJ,Configuration:()=>y9,ContainedPrimaryButton:()=>ap,Container:()=>UJ,Dialog:()=>VJ,DialogBackdrop:()=>YJ,DialogBase:()=>KJ,DialogBody:()=>JJ,DialogContainer:()=>$J,DialogFooter:()=>ZJ,DialogHeader:()=>XJ,DialogSpinner:()=>QJ,EventEmitter:()=>so,ExportConfiguration:()=>b9,ExportFormat:()=>Dr,FilterCategoryIdentifier:()=>Et,FilterConfiguration:()=>$v,FilterIdentifier:()=>I,FocusConfiguration:()=>Xv,FocusIdentifier:()=>Pe,FrameConfiguration:()=>Jv,IconButton:()=>xs,ImageFormat:()=>ar,ImageMimeType:()=>no,Label:()=>eZ,LibraryCategory:()=>v9,LibraryConfiguration:()=>Zv,LibraryImage:()=>_9,LibraryProvider:()=>x9,ModalType:()=>dt,OutlinedPrimaryButton:()=>sp,OutlinedSecondaryButton:()=>ba,OverlayConfiguration:()=>Qv,OverlayIdentifier:()=>Ce,PhotoEditorSDKUI:()=>nI,PhotoEditorSDKUIComponent:()=>aI,SerializationExportType:()=>Hv,SnappingConfiguration:()=>Wv,SpriteActionButton:()=>Dn,StickerConfiguration:()=>e_,TextConfiguration:()=>t_,TextDesignConfiguration:()=>n_,TextPrimaryButton:()=>Il,TextSecondaryButton:()=>Uo,Tool:()=>S,TransformConfiguration:()=>s_,TransformIdentifier:()=>Ut,UIEvent:()=>fe,deepmergeAll:()=>yo,defaultConfig:()=>Sh,isDuoToneFilterAsset:()=>ed,isExistingCategory:()=>g9,isExistingItem:()=>f9,isGoogleFontAsset:()=>i_,isLUTFilterAsset:()=>Yv,isWebFontAsset:()=>r_})});const pI={react:"React","react-dom":"ReactDOM","react-dom/server":"ReactDOMServer","styled-components":"styled"};window.require=e=>{if(Object.hasOwnProperty.call(pI,e)){const t=pI[e];if(Object.hasOwnProperty.call(window,t))return window[t];console.log(`Cannot find umd script for ${e}`)}return};"use strict";typeof Promise=="undefined"&&(kI().enable(),self.Promise=DI());typeof window!="undefined"&&OI();Object.assign=FI();tR();NR();"use strict";j6();G6();const bWt=_($6()),yWt=_(Z6()),NJ=_(Ge()),eb=_(require("react")),ir=_(Ge()),Qt=_(require("react")),QN=_(Ge()),eU=_(require("react"));if(!eU.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!QN.spy)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");const ak=_(require("react-dom")),iU=_(Ge()),uf=_(require("react"));var XSe=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),o,n=[],s;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)n.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return n};function lk(){var e=XSe(uf.useState(0),2),t=e[1],r=uf.useCallback(function(){t(function(i){return i+1})},[]);return r}function tU(e){return typeof Symbol=="function"?Symbol.for(e):"__$mobx-react "+e+"__"}var JSe={};function rU(){return typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:JSe}var ZSe=tU("observerBatching");function QSe(e){e()}function wv(e){e||(e=QSe),iU.configure({reactionScheduler:e}),rU()[ZSe]=!0}var eCe=!1;function fs(){return eCe}const hf=_(require("react")),pk=_(Ge()),Tv=_(require("react")),oU=_(Ge());function nU(e){return oU.getDependencyTree(e)}function sU(e){var t={cleanAt:Date.now()+tCe,reaction:e};return t}var tCe=1e4,rCe=1e4,pf=new Set,ck;function aU(){ck===void 0&&(ck=setTimeout(iCe,rCe))}function lU(e){pf.add(e),aU()}function cU(e){pf.delete(e)}function iCe(){ck=void 0;var e=Date.now();pf.forEach(function(t){var r=t.current;r&&(e>=r.cleanAt&&(r.reaction.dispose(),t.current=null,pf.delete(t)))}),pf.size>0&&aU()}const dU=_(require("react"));var Sv=!1,Cv=[];function dk(e){return function(){Sv?Cv.push(e):e()}}function uk(e){Sv=!0,Cv=[];try{var t=e();Sv=!1;var r=Cv.length>0?Cv:void 0;return dU.default.useLayoutEffect(function(){r&&r.forEach(function(i){return i()})},[r]),t}finally{Sv=!1}}var oCe={};function uU(e){return"observer"+e}function Hu(e,t,r){if(t===void 0&&(t="observed"),r===void 0&&(r=oCe),fs())return e();var i=r.useForceUpdate||lk,o=i(),n=dk(o),s=Tv.default.useRef(null);if(!s.current){var a=new pk.Reaction(uU(t),function(){l.mounted?n():(a.dispose(),s.current=null)}),l=sU(a);s.current=l,lU(s)}var c=s.current.reaction;return Tv.default.useDebugValue(c,nU),Tv.default.useEffect(function(){return cU(s),s.current?s.current.mounted=!0:(s.current={reaction:new pk.Reaction(uU(t),function(){n()}),cleanAt:Infinity},n()),function(){s.current.reaction.dispose(),s.current=null}},[]),uk(function(){var d,u;if(c.track(function(){try{d=e()}catch(p){u=p}}),u)throw u;return d})}var hk=function(){return hk=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},hk.apply(this,arguments)};function mk(e,t){if(fs())return e;var r=hk({forwardRef:!1},t),i=e.displayName||e.name,o=function(s,a){return Hu(function(){return e(s,a)},i)};o.displayName=i;var n;return r.forwardRef?n=hf.memo(hf.forwardRef(o)):n=hf.memo(o),nCe(e,n),n.displayName=i,n}var sCe={$$typeof:!0,render:!0,compare:!0,type:!0};function nCe(e,t){Object.keys(e).forEach(function(r){sCe[r]||Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}function Vu(e){var t=e.children,r=e.render,i=t||r;return typeof i!="function"?null:Hu(i)}Vu.propTypes={children:pU,render:pU};Vu.displayName="Observer";function pU(e,t,r,i,o){var n=t==="children"?"render":"children",s=typeof e[t]=="function",a=typeof e[n]=="function";return s&&a?new Error("MobX Observer: Do not use children and render in the same time in`"+r):s||a?null:new Error("Invalid prop `"+o+"` of type `"+typeof e[t]+"` supplied to `"+r+"`, expected `function`.")}const hU=_(Ge()),aCe=_(require("react"));const fk=_(Ge()),cCe=_(require("react"));wv(ak.unstable_batchedUpdates);var mU=0;function hCe(e){if(typeof Symbol=="function")return Symbol(e);var t="__$mobx-react "+e+" ("+mU+")";return mU++,t}var gk={};function Sl(e){return gk[e]||(gk[e]=hCe(e)),gk[e]}function gU(e,t){if(fU(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(var o=0;o<r.length;o++)if(!Object.hasOwnProperty.call(t,r[o])||!fU(e[r[o]],t[r[o]]))return!1;return!0}function fU(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var mCe={$$typeof:1,render:1,compare:1,type:1,childContextTypes:1,contextType:1,contextTypes:1,defaultProps:1,getDefaultProps:1,getDerivedStateFromError:1,getDerivedStateFromProps:1,mixins:1,propTypes:1};function fCe(e,t){var r=Object.getOwnPropertyNames(Object.getPrototypeOf(e));Object.getOwnPropertyNames(e).forEach(function(i){!mCe[i]&&r.indexOf(i)===-1&&Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))})}function pa(e,t,r){Object.hasOwnProperty.call(e,t)?e[t]=r:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:r})}var bU=Sl("patchMixins"),yU=Sl("patchedDefinition");function gCe(e,t){var r=e[bU]=e[bU]||{},i=r[t]=r[t]||{};return i.locks=i.locks||0,i.methods=i.methods||[],i}function vU(e,t){for(var r=this,i=arguments.length,o=new Array(i>2?i-2:0),n=2;n<i;n++)o[n-2]=arguments[n];t.locks++;try{var s;return e!=null&&(s=e.apply(this,o)),s}finally{t.locks--,t.locks===0&&t.methods.forEach(function(a){a.apply(r,o)})}}function _U(e,t){var r=function(){for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];vU.call.apply(vU,[this,e,t].concat(n))};return r}function bCe(e,t,r){var i=gCe(e,t);i.methods.indexOf(r)<0&&i.methods.push(r);var o=Object.getOwnPropertyDescriptor(e,t);if(o&&o[yU])return;var n=e[t],s=xU(e,t,o?o.enumerable:void 0,i,n);Object.defineProperty(e,t,s)}function xU(e,t,r,i,o){var n,s=_U(o,i);return n={},n[yU]=!0,n.get=function(){return s},n.set=function(l){if(this===e)s=_U(l,i);else{var c=xU(this,t,r,i,l);Object.defineProperty(this,t,c)}},n.configurable=!0,n.enumerable=r,n}var bk=ir.$mobx||"$mobx",wU=Sl("isMobXReactObserver"),SU=Sl("isUnmounted"),kv=Sl("skipRender"),Ev=Sl("isForcingUpdate");function vCe(e){var t=e.prototype;if(e[wU]){var r=yk(t);console.warn("The provided component class ("+r+`) 
                has already been declared as an observer component.`)}else e[wU]=!0;if(t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==Qt.PureComponent){if(!t.shouldComponentUpdate)t.shouldComponentUpdate=CU;else if(t.shouldComponentUpdate!==CU)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}TU(t,"props"),TU(t,"state");var i=t.render;return t.render=function(){return yCe.call(this,i)},bCe(t,"componentWillUnmount",function(){var o;if(fs()===!0)return;if((o=this.render[bk])===null||o===void 0||o.dispose(),this[SU]=!0,!this.render[bk]){var n=yk(this);console.warn("The reactive render of an observer class component ("+n+`) 
                was overriden after MobX attached. This may result in a memory leak if the 
                overriden reactive render was not properly disposed.`)}}),e}function yk(e){return e.displayName||e.name||e.constructor&&(e.constructor.displayName||e.constructor.name)||"<component>"}function yCe(e){var t=this;if(fs()===!0)return e.call(this);pa(this,kv,!1),pa(this,Ev,!1);var r=yk(this),i=e.bind(this),o=!1,n=new ir.Reaction(r+".render()",function(){if(!o&&(o=!0,t[SU]!==!0)){var a=!0;try{pa(t,Ev,!0),t[kv]||Qt.Component.prototype.forceUpdate.call(t),a=!1}finally{pa(t,Ev,!1),a&&n.dispose()}}});n.reactComponent=this,s[bk]=n,this.render=s;function s(){o=!1;var a=void 0,l=void 0;if(n.track(function(){try{l=ir._allowStateChanges(!1,i)}catch(c){a=c}}),a)throw a;return l}return s.call(this)}function CU(e,t){return fs()&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==t?!0:!gU(this.props,e)}function TU(e,t){var r=Sl("reactProp_"+t+"_valueHolder"),i=Sl("reactProp_"+t+"_atomHolder");function o(){return this[i]||pa(this,i,ir.createAtom("reactive "+t)),this[i]}Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var s=!1;return ir._allowStateReadsStart&&ir._allowStateReadsEnd&&(s=ir._allowStateReadsStart(!0)),o.call(this).reportObserved(),ir._allowStateReadsStart&&ir._allowStateReadsEnd&&ir._allowStateReadsEnd(s),this[r]},set:function(s){!this[Ev]&&!gU(this[r],s)?(pa(this,r,s),pa(this,kv,!0),o.call(this).reportChanged(),pa(this,kv,!1)):pa(this,r,s)}})}var kU=typeof Symbol=="function"&&Symbol.for,EU=kU?Symbol.for("react.forward_ref"):typeof Qt.forwardRef=="function"&&Qt.forwardRef(function(e){return null}).$$typeof,DU=kU?Symbol.for("react.memo"):typeof Qt.memo=="function"&&Qt.memo(function(e){return null}).$$typeof;function R(e){if(e.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),DU&&e.$$typeof===DU)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(EU&&e.$$typeof===EU){var t=e.render;if(typeof t!="function")throw new Error("render property of ForwardRef was not a function");return Qt.forwardRef(function(){var i=arguments;return Qt.createElement(Vu,null,function(){return t.apply(void 0,i)})})}return typeof e=="function"&&(!e.prototype||!e.prototype.render)&&!e.isReactClass&&!Object.prototype.isPrototypeOf.call(Qt.Component,e)?mk(e):vCe(e)}function Dv(){return Dv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Dv.apply(this,arguments)}function _Ce(e,t){if(e==null)return{};var r={},i=Object.keys(e),o,n;for(n=0;n<i.length;n++){if(o=i[n],t.indexOf(o)>=0)continue;r[o]=e[o]}return r}var mf=Qt.default.createContext({});function ff(e){var t=e.children,r=_Ce(e,["children"]),i=Qt.default.useContext(mf),o=Qt.default.useRef(Dv({},i,r)),n=o.current;if(!1)var s;return Qt.default.createElement(mf.Provider,{value:n},t)}ff.displayName="MobXProvider";function IU(e,t,r,i){var o=Qt.default.forwardRef(function(n,s){var a=Dv({},n),l=Qt.default.useContext(mf);return Object.assign(a,e(l||{},a)||{}),s&&(a.ref=s),Qt.default.createElement(t,a)});return i&&(o=R(o)),o.isMobxInjector=!0,fCe(t,o),o.wrappedComponent=t,o.displayName=xCe(t,r),o}function xCe(e,t){var r,i=e.displayName||e.name||e.constructor&&e.constructor.name||"Component";return t?r="inject-with-"+t+"("+i+")":r="inject("+i+")",r}function wCe(e){return function(t,r){return e.forEach(function(i){if(i in r)return;if(!(i in t))throw new Error("MobX injector: Store '"+i+"' is not available! Make sure it is provided by some Provider");r[i]=t[i]}),r}}function P(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(typeof arguments[0]=="function"){var i=arguments[0];return function(o){return IU(i,o,i.name,!0)}}else return function(o){return IU(wCe(t),o,t.join("-"),!1)}}if(!Qt.Component)throw new Error("mobx-react requires React to be available");if(!ir.observable)throw new Error("mobx-react requires mobx to be available");const IX=_(require("styled-components")),Kj=_(require("styled-components")),OU=_(require("styled-components")),Iv=OU.keyframes`
from {
  opacity: 1;
  transform: scale(0);
}
to {
  opacity: 0;
  transform: scale(10);
}
`;const AU=_(require("styled-components")),RU=AU.keyframes`
  0% {
    opacity: 0;
    transform: scale(0.9);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
`;const FU=_(require("styled-components")),Ov=FU.keyframes`
  0% {
    opacity: 0;
    transform: scale(0.9) translateY(-20px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
`;const Cl=_(require("react"));var Po=[],PU=function(){return Po.some(function(e){return e.activeTargets.length>0})},MU=function(){return Po.some(function(e){return e.skippedTargets.length>0})},BU="ResizeObserver loop completed with undelivered notifications.",LU=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:BU}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=BU),window.dispatchEvent(e)},Jc;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Jc||(Jc={}));var vk=function(){function e(t,r,i,o){return this.x=t,this.y=r,this.width=i,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}return e.prototype.toJSON=function(){var t=this,r=t.x,i=t.y,o=t.top,n=t.right,s=t.bottom,a=t.left,l=t.width,c=t.height;return{x:r,y:i,top:o,right:n,bottom:s,left:a,width:l,height:c}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),gf=function(e){return e instanceof SVGElement&&"getBBox"in e},Av=function(e){if(gf(e)){var t=e.getBBox(),r=t.width,i=t.height;return!r&&!i}var o=e,n=o.offsetWidth,s=o.offsetHeight;return!(n||s||e.getClientRects().length)},_k=function(e){var t,r,i=(r=(t=e)===null||t===void 0?void 0:t.ownerDocument)===null||r===void 0?void 0:r.defaultView;return!!(i&&e instanceof i.Element)},zU=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Zc=typeof window!="undefined"?window:{},Rv=new WeakMap,NU=/auto|scroll/,SCe=/^tb|vertical/,CCe=/msie|trident/i.test(Zc.navigator&&Zc.navigator.userAgent),gs=function(e){return parseFloat(e||"0")},Ku=function(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=!1),Object.freeze({inlineSize:(r?t:e)||0,blockSize:(r?e:t)||0})},UU=Object.freeze({devicePixelContentBoxSize:Ku(),borderBoxSize:Ku(),contentBoxSize:Ku(),contentRect:new vk(0,0,0,0)}),xk=function(e,t){if(t===void 0&&(t=!1),Rv.has(e)&&!t)return Rv.get(e);if(Av(e))return Rv.set(e,UU),UU;var r=getComputedStyle(e),i=gf(e)&&e.ownerSVGElement&&e.getBBox(),o=!CCe&&r.boxSizing==="border-box",n=SCe.test(r.writingMode||""),s=!i&&NU.test(r.overflowY||""),a=!i&&NU.test(r.overflowX||""),l=i?0:gs(r.paddingTop),c=i?0:gs(r.paddingRight),d=i?0:gs(r.paddingBottom),u=i?0:gs(r.paddingLeft),p=i?0:gs(r.borderTopWidth),h=i?0:gs(r.borderRightWidth),b=i?0:gs(r.borderBottomWidth),y=i?0:gs(r.borderLeftWidth),f=u+c,w=l+d,T=y+h,C=p+b,F=a?e.offsetHeight-C-e.clientHeight:0,k=s?e.offsetWidth-T-e.clientWidth:0,E=o?f+T:0,W=o?w+C:0,K=i?i.width:gs(r.width)-E-k,D=i?i.height:gs(r.height)-W-F,B=K+f+k+T,Y=D+w+F+C,de=Object.freeze({devicePixelContentBoxSize:Ku(Math.round(K*devicePixelRatio),Math.round(D*devicePixelRatio),n),borderBoxSize:Ku(B,Y,n),contentBoxSize:Ku(K,D,n),contentRect:new vk(u,l,K,D)});return Rv.set(e,de),de},Fv=function(e,t,r){var i=xk(e,r),o=i.borderBoxSize,n=i.contentBoxSize,s=i.devicePixelContentBoxSize;switch(t){case Jc.DEVICE_PIXEL_CONTENT_BOX:return s;case Jc.BORDER_BOX:return o;default:return n}},wk=function(){function e(t){var r=xk(t);this.target=t,this.contentRect=r.contentRect,this.borderBoxSize=[r.borderBoxSize],this.contentBoxSize=[r.contentBoxSize],this.devicePixelContentBoxSize=[r.devicePixelContentBoxSize]}return e}(),Pv=function(e){if(Av(e))return Infinity;for(var t=0,r=e.parentNode;r;)t+=1,r=r.parentNode;return t},jU=function(){var e=Infinity,t=[];Po.forEach(function(s){if(s.activeTargets.length===0)return;var a=[];s.activeTargets.forEach(function(c){var d=new wk(c.target),u=Pv(c.target);a.push(d),c.lastReportedSize=Fv(c.target,c.observedBox),u<e&&(e=u)}),t.push(function(){s.callback.call(s.observer,a,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)});for(var r=0,i=t;r<i.length;r++){var o=i[r];o()}return e},Sk=function(e){Po.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(o){o.isActive()&&(Pv(o.target)>e?r.activeTargets.push(o):r.skippedTargets.push(o))})})},qU=function(){var e=0;for(Sk(e);PU();)e=jU(),Sk(e);return MU()&&LU(),e>0},Ck,GU=[],TCe=function(){return GU.splice(0).forEach(function(e){return e()})},WU=function(e){if(!Ck){var t=0,r=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return TCe()}).observe(r,i),Ck=function(){r.textContent=""+(t?t--:t++)}}GU.push(e),Ck()},HU=function(e){WU(function(){requestAnimationFrame(e)})},Mv=0,kCe=function(){return!!Mv},ECe=250,DCe={attributes:!0,characterData:!0,childList:!0,subtree:!0},VU=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],KU=function(e){return e===void 0&&(e=0),Date.now()+e},Tk=!1,ICe=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var r=this;if(t===void 0&&(t=ECe),Tk)return;Tk=!0;var i=KU(t);HU(function(){var o=!1;try{o=qU()}finally{if(Tk=!1,t=i-KU(),!kCe())return;o?r.run(1e3):t>0?r.run(t):r.start()}})},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,r=function(){return t.observer&&t.observer.observe(document.body,DCe)};document.body?r():Zc.addEventListener("DOMContentLoaded",r)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),VU.forEach(function(r){return Zc.addEventListener(r,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),VU.forEach(function(r){return Zc.removeEventListener(r,t.listener,!0)}),this.stopped=!0)},e}(),Bv=new ICe,kk=function(e){!Mv&&e>0&&Bv.start(),Mv+=e,!Mv&&Bv.stop()},OCe=function(e){return!gf(e)&&!zU(e)&&getComputedStyle(e).display==="inline"},$U=function(){function e(t,r){this.target=t,this.observedBox=r||Jc.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=Fv(this.target,this.observedBox,!0);return OCe(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),YU=function(){function e(t,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=r}return e}(),Lv=new WeakMap,XU=function(e,t){for(var r=0;r<e.length;r+=1)if(e[r].target===t)return r;return-1},bf=function(){function e(){}return e.connect=function(t,r){var i=new YU(t,r);Lv.set(t,i)},e.observe=function(t,r,i){var o=Lv.get(t),n=o.observationTargets.length===0;XU(o.observationTargets,r)<0&&(n&&Po.push(o),o.observationTargets.push(new $U(r,i&&i.box)),kk(1),Bv.schedule())},e.unobserve=function(t,r){var i=Lv.get(t),o=XU(i.observationTargets,r),n=i.observationTargets.length===1;o>=0&&(n&&Po.splice(Po.indexOf(i),1),i.observationTargets.splice(o,1),kk(-1))},e.disconnect=function(t){var r=this,i=Lv.get(t);i.observationTargets.slice().forEach(function(o){return r.unobserve(t,o.target)}),i.activeTargets.splice(0,i.activeTargets.length)},e}(),yf=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");bf.connect(this,t)}return e.prototype.observe=function(t,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!_k(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");bf.observe(this,t,r)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!_k(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");bf.unobserve(this,t)},e.prototype.disconnect=function(){bf.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();const t9=_(Ik()),r9=_(require("styled-components")),e9=_(require("react")),zv=e9.default.createContext({}),$Ce=r9.default.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  margin: 0;
  background: ${e=>e.theme.background};
  color: ${e=>e.theme.foreground};
  display: flex;
  flex-direction: row;
  overflow: hidden;
  -webkit-touch-callout: none;
  user-select: none;
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-family: '${e=>e.theme.typography.fontFamily}', sans-serif;
    /* css reset for a global box-sizing: border-box */
    box-sizing: content-box;
    /* todo: fix the issue with these settings */
    font-size: inherit;
    color: inherit;
    line-height: normal;

    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.2) transparent;

    &::-webkit-scrollbar-track {
      border-radius: 10px;
      background-color: transparent;
      margin: 1px;
    }

    &::-webkit-scrollbar {
      width: 6px;
      height: 6px;
      background-color: transparent;
    }

    &::-webkit-scrollbar-thumb {
      border-radius: 10px;
      box-shadow: inset 0 0 14px rgba(0, 0, 0, 0.4);
      background-color: rgba(255, 255, 255, 0.2);
    }

    &::-webkit-scrollbar-thumb:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }
  }
`;class i9 extends Cl.default.Component{constructor(e){super(e);this.node=Cl.default.createRef();this.saveEditorDimensions=e=>{this.setState({contextValue:{element:e,rect:e.getBoundingClientRect()}})};var t;if((t=Cl.default)==null?void 0:t.version){const r=Number.parseInt(Cl.default.version.split(".")[0],10),i=Number.parseInt(Cl.default.version.split(".")[1],10);(r<16||r===16&&i<8)&&console.error("Please be aware that the PhotoEditorSDK will require React 16.8.6 or above.")}this.saveEditorDimensions=t9.default(this.saveEditorDimensions,100),this.resizeObserver=new yf(([r])=>{this.saveEditorDimensions(r.target)}),this.state={contextValue:{element:null,rect:null}}}componentDidMount(){var e;((e=this.node)==null?void 0:e.current)&&this.resizeObserver.observe(this.node.current)}componentWillUnmount(){var e;((e=this.node)==null?void 0:e.current)&&this.resizeObserver.unobserve(this.node.current)}render(){const{children:e}=this.props,{contextValue:t}=this.state;return Cl.default.createElement($Ce,{ref:this.node},Cl.default.createElement(zv.Provider,{value:t},e))}}const xf=_(require("react")),Qc=_(require("react")),_f=_(require("styled-components")),Nv=_(require("styled-components")),vf=Nv.css`
  position: absolute;
  top: 0;
  left: 0;
  height: ${e=>e.theme.measurements.colorItem.size}px;
  width: ${e=>e.theme.measurements.colorItem.size}px;
  border-radius: ${e=>e.theme.colorItem.borderRadius||`${e.theme.shape.radiusSmall}px`};
  pointer-events: none;
`,YCe=Nv.default.div.attrs(e=>({style:{background:e.color}}))`
  ${vf}
  z-index: ${e=>e.theme.measurements.zIndex.colorItem.background};
`;var Uv=YCe;const XCe=_f.default.div`
  ${vf}
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: ${e=>e.theme.measurements.zIndex.colorItem.overlay};

  box-sizing: border-box;
  border: 2px solid transparent;
  border-radius: ${e=>e.theme.colorItem.borderRadius||`${e.theme.shape.radiusSmall}px`};
  transition: border-color 300ms ease-in-out;
  ${e=>e.isActive&&_f.css`
      border-color: ${e.theme.selectColor.activeBorderColor};
    `}
`,Ok=_f.default.span`
  display: inline-block;
  height: 2px;
  width: 2px;
  border-radius: 50%;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.6);
  background: rgba(255, 255, 255, 0.87);
  margin: 1px;
  pointer-events: none;
`,JCe=({isActive:e,className:t,style:r})=>Qc.default.createElement(XCe,{isActive:e,className:t,style:r},e&&Qc.default.createElement(Qc.default.Fragment,null,Qc.default.createElement(Ok,null),Qc.default.createElement(Ok,null),Qc.default.createElement(Ok,null)));var jv=JCe;const s9=_(require("styled-components")),o9=_(require("styled-components")),Er=o9.css`
  &:focus {
    outline: none;
    box-shadow: 0 0 2px ${e=>e.theme.focusOutlineColor};
  }
  &:-moz-focusring {
    outline: none;
    box-shadow: 0 0 2px ${e=>e.theme.focusOutlineColor};
  }
`;const n9=_(require("styled-components")),$u=n9.css`
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
  clip: rect(1px, 1px, 1px, 1px);
`;const ZCe=s9.default.button.attrs({type:"button"})`
  &&& {
    box-sizing: border-box;
  }
  position: relative;
  background: transparent;
  border: none;
  height: ${e=>e.theme.measurements.colorItem.size}px;
  width: ${e=>e.theme.measurements.colorItem.size}px;
  margin: ${e=>e.theme.colorItem.margin};
  padding: 0;
  cursor: pointer;
  border-radius: ${e=>e.theme.colorItem.borderRadius||`${e.theme.shape.radiusSmall}px`};

  &:hover {
    opacity: 0.7;
  }

  ${Er}

  &:disabled {
    opacity: ${e=>e.theme.selectColor.inactiveOpacity};
    cursor: default;
  }
`;var qv=ZCe;const a9=_(require("styled-components")),QCe=a9.default.div.attrs(e=>{const t=e.url?{backgroundImage:`url(${e.url})`}:{};return{style:t}})`
  ${vf}
  z-index: ${e=>e.theme.measurements.zIndex.colorItem.tiledBackground};
`;var Gv=QCe;const eTe=({isActive:e,onClick:t,color:r,label:i,isDisabled:o,tiledBackgroundUrl:n,className:s,style:a,children:l})=>xf.default.createElement(qv,{disabled:o,onClick:t,"aria-label":i,className:s,style:a},xf.default.createElement(Gv,{url:n}),xf.default.createElement(Uv,{color:r}),xf.default.createElement(jv,{isActive:e}),l);var l9=P("config")(R(eTe));const C_=_(require("react"));const wf=()=>window&&window.navigator&&window.navigator.userAgent||"",Mo=(e=wf())=>e.indexOf("Edge")!==-1,Ht=(e=wf())=>!!e.match(/msie|trident/i),c9=(e=wf())=>!!e.match(/windows/i),d9=(e=wf())=>e.indexOf("Safari")!==-1&&e.indexOf("Chrome")===-1,u9=(e=wf())=>!!e.match(/iP(hone|od|ad)|AppleWebKit/),p9=()=>{const e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");return t&&t instanceof WebGLRenderingContext};const tTe=new RegExp(/\uD83D\uDC68\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68|\uD83D\uDC69\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC69(?:\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFE])|\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFC-\uDFFF]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68\u200D(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68\u200D\u2764\uFE0F\u200D\uD83D\uDC68|\uD83D\uDC69\u200D\u2764\uFE0F\u200D(?:\uD83D[\uDC68\uDC69])|\uD83E\uDDD1\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC68(?:\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|(?:\uD83D[\uDC67-\uDC69])\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]\uFE0F)|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83C\uDFF3\uFE0F\u200D\u26A7|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF]))\u200D[\u2695\u2696\u2708]\uFE0F|\uD83D\uDC69\u200D(?:\uD83D[\uDC67\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83D\uDC3B\u200D\u2744|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDF])\u200D[\u2640\u2642])\uFE0F|\uD83E\uDDD1\u200D[\u2695\u2696\u2708]\uFE0F|(?:\uD83D[\uDC68\uDC69])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D[\u2695\u2696\u2708]\uFE0F)|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC08\u200D\u2B1B|\uD83E\uDDD1\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDC66\uDC67\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC3\uDFC7]|\uD83D[\uDC43\uDC4A-\uDC4C\uDC4F\uDC50\uDC66-\uDC69\uDC6B-\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD7A\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270C\u270D]|\uD83C[\uDFC2\uDFC4\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC46-\uDC49\uDC4D\uDC4E\uDD74\uDD75\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9\u23EA\u23ED-\u23EF\u23F1-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7\u26F8\u26FA\u26FD\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2753\u2757\u2763\u2764\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE1A\uDE2F\uDE37\uDF0D-\uDF0F\uDF15\uDF1C\uDF21\uDF24-\uDF2C\uDF36\uDF78\uDF7D\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFA7\uDFAC-\uDFAE\uDFC6\uDFCD\uDFCE\uDFD4-\uDFE0\uDFED\uDFF3\uDFF5\uDFF7]|\uD83D[\uDC08\uDC15\uDC1F\uDC26\uDC3F\uDC41\uDC53\uDC6A\uDC7D\uDCA3\uDCB0\uDCB3\uDCBB\uDCBF\uDCCB\uDCDA\uDCDF\uDCE4-\uDCE6\uDCEA-\uDCED\uDCF7\uDCF9-\uDCFB\uDCFD\uDD08\uDD0D\uDD12\uDD13\uDD49\uDD4A\uDD50-\uDD67\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDE10\uDE87\uDE8D\uDE91\uDE94\uDE98\uDEAD\uDEB2\uDEB9\uDEBA\uDEBC\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|[\u23E9-\u23F3\u23F8-\u23FA\u25FB-\u25FE\u2614\u2615\u267F\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26C8\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]/g),h9=e=>e.replace(tTe,"");const Tl=e=>{try{return new URL(e),!0}catch(t){return!1}};const m9=e=>e instanceof HTMLImageElement;function f9(e){return!Object.prototype.hasOwnProperty.call(e,"name")}function g9(e){return!Object.prototype.hasOwnProperty.call(e,"name")}var _e;(function(e){e.UNDO="undo",e.REDO="redo",e.DELETE="delete",e.BRING_TO_FRONT="bringtofront",e.EDIT="edit",e.DUPLICATE="duplicate",e.ADD="add",e.FLIP="flip",e.INVERT="invert",e.CLOSE="close",e.EXPORT="export"})(_e||(_e={}));var S;(function(e){e.LIBRARY="library",e.ART_FILTER="artFilter",e.TRANSFORM="transform",e.FILTER="filter",e.ADJUSTMENT="adjustment",e.FOCUS="focus",e.STICKER="sticker",e.TEXT="text",e.TEXT_DESIGN="textdesign",e.OVERLAY="overlay",e.FRAME="frame",e.BRUSH="brush"})(S||(S={}));var Vt;(function(e){e.TEXT="text",e.CARD="card"})(Vt||(Vt={}));var Ee;(function(e){e.LARGE="large",e.MEDIUM="medium",e.SMALL="small"})(Ee||(Ee={}));var dt;(function(e){e.ERROR="error",e.WARNING="warning",e.INFO="info",e.TEXT_EDIT="textEdit"})(dt||(dt={}));class rTe{constructor(){this.enabled=!0;this.threshold=20;this.snapToHorizontalCenter=!0;this.snapToVerticalCenter=!0;this.snapToLeft=.1;this.snapToRight=.1;this.snapToTop=.1;this.snapToBottom=.1}}class iTe{constructor(){this.enabled=!0;this.threshold=20;this.angles=[0,45,90,135,180,225,270,315]}}class Wv{constructor(){this.position=new rTe;this.rotation=new iTe}}var Hv;(function(e){e.OBJECT="object"})(Hv||(Hv={}));class b9{}var Dr;(function(e){e.IMAGE="image",e.DATA_URL="data-url",e.BLOB="blob",e.MSBLOB="ms-blob"})(Dr||(Dr={}));var ar;(function(e){e.PNG="image/png",e.JPEG="image/jpeg"})(ar||(ar={}));var no;(function(e){e.BMP="image/bmp",e.GIF="image/gif",e.ICO="image/x-icon",e.JPEG="image/jpeg",e.PNG="image/png",e.SVG="image/svg+xml",e.TIFF="image/tiff",e.WEBP="image/webp"})(no||(no={}));class y9{constructor(){this.order="default";this.language="en";this.theme="dark";this.assetBaseUrl="assets/";this.displayResizeWarning=!1;this.displayCloseWarning=!0;this.displayCanvasRendererWarning=!0;this.displayToolControlBarTitle=!0;this.forceCrop=!1;this.enableZoom=!0;this.defaultTool=S.FILTER}}S.FILTER,S.FOCUS,S.ADJUSTMENT,S.LIBRARY,S.OVERLAY,S.STICKER,S.TEXT,S.TEXT_DESIGN,S.FRAME,S.BRUSH,S.TRANSFORM;var Ue;(function(e){e.BRIGHTNESS="brightness",e.CONTRAST="contrast",e.SATURATION="saturation",e.CLARITY="clarity",e.SHADOWS="shadows",e.HIGHLIGHTS="highlights",e.EXPOSURE="exposure",e.GAMMA="gamma",e.BLACKS="blacks",e.WHITES="whites",e.TEMPERATURE="temperature",e.SHARPNESS="sharpness"})(Ue||(Ue={}));const Vv=Object.values(Ue).reduce((e,t)=>(e[t]=!0,e),{});class Kv{constructor(){this.categories=[];this.flattenCategories=!1}}class $v{constructor(){this.categories=[];this.flattenCategories=!1;this.categoryHeaderType=Vt.CARD;this.enablePreviewThumbnails=!1}}function ed(e){return e.lightColor!==void 0}function Yv(e){return e.lutURI!==void 0}var I;(function(e){e.Desert="imgly_duotone_desert",e.Peach="imgly_duotone_peach",e.Clash="imgly_duotone_clash",e.Plum="imgly_duotone_plum",e.Breezy="imgly_duotone_breezy",e.DeepBlue="imgly_duotone_deepblue",e.Frog="imgly_duotone_frog",e.Sunset="imgly_duotone_sunset",e.AD1920="imgly_lut_ad1920",e.Greyed="imgly_lut_bw",e.Dusty="imgly_lut_x400",e.Litho="imgly_lut_litho",e.Sepia="imgly_lut_sepiahigh",e.Weathered="imgly_lut_plate",e.HardStuff="imgly_lut_sin",e.Polaroid="imgly_lut_blues",e.Sunny70s="imgly_lut_front",e.Oldtimer="imgly_lut_texas",e.Inferno="imgly_lut_celsius",e.Snappy="imgly_lut_cool",e.Chestnut="imgly_lut_chest",e.Softy="imgly_lut_winter",e.Pebble="imgly_lut_kdynamic",e.Moss="imgly_lut_fall",e.Lemon="imgly_lut_lenin",e.GreenGap="imgly_lut_pola669",e.Colla="imgly_lut_elder",e.Solanus="imgly_lut_orchid",e.Kalmen="imgly_lut_bleached",e.Joran="imgly_lut_bleachedblue",e.Levante="imgly_lut_breeze",e.Zephyr="imgly_lut_blueshadows",e.Golden="imgly_lut_sunset",e.LowFire="imgly_lut_eighties",e.Sunrise="imgly_lut_evening",e.FlatBlack="imgly_lut_k2",e.Pumpkin="imgly_lut_nogreen",e.Ancient="imgly_lut_ancient",e.Candy="imgly_lut_cottoncandy",e.Classic="imgly_lut_classic",e.Colorful="imgly_lut_colorful",e.Creamy="imgly_lut_creamy",e.Fixie="imgly_lut_fixie",e.Food="imgly_lut_food",e.Fridge="imgly_lut_fridge",e.Glam="imgly_lut_glam",e.Gobblin="imgly_lut_gobblin",e.Hicon="imgly_lut_highcontrast",e.HighCarb="imgly_lut_highcarb",e.K1="imgly_lut_k1",e.K6="imgly_lut_k6",e.Keen="imgly_lut_keen",e.Lomo="imgly_lut_lomo",e.Lomo100="imgly_lut_lomo100",e.Lucid="imgly_lut_lucid",e.Mellow="imgly_lut_mellow",e.Neat="imgly_lut_neat",e.Pale="imgly_lut_pale",e.Pitched="imgly_lut_pitched",e.PolaSX="imgly_lut_polasx",e.Pro400="imgly_lut_pro400",e.Quozi="imgly_lut_quozi",e.Settled="imgly_lut_settled",e.Seventies="imgly_lut_seventies",e.Soft="imgly_lut_soft",e.Steel="imgly_lut_steel",e.Summer="imgly_lut_summer",e.Tender="imgly_lut_tender",e.Twilight="imgly_lut_twilight"})(I||(I={}));var Et;(function(e){e.DuoTone="imgly_filter_category_duotone",e.BW="imgly_filter_category_bw",e.Vintage="imgly_filter_category_vintage",e.Smooth="imgly_filter_category_smooth",e.Cold="imgly_filter_category_cold",e.Warm="imgly_filter_category_warm",e.Legacy="imgly_filter_category_legacy"})(Et||(Et={}));class Xv{constructor(){this.items=[]}}var Pe;(function(e){e.RADIAL="radial",e.LINEAR="linear",e.MIRRORED="mirrored",e.GAUSSIAN="gaussian"})(Pe||(Pe={}));class Jv{constructor(){this.items=[]}}class v9{constructor(e){this.name=e.name,this.coverImageUrl=e.coverImageUrl}loadCoverImage(e="anonymous"){return new Promise((t,r)=>{const i=new Image;i.addEventListener("load",()=>{t(i)}),i.addEventListener("error",()=>{r(new Error(`Failed to load image at ${this.coverImage}`))}),i.crossOrigin=e,i.src=this.coverImageUrl,this.coverImage=i})}}class _9{constructor(e){this.title=e.title,this.category=e.category||e.title,this.thumbUrl=e.thumbUrl,this.rawUrl=e.rawUrl,this.authorName=e.authorName,this.authorAvatar=e.authorAvatar}loadThumbImage(e="anonymous"){return new Promise((t,r)=>{const i=new Image;i.addEventListener("load",()=>{t(i)}),i.addEventListener("error",()=>{r(new Error(`Failed to load image at ${this.thumbUrl}`))}),i.crossOrigin=e,i.src=this.thumbUrl,this.thumbImage=i})}getThumbImage(){return this.thumbUrl}}class Zv{constructor(){this.enableWebcam=!1;this.enableUpload=!1;this.flattenCategories=!1;this.categoryHeaderType=Vt.CARD}}class Ak{getData(e){return new Promise((t,r)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="json",i.onload=()=>{const{status:o}=i;o===200?t(i.response):r(new Error(`HTTP Status ${o}`))},i.send()})}}class x9{loadJSON(e){const t=new Ak;return t.getData(e)}getCategories(){return Promise.resolve([])}searchImages(e){return Promise.resolve([])}}class Qv{constructor(){this.items=[]}}var Oe;(function(e){e.NORMAL="normal",e.OVERLAY="overlay",e.SOFT_LIGHT="softLight",e.HARD_LIGHT="hardLight",e.MULTIPLY="multiply",e.DARKEN="darken",e.COLOR_BURN="colorBurn",e.SCREEN="screen",e.LIGHTEN="lighten"})(Oe||(Oe={}));var Ce;(function(e){e.Bokeh="imgly_overlay_bokeh",e.Chop="imgly_overlay_chop",e.Clouds="imgly_overlay_clouds",e.Golden="imgly_overlay_golden",e.Grain="imgly_overlay_grain",e.Hearts="imgly_overlay_hearts",e.LightLeak1="imgly_overlay_lightleak1",e.LightLeak2="imgly_overlay_lightleak2",e.Metal="imgly_overlay_metal",e.Mosaic="imgly_overlay_mosaic",e.Painting="imgly_overlay_painting",e.Paper="imgly_overlay_paper",e.Rain="imgly_overlay_rain",e.Vintage="imgly_overlay_vintage",e.Wall1="imgly_overlay_wall1",e.Wall2="imgly_overlay_wall2",e.Wood="imgly_overlay_wood"})(Ce||(Ce={}));class e_{constructor(){this.categories=[];this.canvasActions=[_e.BRING_TO_FRONT,_e.FLIP,_e.DUPLICATE,_e.DELETE];this.flattenCategories=!1;this.categoryHeaderType=Vt.CARD;this.enableCustomUpload=!0;this.customStickerTintMode="none"}}class t_{constructor(){this.fonts=[];this.canvasActions=[_e.EDIT,_e.BRING_TO_FRONT,_e.DUPLICATE,_e.DELETE];this.disableAutoScaling=!1}}function r_(e){return e.provider===void 0||e.provider==="file"}function i_(e){return e.provider==="google"}class o_{constructor(){this.defaultSize=.05;this.defaultHardness=.5}}class n_{constructor(){this.items=[];this.canvasActions=[_e.EDIT,_e.BRING_TO_FRONT,_e.INVERT,_e.DUPLICATE,_e.DELETE]}}class s_{constructor(){this.categories=[];this.enableRotation=!0;this.enableFlip=!0;this.flattenCategories=!1;this.categoryHeaderType=Vt.TEXT}}var Ut;(function(e){e.CommonCategory="imgly_transforms_common",e.FacebookCategory="imgly_transforms_facebook",e.TwitterCategory="imgly_transforms_twitter",e.InstagramCategory="imgly_transforms_instagram",e.Custom="imgly_transform_common_custom",e.Square="imgly_transform_common_square",e.ThreeByFour="imgly_transform_common_3",e.FourByThree="imgly_transform_common_4",e.NineBySixteen="imgly_transform_common_9",e.SixteenByNine="imgly_transform_common_16",e.FacebookPost="imgly_transform_facebook_post",e.FacebookProfile="imgly_transform_facebook_profile",e.FacebookTitle="imgly_transform_facebook_title",e.InstagramLandscape="imgly_transform_instagram_landscape",e.InstagramPortrait="imgly_transform_instagram_portrait",e.InstagramSquare="imgly_transform_instagram_square",e.InstagramStory="imgly_transform_instagram_story",e.TwitterPost="imgly_transform_twitter_post",e.TwitterProfile="imgly_transform_twitter_profile",e.TwitterTitle="imgly_transform_twitter_title"})(Ut||(Ut={}));var fe;(function(e){e.EXPORT="export",e.CLOSE="close",e.HISTORY_CHANGE="historyChange",e.EDITOR_READY="editorReady",e.ERROR_IMAGE_LOADING="errorImageLoading",e.IMAGE_LOAD="imageLoad",e.TOOL_ENTER="toolEnter",e.STICKER_UPLOAD_ADD="stickerUploadAdd"})(fe||(fe={}));class so{constructor(){this.events={}}addListener(e,t){const r=this.events[e]||(this.events[e]=[]);return r.push(t),this}removeListener(e,t){const r=this.events[e];if(!r)return this;const i=r.lastIndexOf(t);return i===-1?this:(r.splice(i,1),this)}removeAllListeners(e){return this.events[e]=void 0,this}on(e,t){return this.addListener(e,t)}off(e,t){return this.removeListener(e,t)}emit(e,...t){const r=this.events[e];return!r||!r.length?!1:(r.slice(0).forEach(i=>i.apply(null,t)),!0)}}const oTe=[{identifier:"basics",name:"Basics",items:[{identifier:Ue.BRIGHTNESS},{identifier:Ue.CONTRAST},{identifier:Ue.SATURATION},{identifier:Ue.GAMMA}]},{identifier:"refinements",name:"Refinements",items:[{identifier:Ue.CLARITY},{identifier:Ue.SHADOWS},{identifier:Ue.HIGHLIGHTS},{identifier:Ue.EXPOSURE},{identifier:Ue.BLACKS},{identifier:Ue.WHITES},{identifier:Ue.TEMPERATURE},{identifier:Ue.SHARPNESS}]}];var a_=oTe;const nTe=[{identifier:Et.DuoTone,name:"DuoTone",thumbnailURI:"./categories/duotone.jpg",items:[{identifier:I.Desert,name:"Desert",thumbnailURI:"./items/imgly_duotone_desert.jpg",lightColor:"#e1de9a",darkColor:"#cb2129",defaultIntensity:.5},{identifier:I.Peach,name:"Peach",thumbnailURI:"./items/imgly_duotone_peach.jpg",lightColor:"#e9abb8",darkColor:"#0040ff",defaultIntensity:.5},{identifier:I.Clash,name:"Clash",thumbnailURI:"./items/imgly_duotone_clash.jpg",lightColor:"#f41a0f",darkColor:"#23007c",defaultIntensity:.5},{identifier:I.Plum,name:"Plum",thumbnailURI:"./items/imgly_duotone_plum.jpg",lightColor:"#74d7ff",darkColor:"#23007c",defaultIntensity:.5},{identifier:I.Breezy,name:"Breezy",thumbnailURI:"./items/imgly_duotone_breezy.jpg",lightColor:"#68fdff",darkColor:"#c20000",defaultIntensity:.5},{identifier:I.DeepBlue,name:"Deep Blue",thumbnailURI:"./items/imgly_duotone_deepblue.jpg",lightColor:"#2de9eb",darkColor:"#58007c",defaultIntensity:.5},{identifier:I.Frog,name:"Frog",thumbnailURI:"./items/imgly_duotone_frog.jpg",lightColor:"#5bff60",darkColor:"#7f23a9",defaultIntensity:.5},{identifier:I.Sunset,name:"Sunset",thumbnailURI:"./items/imgly_duotone_sunset.jpg",lightColor:"#f8ea46",darkColor:"#c400be",defaultIntensity:.5}]},{identifier:Et.BW,name:"B & W",thumbnailURI:"./categories/b&w.jpg",items:[{identifier:I.AD1920,name:"1920 A.D.",thumbnailURI:"./items/imgly_lut_ad1920.jpg",lutURI:"./items/imgly_lut_ad1920_5_5_128.png",defaultIntensity:1},{identifier:I.Greyed,name:"Greyed",thumbnailURI:"./items/imgly_lut_bw.jpg",lutURI:"./items/imgly_lut_bw_5_5_128.png",defaultIntensity:1},{identifier:I.Dusty,name:"Dusty",thumbnailURI:"./items/imgly_lut_x400.jpg",lutURI:"./items/imgly_lut_dusty_5_5_128.png",defaultIntensity:1},{identifier:I.Litho,name:"Litho",thumbnailURI:"./items/imgly_lut_litho.jpg",lutURI:"./items/imgly_lut_litho_5_5_128.png",defaultIntensity:1},{identifier:I.Sepia,name:"Sepia",thumbnailURI:"./items/imgly_lut_sepiahigh.jpg",lutURI:"./items/imgly_lut_sepia_5_5_128.png",defaultIntensity:1},{identifier:I.Weathered,name:"Weathered",thumbnailURI:"./items/imgly_lut_plate.jpg",lutURI:"./items/imgly_lut_weathered_5_5_128.png",defaultIntensity:1},{identifier:I.HardStuff,name:"Hard Stuff",thumbnailURI:"./items/imgly_lut_sin.jpg",lutURI:"./items/imgly_lut_hard_stuff_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8}]},{identifier:Et.Vintage,name:"Vintage",thumbnailURI:"./categories/vintage.jpg",items:[{identifier:I.Polaroid,name:"Polaroid",thumbnailURI:"./items/imgly_lut_blues.jpg",lutURI:"./items/imgly_lut_polaroid_5_5_128.png",defaultIntensity:1},{identifier:I.Sunny70s,name:"Sunny 70s",thumbnailURI:"./items/imgly_lut_front.jpg",lutURI:"./items/imgly_lut_sunny_70s_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:I.Oldtimer,name:"Oldtimer",thumbnailURI:"./items/imgly_lut_texas.jpg",lutURI:"./items/imgly_lut_oldtimer_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:I.Inferno,name:"Inferno",thumbnailURI:"./items/imgly_lut_celsius.jpg",lutURI:"./items/imgly_lut_inferno_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:I.Snappy,name:"Snappy",thumbnailURI:"./items/imgly_lut_cool.jpg",lutURI:"./items/imgly_lut_snappy_5_5_128.png",defaultIntensity:1}]},{identifier:Et.Smooth,name:"Smooth",thumbnailURI:"./categories/smooth.jpg",items:[{identifier:I.Chestnut,name:"Chestnut",thumbnailURI:"./items/imgly_lut_chest.jpg",lutURI:"./items/imgly_lut_chestnut_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:I.Softy,name:"Softy",thumbnailURI:"./items/imgly_lut_winter.jpg",lutURI:"./items/imgly_lut_softly_5_5_128.png",defaultIntensity:1},{identifier:I.Pebble,name:"Pebble",thumbnailURI:"./items/imgly_lut_kdynamic.jpg",lutURI:"./items/imgly_lut_pebble_5_5_128.png",defaultIntensity:1},{identifier:I.Moss,name:"Moss",thumbnailURI:"./items/imgly_lut_fall.jpg",lutURI:"./items/imgly_lut_moss_5_5_128.png",defaultIntensity:1},{identifier:I.Lemon,name:"Lemon",thumbnailURI:"./items/imgly_lut_lenin.jpg",lutURI:"./items/imgly_lut_lemon_5_5_128.png",defaultIntensity:1},{identifier:I.GreenGap,name:"Green Gap",thumbnailURI:"./items/imgly_lut_pola669.jpg",lutURI:"./items/imgly_lut_green_gap_5_5_128.png",defaultIntensity:1}]},{identifier:Et.Cold,name:"Cold",thumbnailURI:"./categories/cold.jpg",items:[{identifier:I.Colla,name:"Colla",thumbnailURI:"./items/imgly_lut_elder.jpg",lutURI:"./items/imgly_lut_colla_5_5_128.png",defaultIntensity:1},{identifier:I.Solanus,name:"Solanus",thumbnailURI:"./items/imgly_lut_orchid.jpg",lutURI:"./items/imgly_lut_solanus_5_5_128.png",defaultIntensity:1},{identifier:I.Kalmen,name:"Kalmen",thumbnailURI:"./items/imgly_lut_bleached.jpg",lutURI:"./items/imgly_lut_kalmen_5_5_128.png",defaultIntensity:1},{identifier:I.Joran,name:"Joran",thumbnailURI:"./items/imgly_lut_bleachedblue.jpg",lutURI:"./items/imgly_lut_joran_5_5_128.png",defaultIntensity:1},{identifier:I.Levante,name:"Levante",thumbnailURI:"./items/imgly_lut_breeze.jpg",lutURI:"./items/imgly_lut_levante_5_5_128.png",defaultIntensity:1},{identifier:I.Zephyr,name:"Zephyr",thumbnailURI:"./items/imgly_lut_blueshadows.jpg",lutURI:"./items/imgly_lut_zephyr_5_5_128.png",defaultIntensity:1}]},{identifier:Et.Warm,name:"Warm",thumbnailURI:"./categories/warm.jpg",items:[{identifier:I.Golden,name:"Golden",thumbnailURI:"./items/imgly_lut_sunset.jpg",lutURI:"./items/imgly_lut_golden_5_5_128.png",defaultIntensity:1},{identifier:I.LowFire,name:"Low Fire",thumbnailURI:"./items/imgly_lut_eighties.jpg",lutURI:"./items/imgly_lut_low_fire_5_5_128.png",defaultIntensity:1},{identifier:I.Sunrise,name:"Sunrise",thumbnailURI:"./items/imgly_lut_evening.jpg",lutURI:"./items/imgly_lut_sunrise_5_5_128.png",defaultIntensity:1},{identifier:I.FlatBlack,name:"Flat Black",thumbnailURI:"./items/imgly_lut_k2.jpg",lutURI:"./items/imgly_lut_flat_black_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:I.Pumpkin,name:"Pumpkin",thumbnailURI:"./items/imgly_lut_nogreen.jpg",lutURI:"./items/imgly_lut_pumpkin_5_5_128.png",defaultIntensity:1}]},{identifier:Et.Legacy,name:"Legacy",thumbnailURI:"./categories/legacy.jpg",items:[{identifier:I.Ancient,name:"Ancient",thumbnailURI:"./items/imgly_lut_ancient.jpg",lutURI:"./items/imgly_lut_ancient_5_5_128.png",defaultIntensity:1},{identifier:I.Candy,name:"Candy",thumbnailURI:"./items/imgly_lut_cottoncandy.jpg",lutURI:"./items/imgly_lut_cottoncandy_5_5_128.png",defaultIntensity:1},{identifier:I.Classic,name:"Classic",thumbnailURI:"./items/imgly_lut_classic.jpg",lutURI:"./items/imgly_lut_classic_5_5_128.png",defaultIntensity:1},{identifier:I.Colorful,name:"Colorful",thumbnailURI:"./items/imgly_lut_colorful.jpg",lutURI:"./items/imgly_lut_colorful_5_5_128.png",defaultIntensity:1},{identifier:I.Creamy,name:"Creamy",thumbnailURI:"./items/imgly_lut_creamy.jpg",lutURI:"./items/imgly_lut_creamy_5_5_128.png",defaultIntensity:1},{identifier:I.Fixie,name:"Fixie",thumbnailURI:"./items/imgly_lut_fixie.jpg",lutURI:"./items/imgly_lut_fixie_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:I.Food,name:"Food",thumbnailURI:"./items/imgly_lut_food.jpg",lutURI:"./items/imgly_lut_food_5_5_128.png",defaultIntensity:1},{identifier:I.Fridge,name:"Fridge",thumbnailURI:"./items/imgly_lut_fridge.jpg",lutURI:"./items/imgly_lut_fridge_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:I.Glam,name:"Glam",thumbnailURI:"./items/imgly_lut_glam.jpg",lutURI:"./items/imgly_lut_glam_5_5_128.png",defaultIntensity:1},{identifier:I.Gobblin,name:"Gobblin",thumbnailURI:"./items/imgly_lut_gobblin.jpg",lutURI:"./items/imgly_lut_gobblin_5_5_128.png",defaultIntensity:1},{identifier:I.Hicon,name:"Hicon",thumbnailURI:"./items/imgly_lut_highcontrast.jpg",lutURI:"./items/imgly_lut_highcontrast_5_5_128.png",defaultIntensity:1},{identifier:I.HighCarb,name:"High Carb",thumbnailURI:"./items/imgly_lut_highcarb.jpg",lutURI:"./items/imgly_lut_highcarb_5_5_128.png",defaultIntensity:1},{identifier:I.K1,name:"K1",thumbnailURI:"./items/imgly_lut_k1.jpg",lutURI:"./items/imgly_lut_k1_5_5_128.png",defaultIntensity:1},{identifier:I.K6,name:"K6",thumbnailURI:"./items/imgly_lut_k6.jpg",lutURI:"./items/imgly_lut_k6_5_5_128.png",defaultIntensity:1},{identifier:I.Keen,name:"Keen",thumbnailURI:"./items/imgly_lut_keen.jpg",lutURI:"./items/imgly_lut_keen_5_5_128.png",defaultIntensity:1},{identifier:I.Lomo,name:"Lomo",thumbnailURI:"./items/imgly_lut_lomo.jpg",lutURI:"./items/imgly_lut_lomo_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:I.Lomo100,name:"Lomo 100",thumbnailURI:"./items/imgly_lut_lomo100.jpg",lutURI:"./items/imgly_lut_lomo100_5_5_128.png",defaultIntensity:1},{identifier:I.Lucid,name:"Lucid",thumbnailURI:"./items/imgly_lut_lucid.jpg",lutURI:"./items/imgly_lut_lucid_5_5_128.png",defaultIntensity:1},{identifier:I.Mellow,name:"Mellow",thumbnailURI:"./items/imgly_lut_mellow.jpg",lutURI:"./items/imgly_lut_mellow_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:I.Neat,name:"Neat",thumbnailURI:"./items/imgly_lut_neat.jpg",lutURI:"./items/imgly_lut_neat_5_5_128.png",defaultIntensity:1},{identifier:I.Pale,name:"Pale",thumbnailURI:"./items/imgly_lut_pale.jpg",lutURI:"./items/imgly_lut_pale_5_5_128.png",defaultIntensity:1},{identifier:I.Pitched,name:"Pitched",thumbnailURI:"./items/imgly_lut_pitched.jpg",lutURI:"./items/imgly_lut_pitched_5_5_128.png",defaultIntensity:1},{identifier:I.PolaSX,name:"Pola SX",thumbnailURI:"./items/imgly_lut_polasx.jpg",lutURI:"./items/imgly_lut_polasx_5_5_128.png",defaultIntensity:1},{identifier:I.Pro400,name:"Pro 400",thumbnailURI:"./items/imgly_lut_pro400.jpg",lutURI:"./items/imgly_lut_pro400_5_5_128.png",defaultIntensity:1},{identifier:I.Quozi,name:"Quozi",thumbnailURI:"./items/imgly_lut_quozi.jpg",lutURI:"./items/imgly_lut_quozi_5_5_128.png",defaultIntensity:1},{identifier:I.Settled,name:"Settled",thumbnailURI:"./items/imgly_lut_settled.jpg",lutURI:"./items/imgly_lut_settled_5_5_128.png",defaultIntensity:1},{identifier:I.Seventies,name:"Seventies",thumbnailURI:"./items/imgly_lut_seventies.jpg",lutURI:"./items/imgly_lut_seventies_5_5_128.png",defaultIntensity:1},{identifier:I.Soft,name:"Soft",thumbnailURI:"./items/imgly_lut_soft.jpg",lutURI:"./items/imgly_lut_soft_5_5_128.png",defaultIntensity:1},{identifier:I.Steel,name:"Steel",thumbnailURI:"./items/imgly_lut_steel.jpg",lutURI:"./items/imgly_lut_steel_5_5_128.png",defaultIntensity:1},{identifier:I.Summer,name:"Summer",thumbnailURI:"./items/imgly_lut_summer.jpg",lutURI:"./items/imgly_lut_summer_5_5_128.png",defaultIntensity:1},{identifier:I.Tender,name:"Tender",thumbnailURI:"./items/imgly_lut_tender.jpg",lutURI:"./items/imgly_lut_tender_5_5_128.png",defaultIntensity:1},{identifier:I.Twilight,name:"Twilight",thumbnailURI:"./items/imgly_lut_twilight.jpg",lutURI:"./items/imgly_lut_twilight_5_5_128.png",defaultIntensity:1}]}];var l_=nTe;const sTe=[{identifier:Pe.RADIAL,thumbnailURI:"./items/radial.png"},{identifier:Pe.MIRRORED,thumbnailURI:"./items/mirrored.png"},{identifier:Pe.LINEAR,thumbnailURI:"./items/linear.png"},{identifier:Pe.GAUSSIAN,thumbnailURI:"./items/gaussian.png"}];var Rk=sTe;const aTe=[{identifier:"imgly_font_open_sans_bold",fontFamily:"Open Sans",fontWeight:"bold",fontURI:"./fonts/imgly_font_open_sans_bold.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}},{identifier:"imgly_font_aleo_bold",fontFamily:"Aleo",fontWeight:"bold",fontURI:"./fonts/imgly_font_aleo_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:805,descender:-195}},{identifier:"imgly_font_amaticsc",fontFamily:"Amatic SC",fontWeight:"normal",fontURI:"./fonts/imgly_font_amaticsc.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1016,descender:-245}},{identifier:"imgly_font_archivo_black",fontFamily:"Archivo",fontWeight:"normal",fontURI:"./fonts/imgly_font_archivo_black.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:878,descender:-210}},{identifier:"imgly_font_bungee_inline",fontFamily:"Bungee Inline",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_bungee_inline.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}},{identifier:"imgly_font_fira_sans_regular",fontFamily:"Fira Sans",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:935,descender:-265}},{identifier:"imgly_font_campton_bold",fontFamily:"Campton Book",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_campton_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}},{identifier:"imgly_font_carter_one",fontFamily:"Carter One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_carter_one.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2264,descender:-890}},{identifier:"imgly_font_codystar",fontFamily:"Codystar",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_codystar.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:953,descender:-255}},{identifier:"imgly_font_galano_grotesque_bold",fontFamily:"Galano Grotesque",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_galano_grotesque_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}},{identifier:"imgly_font_krona_one",fontFamily:"Krona One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_krona_one.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2030,descender:-530}},{identifier:"imgly_font_kumar_one_outline",fontFamily:"Kumar One Outline",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_kumar_one_outline.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1137,descender:-642}},{identifier:"imgly_font_lobster",fontFamily:"Lobster",fontWeight:"normal",fontURI:"./fonts/imgly_font_lobster.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-250}},{identifier:"imgly_font_molle",fontFamily:"Molle",fontWeight:"normal",fontStyle:"italic",fontURI:"./fonts/imgly_font_molle.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1852,descender:-701}},{identifier:"imgly_font_monoton",fontFamily:"Monoton",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_monoton.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2366,descender:-822}},{identifier:"imgly_font_nixie_one",fontFamily:"Nixie One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_nixie_one.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:926,descender:-210}},{identifier:"imgly_font_notable",fontFamily:"Notable",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_notable.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1143,descender:-157}},{identifier:"imgly_font_ostrich_sans_black",fontFamily:"Ostrich",fontWeight:800,fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_black.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontFamily:"Ostrich",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_oswald_semi_bold",fontFamily:"Oswald SemiBold",googleFamily:"Oswald",fontWeight:600,fontStyle:"normal",fontURI:"./fonts/imgly_font_oswald_semi_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1193,descender:-289}},{identifier:"imgly_font_palanquin_dark_semi_bold",fontFamily:"Palanquin Dark SemiBold",googleFamily:"Palanquin Dark",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_palanquin_dark_semi_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1320,descender:-491}},{identifier:"imgly_font_poppins",fontFamily:"Poppins",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_poppins.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1050,descender:-350}},{identifier:"imgly_font_permanent_marker",fontFamily:"Permanent Marker",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_permanent_marker.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}},{identifier:"imgly_font_roboto_black_italic",fontFamily:"Roboto Black",fontWeight:"bold",fontStyle:"italic",googleFamily:"Roboto",fontURI:"./fonts/imgly_font_roboto_black_italic.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light_italic",fontFamily:"Roboto Light",googleFamily:"Roboto",fontWeight:300,fontStyle:"italic",fontURI:"./fonts/imgly_font_roboto_light_italic.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_sancreek",fontFamily:"Sancreek",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_sancreek.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2104,descender:-738}},{identifier:"imgly_font_stint_ultra_expanded",fontFamily:"Stint Ultra Expanded",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_stint_ultra_expanded.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-483}},{identifier:"imgly_font_trash_hand",fontFamily:"Trash Hand",fontWeight:"normal",fontURI:"./fonts/imgly_font_trash_hand.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:759,descender:-304}},{identifier:"imgly_font_vt323",fontFamily:"VT323",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_vt323.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}},{identifier:"imgly_font_yeseva_one",fontFamily:"Yeseva One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_yeseva_one.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:915,descender:-240}},{identifier:"imgly_font_abril_fatface_regular",fontFamily:"Abril Fatface",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_abril_fatface_regular.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}},{identifier:"imgly_font_amberlight",fontFamily:"Amberlight",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_amberlight.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}},{identifier:"imgly_font_montserrat_light",fontFamily:"Montserrat Light",googleFamily:"Montserrat",fontWeight:300,fontStyle:"normal",fontURI:"./fonts/imgly_font_montserrat_light.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}},{identifier:"imgly_font_handycheera_regular",fontFamily:"Handycheera",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_handycheera_regular.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}},{identifier:"imgly_font_ostrich_sans_heavy",fontFamily:"Ostrich",fontWeight:900,fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_heavy.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}},{identifier:"imgly_font_petit_formal_script",fontFamily:"Petit Formal Script",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_petit_formal_script.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}},{identifier:"imgly_font_rasa_500",fontFamily:"Rasa",fontWeight:500,fontStyle:"normal",fontURI:"./fonts/imgly_font_rasa_500.woff",format:"woff",textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_regular",fontFamily:"Rasa",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_rasa_regular.woff",format:"woff",textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_roboto_black",fontFamily:"Roboto Black",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_roboto_black.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light",fontFamily:"Roboto Light",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_roboto_light.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_sue_ellen_francisco",fontFamily:"Sue Ellen Francisco",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_sue_ellen_francisco.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:1362,descender:-634}},{identifier:"imgly_font_ultra",fontFamily:"Ultra",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_ultra.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}},{identifier:"imgly_font_wolesbro",fontFamily:"Wolesbro",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_wolesbro.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:925,descender:-575}}];var c_=aTe;const w9=["imgly_font_open_sans_bold","imgly_font_aleo_bold","imgly_font_amaticsc","imgly_font_archivo_black","imgly_font_bungee_inline","imgly_font_campton_bold","imgly_font_carter_one","imgly_font_codystar","imgly_font_fira_sans_regular","imgly_font_galano_grotesque_bold","imgly_font_krona_one","imgly_font_kumar_one_outline","imgly_font_lobster","imgly_font_molle","imgly_font_monoton","imgly_font_nixie_one","imgly_font_notable","imgly_font_ostrich_sans_black","imgly_font_ostrich_sans_bold","imgly_font_oswald_semi_bold","imgly_font_palanquin_dark_semi_bold","imgly_font_poppins","imgly_font_permanent_marker","imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_sancreek","imgly_font_stint_ultra_expanded","imgly_font_trash_hand","imgly_font_vt323","imgly_font_yeseva_one"],S9=["imgly_font_abril_fatface_regular","imgly_font_amberlight","imgly_font_bungee_inline","imgly_font_campton_bold","imgly_font_galano_grotesque_bold","imgly_font_handycheera_regular","imgly_font_montserrat_light","imgly_font_ostrich_sans_black","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_heavy","imgly_font_permanent_marker","imgly_font_petit_formal_script","imgly_font_rasa_500","imgly_font_rasa_regular","imgly_font_roboto_black","imgly_font_roboto_light","imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_sue_ellen_francisco","imgly_font_ultra","imgly_font_wolesbro"],lTe=[{identifier:"imgly_frame_dia",name:"Dia",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"./items/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"./items/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"./items/imgly_frame_dia/imgly_frame_dia_left.png",end:"./items/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"./items/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"./items/imgly_frame_dia/imgly_frame_dia_right.png",end:"./items/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"./items/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",name:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",name:"Black Passepartout",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",name:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",name:"Low Poly",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}}];var d_=lTe;const cTe=[{identifier:Ce.Golden,name:"Golden",defaultBlendMode:Oe.LIGHTEN,overlayURI:"./items/imgly_overlay_golden.jpg",thumbnailURI:"./items/imgly_overlay_golden_thumb.jpg"},{identifier:Ce.LightLeak1,name:"Lightleak",defaultBlendMode:Oe.SCREEN,overlayURI:"./items/imgly_overlay_lightleak1.jpg",thumbnailURI:"./items/imgly_overlay_lightleak1_thumb.jpg"},{identifier:Ce.Rain,name:"Rain",defaultBlendMode:Oe.OVERLAY,overlayURI:"./items/imgly_overlay_rain.jpg",thumbnailURI:"./items/imgly_overlay_rain_thumb.jpg"},{identifier:Ce.Mosaic,name:"Mosaic",defaultBlendMode:Oe.MULTIPLY,overlayURI:"./items/imgly_overlay_mosaic.jpg",thumbnailURI:"./items/imgly_overlay_mosaic_thumb.jpg"},{identifier:Ce.Vintage,name:"Vintage",defaultBlendMode:Oe.DARKEN,overlayURI:"./items/imgly_overlay_vintage.jpg",thumbnailURI:"./items/imgly_overlay_vintage_thumb.jpg"},{identifier:Ce.Paper,name:"Paper",defaultBlendMode:Oe.MULTIPLY,overlayURI:"./items/imgly_overlay_paper.jpg",thumbnailURI:"./items/imgly_overlay_paper_thumb.jpg"},{identifier:Ce.Bokeh,name:"Bokeh",defaultBlendMode:Oe.LIGHTEN,overlayURI:"./items/imgly_overlay_bokeh.jpg",thumbnailURI:"./items/imgly_overlay_bokeh_thumb.jpg"},{identifier:Ce.Hearts,name:"Hearts",defaultBlendMode:Oe.SCREEN,overlayURI:"./items/imgly_overlay_hearts.jpg",thumbnailURI:"./items/imgly_overlay_hearts_thumb.jpg"},{identifier:Ce.LightLeak2,name:"Lightleak 2",defaultBlendMode:Oe.LIGHTEN,overlayURI:"./items/imgly_overlay_lightleak2.jpg",thumbnailURI:"./items/imgly_overlay_lightleak2_thumb.jpg"},{identifier:Ce.Wood,name:"Wood",defaultBlendMode:Oe.MULTIPLY,overlayURI:"./items/imgly_overlay_wood.jpg",thumbnailURI:"./items/imgly_overlay_wood_thumb.jpg"},{identifier:Ce.Chop,name:"Chop",defaultBlendMode:Oe.MULTIPLY,overlayURI:"./items/imgly_overlay_chop.jpg",thumbnailURI:"./items/imgly_overlay_chop_thumb.jpg"},{identifier:Ce.Metal,name:"Metal",defaultBlendMode:Oe.OVERLAY,overlayURI:"./items/imgly_overlay_metal.jpg",thumbnailURI:"./items/imgly_overlay_metal_thumb.jpg"},{identifier:Ce.Painting,name:"Painting",defaultBlendMode:Oe.OVERLAY,overlayURI:"./items/imgly_overlay_painting.jpg",thumbnailURI:"./items/imgly_overlay_painting_thumb.jpg"},{identifier:Ce.Grain,name:"Grain",defaultBlendMode:Oe.OVERLAY,overlayURI:"./items/imgly_overlay_grain.jpg",thumbnailURI:"./items/imgly_overlay_grain_thumb.jpg"},{identifier:Ce.Clouds,name:"Clouds",defaultBlendMode:Oe.SOFT_LIGHT,overlayURI:"./items/imgly_overlay_clouds.jpg",thumbnailURI:"./items/imgly_overlay_clouds_thumb.jpg"},{identifier:Ce.Wall1,name:"Wall",defaultBlendMode:Oe.LIGHTEN,overlayURI:"./items/imgly_overlay_wall1.jpg",thumbnailURI:"./items/imgly_overlay_wall1_thumb.jpg"},{identifier:Ce.Wall2,name:"Wall 2",defaultBlendMode:Oe.OVERLAY,overlayURI:"./items/imgly_overlay_wall2.jpg",thumbnailURI:"./items/imgly_overlay_wall2_thumb.jpg"}];var u_=cTe;const dTe=[{identifier:"imgly_sticker_emoticons",name:"Emoticons",thumbnailURI:"./categories/emoticons.png",items:[{identifier:"imgly_sticker_emoticons_grin",stickerURI:"./emoticons/imgly_sticker_emoticons_grin.svg",tintMode:"none",name:"Grin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_laugh",stickerURI:"./emoticons/imgly_sticker_emoticons_laugh.svg",tintMode:"none",name:"Laugh",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_smile",stickerURI:"./emoticons/imgly_sticker_emoticons_smile.svg",tintMode:"none",name:"Smile",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wink",stickerURI:"./emoticons/imgly_sticker_emoticons_wink.svg",tintMode:"none",name:"Wink",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_tongue_out_wink",stickerURI:"./emoticons/imgly_sticker_emoticons_tongue_out_wink.svg",tintMode:"none",name:"Tongue out wink",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_angel",stickerURI:"./emoticons/imgly_sticker_emoticons_angel.svg",tintMode:"none",name:"Angel",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_kisses",stickerURI:"./emoticons/imgly_sticker_emoticons_kisses.svg",tintMode:"none",name:"Kisses",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_loving",stickerURI:"./emoticons/imgly_sticker_emoticons_loving.svg",tintMode:"none",name:"Loving",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_kiss",stickerURI:"./emoticons/imgly_sticker_emoticons_kiss.svg",tintMode:"none",name:"Kiss",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wave",stickerURI:"./emoticons/imgly_sticker_emoticons_wave.svg",tintMode:"none",name:"Wave",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_nerd",stickerURI:"./emoticons/imgly_sticker_emoticons_nerd.svg",tintMode:"none",name:"Nerd",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_cool",stickerURI:"./emoticons/imgly_sticker_emoticons_cool.svg",tintMode:"none",name:"Cool",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_blush",stickerURI:"./emoticons/imgly_sticker_emoticons_blush.svg",tintMode:"none",name:"Blush",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_duckface",stickerURI:"./emoticons/imgly_sticker_emoticons_duckface.svg",tintMode:"none",name:"Duckface",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_furious",stickerURI:"./emoticons/imgly_sticker_emoticons_furious.svg",tintMode:"none",name:"Furious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_angry",stickerURI:"./emoticons/imgly_sticker_emoticons_angry.svg",tintMode:"none",name:"Angry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_steaming_furious",stickerURI:"./emoticons/imgly_sticker_emoticons_steaming_furious.svg",tintMode:"none",name:"Steaming Furious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sad",stickerURI:"./emoticons/imgly_sticker_emoticons_sad.svg",tintMode:"none",name:"Sad",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_anxious",stickerURI:"./emoticons/imgly_sticker_emoticons_anxious.svg",tintMode:"none",name:"Anxious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_cry",stickerURI:"./emoticons/imgly_sticker_emoticons_cry.svg",tintMode:"none",name:"Cry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sobbing",stickerURI:"./emoticons/imgly_sticker_emoticons_sobbing.svg",tintMode:"none",name:"Sobbing",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_loud_cry",stickerURI:"./emoticons/imgly_sticker_emoticons_loud_cry.svg",tintMode:"none",name:"Loud Cry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wide_grin",stickerURI:"./emoticons/imgly_sticker_emoticons_wide_grin.svg",tintMode:"none",name:"Wide grin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_impatient",stickerURI:"./emoticons/imgly_sticker_emoticons_impatient.svg",tintMode:"none",name:"Impatient",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_tired",stickerURI:"./emoticons/imgly_sticker_emoticons_tired.svg",tintMode:"none",name:"Tired",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_asleep",stickerURI:"./emoticons/imgly_sticker_emoticons_asleep.svg",tintMode:"none",name:"Asleep",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sleepy",stickerURI:"./emoticons/imgly_sticker_emoticons_sleepy.svg",tintMode:"none",name:"Sleepy",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_deceased",stickerURI:"./emoticons/imgly_sticker_emoticons_deceased.svg",tintMode:"none",name:"Deceased",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_attention",stickerURI:"./emoticons/imgly_sticker_emoticons_attention.svg",tintMode:"none",name:"Attention",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_question",stickerURI:"./emoticons/imgly_sticker_emoticons_question.svg",tintMode:"none",name:"Question",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",stickerURI:"./emoticons/imgly_sticker_emoticons_not_speaking_to_you.svg",tintMode:"none",name:"Not speaking to you",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sick",stickerURI:"./emoticons/imgly_sticker_emoticons_sick.svg",tintMode:"none",name:"Sick",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_pumpkin",stickerURI:"./emoticons/imgly_sticker_emoticons_pumpkin.svg",tintMode:"none",name:"Pumpkin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_boxer",stickerURI:"./emoticons/imgly_sticker_emoticons_boxer.svg",tintMode:"none",name:"Boxer",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_idea",stickerURI:"./emoticons/imgly_sticker_emoticons_idea.svg",tintMode:"none",name:"Idea",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_smoking",stickerURI:"./emoticons/imgly_sticker_emoticons_smoking.svg",tintMode:"none",name:"Smoking",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_beer",stickerURI:"./emoticons/imgly_sticker_emoticons_beer.svg",tintMode:"none",name:"Beer",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_skateboard",stickerURI:"./emoticons/imgly_sticker_emoticons_skateboard.svg",tintMode:"none",name:"Skateboard",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_guitar",stickerURI:"./emoticons/imgly_sticker_emoticons_guitar.svg",tintMode:"none",name:"Guitar",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_music",stickerURI:"./emoticons/imgly_sticker_emoticons_music.svg",tintMode:"none",name:"Music",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sunbathing",stickerURI:"./emoticons/imgly_sticker_emoticons_sunbathing.svg",tintMode:"none",name:"Sunbathing",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_hippie",stickerURI:"./emoticons/imgly_sticker_emoticons_hippie.svg",tintMode:"none",name:"Hippie",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_humourous",stickerURI:"./emoticons/imgly_sticker_emoticons_humourous.svg",tintMode:"none",name:"Humourous",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_hitman",stickerURI:"./emoticons/imgly_sticker_emoticons_hitman.svg",tintMode:"none",name:"Hitman",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_harry_potter",stickerURI:"./emoticons/imgly_sticker_emoticons_harry_potter.svg",tintMode:"none",name:"Harry Potter",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_business",stickerURI:"./emoticons/imgly_sticker_emoticons_business.svg",tintMode:"none",name:"Business",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_batman",stickerURI:"./emoticons/imgly_sticker_emoticons_batman.svg",tintMode:"none",name:"Batman",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_skull",stickerURI:"./emoticons/imgly_sticker_emoticons_skull.svg",tintMode:"none",name:"Skull",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_ninja",stickerURI:"./emoticons/imgly_sticker_emoticons_ninja.svg",tintMode:"none",name:"Ninja",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_masked",stickerURI:"./emoticons/imgly_sticker_emoticons_masked.svg",tintMode:"none",name:"Masked",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_alien",stickerURI:"./emoticons/imgly_sticker_emoticons_alien.svg",tintMode:"none",name:"Alien",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wrestler",stickerURI:"./emoticons/imgly_sticker_emoticons_wrestler.svg",tintMode:"none",name:"Wrestler",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_devil",stickerURI:"./emoticons/imgly_sticker_emoticons_devil.svg",tintMode:"none",name:"Devil",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_star",stickerURI:"./emoticons/imgly_sticker_emoticons_star.svg",tintMode:"none",name:"Star",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_baby_chicken",stickerURI:"./emoticons/imgly_sticker_emoticons_baby_chicken.svg",tintMode:"none",name:"Baby Chicken",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_rabbit",stickerURI:"./emoticons/imgly_sticker_emoticons_rabbit.svg",tintMode:"none",name:"Rabbit",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_pig",stickerURI:"./emoticons/imgly_sticker_emoticons_pig.svg",tintMode:"none",name:"Pig",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_chicken",stickerURI:"./emoticons/imgly_sticker_emoticons_chicken.svg",tintMode:"none",name:"Chicken",resizeMode:"keepAspect"}]},{identifier:"imgly_sticker_shapes",name:"Shapes",thumbnailURI:"./categories/shapes.png",items:[{identifier:"imgly_sticker_shapes_badge_01",stickerURI:"./shapes/imgly_sticker_shapes_badge_01.svg",tintMode:"solid",name:"Shape Badge 01",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_04",stickerURI:"./shapes/imgly_sticker_shapes_badge_04.svg",tintMode:"solid",name:"Shape Badge 04",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_12",stickerURI:"./shapes/imgly_sticker_shapes_badge_12.svg",tintMode:"solid",name:"Shape Badge 12",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_06",stickerURI:"./shapes/imgly_sticker_shapes_badge_06.svg",tintMode:"solid",name:"Shape Badge 06",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_13",stickerURI:"./shapes/imgly_sticker_shapes_badge_13.svg",tintMode:"solid",name:"Shape Badge 13",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_36",stickerURI:"./shapes/imgly_sticker_shapes_badge_36.svg",tintMode:"solid",name:"Shape Badge 36",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_08",stickerURI:"./shapes/imgly_sticker_shapes_badge_08.svg",tintMode:"solid",name:"Shape Badge 08",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_11",stickerURI:"./shapes/imgly_sticker_shapes_badge_11.svg",tintMode:"solid",name:"Shape Badge 11",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_35",stickerURI:"./shapes/imgly_sticker_shapes_badge_35.svg",tintMode:"solid",name:"Shape Badge 35",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_28",stickerURI:"./shapes/imgly_sticker_shapes_badge_28.svg",tintMode:"solid",name:"Shape Badge 28",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_32",stickerURI:"./shapes/imgly_sticker_shapes_badge_32.svg",tintMode:"solid",name:"Shape Badge 32",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_15",stickerURI:"./shapes/imgly_sticker_shapes_badge_15.svg",tintMode:"solid",name:"Shape Badge 15",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_20",stickerURI:"./shapes/imgly_sticker_shapes_badge_20.svg",tintMode:"solid",name:"Shape Badge 20",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_18",stickerURI:"./shapes/imgly_sticker_shapes_badge_18.svg",tintMode:"solid",name:"Shape Badge 18",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_19",stickerURI:"./shapes/imgly_sticker_shapes_badge_19.svg",tintMode:"solid",name:"Shape Badge 19",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_arrow_02",stickerURI:"./shapes/imgly_sticker_shapes_arrow_02.svg",tintMode:"solid",name:"Shape Arrow 02",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_arrow_03",stickerURI:"./shapes/imgly_sticker_shapes_arrow_03.svg",tintMode:"solid",name:"Shape Arrow 03",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_01",stickerURI:"./shapes/imgly_sticker_shapes_spray_01.svg",tintMode:"solid",name:"Shape Spray 01",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_04",stickerURI:"./shapes/imgly_sticker_shapes_spray_04.svg",tintMode:"solid",name:"Shape Spray 04",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_03",stickerURI:"./shapes/imgly_sticker_shapes_spray_03.svg",tintMode:"solid",name:"Shape Spray 03",resizeMode:"keepAspect"}]}];var p_=dTe;const uTe=[{thumbnailURI:"./items/dark/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks",name:"Blocks"},{thumbnailURI:"./items/dark/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated",name:"Rotated"},{thumbnailURI:"./items/dark/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light",name:"Blocks Light"},{thumbnailURI:"./items/dark/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width",name:"Equal Width"},{thumbnailURI:"./items/dark/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked",name:"Masked"},{thumbnailURI:"./items/dark/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate",name:"Celebrate"},{thumbnailURI:"./items/dark/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine",name:"Sunshine"},{thumbnailURI:"./items/dark/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge",name:"Masked Badge"},{thumbnailURI:"./items/dark/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed",name:"Blocks Condensed"},{thumbnailURI:"./items/dark/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple",name:"Celebrate Simple"},{thumbnailURI:"./items/dark/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat",name:"Equal Width Fat"},{thumbnailURI:"./items/dark/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor",name:"Watercolor"},{thumbnailURI:"./items/dark/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles",name:"Particles"},{thumbnailURI:"./items/dark/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble",name:"Masked Speech Bubble"},{thumbnailURI:"./items/dark/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic",name:"Masked Speech Bubble Comic"},{thumbnailURI:"./items/dark/imgly_text_design_icon_fatface.png",identifier:"imgly_text_design_multiline",name:"Multiline"}];var C9=uTe;const pTe=[{thumbnailURI:"./items/light/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks",name:"Blocks"},{thumbnailURI:"./items/light/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated",name:"Rotated"},{thumbnailURI:"./items/light/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light",name:"Blocks Light"},{thumbnailURI:"./items/light/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width",name:"Equal Width"},{thumbnailURI:"./items/light/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked",name:"Masked"},{thumbnailURI:"./items/light/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate",name:"Celebrate"},{thumbnailURI:"./items/light/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine",name:"Sunshine"},{thumbnailURI:"./items/light/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge",name:"Masked Badge"},{thumbnailURI:"./items/light/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed",name:"Blocks Condensed"},{thumbnailURI:"./items/light/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple",name:"Celebrate Simple"},{thumbnailURI:"./items/light/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat",name:"Equal Width Fat"},{thumbnailURI:"./items/light/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor",name:"Watercolor"},{thumbnailURI:"./items/light/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles",name:"Particles"},{thumbnailURI:"./items/light/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble",name:"Masked Speech Bubble"},{thumbnailURI:"./items/light/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic",name:"Masked Speech Bubble Comic"},{thumbnailURI:"./items/light/imgly_text_design_icon_fatface.png",identifier:"imgly_text_design_multiline",name:"Multiline"}];var T9=pTe;const hTe=[{identifier:"imgly_transforms_common",name:"Common",items:[{identifier:"imgly_transform_common_custom",name:"Custom",thumbnailURI:"",ratio:"*"},{identifier:"imgly_transform_common_square",name:"Square",thumbnailURI:"",ratio:1},{identifier:"imgly_transform_common_4",name:"4:3",thumbnailURI:"",ratio:4/3},{identifier:"imgly_transform_common_16",name:"16:9",thumbnailURI:"",ratio:16/9},{identifier:"imgly_transform_common_3",name:"3:4",thumbnailURI:"",ratio:3/4},{identifier:"imgly_transform_common_9",name:"9:16",thumbnailURI:"",ratio:9/16}]},{identifier:"imgly_transforms_facebook",name:"Facebook",items:[{identifier:"imgly_transform_facebook_profile",name:"Profile",thumbnailURI:"",dimensions:{x:300,y:300},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_facebook_title",name:"Title",thumbnailURI:"",dimensions:{x:1200,y:627},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_facebook_post",name:"Post",thumbnailURI:"",dimensions:{x:940,y:788},forceDimensions:!0,lockDimensions:!0}]},{identifier:"imgly_transforms_instagram",name:"Instagram",items:[{identifier:"imgly_transform_instagram_landscape",name:"Landscape",thumbnailURI:"",dimensions:{x:1080,y:566},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_portrait",name:"Portrait",thumbnailURI:"",dimensions:{x:1080,y:1350},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_square",name:"Square",thumbnailURI:"",dimensions:{x:1080,y:1080},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_story",name:"Story",thumbnailURI:"",dimensions:{x:1080,y:1920},forceDimensions:!0,lockDimensions:!0}]},{identifier:"imgly_transforms_twitter",name:"Twitter",items:[{identifier:"imgly_transform_twitter_post",name:"Post",thumbnailURI:"",dimensions:{x:1024,y:512},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_twitter_profile",name:"Profile",thumbnailURI:"",dimensions:{x:400,y:400},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_twitter_title",name:"Title",thumbnailURI:"",dimensions:{x:1500,y:500},forceDimensions:!0,lockDimensions:!0}]}];var h_=hTe;const ha={imgly_font_bernier_regular:"imgly_font_sancreek",imgly_font_cheque_regular:"imgly_font_kumar_one_outline",imgly_font_gagalin_regular:"imgly_font_permanent_marker",imgly_font_hagin_caps_thin:"imgly_font_nixie_one",imgly_font_intro_inline:"imgly_font_bungee_inline",imgly_font_nexa_script:"imgly_font_molle",imgly_font_panton_blackitalic_caps:"imgly_font_roboto_black_italic",imgly_font_panton_lightitalic_caps:"imgly_font_roboto_light_italic",imgly_font_perfograma:"imgly_font_codystar",imgly_font_panton_black_caps:"imgly_font_roboto_black",imgly_font_panton_light_caps:"imgly_font_roboto_light",imgly_font_summer_font_light:"imgly_font_sue_ellen_francisco"},kl=(e,t=!1)=>ha[e]?(t&&console.warn(`Font ${e} was deprecated. Please use ${ha[e]} instead.`),ha[e]):e,m_={};Tt(m_,{isMobile:()=>Fk});function Fk(){if(typeof navigator=="undefined")return!1;const e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}function wn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0,r=e==="x"?t:t&3|8;return r.toString(16)})}const nHe=window.performance.now.bind(window.performance);class f_{constructor(e){this.text=e;this.lastOffsetWidth=-1;const t="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.element=document.createElement("div"),this.element.setAttribute("aria-hidden","true"),this.element.appendChild(document.createTextNode(e)),this.collapsible=document.createElement("span"),this.expandable=document.createElement("span"),this.collapsibleInner=document.createElement("span"),this.expandableInner=document.createElement("span"),this.collapsible.style.cssText=t,this.expandable.style.cssText=t,this.expandableInner.style.cssText=t,this.collapsibleInner.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.collapsible.appendChild(this.collapsibleInner),this.expandable.appendChild(this.expandableInner),this.element.appendChild(this.collapsible),this.element.appendChild(this.expandable)}getElement(){return this.element}setFont(e){this.element.style.cssText=`max-width:none;
      min-width:20px;
      min-height:20px;
      display:inline-block;
      overflow:hidden;
      position:absolute;
      width:auto;
      margin:0;
      padding:0;
      top:-999px;
      white-space:nowrap;
      font-synthesis:none;
      font:${e};`}getWidth(){return this.element.offsetWidth}setWidth(e){this.element.style.width=`${e}px`}onResize(e){const t=()=>{this.onScroll(e)};this.collapsible.addEventListener("scroll",t),this.expandable.addEventListener("scroll",t),this.reset()}reset(){const e=this.getWidth(),t=e+100;return this.expandableInner.style.width=`${t}px`,this.expandable.scrollLeft=t,this.collapsible.scrollLeft=this.collapsible.scrollWidth+100,this.lastOffsetWidth!==e?(this.lastOffsetWidth=e,!0):!1}onScroll(e){this.reset()&&this.element.parentNode!==null&&e(this.lastOffsetWidth)}}class yt{static getUserAgent(){return window.navigator.userAgent}static getNavigatorVendor(){return window.navigator.vendor}static hasWebKitFallbackBug(){if(yt.HAS_WEBKIT_FALLBACK_BUG===null){const e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(yt.getUserAgent());yt.HAS_WEBKIT_FALLBACK_BUG=!!e&&(parseInt(e[1],10)<536||parseInt(e[1],10)===536&&parseInt(e[2],10)<=11)}return yt.HAS_WEBKIT_FALLBACK_BUG}static hasSafari10Bug(){if(yt.HAS_SAFARI_10_BUG===null)if(yt.supportsNativeFontLoading()&&/Apple/.test(yt.getNavigatorVendor())){const e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(yt.getUserAgent());yt.HAS_SAFARI_10_BUG=!!e&&parseInt(e[1],10)<603}else yt.HAS_SAFARI_10_BUG=!1;return yt.HAS_SAFARI_10_BUG}static supportsNativeFontLoading(){return yt.SUPPORTS_NATIVE_FONT_LOADING===null&&(yt.SUPPORTS_NATIVE_FONT_LOADING=!!document.fonts),yt.SUPPORTS_NATIVE_FONT_LOADING}static supportsStretch(){if(yt.SUPPORTS_STRETCH===null){const e=document.createElement("div");try{e.style.font="condensend 100px sans-serif"}catch(t){yt.SUPPORTS_STRETCH=!1}yt.SUPPORTS_STRETCH=e.style.font!==""}return yt.SUPPORTS_STRETCH}constructor(e){this.font=v({fontFamily:"normal",fontStyle:"normal",fontWeight:"normal",fontStretch:"normal"},e)}load(e,t){const r="BESbswy";let i=null;const o=t||yt.DEFAULT_TIMEOUT,n=this.getTime();return new Promise((s,a)=>{if(yt.supportsNativeFontLoading()&&!yt.hasSafari10Bug()){const l=new Promise((d,u)=>{const p=()=>{const h=this.getTime();h-n>=o?u(new Error(""+o+"ms timeout exceeded")):document.fonts.load(this.getStyle(`"${this.font.fontFamily}"`),r).then(b=>{b.length>=1?d():setTimeout(p,25)},a)};p()}),c=new Promise((d,u)=>{i=setTimeout(()=>{u(new Error(`${o} ms timeout exceeded`))},o)});Promise.race([c,l]).then(()=>{clearTimeout(i),s(this)},a)}else{const l=new f_(r),c=new f_(r),d=new f_(r);let u=-1,p=-1,h=-1,b=-1,y=-1,f=-1;const w=document.createElement("div"),T=()=>{w.parentNode!==null&&w.parentNode.removeChild(w)},C=()=>{if((u!==-1&&p!==-1||u!==-1&&h!==-1||p!==-1&&h!==-1)&&(u===p||u===h||p===h)){if(yt.hasWebKitFallbackBug()&&(u===b&&p===b&&h===b||u===y&&p===y&&h===y||u===f&&p===f&&h===f))return;T(),clearTimeout(i),s(this)}};w.dir="ltr",l.setFont(this.getStyle("sans-serif")),c.setFont(this.getStyle("serif")),d.setFont(this.getStyle("monospace")),w.appendChild(l.getElement()),w.appendChild(c.getElement()),w.appendChild(d.getElement()),document.body.appendChild(w),b=l.getWidth(),y=c.getWidth(),f=d.getWidth();const F=()=>{const k=this.getTime();if(k-n>=o)T(),a(new Error(`${o} ms timeout exceeded`));else{const E=document.hidden;(E===!0||E===void 0)&&(u=l.getWidth(),p=c.getWidth(),h=d.getWidth(),C()),i=setTimeout(F,50)}};F(),l.onResize(k=>{u=k,C()}),l.setFont(this.getStyle(`"${this.font.fontFamily}",sans-serif`)),c.onResize(k=>{p=k,C()}),c.setFont(this.getStyle(`"${this.font.fontFamily}",serif`)),d.onResize(k=>{h=k,C()}),d.setFont(this.getStyle(`"${this.font.fontFamily}",monospace`))}})}getStyle(e){return[this.font.fontStyle,this.font.fontWeight,yt.supportsStretch()?this.font.fontStretch:"","100px",e].join(" ")}getTime(){return new Date().getTime()}}yt.HAS_WEBKIT_FALLBACK_BUG=null,yt.HAS_SAFARI_10_BUG=null,yt.SUPPORTS_STRETCH=null,yt.SUPPORTS_NATIVE_FONT_LOADING=null,yt.DEFAULT_TIMEOUT=3e3;class O{static fromSize(e){return new O(e.width,e.height)}static distance(e,t){const r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)}static dot(e,t){return e.x*t.x+e.y*t.y}static lerp(e,t,r){const i=Math.min(Math.max(r,0),1);return new O(e.x*i+t.x*(1-i),e.y*i+t.y*(1-i))}static lerpUnclamped(e,t,r){return new O(e.x*r+t.x*(1-r),e.y*r+t.y*(1-r))}static proportionalFit(e,t){const r=e.x/e.y,i=t.x/t.y;return r>i?t.multiply(e.y/t.y):t.multiply(e.x/t.x)}get magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}get normalized(){const e=this.magnitude;return new O(this.x/e,this.y/e)}get floored(){return new O(Math.floor(this.x),Math.floor(this.y))}get rounded(){return new O(Math.round(this.x),Math.round(this.y))}get min(){return Math.min(this.x,this.y)}get max(){return Math.max(this.x,this.y)}get abs(){return new O(Math.abs(this.x),Math.abs(this.y))}get swapped(){return new O(this.y,this.x)}constructor(e,t){typeof e=="number"?(this.x=e,this.y=t):(this.x=e.x,this.y=e.y)}clone(){return new O(this.x,this.y)}add(e,t){return typeof e=="number"?new O(this.x+e,this.y+t):new O(this.x+e.x,this.y+e.y)}subtract(e,t){return typeof e=="number"?new O(this.x-e,this.y-t):new O(this.x-e.x,this.y-e.y)}multiply(e,t){return typeof e=="number"?new O(this.x*e,this.y*(t===void 0?e:t)):new O(this.x*e.x,this.y*e.y)}divide(e,t){return typeof e=="number"?new O(this.x/e,this.y/(t===void 0?e:t)):new O(this.x/e.x,this.y/e.y)}equals(e){return this.x===e.x&&this.y===e.y}clamp(e,t){const r=Math.max(e.x,Math.min(t.x,this.x)),i=Math.max(e.y,Math.min(t.y,this.y));return new O(r,i)}}O.ZERO=new O(0,0),O.ONE=new O(1,1),O.UP=new O(0,1),O.DOWN=new O(0,-1),O.RIGHT=new O(1,0),O.LEFT=new O(-1,0);var ma;(function(e){e.BEGAN_IMAGE_DOWNSCALING="beganImageDownscaling",e.IMAGE_DOWNSCALED="imageDownscaled"})(ma||(ma={}));class g_ extends so{constructor(e,t){super();this.image=e,this.options=t}needsResize(){const e=this.resizedDimensions();return e.x<this.image.width||e.y<this.image.height}resizedDimensions(){const{options:e}=this,t={width:this.image.width,height:this.image.height};let r=O.fromSize(t),i=O.fromSize(t);const{maxMegaPixels:o}=e;if(o){const a=(Fk()?o.mobile:o.desktop)*1e6,l=t.width/t.height,c=t.height/t.width,d=new O(Math.floor(Math.sqrt(a*l)),Math.floor(Math.sqrt(a*c)));d.x<=t.width&&d.y<=t.height&&(r=d)}const n=e.maxDimensions;n&&((n.height<t.height||n.width<t.width)&&(i=new O(n.width,n.height)));const s=new O(Math.min(r.x,i.x),Math.min(r.y,i.y));return O.proportionalFit(s,O.fromSize(t)).floored}downscaleIfNecessary(){const e=this.resizedDimensions(),t=e.x<this.image.width||e.y<this.image.height;if(!t)return this.image;this.emit(ma.BEGAN_IMAGE_DOWNSCALING,this.image);const r=document.createElement("canvas");r.width=e.x,r.height=e.y;const i=r.getContext("2d"),{image:o}=this;return i.imageSmoothingQuality="high",i.drawImage(o,0,0,o.width,o.height,0,0,e.x,e.y),this.emit(ma.IMAGE_DOWNSCALED,{width:e.x,height:e.y}),r}downscaleImageIfNecessary(){const e=this.image,t=this.resizedDimensions(),r=t.x<this.image.width||t.y<this.image.height;if(!r)return e;this.emit(ma.BEGAN_IMAGE_DOWNSCALING,e);const i=new Image;return i.width=t.x,i.height=t.y,i.src=e.src,this.emit(ma.IMAGE_DOWNSCALED,{width:t.x,height:t.y}),i}}const mTe=e=>e.key==="Enter",fTe=e=>e.key==="Escape",k9=e=>t=>{mTe(t)&&e(t)},E9=e=>t=>{fTe(t)&&e(t)};var b_;(function(e){e[e.EditorContainer=0]="EditorContainer",e[e.ToolControlBar=1]="ToolControlBar",e[e.ToolControlBarControls=2]="ToolControlBarControls",e[e.CanvasContainer=3]="CanvasContainer",e[e.Canvas=4]="Canvas",e[e.MainBarButtonClose=5]="MainBarButtonClose",e[e.Tooltip=6]="Tooltip",e[e.Cursor=7]="Cursor",e[e.CursorContainer=8]="CursorContainer",e[e.NummericInput=9]="NummericInput",e[e.BrushSize=10]="BrushSize",e[e.BrushHardness=11]="BrushHardness",e[e.Dialog=12]="Dialog",e[e.DialogBody=13]="DialogBody",e[e.CardContainer=14]="CardContainer",e[e.CategoryItemsContainer=15]="CategoryItemsContainer",e[e.ToolbarItem=16]="ToolbarItem",e[e.ColorList=17]="ColorList",e[e.NoResult=18]="NoResult",e[e.CardLabel=19]="CardLabel",e[e.CardAvatar=20]="CardAvatar",e[e.Dropdown=21]="Dropdown",e[e.DropdownList=22]="DropdownList",e[e.TextAlignment=23]="TextAlignment",e[e.Sprite=24]="Sprite",e[e.SpriteTopLeft=25]="SpriteTopLeft",e[e.SpriteTopRight=26]="SpriteTopRight",e[e.SpriteBottomLeft=27]="SpriteBottomLeft",e[e.SpriteBottomRight=28]="SpriteBottomRight",e[e.Knob=29]="Knob",e[e.TextWidth=30]="TextWidth",e[e.ToolbarWrapper=31]="ToolbarWrapper",e[e.MainCanvasActionBar=32]="MainCanvasActionBar",e[e.SpriteActions=33]="SpriteActions",e[e.CarouselSlider=34]="CarouselSlider",e[e.CropMask=35]="CropMask",e[e.FlipRotateControls=36]="FlipRotateControls",e[e.RotateSlider=37]="RotateSlider",e[e.CropTopRight=38]="CropTopRight",e[e.CropTopLeft=39]="CropTopLeft",e[e.CropBottomRight=40]="CropBottomRight",e[e.CropBottomLeft=41]="CropBottomLeft",e[e.Watermark=42]="Watermark",e[e.Toolbar=43]="Toolbar",e[e.CanvasBar=44]="CanvasBar",e[e.Checkbox=45]="Checkbox",e[e.Focus=46]="Focus"})(b_||(b_={}));const D9={};for(const e in b_){const t=b_[e];typeof t=="string"&&(D9[t]=t)}const ee=D9;var I9;const yHe=Boolean((I9=window.Cypress)==null?void 0:I9.env("pesdk"));function gTe(e,t){let r=0;for(let i=e.length-1;i>=0;i--){const o=e[i];o==="."?e.splice(i,1):o===".."?(e.splice(i,1),r++):r&&(e.splice(i,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function bTe(e){return e.charAt(0)==="/"}function yTe(e){const t=bTe(e),r=e.substr(-1)==="/";return e=gTe(e.split("/").filter(Boolean),!t).join("/"),!e&&!t&&(e="."),e&&r&&(e+="/"),(t?"/":"")+e}const Sf=(...e)=>yTe(e.join("/"));const Pk=(e,t,[r,i],o=0)=>{const n=e[t];if(n){if(n<r)return console.error(`${t} must be greater than or equal to ${r}`),r;if(n>i)return console.error(`${t} must be less than or equal to ${i}`),i}return n||o},Sn=(e,t,r=[1,1,1,1])=>{const i=e[t];let o=!0;return i&&i.forEach(n=>{n<0&&(console.error(`${n} in ${t} must be greater than or equal to 0`),o=!1),n>1&&(console.error(`${n} in ${t} must be less than or equal to 1`),o=!1)}),o&&i||r};const We=e=>e*.08,y_=e=>e*.03;const vTe={italic:"i"};class Mk{constructor(e){this.assetManager=e;this.injectedFonts={};this.loadedFonts={};this.getGoogleFamiliesString=e=>{const t=e.reduce((r,i)=>{const{fontFamily:o,fontStyle:n,fontWeight:s=400}=i;return r[o]=(r[o]||[]).concat(`${s}${vTe[n]||""}`),r},{});return Object.keys(t).map(r=>{const i=t[r].length?`:${t[r].join(",")}`:"",o=r.replace(" ","+")+i;return o}).join("|")}}static createFontFacesCSS(e,t){return e.map(r=>{const i=t(r.fontURI);return`@font-face {
        font-family: "${r.fontFamily}";
        src: url('${i}') format('${r.format||"woff"}');
        font-weight: ${r.fontWeight||"normal"};
        font-style: ${r.fontStyle||"normal"};
      }`})}getFontWithId(e){const t=this.assetManager.getFontAsset(e);if(!t)throw new Error("The requested font does not exist as an asset.");return t}isFontLoaded(e){return this.loadedFonts[e]!==void 0}injectAllFonts(){const e=this.assetManager.getFontAssets();this.injectFonts(e)}loadAllFonts(){return se(this,null,function*(){const e=this.assetManager.getFontAssets();return this.loadFonts(e)})}loadFontsWithIdentifiers(e){return se(this,null,function*(){const t=e.map(r=>this.getFontWithId(r));return this.loadFonts(t)})}loadFonts(e){return se(this,null,function*(){this.injectFonts(e);const t=new Array;return e.forEach(r=>{t.push(this.loadFont(r,!1))}),new Promise((r,i)=>{Promise.all(t).then(()=>r()).catch(o=>i(o))})})}loadFont(e,t=!0){return se(this,null,function*(){return new Promise((r,i)=>{this.isFontLoaded(e.identifier)&&r(),t&&this.injectFonts([e]);const o=new yt(e);o.load().then(()=>{this.loadedFonts[e.identifier]=e,r()}).catch(()=>{i(e.identifier)})})})}loadFontWithIdentifier(e,t=!0){return se(this,null,function*(){const r=this.assetManager.getFontAsset(e);if(!r)throw new Error(`The requested font asset with identifier ${e} does not exist!`);return this.loadFont(r,t)})}injectFonts(e,t=this.assetManager.getPathForCategory("font")){const r=e.filter(i_),i=e.filter(r_);r.length>0&&this.addGoogleFontLinks(r),i.length>0&&this.addWebFontCSS(i,t)}addGoogleFontLinks(e){const t=e.filter(n=>!this.injectedFonts[n.identifier]);if(t.length===0)return;const r=this.getGoogleFamiliesString(t),i=document.createElement("link");i.rel="stylesheet",i.href=`https://fonts.googleapis.com/css?family=${r}`;const o=document.getElementsByTagName("head")[0];o.appendChild(i),e.forEach(n=>{this.injectedFonts[n.identifier]=n})}addWebFontCSS(e,t){const r=e.filter(s=>!this.injectedFonts[s.identifier]);if(r.length===0)return;const i=Mk.createFontFacesCSS(r,t),o=`
      /* Injected by PhotoEditorSDK */
      ${i.join(`
`)}
    `,n=document.createElement("style");n.innerHTML=o,document.head.appendChild(n),e.forEach(s=>{this.injectedFonts[s.identifier]=s})}}class v_{constructor(e,t=!1){this.basePath="assets/";this.areCustomAssetsAllowed=!1;this.getAssets=e=>{switch(e){case"overlay":return this.overlayAssets;case"filter":return this.filterCategories;case"font":return this.fontAssets;case"focus":return this.focusAssets;case"adjustment":return this.adjustmentCategories;case"sticker":return this.stickerCategories;case"textdesign":return this.textDesignAssets;case"frame":return this.frameAssets;case"transform":return this.transformCategories}return[]};this.getPath=(e,...t)=>{const r=Sf(e,...t);if(t&&t.length!==0&&Tl(Sf(...t)))return Sf(...t);if((!t||t.length===0)&&Tl(e))return e;if(this.basePath.match(/(ftp|http|https):\/\//)){const{length:i}=this.basePath;return this.basePath[i-1]!=="/"&&(this.basePath=`${this.basePath}/`),this.basePath+r}return Sf(this.basePath,r)};this.getPathForCategory=e=>(...t)=>this.getPath(e,...t);this.addCustomStickerAsset=(e,t,r)=>{e.forEach(i=>{const{thumbnailURI:o,name:n,stickerURI:s,identifier:a,tintMode:l,resizeMode:c}=i,d=this.stickerCategories.find(p=>p.identifier===t),u={identifier:a,name:n,thumbnailURI:o,stickerURI:s,tintMode:l,resizeMode:c};if(d)d.items.push(u);else{const p={identifier:t,name:r,thumbnailURI:o,items:[u]};this.stickerCategories=[p,...this.stickerCategories]}}),this.stickerAssets=this.stickerCategories.reduce(this.allOptions,[])};this.getItemPath=(e,t,r)=>{const i=e.find(o=>o.identifier===t);return i&&(i[r]||i.path)||""};this.isNonExistingFont=e=>!c_.find(t=>t.identifier===e.identifier)&&!ha[e.identifier];this.replaceDeprecatedFont=e=>ha[e.identifier]?c_.find(t=>t.identifier===kl(e.identifier,!0)):e;e&&e.basePath&&(this.basePath=e.basePath),this.areCustomAssetsAllowed=t;const r=l_.reduce(this.allOptions,[]);e&&e.filter?this.filterCategories=this.configuredCategory(l_,e.filter,r):this.filterCategories=l_,this.lutFilterAssets=this.filterCategories.reduce(this.allOptions,[]).filter(c=>Yv(c)),this.duoToneFilterAssets=this.filterCategories.reduce(this.allOptions,[]).filter(c=>ed(c));const i=a_.reduce(this.allOptions,[]);e&&e.adjustment?this.adjustmentCategories=this.configuredCategory(a_,e.adjustment,i):this.adjustmentCategories=a_,this.fontAssets=c_.reduce(this.allOptions,[]);let o=w9.map(c=>this.getFontAsset(c));if(e&&e.text&&e.text.fonts&&e.text.fonts.length>0){const c=e.text.fonts.filter(this.isNonExistingFont),d=e.text.fonts.filter(u=>!this.isNonExistingFont(u)).map(u=>this.replaceDeprecatedFont(u)).map(u=>this.getFontAsset(u.identifier));o=e.text.fonts?[...d,...c]:o,this.fontAssets=e.text.fonts?[...this.fontAssets,...c]:this.fontAssets}this.textToolFontAssets=o;const n=e&&e.focus&&e.focus.items&&e.focus.items.length?e.focus.items.map(c=>Rk.find(d=>d.identifier===c.identifier)):Rk;this.focusAssets=n,e&&e.overlay&&e.overlay.items?this.overlayAssets=this.configuredItem(e.overlay.items,u_,u_):this.overlayAssets=u_,e&&e.frame&&e.frame.items?this.frameAssets=this.configuredItem(e.frame.items,d_,d_):this.frameAssets=d_;const s=p_.reduce(this.allOptions,[]);e&&e.sticker?this.stickerCategories=this.configuredCategory(p_,e.sticker,s):this.stickerCategories=p_,this.stickerAssets=this.stickerCategories.reduce(this.allOptions,[]);let a=C9;e&&e.theme==="light"&&(a=T9),this.textDesignAssets=e&&e.textdesign&&e.textdesign.items&&e.textdesign.items.length?e.textdesign.items.map(c=>a.find(d=>d.identifier===c.identifier)):a,this.textDesignToolFontAssets=S9.map(c=>this.getFontAsset(c));const l=h_.reduce(this.allOptions,[]);e&&e.transform?this.transformCategories=this.configuredCategory(h_,e.transform,l):this.transformCategories=h_,this.transformAssets=this.transformCategories.reduce(this.allOptions,[]),this.fontManager=new Mk(this)}getFontManager(){return this.fontManager}getAssetSource(e,t){switch(e){case"filter":const r=this.getLUTFilterAsset(t);if(r)return this.getPath(e,this.getItemPath(this.lutFilterAssets,t,"lutURI"));break;case"overlay":return this.getPath(e,this.getItemPath(this.overlayAssets,t,"overlayURI"));case"font":return this.getPath(e,this.getItemPath(this.fontAssets,t,"fontURI"));case"sticker":const i=this.stickerAssets.find(o=>o.identifier===t);if(i){if(i.stickerURI.substr(0,10)==="data:image")return i.stickerURI;if(t.includes("imgly_sticker")&&i.stickerURI.includes(".svg")&&Ht()){const o=this.getPath(e,this.getItemPath(this.stickerAssets,t,"stickerURI")),n=o.split("/");return n.splice(n.length-1,0,"base"),n[n.length-1]=n[n.length-1].replace(".svg",".png"),n.join("/")}return this.getPath(e,this.getItemPath(this.stickerAssets,t,"stickerURI"))}throw new Error("Cannot resolve this type of sticker asset yet");case"textdesign":return this.getPath(e,"engine",t);case"frame":return this.getPath(e,t)}throw new Error("Cannot resolve this type of asset yet")}getDuotoneFilterAsset(e){return this.duoToneFilterAssets.filter(t=>t.identifier===e)[0]}getLUTFilterAsset(e){return this.lutFilterAssets.filter(t=>t.identifier===e)[0]}getOverlayAsset(e){return this.overlayAssets.filter(t=>t.identifier===e)[0]}getStickerAsset(e){return this.stickerAssets.filter(t=>t.identifier===e)[0]}getFontAsset(e){return this.fontAssets.filter(t=>t.identifier===e)[0]}getTextDesignAssets(e){return this.textDesignAssets.filter(t=>t.identifier===e)[0]}getFrameAsset(e){return this.frameAssets.filter(t=>t.identifier===e)[0]}getFontAssets(){return this.fontAssets}getFontAssetsForText(){return this.textToolFontAssets}getFontAssetsForTextDesign(){return this.textDesignToolFontAssets}getFrameAssets(){return this.frameAssets}allOptions(e,t){return Object.prototype.hasOwnProperty.call(t,"items")?[...e,...t.items]:[...e,t]}configuredCategory(e,t,r){return t.categories&&t.categories.length?t.categories.reduce((i,o)=>{const n=e.find(s=>s.identifier===o.identifier);return n?i.push(v(v(v({},n),o),{items:this.configuredItem(o.items,r,n.items).filter(Boolean)})):this.areCustomAssetsAllowed&&i.push(v(v({},o),{items:this.configuredItem(o.items,r,o.items).filter(Boolean)})),i},[]):e}configuredItem(e,t,r){return e&&e.length?e.reduce((i,o)=>{const n=t.find(s=>s.identifier===o.identifier);return n?i.push(v(v({},n),o)):this.areCustomAssetsAllowed&&i.push(o),i},[]).filter(Boolean):r}}class lr{static contains(e,t){return t.x>=e.minX&&t.x<=e.maxX&&t.y>=e.minY&&t.y<=e.maxY}constructor(e,t,r,i){if(typeof e=="number")if(typeof t=="number"&&r!==void 0&&i!==void 0)this.origin={x:e,y:t},this.size={width:r||0,height:i||0};else throw new Error("Invalid arguments passed to Rect. Expected (number, number, number, number)");else{if(this.origin=e,typeof t=="number")throw new Error("Invalid arguments passed to Rect. Expected (Float2, Size)");this.size=t}}get minX(){return this.origin.x}get minY(){return this.origin.y}get midX(){return this.origin.x+.5*this.size.width}get midY(){return this.origin.y+.5*this.size.height}get maxX(){return this.origin.x+this.size.width}get maxY(){return this.origin.y+this.size.height}get width(){return this.size.width}get height(){return this.size.height}}lr.ZERO=new lr({x:0,y:0},{width:0,height:0});class Ae{constructor(e,t,r,i,o,n){this.a=e;this.b=t;this.c=r;this.d=i;this.tx=o;this.ty=n}static fromScale(e,t){return new Ae(e,0,0,t,0,0)}static fromRotation(e){const t=Math.cos(e),r=Math.sin(e);return new Ae(t,-r,r,t,0,0)}static fromRotationDeg(e){const t=Math.PI*e/180;return this.fromRotation(t)}static fromTranslation(e,t){return new Ae(1,0,0,1,e,t)}static fromTRS(e,t,r,i,o){const n=Math.cos(r),s=Math.sin(r);return new Ae(i*n,-o*s,i*s,o*n,e,t)}static multiply(e,t){const r=e.a*t.a+e.b*t.c,i=e.a*t.b+e.b*t.d,o=e.c*t.a+e.d*t.c,n=e.c*t.b+e.d*t.d,s=e.a*t.tx+e.b*t.ty+e.tx,a=e.c*t.tx+e.d*t.ty+e.ty;return new Ae(r,i,o,n,s,a)}static transformPoint(e,t){return{x:e.a*t.x+e.b*t.y+e.tx,y:e.c*t.x+e.d*t.y+e.ty}}static getInverted(e){const t=e.a*e.d-e.b*e.c;if(t===0)return e;const r=1/t,i=r*e.d,o=-r*e.b,n=-r*e.c,s=r*e.a,a=r*(e.b*e.ty-e.d*e.tx),l=r*(e.c*e.tx-e.a*e.ty);return new Ae(i,o,n,s,a,l)}}Ae.IDENTITY=Ae.fromScale(1,1);function Bo(e){return typeof e=="number"}class Dt{static get IDENTITY(){return new Dt({x:0,y:0})}constructor(e,t={x:1,y:1},r=0){this.position=e,this.scale=t,this.rotation=r}}const O9=_(require("styled-components")),_Te=O9.default.div`
  display: block;
  opacity: 1;
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: ${e=>e.theme.measurements.zIndex.dialog.backdrop};
  text-align: left;
  background: ${e=>e.theme.modal.backdrop};
  height: 100%;
  width: 100%;
`;var __=_Te;const A9=_(require("react")),x_=_(require("styled-components")),xTe=x_.default.div`
  display: none;
  visibility: hidden;
  opacity: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: ${e=>e.theme.measurements.zIndex.dialog.base};
  transition: opacity 100s ease-in-out;

  ${e=>e.isVisible&&x_.css`
      opacity: 1;
      display: block;
      visibility: visible;
    `};
`,w_=({isVisible:e,className:t,children:r})=>A9.default.createElement(xTe,{isVisible:e,className:t},r),R9=_(require("styled-components")),wTe=R9.default.div.attrs(({style:e})=>({role:"dialog","aria-hidden":!1,style:e}))`
  display: flex;
  flex: 0 0 auto;
  flex-direction: column;
  transition: top 0.25s ease;
  position: absolute;
  top: calc(50% + ${e=>e.top}px);
  left: calc(50% + ${e=>e.left}px);
  width: ${e=>e.width};
  height: ${e=>e.height};
  transform: translate(-50%, -50%);
  border-radius: ${e=>e.theme.shape.radiusLarge}px;
  background: ${e=>e.theme.modal.background};
  color: ${e=>e.theme.modal.bodyForeground};
  z-index: ${e=>e.theme.measurements.zIndex.dialog.container};

  @media all and (min-width: 0) and (max-width: 640px) {
    text-align: center;
    width: auto;
    min-width: 200px;
    height: auto;
    top: 50%;
    left: 50%;
  }
`;var S_=wTe;const STe=({isVisible:e=!1,width:t="350px",height:r="fit-content",position:i,header:o,body:n,footer:s,className:a,style:l,children:c})=>C_.default.createElement(w_,{isVisible:e},C_.default.createElement(__,null),C_.default.createElement(S_,{height:r,width:t,left:i.x,top:i.y,className:a,style:l,"data-test":ee.Dialog},o,n,c,s));var F9=STe;const P9=_(require("styled-components")),CTe=P9.default.div`
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-sizing: border-box;
  font-size: ${e=>e.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.body.case};
  color: ${e=>e.theme.modal.bodyForeground};

  padding: 0px 20px 11px;
  &:first-child {
    padding-top: 11px;
  }

  @media all and (min-width: 0) and (max-width: 640px) {
    align-items: center;
  }
`;var fa=CTe;const M9=_(require("styled-components")),TTe=M9.default.div`
  display: flex;
  border-top: 2px solid
    ${e=>e.type==="error"?e.theme.error:e.theme.warning};

  min-height: 40px;
  justify-content: flex-end;
  @media all and (min-width: 0) and (max-width: 640px) {
    height: auto;
    flex-direction: column;
    justify-content: space-around;
  }
`;var Yu=TTe;const B9=_(require("styled-components")),kTe=B9.default.h3`
  font-size: ${e=>e.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.headline2.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.headline2.case};
  color: ${e=>e.theme.modal.headerForeground};

  padding: 11px 20px 0px;
`;var Xu=kTe;const td=_(require("styled-components")),L9=td.keyframes`
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
`,ETe=td.css`
  animation: ${L9} 2s infinite ease 1.5s;
`,DTe=td.css`
  animation: ${L9} 2s infinite ease;
`,ITe=td.default.div`
  color: ${e=>e.theme.primary};
  margin: 12px 0;
  position: relative;
  width: 40px;
  height: 40px;
  box-shadow: inset 0 0 0 2px;
  transform: translateZ(0);
  border-radius: 50%;
  &:before,
  &:after {
    border-radius: 50%;
    position: absolute;
    content: '';
  }
  &:before {
    width: 25px;
    height: 45px;
    background: ${e=>e.theme.modal.background};
    border-radius: 45px 0 0 45px;
    top: -2.5px;
    left: -2.5px;
    transform-origin: 25px 25px;
    ${ETe};
  }
  &:after {
    width: 25px;
    height: 45px;
    background: ${e=>e.theme.modal.background};
    border-radius: 0 45px 45px 0;
    top: -2.5px;
    left: 25px;
    transform-origin: 0px 25px;
    ${DTe};
  }
`;var T_=ITe;const Cf=_(require("react")),R_=_(require("react")),F_=_(require("react-dom")),Bk=["Moz","Webkit","O","ms"];function OTe(e){let t="",r=!0,i;for(i=0;i<e.length;i+=1)r?(t+=e[i].toUpperCase(),r=!1):e[i]==="-"?r=!0:t+=e[i];return t}function Lk(e,t){return t?`${t}${OTe(e)}`:e}function ATe(e="transform"){if(typeof window=="undefined"||typeof window.document=="undefined")return"";const{style:t}=window.document.documentElement;if(e in t)return"";let r;for(r=0;r<Bk.length;r+=1)if(Lk(e,Bk[r])in t)return Bk[r];return""}var z9=ATe();function k_(e,t){for(let r=0,{length:i}=e;r<i;r+=1)if(t.apply(t,[e[r],r,e]))return e[r];return null}function zk(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function Ju(e){return typeof e=="number"&&!Number.isNaN(e)}function Ir(e){return parseInt(e,10)}let E_="";function RTe(e,t){return E_||(E_=k_(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],r=>zk(e[r]))),zk(e[E_])?e[E_](t):!1}function Nk(e,t,r){let i=e;do{if(RTe(i,t))return!0;if(i===r)return!1;i=i.parentNode}while(i);return!1}function D_(e,t,r){if(!e)return;e.attachEvent?e.attachEvent(`on${t}`,r):e.addEventListener?e.addEventListener(t,r,!0):e[`on${t}`]=r}function El(e,t,r){if(!e)return;e.detachEvent?e.detachEvent(`on${t}`,r):e.removeEventListener?e.removeEventListener(t,r,!0):e[`on${t}`]=null}function N9(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=Ir(r.borderTopWidth),t+=Ir(r.borderBottomWidth),t}function U9(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=Ir(r.borderLeftWidth),t+=Ir(r.borderRightWidth),t}function j9(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=Ir(r.paddingTop),t-=Ir(r.paddingBottom),t}function q9(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=Ir(r.paddingLeft),t-=Ir(r.paddingRight),t}function G9(e,t){const r=t===t.ownerDocument.body,i=r?{left:0,top:0}:t.getBoundingClientRect(),o=e.clientX+t.scrollLeft-i.left,n=e.clientY+t.scrollTop-i.top;return{x:o,y:n}}function W9({x:e,y:t,rotation:r}){const i=`translate(${e}px,${t}px) rotate(${r}rad)`;return{[Lk("transform",z9)]:i}}function H9(e,t){let r=null;return e.targetTouches&&(r=k_(e.targetTouches,i=>t===i.identifier)),e.changedTouches&&!r&&(r=k_(e.changedTouches,i=>t===i.identifier)),r}function V9(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:null}const K9=_(require("react-dom"));function Uk(e){const t=K9.default.findDOMNode(e);if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}function $9(e,t,r){if(!e.props.bounds)return[t,r];let{bounds:i}=e.props;i=typeof i=="string"?i:v({},i);const o=Uk(e);if(typeof i=="string"){const{ownerDocument:n}=o,s=n.defaultView,a=i==="parent"?o.parentNode:n.querySelector(i);if(!(a instanceof HTMLElement))throw new Error(`Bounds selector "${i}" could not find an element.`);if(o instanceof HTMLElement){const l=s.getComputedStyle(o),c=s.getComputedStyle(a);i={left:-o.offsetLeft+Ir(c.paddingLeft)+Ir(l.marginLeft),top:-o.offsetTop+Ir(c.paddingTop)+Ir(l.marginTop),right:q9(a)-U9(o)-o.offsetLeft+Ir(c.paddingRight)-Ir(l.marginRight),bottom:j9(a)-N9(o)-o.offsetTop+Ir(c.paddingBottom)-Ir(l.marginBottom)}}}return i=i,Ju(i.right)&&(t=Math.min(t,i.right)),Ju(i.bottom)&&(r=Math.min(r,i.bottom)),Ju(i.left)&&(t=Math.max(t,i.left)),Ju(i.top)&&(r=Math.max(r,i.top)),[t,r]}function I_(e,t,r){const{state:i}=e,o=!Ju(i.lastX),n=Uk(e);return o?{node:n,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:n,deltaX:t-i.lastX,deltaY:r-i.lastY,lastX:i.lastX,lastY:i.lastY,x:t,y:r}}function O_(e,t){return{node:t.node,x:e.state.x+t.deltaX,y:e.state.y+t.deltaY,deltaX:t.deltaX,deltaY:t.deltaY,lastX:e.state.x,lastY:e.state.y}}function Y9(e){return e.props.axis==="both"||e.props.axis==="x"}function X9(e){return e.props.axis==="both"||e.props.axis==="y"}function A_(e,t){const r=Uk(t);let{offsetParent:i}=t.props;return!i&&r instanceof HTMLElement&&(i=r.offsetParent||r.ownerDocument.body),G9(e,i)}const bs={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let ao=bs.mouse;const jk={cancel:null,disabled:!1,offsetParent:null,handle:null,transform:null,onStart:()=>{},onDrag:()=>{},onStop:()=>{},onMouseDown:()=>{}};class Zu extends R_.default.Component{constructor(){super(...arguments);this.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:void 0};this.getTouchFromEvent=e=>{const t=V9(e);return this.setState({touchIdentifier:t}),H9(e,t)};this.preventDefault=e=>{e.stopPropagation&&e.stopPropagation()};this.handleDragStart=e=>{const t=F_.default.findDOMNode(this);if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=t;if(this.props.disabled||!(e.target instanceof Node)||this.props.handle&&!Nk(e.target,this.props.handle,t)||this.props.cancel&&Nk(e.target,this.props.cancel,t))return!1;const i=A_(e,this);if(i==null)return!1;const{x:o,y:n}=i,s=I_(this,o,n),a=this.props.onStart(e,s);if(a===!1)return!1;this.setState({dragging:!0,lastX:o,lastY:n}),ao.move==="touchmove"?D_(r,ao.move,this.onTouchDrag):D_(r,ao.move,this.onMouseDrag),D_(r,ao.stop,this.handleDragStop)};this.handleDrag=e=>{const t=A_(e,this);if(t==null)return;const{x:r,y:i}=t,o=I_(this,r,i),n=this.props.onDrag(e,o);if(n===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch(s){const a=document.createEvent("MouseEvents");a.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(a)}return}this.setState({lastX:r,lastY:i})};this.handleDragStop=e=>{if(!this.state.dragging)return;const t=A_(e,this);if(t==null)return;const{x:r,y:i}=t,o=I_(this,r,i),n=F_.default.findDOMNode(this);this.setState({dragging:!1,lastX:NaN,lastY:NaN}),this.props.onStop(e,o),n&&(ao.move==="touchmove"?El(n.ownerDocument,ao.move,this.onTouchDrag):El(n.ownerDocument,ao.move,this.onMouseDrag),El(n.ownerDocument,ao.stop,this.handleDragStop))};this.onMouseDown=e=>(this.preventDefault(e),ao=bs.mouse,this.props.onMouseDown(e),e.button&&typeof e.button=="number"&&e.button!==0?!1:this.handleDragStart(e));this.onMouseDrag=e=>(this.preventDefault(e),this.handleDrag(e));this.onMouseUp=e=>(this.preventDefault(e),ao=bs.mouse,this.handleDragStop(e));this.onTouchStart=e=>{this.preventDefault(e),ao=bs.touch;const t=this.getTouchFromEvent(e);return this.handleDragStart(t)};this.onTouchDrag=e=>{this.preventDefault(e),ao=bs.touch;const t=this.getTouchFromEvent(e);return this.handleDrag(t)};this.onTouchEnd=e=>{this.preventDefault(e),ao=bs.touch;const t=this.getTouchFromEvent(e);return this.handleDragStop(t)}}componentWillUnmount(){const e=F_.default.findDOMNode(this);if(e){const{ownerDocument:t}=e;El(t,bs.mouse.move,this.onMouseDrag),El(t,bs.touch.move,this.onTouchDrag),El(t,bs.mouse.stop,this.handleDragStop),El(t,bs.touch.stop,this.handleDragStop)}}render(){return R_.default.cloneElement(R_.default.Children.only(this.props.children),{style:v({touchAction:"none"},this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}Zu.defaultProps=jk,Zu.displayName="DraggableCore";const FTe=v(v({},jk),{axis:"both",bounds:!1,defaultClassName:"draggable",defaultClassNameDragging:"draggable-dragging",defaultClassNameDragged:"draggable-dragged",defaultPosition:{x:0,y:0},position:null,rotation:0,updateOnPosition:!1});class qk extends Cf.default.Component{constructor(e){super(e);this.onDragStart=(e,t)=>{const r=this.props.onStart(e,O_(this,t));if(r===!1)return!1;this.setState({dragging:!0,dragged:!0})};this.onDrag=(e,t)=>{const{position:r,defaultPosition:i,onDrag:o,bounds:n}=this.props;if(!this.state.dragging)return!1;const s=O_(this,t),a=Boolean(r),l={x:a?s.x:i.x,y:a?s.y:i.y,slackX:0,slackY:0};if(n){const{x:d,y:u}=l;l.x+=this.state.slackX,l.y+=this.state.slackY;const[p,h]=$9(this,l.x,l.y);l.x=p,l.y=h,l.slackX=this.state.slackX+(d-l.x),l.slackY=this.state.slackY+(u-l.y),s.x=l.x,s.y=l.y,s.deltaX=l.x-this.state.x,s.deltaY=l.y-this.state.y}const c=o(e,s);if(c===!1)return!1;this.setState(l)};this.onDragStop=(e,t)=>{if(!this.state.dragging)return!1;const r=this.props.onStop(e,O_(this,t));if(r===!1)return!1;const i={dragging:!1,slackX:0,slackY:0,x:0,y:0},o=Boolean(this.props.position);if(o){const{x:n,y:s}=this.props.position;i.x=n,i.y=s}this.setState(i)};this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,slackX:0,slackY:0}}componentDidUpdate(e){const t=Boolean(this.props.position);t&&(this.props.updateOnPosition?(e.position&&e.position.x!==this.props.position.x||e.position.y!==this.props.position.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}):(e.position&&this.props.position.x!==this.state.x||this.props.position.y!==this.state.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}))}componentWillUnmount(){this.setState({dragging:!1})}render(){const C=this.props,{position:e,defaultPosition:t,rotation:r,defaultClassName:i,defaultClassNameDragging:o,defaultClassNameDragged:n}=C,s=ai(C,["position","defaultPosition","rotation","defaultClassName","defaultClassNameDragging","defaultClassNameDragged"]),{x:a,y:l,dragging:c,dragged:d}=this.state;let u={};const p=Boolean(e),h=!p||c,b=e||t,y={x:Y9(this)&&h?a:b.x,y:X9(this)&&h?l:b.y,rotation:r};u=W9(y);const f=Cf.default.Children.only(this.props.children),w=[f.props.className||"",i,c?o:"",d?n:""].join(" ").trim(),T=Cf.default.cloneElement(f,{className:w,style:v(v({},f.props.style),u)});return Cf.default.createElement(Zu,v(v({},s),{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),T)}}qk.defaultProps=FTe,qk.displayName="Draggable";var J9=qk;const Lo=_(require("react")),oj=_(rj()),zo=_(require("styled-components")),tp=_(require("react")),z_=_(require("styled-components")),Qu=_(require("styled-components")),M_=Qu.default.span`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,Wk=Qu.default(M_)``,hi=Qu.default(M_)``,ep=Qu.default(M_)``,B_={display:"none",left:0,top:0},L_=Qu.default(M_)`
  display: ${({display:e})=>e};
  left: ${({left:e})=>e}px;
  top: ${({top:e})=>e}px;
  pointer-events: none;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.12);
  animation: ${Iv} 1.2s;
  width: 100px;
  height: 100px;
  margin-top: -50px;
  margin-left: -50px;
  opacity: 0;
`,ga=z_.css`
  color: ${e=>e.theme.button.activeForeground};
`,JTe=z_.default.button`
  &&& {
    box-sizing: border-box;
  }
  text-align: center;
  position: relative;
  padding: 4px 8px;
  min-height: 32px;
  border-radius: ${e=>e.theme.shape.radiusMedium}px;
  font-size: ${e=>e.theme.measurements.fontSystem.button1.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.button1.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.button1.case};
  font-family: ${e=>e.theme.typography.fontFamily}, sans-serif;
  cursor: pointer;
  border: none;
  background-color: transparent;
  overflow: hidden;
  ${Er}

  /* Active */

  &:active {
    ${ga}
  }

  ${({isActive:e})=>e&&ga}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${hi} {
      background-color: ${e=>e.theme.button.outlinedInactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${ep} {
      background-color: ${e=>e.theme.button.hoverOverlayColor};
    }
  }
`;class ei extends tp.default.Component{constructor(){super(...arguments);this.state=B_;this.timeout=null;this.onClick=e=>{const t=e.currentTarget.getBoundingClientRect(),r=e.pageX-t.left,i=e.pageY-t.top;this.state.display==="block"?this.setState({display:"none"},()=>{this.setRippleState(r,i)}):this.setRippleState(r,i),this.props.onClick(e)};this.setRippleState=(e,t)=>{this.setState({left:e,top:t,display:"block"}),this.timeout=setTimeout(()=>{this.setState({display:"none"})},1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){const d=this.props,{isActive:e,isDisabled:t,label:r,ariaLabel:i,children:o,className:n}=d,s=ai(d,["isActive","isDisabled","label","ariaLabel","children","className"]),{left:a,top:l,display:c}=this.state;return tp.default.createElement(JTe,v(v({"data-test":i,className:n,isActive:e,disabled:t,"aria-label":i},s),{onClick:this.onClick}),r,o,tp.default.createElement(L_,{display:c,left:a,top:l}),tp.default.createElement(hi,null),tp.default.createElement(ep,null))}}ei.defaultProps={type:"button",isDisabled:!1,isActive:!1};const ij=_(require("react")),Tf=_(require("styled-components")),ZTe=Tf.default.label`
  ${$u}
`,QTe=Tf.default.label`
  display: block;
  font-size: ${e=>e.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.label.case};
  color: ${e=>e.theme.toolControlBar.inputLabelForeground};
  margin: 0;
  padding-bottom: 8px;

  ${({isDisabled:e})=>e&&Tf.css`
      opacity: ${t=>t.theme.toolControlBar.inputLabelInactiveOpacity};
      cursor: default;
      pointer-events: none;
    `}
`,jr=({label:e,htmlFor:t,show:r,style:i,isDisabled:o,className:n})=>{const s=r?QTe:ZTe,a=t||(e?e.replace(" ","-"):void 0);return ij.default.createElement(s,{style:i,isDisabled:o,htmlFor:a,className:n},e)};jr.defaultProps={show:!0};const e1e=zo.default.div`
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
`,t1e=zo.default(jr)`
  align-self: flex-start;
`,nj=zo.default(ei)`
  color: ${e=>e.theme.button.textSecondaryForeground};
  padding: 1px 7px 2px;
`,r1e=zo.default.div`
  display: flex;
  justify-content: space-between;
  width: ${e=>e.theme.measurements.advancedUIToolControlBar.width-48}px;
`,i1e=zo.default.article`
  /* 0.6 of width here refers to the width of the container without padding */
  width: ${e=>.6*e.theme.measurements.advancedUIToolControlBar.width}px;
  font-size: ${e=>e.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.body.case};
  text-align: center;
  margin-top: 7px;
  display: inline-block;
  color: ${e=>e.theme.toolControlBar.inputLabelForeground};
`,o1e=zo.default.div`
  width: ${e=>.6*e.theme.measurements.advancedUIToolControlBar.width}px;
  transform: translateZ(0);
  overflow: hidden;
  transition: all 500ms ease-out;
`,n1e=zo.default.span`
  width: ${e=>Math.round(e.length*.6*e.theme.measurements.advancedUIToolControlBar.width)}px;
  margin-left: -${e=>e.activeIndex*.6*e.theme.measurements.advancedUIToolControlBar.width}px;
  position: relative;
  display: inline-block;
  transform: translateZ(0);
  transition: all 600ms cubic-bezier(0.77, 0, 0.175, 1);
  font-family: '${e=>e.theme.typography.fontFamily}', sans-serif;
`,sj=zo.default.div`
  border: solid ${e=>e.theme.card.foreground};
  border-width: 0 2px 2px 0;
  padding: 3px;
  height: 0;
  width: 0;

  ${({direction:e})=>e==="left"?zo.css`
          margin-left: 2px;
          transform: rotate(135deg);
        `:zo.css`
          margin-right: 2px;
          transform: rotate(-45deg);
        `}
`;class aj extends Lo.default.PureComponent{constructor(e){super(e);this.updateIndex=(e,t=!1)=>{let r=e+(t?-1:1);const i=this.props.list.length-1;r>i&&(r=0),r<0&&(r=i),this.props.onSelect(this.props.list[r].identifier)};this.getActiveIndex=e=>{const{list:t}=this.props,r=t.findIndex(i=>i.identifier===e);return r!==-1?r:0};this.throttledUpdateIndex=oj.default(this.updateIndex,600)}render(){const{list:e,label:t,showLabel:r=!0}=this.props,i=this.getActiveIndex(this.props.defaultIdentifier),o=e.length<=1;return Lo.default.createElement(e1e,{"data-test":ee.CarouselSlider},Lo.default.createElement(t1e,{show:r,label:t}),Lo.default.createElement(r1e,{id:`photoeditorsdk-${t.replace(" ","-")}`},Lo.default.createElement(nj,{ariaLabel:"Select Previous",isDisabled:o,onClick:()=>this.throttledUpdateIndex(i,!0)},Lo.default.createElement(sj,{direction:"left"})),Lo.default.createElement(o1e,null,Lo.default.createElement(n1e,{activeIndex:i,length:e.length},e.map(n=>Lo.default.createElement(i1e,{key:n.identifier},n.value)))),Lo.default.createElement(nj,{ariaLabel:"Select Next",isDisabled:o,onClick:()=>this.throttledUpdateIndex(i)},Lo.default.createElement(sj,{direction:"right"}))))}}aj.defaultProps={showLabel:!0};var lj=aj;const rp=_(require("react")),cj=_(require("styled-components")),s1e=cj.default.div`
  display: flex;
  position: relative;
  margin-bottom: 12px;
  max-width: ${e=>e.theme.measurements.basicToolControlBar.maxWidth}px;
`;var N_=s1e;const kf=_(require("styled-components")),a1e=kf.default.div.attrs({tabIndex:0})`
  position: relative;
  height: 16px;
  width: 16px;
  cursor: pointer;
  background-color: ${e=>e.theme.checkbox.background};
  border-radius: ${e=>e.theme.shape.radiusSmall}px;
  transition-timing-function: ease-in;
  transition-duration: 0.3s;
  &::after {
    content: '';
    position: absolute;
    display: inline-block;
    left: 5px;
    width: 5px;
    height: 10px;
    border-style: solid;
    border-width: 0 2px 2px 0;
    border-color: transparent;
    transform: rotate(45deg) scale(0.8);
  }

  &:first-child {
    margin-right: 8px;
  }

  &:last-child {
    margin-left: 8px;
  }

  ${Er}

  &:hover {
    opacity: ${e=>e.theme.checkbox.hoverOpacity};
  }
  ${e=>e.isChecked&&kf.css`
      background-color: ${e.theme.checkbox.activeBackground};
      &::after {
        color: ${e.theme.checkbox.activeForeground};
        border-color: ${e.theme.checkbox.foreground};
      }
      &:hover {
        background-color: ${e.theme.checkbox.activeBackground};
        opacity: 0.8;
      }
    `}
  ${e=>e.isDisabled&&kf.css`
      opacity: 0.5;
      cursor: default;
      pointer-events: none;
    `}
`;var Ef=a1e;const dj=_(require("styled-components")),l1e=dj.default.input.attrs({type:"checkbox",tabIndex:0})`
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
  margin: 0;
  padding: 0;
  ${Er}
`;var U_=l1e;const uj=({label:e,value:t,checkMarkPosition:r,onClick:i,isDisabled:o,className:n,style:s})=>{const a=`photoeditorsdk-${e.replace(" ","-")}`;return rp.default.createElement(N_,{"data-test":ee.Checkbox,className:n,style:s},r==="left"&&rp.default.createElement(Ef,{onClick:i,isDisabled:o,isChecked:t}),rp.default.createElement(jr,{isDisabled:o,label:e,htmlFor:a}),rp.default.createElement(U_,{id:a,disabled:o,checked:t,onChange:i}),r==="right"&&rp.default.createElement(Ef,{onClick:i,isDisabled:o,isChecked:t}))};var pj=uj;uj.defaultProps={value:!1,checkMarkPosition:"left"};const hj=_(require("styled-components")),Dl=hj.css`
  font-size: ${e=>e.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.body.case};
  width: 100%;
  min-height: 26px;
  color: ${e=>e.theme.textInput.foreground};
  padding-bottom: 7px;
  border: none;
  appearance: none;
  border-bottom: 1px solid ${e=>e.theme.textInput.borderColor};
  background: ${e=>e.theme.textInput.background};
  font-family: '${e=>e.theme.typography.fontFamily}', sans-serif;
  transition: border-color 0.4s ease-in-out;

  &:focus {
    outline: none;
    border-color: ${e=>e.theme.textInput.hoverBorderColor};
  }

  &:-moz-focusring {
    outline: none;
    border-color: ${e=>e.theme.textInput.hoverBorderColor};
  }

  &:disabled {
    opacity: ${e=>e.theme.textInput.inactiveOpacity};
    pointer-events: none;
  }

  &:hover {
    border-color: ${e=>e.theme.textInput.hoverBorderColor};
  }

  &::-ms-clear,
  &::-ms-reveal {
    display: none;
  }

  &::-webkit-search-decoration,
  &::-webkit-search-cancel-button,
  &::-webkit-search-results-button,
  &::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  &::-webkit-inner-spin-button,
  &::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
`,vs=_(require("react")),Kk=_(require("styled-components")),j_=_(require("styled-components")),mj=j_.css`
  opacity: ${e=>e.theme.dropdown.inactiveOpacity};
  pointer-events: none;
`,fj=j_.default.div`
  display: block;
  position: relative;
  width: 100%;
  white-space: nowrap;
  transition-duration: 0.5s;

  &:disabled {
    ${mj}
  }

  ${({isDisabled:e})=>e&&mj}
`,q_=_(require("styled-components")),gj=q_.default.li`
  padding: 10px 16px;
  text-overflow: ellipsis;
  font-size: ${e=>e.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.button2.case};
  white-space: nowrap;
  color: ${e=>e.theme.dropdown.foreground};

  &:hover {
    cursor: pointer;
    background: ${e=>e.theme.dropdown.listItemHoverBackground};
  }

  ${({isActive:e})=>e&&q_.css`
      border-left: 2px solid ${t=>t.theme.primary};
    `}

  ${Er}
`,Df=_(require("styled-components")),Hk=_(require("react")),ys=_(require("styled-components")),c1e=ys.default.div`
  display: flex;
  ${e=>Ht()||Mo()?ys.css`
        overflow: hidden;
      `:e.direction==="vertical"?ys.css`
        flex-direction: column;
        flex: 1 1 auto;
        overflow-y: auto;
        overflow-x: hidden;
      `:ys.css`
      overflow-y: hidden;
      overflow-x: auto;
    `};
`,d1e=ys.default.ul.attrs(()=>({role:"menubar","aria-label":"Tool Navigation"}))`
  display: flex;
  flex-direction: ${e=>e.direction==="vertical"?"column":"row"};

  list-style: none;
  padding: 0;
  margin: 0;

  ${e=>Ht()||Mo()?ys.css`
        width: 100%;
        height: 100%;

        ${()=>e.direction==="vertical"?ys.css`
              overflow-y: auto;
              overflow-x: hidden;

              /* hidde the arrows */
              margin-top: -10px;
              margin-bottom: -10px;
              padding-top: 10px;
              padding-bottom: 10px;

              /* hide the scrollbar */
              padding-right: 10px;
              margin-right: -10px;
            `:ys.css`
            overflow-y: hidden;
            overflow-x: auto;

            margin-right: -10px;
            margin-left: -10px;
            padding-right: 10px;
            padding-left: 10px;

            padding-bottom: 10px;
            margin-bottom: -10px;
          `}

        scrollbar-face-color: #454545;
        scrollbar-track-color: ${e.theme.toolbar.background};
        scrollbar-base-color: ${e.theme.toolbar.background};
        scrollbar-3dlight-color: #454545;
        scrollbar-highlight-color: #454545;
        scrollbar-arrow-color: ${e.theme.toolbar.background};
        scrollbar-shadow-color: #454545;
        scrollbar-dark-shadow-color: #454545;
      `:""}
`,Cn=({direction:e="horizontal","data-test":t,className:r,children:i})=>Hk.default.createElement(c1e,{direction:e,className:r},Hk.default.createElement(d1e,{direction:e,"data-test":t},i));const Vk=Df.default(Cn)`
  position: absolute;

  background: ${e=>e.theme.dropdown.listBackground};
  color: ${e=>e.theme.dropdown.listForeground};
  border: 1px solid ${e=>e.theme.dropdown.listBorderColor};
  box-shadow: ${e=>e.theme.dropdown.listShadow};

  visibility: hidden;
  opacity: 0;
  ${e=>e.isOpen?Df.css`
        visibility: visible;
        opacity: 1;
        display: flex;
      `:""}

  transition: all 0.5s ease;

  width: 100%;
  max-height: 160px;
  margin: 5px 0;

  /* had to add these changes to get the dropdown working in IE11 */
  ${()=>Ht()?Df.css`
        > ul {
          height: 160px;
          margin-bottom: 0px;
          margin-top: 0px;
          padding-bottom: 0px;
          padding-top: 0px;
        }
      `:""}

  border-radius: 0 0 ${e=>e.theme.shape.radiusMedium}px
    ${e=>e.theme.shape.radiusMedium}px;
  z-index: ${e=>e.theme.measurements.zIndex.input.list};
`;Vk.defaultProps={direction:"vertical"};const bj=_(require("styled-components")),yj=bj.default.div`
  font-size: ${e=>e.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.body.case};
  color: ${e=>e.theme.dropdown.foreground};
  background-color: ${e=>e.theme.dropdown.background};
  border: none;
  border-bottom: 1px solid ${e=>e.theme.dropdown.borderColor};
  padding: 5px 0;
  cursor: ${e=>e.showList?"pointer":"default"};
  transition: border-color 0.4s ease-in-out;

  &:hover {
    border-color: ${e=>e.theme.dropdown.hoverBorderColor};
  }

  ${Er}
`,u1e=Kk.default.div`
  position: absolute;
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${e=>e.theme.dropdown.caretColor};
  transform: rotate(${e=>e.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
  right: 0;
  top: 13px;
`,p1e=Kk.default.div``;class vj extends vs.default.PureComponent{constructor(e){super(e);this.state={isOpen:!1};this.handleOutsideClick=e=>{if(this.node&&this.node.contains(e.target))return;this.setState({isOpen:!1})};this.onSelect=e=>{const{onSelect:t}=this.props;t(e),this.setState({isOpen:!1})};this.onClick=()=>{this.setState(e=>({isOpen:!e.isOpen}))};this.listItem=e=>{const{itemStyle:t,selectedItem:r}=this.props,{isOpen:i}=this.state,{value:o,label:n}=e;let s={};return typeof t=="function"?s=t(e):t!==null&&typeof t=="object"&&(s=t),vs.default.createElement(gj,{"aria-hidden":!i,tabIndex:0,style:s,onClick:()=>this.onSelect(o),key:o,isActive:r===o},n)};this.onKeyDown=e=>{(e.code==="Space"||e.code==="Enter")&&this.onClick()};this.nodeRef=t=>{this.node=t}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,!1)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,!1)}render(){const{selectedItem:e,list:t,label:r,style:i,isDisabled:o}=this.props,{isOpen:n}=this.state,s=t.length>1,a=o?{}:{tabIndex:0};return vs.default.createElement(p1e,null,vs.default.createElement(jr,{isDisabled:o,style:{paddingLeft:"0px"},label:r}),vs.default.createElement("div",{ref:this.nodeRef},vs.default.createElement(fj,{isOpen:n,isDisabled:o},vs.default.createElement(yj,v(v({"data-test":ee.Dropdown,"aria-hidden":o},a),{showList:s,style:i,onClick:s?this.onClick:void 0,onKeyDown:this.onKeyDown}),e,s&&vs.default.createElement(u1e,{rotation:n?180:0})),vs.default.createElement(Vk,{"data-test":ee.DropdownList,isOpen:n},s&&t.map(this.listItem)))))}}const _j=_(require("styled-components")),xj=_j.default.input.attrs({type:"file",id:"fileUpload",accept:"image/*"})`
  display: none;
`,wj=_(require("react")),h1e=({children:e})=>{const t=r=>{r.preventDefault()};return wj.default.createElement("form",{onSubmit:t},e)};var Sj=h1e;const ip=_(require("react")),If=_(require("styled-components")),G_=_(require("react")),$k=_(require("styled-components")),m1e=$k.default.input`
  ${Dl}
  /* override user agent style */
  padding: 0;
  &:disabled {
    opacity: ${e=>e.theme.textInput.inactiveOpacity};
    cursor: default;
    pointer-events: none;
  }
`,f1e=$k.default.div`
  position: relative;
  &:first-child {
    margin-right: 15px;
  }
`;class Cj extends G_.default.Component{constructor(){super(...arguments);this.onChange=e=>{const{onChange:t}=this.props;t&&t(e.target.value)}}render(){const{id:e,testId:t,value:r,type:i,min:o,max:n,onBlur:s,onFocus:a,onKeyUp:l,onKeyDown:c,onMouseUp:d,onTouchEnd:u,isDisabled:p,className:h,children:b}=this.props;return G_.default.createElement(f1e,{className:h},G_.default.createElement(m1e,{id:e,"data-test":t,"aria-hidden":p,disabled:p,value:r,type:i,min:o,max:n,onChange:this.onChange,onBlur:s,onFocus:a,onKeyUp:l,onKeyDown:c,onMouseUp:d,onTouchEnd:u}),b)}}Cj.defaultProps={type:"text"};var W_=Cj;const g1e=If.default.div`
  ${Ht()?If.css``:If.css`
        display: flex;
        flex: 0 1 auto;
        flex-direction: column;
      `}
`;class Of extends ip.default.Component{constructor(e){super(e);this.node=null;this.handleOutsideClick=e=>{if(this.node&&this.node.current&&this.node.current.contains(e.target))return;this.onSubmit()};this.onSubmit=()=>{const{onSubmit:e}=this.props,{value:t,isActive:r}=this.state;if(e){const i=parseFloat(Of.cleanValue(t));!Number.isNaN(i)&&r&&e(`${i}`)}this.setState({isActive:!1})};this.onBlur=()=>{this.onSubmit()};this.onFocus=()=>{this.setState({isActive:!0})};this.onKeyDown=e=>{const{value:t}=this.state;if(e.key==="Enter")this.onSubmit();else if(e.key==="ArrowUp"){const r=parseFloat(Of.cleanValue(t));typeof r=="number"&&this.setState({value:(r+1).toString(),isActive:!0})}else if(e.key==="ArrowDown"){const r=parseFloat(Of.cleanValue(t));typeof r=="number"&&this.setState({value:(r-1).toString(),isActive:!0})}};this.onChange=e=>{this.setState({value:e.replace(/[^\d.,-]/g,""),isActive:!0})};this.state={value:this.props.value||"",isActive:!1},this.node=ip.default.createRef(),document.addEventListener("mousedown",this.handleOutsideClick,!1),document.addEventListener("touchstart",this.handleOutsideClick,!1)}static getDerivedStateFromProps({value:e},{value:t,isActive:r}){return e!==t&&!r?{value:e}:null}static cleanValue(e){return e?e.replace(",",".").replace(/[a-zA-Z]/g,"").trim():""}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,!1),document.removeEventListener("touchstart",this.handleOutsideClick,!1)}render(){const{id:e,label:t,isDisabled:r,ariaHidden:i,onMouseUp:o,onTouchEnd:n,className:s}=this.props,{value:a}=this.state;return ip.default.createElement(g1e,{ref:this.node,"data-test":ee.NummericInput,className:s},ip.default.createElement(jr,{htmlFor:e,label:t,show:!!t,isDisabled:r}),ip.default.createElement(W_,{id:e,value:a,isDisabled:r,"aria-hidden":i,onChange:this.onChange,onKeyDown:this.onKeyDown,onBlur:this.onBlur,onFocus:this.onFocus,onMouseUp:o,onTouchEnd:n}))}}Of.defaultProps={showLabel:!0};var H_=Of;const V_=_(require("react")),Tj=_(require("styled-components")),b1e=Tj.default.input.attrs({type:"search"})`
  ${Dl}
`,y1e=e=>{const t=r=>{e.onChange(r.target.value)};return V_.default.createElement("div",null,V_.default.createElement(jr,{show:!1,label:"photoeditorsdk-Search"}),V_.default.createElement(b1e,{id:"photoeditorsdk-Search",onChange:t,placeholder:e.placeholder}))};var kj=y1e;const K_=_(require("react")),Af=_(require("styled-components")),v1e=Af.default.div``,Ej=({label:e,children:t,inline:r,showLabel:i,isDisabled:o,"data-test":n})=>K_.default.createElement(v1e,{"data-test":n},K_.default.createElement(jr,{isDisabled:o,label:e,show:i}),K_.default.createElement(_1e,{id:`photoeditorsdk-${e.replace(" ","-")}`,inline:!!r},t)),_1e=Af.default.div`
  display: inline-flex;
  ${e=>!e.inline&&Af.css`
        flex-wrap: wrap;
      `||""}
`;Ej.defaultProps={showLabel:!0};var Dj=Ej;const rd=_(require("react")),No=_(require("styled-components")),x1e=No.default.div`
  display: flex;
  flex-direction: column;
  /* needed for IE11 to properly calculate the width */
  min-width: 1px;
`,w1e=No.default(jr)`
  padding-bottom: 2px;
`,Yk=No.css`
  ${Mo()||Ht()?No.css`
        width: 16px;
        height: 16px;
      `:No.css`
        width: 20px;
        height: 20px;
      `}
  background: ${e=>e.theme.slider.thumbBackground};
  border: 2px solid ${e=>e.theme.slider.thumbBorderColor};
  border-radius: 50%;
  cursor: pointer;
`,S1e=e=>{let t=(e.value-e.min)*100/(e.max-e.min);return e.adjust?e.value>0?(t=e.value*(e.max/2)*100,`${e.theme.slider.trackColor} 0%,
      ${e.theme.slider.trackColor} 50%,
      ${e.theme.slider.activeTrackColor} 50%,
      ${e.theme.slider.activeTrackColor} ${50+t}%,
      ${e.theme.slider.trackColor} ${50+t}%,
      ${e.theme.slider.trackColor} 100%
      `):e.value<0?(t=e.value*(e.min/2)*100,`${e.theme.slider.trackColor} 0%,
      ${e.theme.slider.trackColor} ${50-t}%,
      ${e.theme.slider.activeTrackColor} ${50-t}%,
      ${e.theme.slider.activeTrackColor} 50%,
      ${e.theme.slider.trackColor} 50%,
      ${e.theme.slider.trackColor} 100%
      `):`${e.theme.slider.trackColor} 0%,
    ${e.theme.slider.trackColor} 100%`:`${e.theme.slider.activeTrackColor} 0%,
    ${e.theme.slider.activeTrackColor} ${t}%,
    ${e.theme.slider.trackColor} ${t}%,
    ${e.theme.slider.trackColor} 100%`},C1e=No.default.input`
  display: flex;
  flex: 1 0 auto;
  appearance: none;
  max-width: calc(100% - 50px);
  outline: none;
  border-radius: 0; /* iOS */

  ${Er}

  ${Mo()||Ht()?No.css`
        margin-top: 10px;
        height: 20px;
        /* remove once we have a better concept for focus in all browser */
        &:focus {
          box-shadow: none;
        }
      `:No.css`
        height: 2px;
        background: ${e=>`linear-gradient(to right, ${S1e(e)})`};
      `}
  &::-moz-focus-outer {
    /** This is to remove the dotted focus lines in firefox */
    border: 0;
  }
  &:disabled {
    opacity: ${e=>e.theme.slider.inactiveOpacity};
    pointer-events: none;
  }
  &:hover {
    opacity: ${e=>e.theme.slider.hoverOpacity};
  }
  &::-webkit-slider-runnable-track {
    cursor: pointer;
    appearance: none;
  }
  &::-moz-range-track {
    appearance: none;
    cursor: pointer;
  }
  &::-ms-track {
    cursor: pointer;
    height: 2px;
    appearance: none;
    background: transparent;
    color: transparent;
    border-color: transparent;
    border-width: 6px 0;
  }
  &::-webkit-slider-thumb {
    appearance: none;
    ${Yk}
  }
  &::-moz-range-thumb {
    appearance: none;
    ${Yk}
  }
  &::-ms-thumb {
    appearance: none;
    ${Yk}
  }
  &::-ms-fill-lower {
    background: ${e=>`${e.theme.slider.activeTrackColor}`};
  }
  &::-ms-fill-upper {
    background: ${e=>`${e.theme.slider.trackColor}`};
  }
  &::-ms-tooltip {
    display: none;
  }
  @media all and (min-width: 0) and (max-width: 599px) {
    width: 200px;
  }
`,T1e=No.default.div`
  display: flex;
  align-items: center;
  height: 26px;
  margin-right: ${e=>e.centerSlider?-56:0}px;
`,k1e=No.default(H_)`
  max-width: 50px;
  padding-left: 16px;
  > div > input {
    text-align: center;
  }
`;class Ij extends rd.default.Component{constructor(e){super(e);this.onSubmit=e=>{const{onChange:t,suffix:r,divider:i,min:o,max:n,value:s}=this.props,a=e.replace(r,""),l=a?parseFloat(a)/i:s,c=Math.max(o,Math.min(n,l));Number.isNaN(c)||(t(c),this.props.onMouseUp?this.props.onMouseUp():this.props.onTouchEnd&&this.props.onTouchEnd())};this.onSliderChange=e=>{const{onChange:t}=this.props,r=parseFloat(e.target.value);t(r)};this.randomId=wn()}render(){const{"data-test":e,identifier:t,value:r,min:i,max:o,divider:n,suffix:s,decimal:a,showLabel:l,showInput:c,style:d,centerSlider:u,adjust:p,label:h,isDisabled:b,step:y,"aria-hidden":f,onMouseUp:w,onTouchEnd:T,className:C}=this.props,F=`photoeditorsdk-slider-${this.randomId}`,k=`${F}-input`,E=`${(r*n).toFixed(a)}${s}`,W=c&&rd.default.createElement(k1e,{id:k,value:E,isDisabled:b,"aria-hidden":f,onSubmit:this.onSubmit});return rd.default.createElement(x1e,{className:C,"data-test":e||t||F},rd.default.createElement(w1e,{isDisabled:b,label:h,show:l}),rd.default.createElement(T1e,{centerSlider:c&&u},rd.default.createElement(C1e,{type:"range",role:"slider","aria-hidden":f,tabIndex:0,value:r,min:i,max:o,step:y,style:d,disabled:b,id:F,onChange:this.onSliderChange,adjust:p,name:h,onKeyUp:this.onSliderChange,onKeyDown:this.onSliderChange,onMouseUp:w,onTouchEnd:T}),W))}}Ij.defaultProps={showLabel:!0,showInput:!0,adjust:!1,centerSlider:!1,min:-1,max:1,value:0,step:.01,decimal:0,divider:100,suffix:""};var Oj=Ij;const _s=_(require("react")),Aj=_(require("styled-components")),Il=Aj.default(ei)`
  color: ${e=>e.theme.button.textPrimaryForeground};

  /* Repeat active styles so they are not overwritten */
  ${({isActive:e})=>e&&ga}

  ${hi} {
    display: none;
  }

  &:disabled {
    opacity: ${e=>e.theme.button.textInactiveOpacity};
  }
`,Rj=_(require("styled-components")),Uo=Rj.default(ei)`
  color: ${e=>e.theme.button.textSecondaryForeground};

  /* Repeat active styles so they are not overwritten */
  ${({isActive:e})=>e&&ga}

  ${hi} {
    display: none;
  }

  &:disabled {
    opacity: ${e=>e.theme.button.textInactiveOpacity};
  }
`;class Fj extends _s.default.Component{constructor(){super(...arguments);this.onDismiss=()=>{const{handleClose:e,handleDismiss:t}=this.props;e&&e(),t&&t()};this.onConfirm=()=>{const{handleClose:e,handleConfirm:t}=this.props;e&&e(),t&&t()}}render(){const{headerLabel:e,bodyLabel:t,confirmLabel:r,dismissLabel:i,type:o,children:n}=this.props,s=_s.default.Children.toArray(n)[0];if(!_s.default.isValidElement(s))throw new Error("Child is not a valid react element");return _s.default.cloneElement(s,{handleConfirm:this.onConfirm,handleDismiss:this.onDismiss,header:_s.default.createElement(Xu,null,e),body:_s.default.createElement(fa,{"data-test":ee.DialogBody},t),footer:_s.default.createElement(Yu,{type:o},i&&_s.default.createElement(Uo,{label:i,ariaLabel:i,onClick:this.onDismiss}),r&&_s.default.createElement(Il,{label:r,ariaLabel:r,onClick:this.onConfirm}))})}}const Tn=_(require("react")),Rf=_(require("styled-components")),E1e=Rf.default.div`
  display: flex;
`,D1e=Rf.default(Xu)`
  padding: 0;
`,I1e=Rf.default.div`
  display: flex;
  flex-direction: column;
  margin-left: 8px;
  @media all and (min-width: 640px) {
    margin-left: 30px;
  }
`,O1e=Rf.default(fa)`
  padding: 0;
  margin: 0;
`;class Pj extends Tn.default.PureComponent{render(){const{headerLabel:e,bodyLabel:t,children:r}=this.props,i=Tn.default.Children.toArray(r)[0];if(!Tn.default.isValidElement(i))throw new Error("Child is not a valid react element");return Tn.default.cloneElement(i,{height:"90px",body:Tn.default.createElement(fa,{"data-test":ee.DialogBody},Tn.default.createElement(E1e,null,Tn.default.createElement(T_,null),Tn.default.createElement(I1e,null,Tn.default.createElement(D1e,null,e),Tn.default.createElement(O1e,null,t))))})}}const lo=_(require("react")),op=_(require("styled-components")),A1e=op.default.form`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
`,R1e=op.default.textarea`
  display: flex;
  caret-color: ${e=>e.theme.primary};
  ${Dl}
  min-height: 100%;
  padding: 0px;
  outline-offset: -8px;
  color: ${e=>e.theme.modal.bodyForeground};
  resize: none;
  font-family: '${e=>e.theme.typography.fontFamily}', sans-serif;

  &:selection,
  &:-moz-selection {
    background-color: ${e=>e.theme.primary};
    color: ${e=>e.theme.foreground};
  }
`,F1e=op.default.label`
  padding: 11px 20px 8px;
  font-size: ${e=>e.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.label.case};
  color: ${e=>e.theme.modal.headerForeground};
`,P1e=op.default(fa)`
  height: 100%;
`,M1e=op.default(Yu)`
  border-top: none;
`;class Mj extends lo.default.Component{constructor(){super(...arguments);this.state={value:""};this.input=lo.default.createRef();this.handleKeydown=e=>{E9(this.handleDismiss)(e)};this.handleDismiss=()=>{const{handleDismiss:e}=this.props;e&&e(!1)};this.handleConfirm=()=>{const{handleConfirm:e}=this.props,{value:t}=this.input.current;t&&(e&&e(t),this.handleDismiss())};this.onChange=e=>{const t=h9(e.target.value);this.input.current.value=t,this.setState({value:t})};this.onSubmit=e=>{e.preventDefault()}}componentDidMount(){const{text:e,defaultText:t}=this.props;this.input.current.focus(),this.input.current.value=e||t||"",this.setState({value:this.input.current.value}),document.addEventListener("keydown",this.handleKeydown,!1),e===t&&this.input.current.select()}componentDidUpdate(e){const{isVisible:t}=this.props;e.isVisible!==t&&(t&&this.input.current.focus())}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeydown,!1)}render(){const{headerLabel:e,dismissLabel:t,confirmLabel:r,maxLength:i,type:o,children:n}=this.props,{value:s}=this.state,a=lo.default.Children.toArray(n)[0];if(!lo.default.isValidElement(a))throw new Error("Child is not a valid react element");return lo.default.cloneElement(a,{handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss,isConfirmDisabled:!s,height:"150px",header:lo.default.createElement(F1e,{htmlFor:"photoeditorsdk-TextInput"},e),body:lo.default.createElement(P1e,null,lo.default.createElement(A1e,{onSubmit:this.onSubmit},lo.default.createElement(R1e,{ref:this.input,id:"photoeditorsdk-TextInput",placeholder:"Write Something",autoFocus:!0,onChange:this.onChange,maxLength:i}))),footer:lo.default.createElement(M1e,{type:o},lo.default.createElement(Uo,{label:t,ariaLabel:t,onClick:this.handleDismiss}),lo.default.createElement(Il,{label:r,ariaLabel:r,isDisabled:!s,onClick:this.handleConfirm}))})}}Mj.defaultProps={defaultText:"Write Something"};var Bj=Mj;const Lj=_(require("styled-components")),zj=Lj.default.div`
  padding-bottom: ${e=>(e.count||1)*8}px;
`;var Nj=zj;zj.defaultProps={count:1};const id=_(require("react"));class Uj extends id.default.Component{getChildren(){const e=[],t=[];return id.default.Children.forEach(this.props.children,r=>{switch(r.type.componentName){case"case":this.props.type===r.props.value&&e.push(r);break;case"default":t.push(r);break}}),e.length>0?e:t}render(){const e=this.getChildren();return e.length===0?null:id.default.createElement(id.default.Fragment,null,e)}}class Xk extends id.default.Component{render(){return this.props.children}}Xk.componentName="case";class Jk extends id.default.Component{render(){return this.props.children}}Jk.componentName="default";const np=_(require("styled-components")),B1e=np.keyframes`
  from { transform: translate(-50%, 0%); }
  to { transform: translate(-50%, 50%); }
`,L1e=np.default.div`
  position: absolute;
  top: ${e=>e.position.y}px;
  left: ${e=>e.position.x}px;
  transform: translate(-50%, 50%);
  background: black;
  color: white;
  border-radius: ${e=>e.theme.shape.radiusMedium}px;
  padding: 10px 16px;
  text-align: center;
  z-index: ${e=>e.theme.measurements.zIndex.toast};
  visibility: hidden;

  ${({show:e})=>e&&np.css`
      visibility: visible;
      animation: ${B1e} 0.5s, fadeout 0.5s 2.5s;
    `}
`;var jj=L1e;const $_=_(require("react")),od=_(require("styled-components")),z1e=od.default(ei)`
  ${({fullWidth:e})=>e&&od.css`
      width: 100%;
    `}
`,N1e=od.default.div`
  &:focus {
    outline: none;
  }

  > img {
    height: 18px;
    width: 18px;
  }

  > svg {
    height: 18px;
    width: 18px;
  }
  display: none;

  @media all and (min-width: 0) and (max-width: 599px) {
    display: flex;
  }
`,U1e=od.default.div`
  display: flex;
  justify-content: center;
  align-items: center;
  &:focus {
    outline: none;
  }

  ${({hasIcon:e})=>e&&od.css`
      @media all and (min-width: 0) and (max-width: 599px) {
        display: none;
      }
    `}
`,kn=n=>{var{label:e,children:t,icon:r,fullWidth:i}=n,o=ai(n,["label","children","icon","fullWidth"]);const s=$_.default.createElement(U1e,{hasIcon:!!r},e,t);return $_.default.createElement(z1e,v({fullWidth:i},o),r&&$_.default.createElement(N1e,null,r),(t||e)&&s)};const qj=_(require("styled-components")),sp=qj.default(kn)`
  background: ${e=>e.theme.button.outlinedPrimaryBackground};
  color: ${e=>e.theme.button.outlinedPrimaryForeground};
  border: 1px solid ${e=>e.theme.button.outlinedBorderColor};
  min-width: 32px;
`;const Gj=_(require("styled-components")),ba=Gj.default(kn)`
  background: ${e=>e.theme.button.outlinedSecondaryBackground};
  color: ${e=>e.theme.button.outlinedSecondaryForeground};
  border: 1px solid ${e=>e.theme.button.outlinedBorderColor};
`;const Zk=_(require("react")),Qk=_(require("styled-components")),j1e=Qk.default(ei)`
  color: ${e=>e.theme.foreground};
  /* Repeat active styles so they are not overwritten */
  ${({isActive:e})=>e&&ga}

  ${hi} {
    display: none;
  }

  &:disabled {
    opacity: ${e=>e.theme.button.textInactiveOpacity};
  }
`,q1e=Qk.default.div`
  display: flex;
  &:focus {
    outline: none;
  }
`,xs=o=>{var{label:e,icon:t,children:r}=o,i=ai(o,["label","icon","children"]);return Zk.default.createElement(j1e,v({},i),Zk.default.createElement(q1e,null,t))};const Wj=_(require("styled-components")),ap=Wj.default(kn)`
  background: ${e=>e.theme.button.containedPrimaryBackground};
  color: ${e=>e.theme.button.containedPrimaryForeground};
  border: 1px solid ${e=>e.theme.button.containedPrimaryBackground};

  &:active {
    color: ${e=>e.theme.button.containedPrimaryForeground};
  }
`;const nd=_(require("react")),Ff=_(require("styled-components")),G1e=()=>Ff.css`
    animation: ${Ov} 0.2s linear;
  `,W1e=Ff.css`
  border: 1px solid ${e=>e.theme.card.activeBorderColor};
  ${Wk} {
    background-color: ${e=>e.theme.card.activeOverlayColor};
  }
`,H1e=Ff.default.button.attrs(e=>{const t={};return e.image&&(t.backgroundImage=`url(${e.image})`),{style:t}})`
  &&& {
    box-sizing: border-box;
  }

  /* basic ui text items use position absolute */
  position: relative;

  padding: 0;
  cursor: pointer;
  /* Safari will change the height of the toolbar and position the category cards at the bottom for some reason */
  vertical-align: top;
  border: none;
  box-sizing: border-box;
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  background-color: ${e=>e.theme.card.background};
  color: ${e=>e.theme.card.foreground};
  border-radius: ${e=>e.theme.shape.radiusMedium}px;
  ${G1e};
  animation-fill-mode: both;
  overflow: hidden;

  ${Er}

  /* Active */

  /* No :active styles on purpose. */

  ${({isActive:e})=>e&&W1e}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${hi} {
      background-color: ${e=>e.theme.card.inactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${ep} {
      background-color: ${e=>e.theme.card.hoverOverlayColor};
    }
  }
`;class jo extends nd.default.Component{constructor(){super(...arguments);this.state=B_;this.timeout=null;this.onKeyDown=e=>{(e.key==="Space"||e.key==="Enter")&&(this.props.onClick&&this.props.onClick())};this.onClick=e=>{const t=e.currentTarget.getBoundingClientRect(),r=e.pageX-t.left,i=e.pageY-t.top;this.state.display==="block"?this.setState({display:"none"},()=>{this.setRippleState(r,i)}):this.setRippleState(r,i),this.props.onClick(e)};this.setRippleState=(e,t)=>{this.setState({left:e,top:t,display:"block"}),this.timeout=setTimeout(()=>{this.setState({display:"none"})},1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{children:e,label:t,isActive:r,isDisabled:i,image:o,style:n,className:s}=this.props,{left:a,top:l,display:c}=this.state;return nd.default.createElement(H1e,{isActive:r,"aria-label":t,"data-test":t,disabled:i,image:o,onClick:this.onClick,onKeyDown:this.onKeyDown,style:n,className:s},e,nd.default.createElement(L_,{display:c,left:a,top:l}),nd.default.createElement(Wk,null),nd.default.createElement(hi,null),nd.default.createElement(ep,null))}}jo.defaultProps={isActive:!1};const lp=_(require("react")),En=_(require("styled-components")),V1e=En.default.div`
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 4px;
  font-size: ${e=>e.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.label.case};
`,K1e=En.default.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: absolute;
  bottom: 0px;
  border-radius: ${e=>e.theme.shape.radiusMedium}px;
  left: 0;
  ${e=>e.withBackground?En.css`
          color: ${e.theme.card.labelForeground};
          height: 40px;
          background: ${e.theme.card.labelBackground};
        `:En.css`
          color: ${e.theme.card.foreground};
          height: 32px;
        `}
  width: 100%;
  cursor: pointer;
`,$1e=En.default.div`
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${e=>e.theme.card.labelForeground};
  ${e=>e.withBackground?En.css`
          border-top-color: ${e.theme.card.labelForeground};
        `:En.css`
          border-top-color: ${e.theme.card.foreground};
        `}
  transform: rotate(${e=>e.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
`,Y1e=En.default.span`
  display: flex;
  align-items: center;
  justify-content: center;
  padding-left: 10px;
`,X1e=En.default.div`
  ${$u}
`,Mt=({children:e,className:t,caret:r,isActive:i,style:o,withBackground:n,hidden:s})=>{if(s)return lp.default.createElement(X1e,null,e);const a=()=>lp.default.createElement(Y1e,null,lp.default.createElement($1e,{"aria-hidden":!0,rotation:i?180:0,withBackground:n}));return lp.default.createElement(K1e,{className:t,withBackground:n,style:o},lp.default.createElement(V1e,{"data-test":ee.CardLabel},e,r&&a()))};const Hj=_(require("styled-components")),Ol=Hj.default.div.attrs(e=>({"data-test":ee.CardAvatar,style:{backgroundImage:`url(${e.url})`}}))`
  position: absolute;
  top: 4px;
  left: 4px;
  height: 28px;
  width: 28px;
  border-radius: 50%;
`,Y_={Focused:Er,VisuallyHidden:$u},Vj={ripple:Iv,scale:RU,slide:Ov},A={Container:i9,ColorItem:l9,ColorItemBase:qv,ColorItemBackground:Uv,ColorItemTiledBackground:Gv,ColorItemActiveOverlay:jv,Dialog:F9,DialogBase:w_,DialogContainer:S_,DialogBackdrop:__,DialogHeader:Xu,DialogBody:fa,DialogFooter:Yu,DialogSpinner:T_,TextEditModal:Bj,ActionModal:Fj,InfoModal:Pj,Spacer:Nj,Draggable:J9,DraggableCore:Zu,Toast:jj,Input:{Label:jr,File:xj,Search:kj,Slider:Oj,CarouselSlider:lj,Selection:Dj,Checkbox:pj,CheckboxBase:N_,CheckboxInput:U_,CheckboxCheckMark:Ef,Dropdown:vj,Text:W_,NumericInput:H_,Form:Sj},Switch:{Index:Uj,Case:Xk,Default:Jk}},CXe={CommonInputStyles:Dl},Pf=Kj.default(kn)`
  font-size: ${e=>e.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.button2.case};
  color: ${e=>e.theme.button.textSecondaryForeground};

  ${hi} {
    display: none;
  }

  &:disabled {
    opacity: ${e=>e.theme.button.textInactiveOpacity};
  }
`;const e2=_(require("react")),t2=_(require("styled-components")),J1e=t2.default(ei)`
  width: 60px;
  height: 60px;
  background-color: gray;
  border-radius: 50%;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  z-index: ${e=>e.theme.measurements.zIndex.button.float};
  padding: 2px;
`,Z1e=t2.default.div`
  height: 56px;
  width: 56px;
  border-radius: 50%;
  background-color: ${e=>e.theme.webcam.floatButton};
`,$j=e=>e2.default.createElement(J1e,v({},e),e2.default.createElement(Z1e,null));const sd=_(require("styled-components")),Yj=sd.default.div`
  display: inline-flex;
`,Dn=sd.default(kn)`
  background: ${e=>e.theme.canvasActionBar.background};
  color: ${e=>e.theme.canvasActionBar.foreground};
  font-size: ${e=>e.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.button2.case};
  padding: 4px 10px;
  position: relative;
  /* for safari */
  margin: 0;
  &:last-child:after {
    opacity: 0;
  }
`,Mf=sd.default.div`
  ${({show:e})=>e?sd.css`
          opacity: 1;
        `:sd.css`
          opacity: 0;
        `};
  position: absolute;
  transform: translate(-50%, -100%);
  background: ${e=>e.theme.canvasActionBar.background};
  color: ${e=>e.theme.canvasActionBar.foreground};
  border-radius: ${e=>e.theme.canvasActionBar.borderRadius?e.theme.canvasActionBar.borderRadius:e.theme.shape.radiusMedium}px;
  white-space: nowrap;
  transition: opacity 0.3s ease-in-out;
  z-index: ${e=>e.theme.measurements.zIndex.buttonGroup};

  ${Dn} {
    &:after {
      content: '';
      position: absolute;
      right: 0px;
      top: 6px;
      height: calc(100% - 12px);
      border-right: 1px solid
        ${e=>e.theme.canvasActionBar.separatorColor};
      &:last-child {
        border-right: unset;
      }
    }
  }
`;const So=_(require("react")),g$=_(require("styled-components")),ya=_(require("react")),Q1e=()=>ya.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},ya.default.createElement("defs",null,ya.default.createElement("path",{id:"photoeditorsdk-blacks-icon",d:"M24 12c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12m0 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10m4 12c0 2.788-2.326 3.879-7 3V18.5c4.148-.459 6.516.226 6.516 2.623 0 1.207-.492 1.998-1.512 2.474C27.504 23.999 28 24.619 28 26zm-5-6v3c2.244.068 2.775-.719 2.775-1.536 0-1.22-.531-1.812-2.775-1.464zm0 7.5c2.19.193 3.038-.04 3.038-1.484 0-1.37-1.096-1.695-3.038-1.516v3z"})),ya.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ya.default.createElement("path",{d:"M0 0H48V48H0z"}),ya.default.createElement("mask",{fill:"currentColor"},ya.default.createElement("use",{xlinkHref:"#photoeditorsdk-blacks-icon"})),ya.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-blacks-icon"})));var Xj=Q1e;const Al=_(require("react")),eke=()=>Al.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Al.default.createElement("defs",null,Al.default.createElement("path",{id:"photoeditorsdk-brightness-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),Al.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Al.default.createElement("mask",null,Al.default.createElement("use",{xlinkHref:"#photoeditorsdk-brightness-icon"})),Al.default.createElement("use",{fillOpacity:"0.9",transform:"rotate(-45 24.039 24)",xlinkHref:"#photoeditorsdk-brightness-icon"})));var Jj=eke;const va=_(require("react")),tke=()=>va.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},va.default.createElement("defs",null,va.default.createElement("path",{id:"photoeditorsdk-clarity-icon",d:"M24 12L13 24.001 24 36l11-11.999L24 12zm-8.29 12.001H21l3-9.041 8.29 9.041-8.28 9.029L28 24.001h-7l2.99 9.029-8.28-9.029z"})),va.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},va.default.createElement("path",{d:"M0 0H48V48H0z"}),va.default.createElement("mask",{fill:"currentColor"},va.default.createElement("use",{xlinkHref:"#photoeditorsdk-clarity-icon"})),va.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-clarity-icon"})));var Zj=tke;const _a=_(require("react")),rke=()=>_a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},_a.default.createElement("defs",null,_a.default.createElement("path",{id:"photoeditorsdk-contrast-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c-6.62 0-12 5.38-12 12s5.38 12 12 12 12-5.38 12-12-5.38-12-12-12"})),_a.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},_a.default.createElement("path",{d:"M0 0H48V48H0z"}),_a.default.createElement("mask",{fill:"currentColor"},_a.default.createElement("use",{xlinkHref:"#photoeditorsdk-contrast-icon"})),_a.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-contrast-icon"})));var Qj=rke;const xa=_(require("react")),ike=()=>xa.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},xa.default.createElement("defs",null,xa.default.createElement("path",{id:"photoeditorsdk-exposure-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c6.62 0 12 5.38 12 12s-5.38 12-12 12-12-5.38-12-12 5.38-12 12-12zm-3.536 8.464l-2.121 2.122-2.121-2.122-1.414 1.415L16.929 24l-2.121 2.121 1.414 1.415 2.121-2.122 2.121 2.122 1.415-1.415L19.757 24l2.122-2.121-1.415-1.415zm5.304 4.597l4.242-4.243 1.415 1.414-4.243 4.243-1.414-1.414z"})),xa.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},xa.default.createElement("path",{d:"M0 0H48V48H0z"}),xa.default.createElement("mask",{fill:"currentColor"},xa.default.createElement("use",{xlinkHref:"#photoeditorsdk-exposure-icon"})),xa.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(45 24 24)",xlinkHref:"#photoeditorsdk-exposure-icon"})));var e7=ike;const wa=_(require("react")),oke=()=>wa.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},wa.default.createElement("defs",null,wa.default.createElement("path",{id:"photoeditorsdk-gamma-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),wa.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},wa.default.createElement("path",{d:"M0 0H48V48H0z"}),wa.default.createElement("mask",{fill:"#fff"},wa.default.createElement("use",{xlinkHref:"#photoeditorsdk-gamma-icon"})),wa.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-gamma-icon"})));var t7=oke;const Sa=_(require("react")),nke=()=>Sa.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Sa.default.createElement("defs",null,Sa.default.createElement("path",{id:"photoeditorsdk-highlights-icon",d:"M31.07 31.07A9.932 9.932 0 0124 34c-2.67 0-5.18-1.04-7.07-2.93l14.14-14.14c3.9 3.9 3.9 10.24 0 14.14m1.42-15.56A11.995 11.995 0 0024 12c-3.07 0-6.14 1.17-8.49 3.51-4.68 4.69-4.68 12.29 0 16.98C17.86 34.83 20.93 36 24 36c3.07 0 6.14-1.17 8.49-3.51 4.68-4.69 4.68-12.29 0-16.98"})),Sa.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Sa.default.createElement("path",{d:"M0 0H48V48H0z"}),Sa.default.createElement("mask",{fill:"currentColor"},Sa.default.createElement("use",{xlinkHref:"#photoeditorsdk-highlights-icon"})),Sa.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-highlights-icon"})));var r7=nke;const Ca=_(require("react")),ske=()=>Ca.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Ca.default.createElement("defs",null,Ca.default.createElement("path",{id:"photoeditorsdk-saturation-icon",d:"M17 31c1.334 1.099 2 2.177 2 3.234 0 .797-.454 1.39-1.211 1.655-.165.057-.428.094-.789.111l-.172-.01a2.54 2.54 0 01-.617-.101C15.454 35.624 15 35.03 15 34.234c0-1.057.666-2.135 2-3.234zm8.7-6l-4.24 4H17v-3.81l.2-.19h8.5zm-.7-7.59l4.24 4.25L26.76 24h-8.54L25 17.41zm7.778-3.532a3 3 0 01.135 4.1l-.135.143-1.414 1.414 1.414 1.415-1.414 1.414-7.07-7.071 1.413-1.414 1.414 1.413 1.414-1.414a3.001 3.001 0 014.243 0z"})),Ca.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ca.default.createElement("path",{d:"M0 0H48V48H0z"}),Ca.default.createElement("mask",{fill:"currentColor"},Ca.default.createElement("use",{xlinkHref:"#photoeditorsdk-saturation-icon"})),Ca.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-saturation-icon"})));var i7=ske;const Ta=_(require("react")),ake=()=>Ta.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Ta.default.createElement("defs",null,Ta.default.createElement("path",{id:"photoeditorsdk-shadows-icon",d:"M30.365 17.637l3.076 3.076c.382 1.09.566 2.234.56 3.387l-5.05-5.049-1.414 1.414 6.123 6.124a9.674 9.674 0 01-.792 2.036l-6.746-6.745-1.414 1.414 7.036 7.036c-.212.254-.43.502-.672.742-.24.24-.488.46-.742.672l-7.036-7.036-1.414 1.414 6.745 6.746a9.674 9.674 0 01-2.036.792l-6.124-6.123-1.414 1.414L24.101 34a10.012 10.012 0 01-3.388-.558l-3.076-3.076-.707.707c-3.896-3.896-3.896-10.246 0-14.142 3.896-3.896 10.246-3.896 14.142 0l-.707.707zm-14.849-2.12c-4.688 4.687-4.688 12.281 0 16.97a12.036 12.036 0 004.108 2.693c.064.022.127.057.191.078 4.264 1.577 9.242.658 12.671-2.772 3.43-3.429 4.35-8.407 2.772-12.67-.02-.065-.056-.128-.078-.192a12.036 12.036 0 00-2.694-4.108c-4.688-4.688-12.282-4.688-16.97 0z"})),Ta.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ta.default.createElement("path",{d:"M0 0H48V48H0z"}),Ta.default.createElement("mask",{fill:"currentColor"},Ta.default.createElement("use",{xlinkHref:"#photoeditorsdk-shadows-icon"})),Ta.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shadows-icon"})));var o7=ake;const ka=_(require("react")),lke=()=>ka.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},ka.default.createElement("defs",null,ka.default.createElement("path",{id:"photoeditorsdk-sharpness-icon",d:"M24 12l11 24H13l11-24zm0 4.8V34h7.883L24 16.8z"})),ka.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ka.default.createElement("path",{d:"M0 0H48V48H0z"}),ka.default.createElement("mask",{fill:"currentColor"},ka.default.createElement("use",{xlinkHref:"#photoeditorsdk-sharpness-icon"})),ka.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-sharpness-icon"})));var n7=lke;const Ea=_(require("react")),cke=()=>Ea.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Ea.default.createElement("defs",null,Ea.default.createElement("path",{id:"photoeditorsdk-temperature-icon",d:"M24 12a4 4 0 014 4v7.255a7 7 0 11-8 0V16a4 4 0 014-4zm0 2a2 2 0 00-2 2v8.298l-.856.597a5 5 0 105.712 0L26 24.298V16a2 2 0 00-2-2zm1 6v5.126A4.002 4.002 0 0124 33a4 4 0 01-1-7.874V20h2z"})),Ea.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ea.default.createElement("path",{d:"M0 0H48V48H0z"}),Ea.default.createElement("mask",{fill:"currentColor"},Ea.default.createElement("use",{xlinkHref:"#photoeditorsdk-temperature-icon"})),Ea.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-temperature-icon"})));var s7=cke;const Da=_(require("react")),dke=()=>Da.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Da.default.createElement("defs",null,Da.default.createElement("path",{id:"photoeditorsdk-whites-icon",d:"M24 12c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12zm-2 6.46h-2c.221 4.539.762 9.051 1 11.04h1.5l1.5-5.52 1.5 5.52H27c.238-1.989.779-6.501 1-11.04h-2c-.051 1.071-.432 7.446-.5 7.973-.459-1.717-.541-3.111-1-4.811h-1c-.442 1.7-.541 2.975-1 4.811-.051-.527-.466-6.902-.5-7.973z"})),Da.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Da.default.createElement("path",{d:"M0 0H48V48H0z"}),Da.default.createElement("mask",{fill:"currentColor"},Da.default.createElement("use",{xlinkHref:"#photoeditorsdk-whites-icon"})),Da.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-whites-icon"})));var a7=dke;const Rl=_(require("react")),uke=()=>Rl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Rl.default.createElement("defs",null,Rl.default.createElement("path",{id:"photoeditorsdk-close-icon",d:"M21.583 0L24 2.416 14.416 12 24 21.584 21.583 24 12 14.416 2.417 24 0 21.584 9.584 12 0 2.416 2.417 0 12 9.584 21.583 0z"})),Rl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Rl.default.createElement("mask",{fill:"currentColor"},Rl.default.createElement("use",{xlinkHref:"#photoeditorsdk-close-icon"})),Rl.default.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-close-icon"})));var l7=uke;const Fl=_(require("react"));function pke(){return Fl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Fl.default.createElement("defs",null,Fl.default.createElement("path",{id:"photoeditorsdk-export-icon",d:"M22 1.5a1.5 1.5 0 011.493 1.356L23.5 3H22h1.5v17a1.5 1.5 0 01-1.5 1.5H12a1.5 1.5 0 01-1.493-1.356L10.5 20v-6h2v5.499h9v-16h-9V9h-2V3A1.5 1.5 0 0112 1.5h10zM6.15 5.817L7.634 7.3l-3.171 3.171h13.978v2H4.47l3.171 3.17-1.483 1.483L.5 11.467l5.65-5.65z"})),Fl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Fl.default.createElement("mask",{fill:"#fff"},Fl.default.createElement("use",{xlinkHref:"#photoeditorsdk-export-icon"})),Fl.default.createElement("use",{fill:"currentcolor",fillOpacity:"0.9",transform:"rotate(90 12 11.5)",xlinkHref:"#photoeditorsdk-export-icon"})))}var c7=pke;const Pl=_(require("react")),hke=()=>Pl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},Pl.default.createElement("defs",null,Pl.default.createElement("path",{id:"photoeditorsdk-redo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),Pl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Pl.default.createElement("mask",{fill:"currentColor"},Pl.default.createElement("use",{xlinkHref:"#photoeditorsdk-redo-icon"})),Pl.default.createElement("use",{fill:"currentColor",transform:"matrix(0 1 1 0 .25 -.25)",xlinkHref:"#photoeditorsdk-redo-icon"})));var d7=hke;const Ml=_(require("react")),mke=()=>Ml.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},Ml.default.createElement("defs",null,Ml.default.createElement("path",{id:"photoeditorsdk-undo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),Ml.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ml.default.createElement("mask",{fill:"currentColor"},Ml.default.createElement("use",{xlinkHref:"#photoeditorsdk-undo-icon"})),Ml.default.createElement("use",{fill:"currentColor",transform:"rotate(90 12.25 12)",xlinkHref:"#photoeditorsdk-undo-icon"})));var u7=mke;const Bl=_(require("react"));function fke(){return Bl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Center Align",width:"26",height:"26"},Bl.default.createElement("defs",null,Bl.default.createElement("path",{id:"photoeditorsdk-align-center-icon",d:"M31.5 30v3h-15v-3h15zm4.5-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),Bl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Bl.default.createElement("mask",{fill:"#fff"},Bl.default.createElement("use",{xlinkHref:"#photoeditorsdk-align-center-icon"})),Bl.default.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-center-icon"})))}var p7=fke;const Ll=_(require("react")),gke=()=>Ll.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Left Align",width:"26",height:"26"},Ll.default.createElement("defs",null,Ll.default.createElement("path",{id:"photoeditorsdk-align-left-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),Ll.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ll.default.createElement("mask",{fill:"#fff"},Ll.default.createElement("use",{xlinkHref:"#photoeditorsdk-align-left-icon"})),Ll.default.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-left-icon"})));var h7=gke;const Ia=_(require("react"));function bke(){return Ia.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",width:"26",height:"26",focusable:"false","aria-hidden":"true","aria-label":"Right Align"},Ia.default.createElement("defs",null,Ia.default.createElement("path",{id:"photoeditorsdk-align-right-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),Ia.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ia.default.createElement("path",{d:"M0 0H48V48H0z"}),Ia.default.createElement("mask",{fill:"#fff"},Ia.default.createElement("use",{xlinkHref:"#photoeditorsdk-align-right-icon"})),Ia.default.createElement("use",{fill:"currentColor",transform:"matrix(-1 0 0 1 48 0)",xlinkHref:"#photoeditorsdk-align-right-icon"})))}var m7=bke;const qr=_(require("react")),yke=()=>qr.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Adjustments",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},qr.default.createElement("g",{fill:"none",fillRule:"evenodd"},qr.default.createElement("g",null,qr.default.createElement("g",{fill:"#D8D8D8",opacity:"0"},qr.default.createElement("rect",{width:"48",height:"48"})),qr.default.createElement("g",{transform:"translate(12 12)"},qr.default.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),qr.default.createElement("g",{transform:"translate(2 13)",fill:"currentColor"},qr.default.createElement("path",{d:"M3.02746439,4 C3.00931666,4.16416693 3,4.33099545 3,4.5 C3,4.66900455 3.00931666,4.83583307 3.02746439,5 L0,5 L0,4 L3.02746439,4 Z M13,4 L20,4 L20,5 L13,5 L13,4 Z",fillOpacity:"0.2"}),qr.default.createElement("path",{d:"M5.09842503,6.29819429 C5.0340931,6.05140089 5,5.7851211 5,5.5 C5,3.56700338 6.56700338,2 8.5,2 C8.7851211,2 9.05140089,2.0340931 9.29819429,2.09842503 C10.0278893,2.64566496 10.5,3.5176988 10.5,4.5 C10.5,6.15685425 9.15685425,7.5 7.5,7.5 C6.5176988,7.5 5.64566496,7.02788926 5.09842503,6.29819429 Z M11.1637159,7.11349161 C10.874061,7.51881791 10.5188179,7.87406095 10.1134916,8.16371592 C10.5772175,7.93004328 10.9300433,7.5772175 11.1637159,7.11349161 Z",fillOpacity:"0.2"}),qr.default.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,0 7.5,0 C9.98528137,0 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"})),qr.default.createElement("g",{transform:"rotate(-180 11 5.5)",fill:"currentColor"},qr.default.createElement("path",{d:"M11.9725356,4 L20,4 L20,5 L11.9725356,5 C11.9906833,4.83583307 12,4.66900455 12,4.5 C12,4.33099545 11.9906833,4.16416693 11.9725356,4 Z M0,4 L2,4 L2,5 L0,5 L0,4 Z",fillOpacity:"0.2"}),qr.default.createElement("g",{transform:"rotate(-180 5 3.5)",fillOpacity:"0.2"},qr.default.createElement("path",{d:"M0.0984250251,4.29819429 C0.0340930963,4.05140089 0,3.7851211 0,3.5 C0,1.56700338 1.56700338,0 3.5,0 C3.7851211,0 4.05140089,0.0340930963 4.29819429,0.0984250251 C5.02788926,0.645664963 5.5,1.5176988 5.5,2.5 C5.5,4.15685425 4.15685425,5.5 2.5,5.5 C1.5176988,5.5 0.645664963,5.02788926 0.0984250251,4.29819429 Z M6.16371592,5.11349161 C5.87406095,5.51881791 5.51881791,5.87406095 5.11349161,6.16371592 C5.5772175,5.93004328 5.93004328,5.5772175 6.16371592,5.11349161 Z"})),qr.default.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,-3.6739404e-16 7.5,-3.6739404e-16 C9.98528137,-3.6739404e-16 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"}))))));var f7=yke;const zl=_(require("react"));function vke(){return zl.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Brush",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},zl.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},zl.default.createElement("path",{fillOpacity:"0.87",d:"M14.73 18.86C13.293 19.503 11.624 20 10 20 2 20 0 13 0 10c.486.972 2.37 5.848 7.537 4.165C7.873 17.125 10.427 19 13 19c.6 0 1.177-.05 1.73-.14zM8.422 8.63a7.352 7.352 0 00-1.127 1.616L2.401 3.705c-.215-.287-.178-.807.072-1.056l.088-.088L8.5 8.5l-.078.13z",opacity:"0.5",transform:"translate(12 12) translate(2 2)"}),zl.default.createElement("path",{fillOpacity:"0.87",d:"M7.295 10.246c-.27.526-.48 1.09-.615 1.68L1.2 4.603c-.663-.885-.564-2.24.212-3.015l.176-.176c.78-.78 2.121-.881 3.015-.212l7.245 5.421a6.088 6.088 0 00-1.67.624L3.706 2.401c-.294-.22-.801-.184-1.056.072l-.176.176c-.25.25-.287.769-.072 1.056l4.894 6.54z",transform:"translate(12 12) translate(2 2)"}),zl.default.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858z",opacity:"0.5",transform:"translate(12 12) translate(2 2) translate(7 7)"}),zl.default.createElement("path",{fillOpacity:"0.25",d:"M10.379 9.027c.053.135.108.263.165.385C8.914 10.158 7.545 10.5 6 10.5c-2.165 0-4-1.706-4-4 0-1.528.79-2.921 1.88-3.74-.882 2.084-1.025 6.482 6.499 6.267z",transform:"translate(12 12) translate(2 2) translate(7 7)"}),zl.default.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858zM6 12C3.239 12 .5 9.842.5 6.5S3.239.5 6 .5c6.5 0 4 8 7 9.342C11 10.947 8.761 12 6 12z",transform:"translate(12 12) translate(2 2) translate(7 7)"})))}var g7=vke;const In=_(require("react")),_ke=()=>In.default.createElement("svg",{"aria-hidden":"true",focusable:"false","aria-label":"Filter",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},In.default.createElement("g",{fill:"none",fillRule:"evenodd"},In.default.createElement("g",null,In.default.createElement("g",{fill:"#D8D8D8",opacity:"0"},In.default.createElement("rect",{width:"48",height:"48"})),In.default.createElement("g",{transform:"translate(16 14)",fill:"currentColor"},In.default.createElement("g",null,In.default.createElement("path",{d:"M1.53468397,11.3244256 C2.30584171,10.1516526 4.0927284,8.69757613 8,10 C11.5643313,11.1881104 13.1877038,10.2588113 13.9183327,9.30853287 C14.2918933,10.1286474 14.5,11.0400207 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.41014913,18.5 1.5,15.5898509 1.5,12 C1.5,11.7718729 1.51175212,11.5464906 1.53468397,11.3244256 Z",fillOpacity:"0.2"}),In.default.createElement("path",{d:"M1.53471819,12.6759057 C2.39408133,13.5811739 4.12541941,14.1109247 5.5,13.5 C9.81068889,11.5841383 9.99203585,9.66827654 14.3948028,10.8290113 C14.4639074,11.2088572 14.5,11.6002137 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.63838968,18.5 1.87279864,15.9481381 1.53471819,12.6759057 Z",fillOpacity:"0.25"}),In.default.createElement("path",{d:"M11,1.44328993e-15 L11,4.58151705 C13.9318303,5.7682918 16,8.64262245 16,12 C16,16.418278 12.418278,20 8,20 C3.581722,20 0,16.418278 0,12 C0,8.64262245 2.06816966,5.7682918 5,4.58151705 L5,1.60982339e-15 L6.5,1.44328993e-15 L6.5,5.67393184 C3.6333,6.35109564 1.5,8.92641836 1.5,12 C1.5,15.5898509 4.41014913,18.5 8,18.5 C11.5898509,18.5 14.5,15.5898509 14.5,12 C14.5,8.92641836 12.3667,6.35109564 9.5,5.67393184 L9.5,1.77635684e-15 L11,1.44328993e-15 Z",fillOpacity:"0.87"}))))));var b7=_ke;const qo=_(require("react")),xke=()=>qo.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Focus",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},qo.default.createElement("g",{fill:"none",fillRule:"evenodd"},qo.default.createElement("g",null,qo.default.createElement("g",{fill:"#D8D8D8",opacity:"0"},qo.default.createElement("rect",{width:"48",height:"48"})),qo.default.createElement("g",{transform:"translate(12 12)"},qo.default.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),qo.default.createElement("g",{transform:"translate(4 2)",fill:"currentColor"},qo.default.createElement("path",{d:"M8.51312274,19.9836057 C8.77273397,19.9669655 9.02898229,19.9377873 9.2812837,19.8966625 C9.14309542,19.9643562 9.04607398,20 9,20 C8.83633495,20 8.67398178,19.9944755 8.51312274,19.9836057 Z M2.27242753,15.0235117 C2.09503729,14.4174909 2,13.7771617 2,13.115 C2,8.89625769 7.39855682,4.1952443 9.03524007,2.8669743 C9.66704719,3.45933018 10.2896864,4.09178959 10.8802638,4.75434357 C12.9939648,7.12565193 14.310818,9.45010207 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C5.525182,18.5 3.37015673,17.0943182 2.27242753,15.0235117 Z M15.999821,11.9547651 C15.9999402,11.9698392 16,11.9849176 16,12 C16,12.0581275 15.9984809,12.1163475 15.9954873,12.1746435 C15.9978914,12.1015915 15.9993401,12.0282946 15.999821,11.9547651 Z",fillOpacity:"0.2"}),qo.default.createElement("path",{d:"M3.47269084,16.6357644 C3.47244857,13.6389249 9.59189484,15.3529683 12,11.5 C13.2066771,9.56931667 12.316614,7.05620551 11.0727604,4.97270186 C13.0737756,7.26814668 14.316054,9.51197209 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C6.2411126,18.5 4.64375705,17.7899702 3.47269084,16.6357644 Z",fillOpacity:"0.25"}),qo.default.createElement("path",{d:"M7.73975027,2.16383649 C6.84545319,2.94914111 5.95084629,3.82194197 5.11973623,4.75434357 C3.00603518,7.12565193 1.68918197,9.45010207 1.51870896,11.4644804 C1.50624591,11.6117488 1.5,11.7569175 1.5,11.9 C1.5,15.5492218 4.41434886,18.5 8,18.5 C11.5855665,18.5 14.5,15.5490785 14.5,11.9 C14.5,11.7569175 14.4937541,11.6117488 14.481291,11.4644804 C14.310818,9.45010207 12.9939648,7.12565193 10.8802638,4.75434357 C10.0491537,3.82194197 9.15454681,2.94914111 8.26024973,2.16383649 C8.17157048,2.08596503 8.08476013,2.01060875 8,1.93784184 C7.91523987,2.01060875 7.82842952,2.08596503 7.73975027,2.16383649 Z M8,20 C3.581722,20 0,16.3735065 0,11.9 C0,6.05 8,0 8,0 C8,0 16,6.05 16,11.9 C16,16.3732777 12.418278,20 8,20 Z",fillOpacity:"0.87"}))))));var y7=xke;const ad=_(require("react")),wke=()=>ad.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",focusable:"false","aria-hidden":"true","aria-label":"Frames",width:"48",height:"48",viewBox:"0 0 48 48"},ad.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},ad.default.createElement("path",{fillOpacity:"0.2",d:"M8 8L17 7 17 17 7 17z"}),ad.default.createElement("path",{fillOpacity:"0.87",d:"M4.5 19.5h15v-15h-15v15zM3 3h18v18H3V3z"}),ad.default.createElement("path",{fillOpacity:"0.87",d:"M7 17h10V7H7v10zM6 6h12v12H6V6z"}),ad.default.createElement("path",{fillOpacity:"0.25",d:"M9 15L11 12 13 14 14 13.5 15 15z"})));var v7=wke;const co=_(require("react")),Ske=()=>co.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Library",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},co.default.createElement("g",{fill:"none",fillRule:"evenodd"},co.default.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},co.default.createElement("g",null,co.default.createElement("polygon",{fillOpacity:"0.2",points:"3 3 12.5 1.5 12.5 15.5 1.5 15.5"}),co.default.createElement("path",{d:"M1.5,1.5 L1.5,15.5 L12.5,15.5 L12.5,1.5 L1.5,1.5 Z M0,0 L14,0 L14,17 L0,17 L0,0 Z",fillOpacity:"0.87"}),co.default.createElement("polygon",{fillOpacity:"0.25",points:"3 11 6 7 8 9 9 8.5 11 11"}),co.default.createElement("circle",{fillOpacity:"0.25",cx:"9",cy:"5",r:"1"}),co.default.createElement("rect",{fillOpacity:"0.25",x:"3",y:"13",width:"8",height:"1"}),co.default.createElement("g",{transform:"rotate(14 -2.352 56.952)",fillOpacity:"0.2"},co.default.createElement("path",{d:"M1.32904158,1.07500967e-13 L5,1.07500967e-13 L5,14.7234101 L4,10.7126291 L4,1 L1.57836958,1 L1.32904158,1.07500967e-13 Z M5,14.9745817 L5,16 L0.887271787,16 L5,14.9745817 Z"}),co.default.createElement("path",{d:"M1.82769758,2 L3,2 L3,6.70184819 L1.82769758,2 Z"}))))));var _7=Ske;const cp=_(require("react")),Cke=()=>cp.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Overlays",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},cp.default.createElement("g",{fill:"none",fillRule:"evenodd"},cp.default.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},cp.default.createElement("path",{d:"M13.5,4 L13.5,13.5 L4,13.5 L4,5 C4,4.44771525 4.44771525,4 5,4 L13.5,4 Z M15,4 L17,4 C17.5522847,4 18,4.44771525 18,5 L18,17 C18,17.5522847 17.5522847,18 17,18 L5,18 C4.44771525,18 4,17.5522847 4,17 L4,15 L14,15 C14.5522847,15 15,14.5522847 15,14 L15,4 Z",fillOpacity:"0.2"}),cp.default.createElement("path",{d:"M1.5,1.5 L1.5,13.5 L13.5,13.5 L13.5,1.5 L1.5,1.5 Z M1,0 L14,0 C14.5522847,-1.01453063e-16 15,0.44771525 15,1 L15,14 C15,14.5522847 14.5522847,15 14,15 L1,15 C0.44771525,15 6.76353751e-17,14.5522847 0,14 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 Z",fillOpacity:"0.87"}))));var x7=Cke;const ws=_(require("react")),Tke=()=>ws.default.createElement("svg",{focusable:"false","aria-hidden":"true",width:"48px",height:"48px",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-label":"Stickers",viewBox:"0 0 48 48"},ws.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},ws.default.createElement("g",null,ws.default.createElement("g",{transform:"translate(14.000000, 14.000000)",fill:"currentColor"},ws.default.createElement("g",{transform:"translate(2.000000, 2.000000)",fillOpacity:"0.2"},ws.default.createElement("path",{d:"M11.5840291,0.290311095 C14.1040281,1.4637822 15.9529364,3.83641178 16.3972985,6.6747443 C11.4538042,7.5567274 7.55733385,11.4556991 6.68374109,16.3973312 C3.83946575,15.9530468 1.46423317,14.1041207 0.290132399,11.5832649 C0.0988489957,10.7650202 3.01980663e-14,9.89786431 3.01980663e-14,9 C3.01980663e-14,6.64646143 0.903391324,4.50392121 2.38232909,2.90022422 C4.02683831,1.11698861 6.38297582,-3.55271368e-15 9,-3.55271368e-15 C9.89814387,-3.55271368e-15 10.7655602,0.0989105588 11.5840291,0.290311095 Z"}),ws.default.createElement("path",{d:"M17.9877222,8 L8,17.9877222 C8.2591955,12.5923102 12.5906864,8.26470667 17.9877222,8 Z"})),ws.default.createElement("path",{d:"M9.87290303,14.9211604 C9.09408801,14.4293124 5,11.7146562 5,9 C5,7.34 6.34,6 8,6 C8.77,6 9.47,6.52 10,7 C10.53,6.52 11.23,6 12,6 C13.66,6 15,7.34 15,9 C15,9.30171667 14.9494261,9.60343334 14.8584511,9.90209822 C12.7354304,11.0373368 10.9933363,12.7905402 9.87290303,14.9211604 Z",fillOpacity:"0.25"}),ws.default.createElement("path",{d:"M10,1.5 C5.30557963,1.5 1.5,5.30557963 1.5,10 C1.5,14.2449983 4.61102233,17.7611603 8.68374109,18.3973312 C9.55733385,13.4556991 13.4538042,9.5567274 18.3972985,8.6747443 C17.7608961,4.60976745 14.2436106,1.5 10,1.5 Z M0,10 C0,4.4771525 4.4771525,0 10,0 C15.5228475,0 20,4.4771525 20,10 C14.5988732,10.2649073 10.2649073,14.5988732 10.0116954,19.9999933 C4.4771525,20 0,15.5228475 0,10 Z",fillOpacity:"0.87"})))));var w7=Tke;const dp=_(require("react")),kke=()=>dp.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Texts",width:"48",height:"48"},dp.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},dp.default.createElement("path",{fillOpacity:"0.2",d:"M17.883 19.5H16.07L11.702 6.833l1.235-1.411L17.883 19.5z",transform:"translate(12 12)"}),dp.default.createElement("path",{fillOpacity:"0.87",d:"M10.8 8.818L8.483 14.5h4.275l-1.96-5.682zM10 6.5l3.5-4 5.973 17H21V21h-8v-1.5h1.483L13.276 16H7.873l-1.426 3.5H8V21H3v-1.5h1.704L10 6.5zm1.702.333L16.069 19.5h1.814L12.937 5.422l-1.235 1.411z",transform:"translate(12 12)"}),dp.default.createElement("path",{fillOpacity:"0.2",d:"M19.55 15l-.35-1H21v1h-1.45zm1.05 3l-.35-1H21v1h-.4zM7.639 8L7.25 9H3V8h4.639zm1.167-3l-.39 1H7V5h1.806zm-2.334 6l-.389 1H6v-1h.472zm-1.166 3l-.39 1H3v-1h2.306zm-1.167 3l-.389 1H3v-1h1.139zM15.35 3L15 2h1v1h-.65zm3.15 9l-.35-1H21v1h-2.5zm-1.05-3l-.35-1H21v1h-3.55zM16.4 6l-.35-1H18v1h-1.6zm-5.9-3H9V2h2.5l-1 1zM3 5h3v1H3V5zm16 0h2v1h-2V5zM3 11h2v1H3v-1zm18-8h-4V2h4v1zM8 3H3V2h5v1z",transform:"translate(12 12)"})));var S7=kke;const up=_(require("react")),Eke=()=>up.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Text Design",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},up.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},up.default.createElement("path",{fillOpacity:"0.87",d:"M1 0h14a1 1 0 011 1v19l-8-6-8 6V1a1 1 0 011-1zm.5 1.5V17L8 12.125 14.5 17V1.5h-13z",transform:"translate(14 14) translate(2)"}),up.default.createElement("path",{fillOpacity:"0.2",d:"M1.5 1.5h13V17L8 12.125 1.5 17V1.5z",transform:"translate(14 14) translate(2)"}),up.default.createElement("path",{fillOpacity:"0.25",d:"M9 4l2.52 7H10.2l-.7-1.85H6.45L5.77 11H4.49L6.9 4H9zm-1.04.78h-.05L6.73 8.14H9.2L7.96 4.78z",transform:"translate(14 14) translate(2)"})));var C7=Eke;const Nl=_(require("react"));function Dke(){return Nl.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Transform",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},Nl.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},Nl.default.createElement("path",{fillOpacity:"0.2",d:"M10 10L15 9 15 15 9 15z"}),Nl.default.createElement("path",{fillOpacity:"0.87",d:"M9 15h6V9H9v6zm-1.5 0V7.5H15V3h1.5v13.5H3V15h4.5zm0 2.5H9V21H7.5v-3.5zM21 7.5V9h-3.5V7.5H21z"}),Nl.default.createElement("g",{fillOpacity:"0.2"},Nl.default.createElement("path",{d:"M0 10h1a9.003 9.003 0 015.5-8.294L7 3 10.942.044C10.632.014 10.318 0 10 0 4.477 0 0 4.477 0 10z",transform:"translate(2 2)"}),Nl.default.createElement("path",{d:"M9 20h1a9.003 9.003 0 015.5-8.294L16 13l3.942-2.956c-.31-.03-.624-.044-.942-.044-5.523 0-10 4.477-10 10z",transform:"translate(2 2) rotate(-180 14.47 15)"}))))}var T7=Dke;const Ul=_(require("react")),Ike=()=>Ul.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Ul.default.createElement("defs",null,Ul.default.createElement("path",{id:"photoeditorsdk-icon-add-text",d:"M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm1 6h-2v5H6v2h5v5h2v-5h5v-2h-5V6z"})),Ul.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ul.default.createElement("mask",{fill:"currentColor"},Ul.default.createElement("use",{xlinkHref:"#photoeditorsdk-icon-add-text"})),Ul.default.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-icon-add-text"})));var k7=Ike;const r2=_(require("react")),Oke=()=>r2.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r2.default.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M12 1c5.523 0 10 4.477 10 10a9.98 9.98 0 01-3.678 7.749c1.877.92 3.445 2.251 4.502 3.88l.176.283-1.743 1.02c-1.04-1.735-2.824-3.102-4.995-3.884A9.94 9.94 0 0112 21a9.962 9.962 0 01-4.255-.948c-2.076.748-3.797 2.033-4.852 3.661l-.147.237L1 22.935c1.053-1.766 2.694-3.204 4.684-4.183A9.975 9.975 0 012 11C2 5.477 6.477 1 12 1zm0 2a8 8 0 100 16 8 8 0 000-16zm0 5a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6zm1-4v1h-2V6h2z"}));var E7=Oke;const i2=_(require("react")),Ake=()=>i2.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i2.default.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M16.23 10.885a2.292 2.292 0 00-2.285-2.286 2.292 2.292 0 00-2.286 2.286 2.292 2.292 0 002.286 2.286 2.292 2.292 0 002.286-2.286zM13.946.599C8.265.6 3.66 5.205 3.66 10.885H.231l4.571 4.571 4.572-4.571H5.945c0-4.423 3.577-8 8-8s8 3.577 8 8a7.994 7.994 0 01-12.64 6.514l-1.623 1.646a10.3 10.3 0 006.263 2.126c5.68 0 10.286-4.606 10.286-10.286S19.625.599 13.945.599z",transform:"rotate(56 11.298 10.261)"}));var D7=Ake;const jl=_(require("react"));function Rke(){return jl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},jl.default.createElement("defs",null,jl.default.createElement("path",{id:"photoeditorsdk-shuffle-icon",d:"M24 10v8a3 3 0 01-3 3H6v3l-6-4 6-4v3h15a1 1 0 001-1v-8h2zM18 0l6 4-6 4V5H3a1 1 0 00-1 1v8H0V6a3 3 0 013-3h15V0z"})),jl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},jl.default.createElement("mask",{fill:"currentColor"},jl.default.createElement("use",{xlinkHref:"#photoeditorsdk-shuffle-icon"})),jl.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shuffle-icon"})))}var I7=Rke;const ql=_(require("react")),Fke=()=>ql.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},ql.default.createElement("defs",null,ql.default.createElement("path",{id:"photoeditorsdk-upload-icon",d:"M4.143 17.286l-.001 3.142h15.715v-3.142H23v6.285H1v-6.285h3.143zM12 0l9.429 9.429-2.2 2.2L13.57 5.97v9.743H10.43V5.971L4.77 11.63l-2.2-2.2L12 0z"})),ql.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ql.default.createElement("mask",{fill:"currentColor"},ql.default.createElement("use",{xlinkHref:"#photoeditorsdk-upload-icon"})),ql.default.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-upload-icon"})));var O7=Fke;const Oa=_(require("react")),Pke=()=>Oa.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Oa.default.createElement("defs",null,Oa.default.createElement("path",{id:"photoeditorsdk-bring-to-front-icon",d:"M21 16a2 2 0 012 2v4a2 2 0 01-2 2H3a2 2 0 01-2-2v-4a2 2 0 012-2h18zM12.006 1l5.996 5.996-1.414 1.414-3.578-3.577V12h-2.008V4.833L7.418 8.417 6.004 7.003 12.006 1z"})),Oa.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Oa.default.createElement("path",{d:"M0 0H24V24H0z"}),Oa.default.createElement("mask",{fill:"currentColor"},Oa.default.createElement("use",{xlinkHref:"#photoeditorsdk-bring-to-front-icon"})),Oa.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-bring-to-front-icon"})));var A7=Pke;const hr=_(require("react")),Mke=({highlight:e="currentColor",width:t=48,height:r=48})=>hr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:r,viewBox:"0 0 48 48"},hr.default.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},hr.default.createElement("g",{fill:e,transform:"translate(13 13)"},hr.default.createElement("path",{d:"M22 3.701h-1.642V1.644l-2.06-.001V0h2.538c.421 0 .682.174.827.32.322.322.337.748.337.83v2.551z"}),hr.default.createElement("path",{d:"M1.643 3.701H0V1.165C0 .743.174.482.32.336.64.016 1.06 0 1.147 0H3.701v1.643H1.644l-.001 2.058z"}),hr.default.createElement("path",{d:"M13.7232174 1.5486087L17.4249565 1.5486087 17.4249565 0 13.7232174 0z"}),hr.default.createElement("path",{d:"M9.15008696 1.5486087L12.8508696 1.5486087 12.8508696 0 9.15008696 0z"}),hr.default.createElement("path",{d:"M4.57504348 1.5486087L8.27678261 1.5486087 8.27678261 0 4.57504348 0z"}),hr.default.createElement("path",{d:"M0 8.27582609L1.5486087 8.27582609 1.5486087 4.57504348 0 4.57504348z"}),hr.default.createElement("path",{d:"M20.4513913 8.27582609L22 8.27582609 22 4.57504348 20.4513913 4.57504348z"}),hr.default.createElement("path",{d:"M0 12.8508696L1.5486087 12.8508696 1.5486087 9.14913043 0 9.14913043z"}),hr.default.createElement("path",{d:"M0 17.4249565L1.5486087 17.4249565 1.5486087 13.7232174 0 13.7232174z"}),hr.default.createElement("path",{d:"M20.4513913 12.8508696L22 12.8508696 22 9.14913043 20.4513913 9.14913043z"}),hr.default.createElement("path",{d:"M20.4513913 17.4249565L22 17.4249565 22 13.7232174 20.4513913 13.7232174z"}),hr.default.createElement("path",{d:"M3.702 22H1.165c-.421 0-.682-.174-.828-.32-.322-.322-.337-.748-.337-.83v-2.552h1.643v2.059h2.059V22z"}),hr.default.createElement("path",{d:"M20.853 22h-2.554v-1.642h2.057l.001-2.06H22v2.538c0 .42-.174.682-.319.827-.32.32-.742.337-.828.337"}),hr.default.createElement("path",{d:"M4.57504348 22L8.27678261 22 8.27678261 20.4513913 4.57504348 20.4513913z"}),hr.default.createElement("path",{d:"M9.15008696 22L12.8508696 22 12.8508696 20.4513913 9.15008696 20.4513913z"}),hr.default.createElement("path",{d:"M13.7232174 22L17.4249565 22 17.4249565 20.4513913 13.7232174 20.4513913z"}))));var R7=Mke;const X_=_(require("react")),Bke=({highlight:e="currentColor",width:t=48,height:r=48})=>X_.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:r,viewBox:"0 0 48 48"},X_.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},X_.default.createElement("path",{fill:e,d:"M29.967 13.005L26.984 13c-3.35 0-5.516 2.222-5.516 5.66v2.61h-2.999c-.26 0-.469.21-.469.47v3.78c0 .26.21.47.469.47h2.999v9.541c0 .26.21.469.469.469h3.912c.26 0 .47-.21.47-.469V25.99h3.506c.259 0 .469-.21.469-.47l.001-3.78a.47.47 0 00-.469-.47h-3.508v-2.212c0-1.064.254-1.603 1.639-1.603l2.01-.001c.258 0 .468-.21.468-.47v-3.51a.47.47 0 00-.468-.47z"})));var F7=Bke;const ld=_(require("react")),Lke=({highlight:e="currentColor",width:t=48,height:r=48})=>ld.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:r,viewBox:"0 0 48 48"},ld.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ld.default.createElement("g",{fill:e,transform:"translate(13 13)"},ld.default.createElement("path",{d:"M15.125 0h-8.25A6.876 6.876 0 000 6.875v8.25A6.876 6.876 0 006.875 22h8.25A6.876 6.876 0 0022 15.125v-8.25A6.876 6.876 0 0015.125 0zm4.813 15.125a4.818 4.818 0 01-4.813 4.813h-8.25a4.818 4.818 0 01-4.813-4.813v-8.25a4.818 4.818 0 014.813-4.813h8.25a4.818 4.818 0 014.813 4.813v8.25z"}),ld.default.createElement("path",{d:"M11 5.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zm0 8.938A3.442 3.442 0 017.562 11 3.441 3.441 0 0111 7.562 3.441 3.441 0 0114.438 11 3.442 3.442 0 0111 14.438z"}),ld.default.createElement("circle",{cx:"16.913",cy:"5.088",r:"1"}))));var P7=Lke;const J_=_(require("react")),zke=({highlight:e="currentColor",width:t=48,height:r=48})=>J_.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:r,viewBox:"0 0 48 48"},J_.default.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},J_.default.createElement("path",{fill:e,d:"M36 17.305c-.892.402-1.843.668-2.835.797a4.997 4.997 0 002.165-2.79 9.685 9.685 0 01-3.12 1.222 4.874 4.874 0 00-3.595-1.596c-2.723 0-4.916 2.267-4.916 5.047 0 .4.032.785.113 1.151-4.09-.205-7.71-2.215-10.141-5.278a5.18 5.18 0 00-.673 2.55c0 1.748.877 3.297 2.185 4.194a4.766 4.766 0 01-2.223-.621v.055c0 2.452 1.705 4.49 3.942 4.958-.4.113-.837.167-1.29.167-.315 0-.633-.019-.931-.087.637 1.999 2.446 3.468 4.597 3.516a9.73 9.73 0 01-6.1 2.152c-.404 0-.791-.018-1.178-.07a13.601 13.601 0 007.548 2.266c9.054 0 14.004-7.693 14.004-14.36 0-.224-.008-.439-.018-.653A9.958 9.958 0 0036 17.305z"})));var M7=zke;const B7=_(require("styled-components")),Nke=B7.default.svg.attrs({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"})``;var mi=Nke;const vt=_(require("react")),Uke=({highlight:e="#565656",width:t=32,height:r=32})=>vt.default.createElement(mi,{width:t,height:r,viewBox:"0 0 32 32"},vt.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},vt.default.createElement("g",{fill:e,transform:"translate(-8 -8)"},vt.default.createElement("g",{transform:"translate(8 8)"},vt.default.createElement("g",null,vt.default.createElement("path",{d:"M.941 31.992h2.824v-.94L.941 31.05v-2.822h-.94v2.846s-.004.918.94.918"}),vt.default.createElement("path",{d:"M31.974 31.051v-2.823h-.942v2.823h-2.823v.941h2.846s.919.003.919-.94"}),vt.default.createElement("path",{d:"M4.62305882 31.9926588L8.38776471 31.9926588 8.38776471 31.0514824 4.62305882 31.0514824z"}),vt.default.createElement("path",{d:"M9.32894118 31.9926588L13.0936471 31.9926588 13.0936471 31.0514824 9.32894118 31.0514824z"}),vt.default.createElement("path",{d:"M14.0348235 31.9926588L17.7995294 31.9926588 17.7995294 31.0514824 14.0348235 31.0514824z"}),vt.default.createElement("path",{d:"M18.7407059 31.9926588L22.5054118 31.9926588 22.5054118 31.0514824 18.7407059 31.0514824z"}),vt.default.createElement("path",{d:"M23.4465882 31.9926588L27.2112941 31.9926588 27.2112941 31.0514824 23.4465882 31.0514824z"}),vt.default.createElement("path",{d:"M0 .94v2.824h.941L.942.941h2.823V0H.919S0-.002 0 .94"}),vt.default.createElement("path",{d:"M31.032 0H28.21v.94l2.823.002v2.822h.942V.92s.002-.92-.942-.92"}),vt.default.createElement("path",{d:"M4.62305882 0.940423529L8.38776471 0.940423529 8.38776471 -0.000752941176 4.62305882 -0.000752941176z"}),vt.default.createElement("path",{d:"M9.32894118 0.940423529L13.0936471 0.940423529 13.0936471 -0.000752941176 9.32894118 -0.000752941176z"}),vt.default.createElement("path",{d:"M14.0348235 0.940423529L17.7995294 0.940423529 17.7995294 -0.000752941176 14.0348235 -0.000752941176z"}),vt.default.createElement("path",{d:"M18.7407059 0.940423529L22.5054118 0.940423529 22.5054118 -0.000752941176 18.7407059 -0.000752941176z"}),vt.default.createElement("path",{d:"M23.4465882 0.940423529L27.2112941 0.940423529 27.2112941 -0.000752941176 23.4465882 -0.000752941176z"}),vt.default.createElement("path",{d:"M0 8.46324706L0.941176471 8.46324706 0.941176471 4.69854118 0 4.69854118z"}),vt.default.createElement("path",{d:"M0 13.1691294L0.941176471 13.1691294 0.941176471 9.40442353 0 9.40442353z"}),vt.default.createElement("path",{d:"M0 17.8750118L0.941176471 17.8750118 0.941176471 14.1103059 0 14.1103059z"}),vt.default.createElement("path",{d:"M0 22.5808941L0.941176471 22.5808941 0.941176471 18.8161882 0 18.8161882z"}),vt.default.createElement("path",{d:"M0 27.2867765L0.941176471 27.2867765 0.941176471 23.5220706 0 23.5220706z"}),vt.default.createElement("path",{d:"M30.976 8.46324706L31.9171765 8.46324706 31.9171765 4.69854118 30.976 4.69854118z"}),vt.default.createElement("path",{d:"M30.976 13.1691294L31.9171765 13.1691294 31.9171765 9.40442353 30.976 9.40442353z"}),vt.default.createElement("path",{d:"M30.976 17.8750118L31.9171765 17.8750118 31.9171765 14.1103059 30.976 14.1103059z"}),vt.default.createElement("path",{d:"M30.976 22.5808941L31.9171765 22.5808941 31.9171765 18.8161882 30.976 18.8161882z"}),vt.default.createElement("path",{d:"M30.976 27.2867765L31.9171765 27.2867765 31.9171765 23.5220706 30.976 23.5220706z"}))))));var L7=Uke;const Bf=_(require("react")),jke=({highlight:e="#565656",width:t=32,height:r=48})=>Bf.default.createElement(mi,{width:t,height:r,viewBox:"0 0 42 32"},Bf.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Bf.default.createElement("g",{fill:e,transform:"translate(-3 -8)"},Bf.default.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5"}))));var z7=jke;const Lf=_(require("react")),qke=({highlight:e="#565656",width:t=26,height:r=46})=>Lf.default.createElement(mi,{width:t,height:r,viewBox:"0 0 26 46"},Lf.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Lf.default.createElement("g",{fill:e,transform:"translate(-11 -1)"},Lf.default.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z",transform:"rotate(90 24 24)"}))));var N7=qke;const zf=_(require("react")),Gke=({highlight:e="#565656",width:t=26,height:r=46})=>zf.default.createElement(mi,{width:t,height:r,viewBox:"0 0 26 46"},zf.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},zf.default.createElement("g",{fill:e,transform:"translate(-11 -1)"},zf.default.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z"}))));var U7=Gke;const Ss=_(require("react")),Wke=({highlight:e="#565656",mask:t="#fff",width:r=32,height:i=32})=>Ss.default.createElement(mi,{width:r,height:i,viewBox:"0 0 32 32"},Ss.default.createElement("defs",null,Ss.default.createElement("rect",{id:"photoeditorsdk-square-icon",width:"32",height:"32",x:"0.92",y:"0.707",rx:"1"})),Ss.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ss.default.createElement("g",{transform:"translate(-8 -8)"},Ss.default.createElement("g",{transform:"translate(7.08 7.293)"},Ss.default.createElement("mask",{fill:t},Ss.default.createElement("use",{xlinkHref:"#photoeditorsdk-square-icon"})),Ss.default.createElement("use",{fill:e,xlinkHref:"#photoeditorsdk-square-icon"})))));var j7=Wke;const Nf=_(require("react")),Hke=({highlight:e="#565656",width:t=32,height:r=42})=>Nf.default.createElement(mi,{width:t,height:r,viewBox:"0 0 32 42"},Nf.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Nf.default.createElement("g",{fill:e,transform:"translate(-8 -3)"},Nf.default.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5",transform:"rotate(90 24 24)"}))));var q7=Hke;const Cs=_(require("react")),Vke=({main:e="#424242",highlight:t="#565656",width:r="48px",height:i="48px"})=>Cs.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:i,viewBox:"0 0 48 48"},Cs.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Cs.default.createElement("rect",{width:"28",height:"3",x:"12",y:"41",fill:e,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),Cs.default.createElement("rect",{width:"34",height:"28",x:"7",y:"8",fill:t,rx:"0.5",transform:"matrix(1 0 0 -1 0 44)"}),Cs.default.createElement("rect",{width:"3",height:"3",x:"8",y:"41",fill:e,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),Cs.default.createElement("rect",{width:"28",height:"3",x:"12",y:"37",fill:e,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),Cs.default.createElement("rect",{width:"28",height:"3",x:"12",y:"4",fill:e,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"}),Cs.default.createElement("rect",{width:"3",height:"3",x:"8",y:"37",fill:e,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),Cs.default.createElement("rect",{width:"3",height:"3",x:"8",y:"4",fill:e,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"})));var G7=Vke;const Ts=_(require("react")),Kke=({main:e="#424242",highlight:t="#565656",width:r="48px",height:i="48px"})=>Ts.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:i,viewBox:"0 0 48 48"},Ts.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ts.default.createElement("g",null,Ts.default.createElement("path",{fill:e,d:"M42 5a1 1 0 011 1v13a1 1 0 01-1 1H6a1 1 0 01-1-1V6a1 1 0 011-1h36zM21.505 18h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0029.51 18z"}),Ts.default.createElement("rect",{width:"22",height:"11",x:"20",y:"29",fill:e,rx:"1"}),Ts.default.createElement("rect",{width:"13",height:"10",x:"6",y:"23",fill:e,rx:"1"}),Ts.default.createElement("rect",{width:"22",height:"5",x:"20",y:"23",fill:e,rx:"1"}),Ts.default.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:t,rx:"1"}),Ts.default.createElement("rect",{width:"13",height:"9",x:"6",y:"34",fill:e,rx:"1"}))));var W7=Kke;const ks=_(require("react")),$ke=({main:e="#424242",highlight:t="#565656",width:r="48px",height:i="48px"})=>ks.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:i,viewBox:"0 0 48 48"},ks.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ks.default.createElement("g",{transform:"translate(5 5)"},ks.default.createElement("path",{fill:t,d:"M37 0a1 1 0 011 1v13a1 1 0 01-1 1H1a1 1 0 01-1-1V1a1 1 0 011-1h36zM16.505 13h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0024.51 13z"}),ks.default.createElement("rect",{width:"22",height:"11",x:"15",y:"24",fill:e,rx:"1"}),ks.default.createElement("rect",{width:"13",height:"10",x:"1",y:"18",fill:e,rx:"1"}),ks.default.createElement("rect",{width:"22",height:"5",x:"15",y:"18",fill:e,rx:"1"}),ks.default.createElement("rect",{width:"7",height:"7",x:"4",y:"9",fill:e,rx:"1"}),ks.default.createElement("rect",{width:"13",height:"9",x:"1",y:"29",fill:e,rx:"1"}))));var H7=$ke;const Aa=_(require("react")),Yke=({main:e="#424242",highlight:t="#565656",width:r="48px",height:i="48px"})=>Aa.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:i,viewBox:"0 0 48 48"},Aa.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Aa.default.createElement("rect",{width:"26",height:"7",x:"7",y:"18",fill:e,rx:"1"}),Aa.default.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:e,rx:"1"}),Aa.default.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:e,rx:"1"}),Aa.default.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:e,rx:"1"}),Aa.default.createElement("rect",{width:"26",height:"21",x:"7",y:"27",fill:e,rx:"1"}),Aa.default.createElement("rect",{width:"26",height:"16",x:"7",y:"5",fill:t,rx:"1"})));var V7=Yke;const Ra=_(require("react")),Xke=({main:e="#424242",highlight:t="#565656",width:r="48px",height:i="48px"})=>Ra.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:i,viewBox:"0 0 48 48"},Ra.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ra.default.createElement("rect",{width:"26",height:"7",x:"7",y:"34",fill:e,rx:"1"}),Ra.default.createElement("rect",{width:"26",height:"32",x:"7",y:"5",fill:t,rx:"1"}),Ra.default.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:e,rx:"1"}),Ra.default.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:e,rx:"1"}),Ra.default.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:e,rx:"1"}),Ra.default.createElement("rect",{width:"26",height:"5",x:"7",y:"43",fill:e,rx:"1"})));var K7=Xke;const Fa=_(require("react")),Jke=({main:e="#424242",highlight:t="#565656",width:r="48px",height:i="48px"})=>Fa.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:i,viewBox:"0 0 48 48"},Fa.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Fa.default.createElement("rect",{width:"26",height:"7",x:"7",y:"28",fill:e,rx:"1"}),Fa.default.createElement("rect",{width:"26",height:"26",x:"7",y:"5",fill:t,rx:"1"}),Fa.default.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:e,rx:"1"}),Fa.default.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:e,rx:"1"}),Fa.default.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:e,rx:"1"}),Fa.default.createElement("rect",{width:"26",height:"11",x:"7",y:"37",fill:e,rx:"1"})));var $7=Jke;const Uf=_(require("react")),Zke=({main:e="#424242",highlight:t="#565656",width:r="48px",height:i="48px"})=>Uf.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:i,viewBox:"0 0 48 48"},Uf.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Uf.default.createElement("rect",{width:"20",height:"34",x:"14",y:"10",fill:t,rx:"1.5"}),Uf.default.createElement("rect",{width:"3",height:"3",x:"14",y:"5",fill:e,rx:"1"})));var Y7=Zke;const fi=_(require("react")),Qke=({main:e="#424242",highlight:t="#565656",shadow:r="#333333",width:i="48px",height:o="48px"})=>fi.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:o,viewBox:"0 0 48 48"},fi.default.createElement("defs",null,fi.default.createElement("filter",{id:"photoeditorsdk-twitter-post-icon",width:"166.7%",height:"166.7%",x:"-33.3%",y:"-33.3%",filterUnits:"objectBoundingBox"},fi.default.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1"}))),fi.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},fi.default.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:e,rx:"0.5"}),fi.default.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:e,rx:"0.5"}),fi.default.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:e,rx:"0.5"}),fi.default.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:e,rx:"0.5"}),fi.default.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:t,rx:"0.5"}),fi.default.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:e,rx:"0.5"}),fi.default.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:e,rx:"0.5"}),fi.default.createElement("rect",{width:"9",height:"9",x:"8",y:"13",fill:r,filter:"url(#photoeditorsdk-twitter-post-icon)",rx:"1"}),fi.default.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:e,rx:"1"})));var X7=Qke;const On=_(require("react")),e2e=({main:e="#424242",highlight:t="#565656",width:r="48px",height:i="48px"})=>On.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:i,viewBox:"0 0 48 48"},On.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},On.default.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:e,rx:"0.5"}),On.default.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:e,rx:"0.5"}),On.default.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:e,rx:"0.5"}),On.default.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:e,rx:"0.5"}),On.default.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:e,rx:"0.5"}),On.default.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:e,rx:"0.5"}),On.default.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:e,rx:"0.5"}),On.default.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:t,rx:"1"})));var J7=e2e;const An=_(require("react")),t2e=({main:e="#424242",highlight:t="#565656",width:r="48px",height:i="48px"})=>An.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:i,viewBox:"0 0 48 48"},An.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},An.default.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:t,rx:"0.5"}),An.default.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:e,rx:"0.5"}),An.default.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:e,rx:"0.5"}),An.default.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:e,rx:"0.5"}),An.default.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:e,rx:"0.5"}),An.default.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:e,rx:"0.5"}),An.default.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:e,rx:"0.5"}),An.default.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:e,rx:"1"})));var Z7=t2e;const Gl=_(require("react")),r2e=()=>Gl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Gl.default.createElement("defs",null,Gl.default.createElement("path",{id:"photoeditorsdk-delete-icon",d:"M20 6l-2.312 15.718A1.5 1.5 0 0116.204 23H5.796a1.5 1.5 0 01-1.484-1.282L2 6h18zM7 1a1 1 0 011-1h6a1 1 0 011 1v1h7v2H0V2h7V1z"})),Gl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Gl.default.createElement("mask",{fill:"currentColor"},Gl.default.createElement("use",{xlinkHref:"#photoeditorsdk-delete-icon"})),Gl.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-delete-icon"})));var Q7=r2e;const uo=_(require("react")),i2e=({height:e=3,width:t=102,x:r=-102,className:i,style:o})=>uo.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,viewBox:"0 0 102 3",className:i,style:o},uo.default.createElement("pattern",{id:"photoeditorsdk-slider-dots",fill:"currentColor",patternUnits:"userSpaceOnUse",width:"102",height:"3"},uo.default.createElement("rect",{width:"3",height:"3",x:"99",y:"0",opacity:"0.5",rx:"1.5"}),uo.default.createElement("rect",{width:"3",height:"3",x:"88",y:"0",opacity:"0.5",rx:"1.5"}),uo.default.createElement("rect",{width:"3",height:"3",x:"77",y:"0",opacity:"0.5",rx:"1.5"}),uo.default.createElement("rect",{width:"3",height:"3",x:"66",y:"0",rx:"1.5"}),uo.default.createElement("rect",{width:"3",height:"3",x:"55",y:"0",opacity:"0.5",rx:"1.5"}),uo.default.createElement("rect",{width:"3",height:"3",x:"44",y:"0",opacity:"0.5",rx:"1.5"}),uo.default.createElement("rect",{width:"3",height:"3",x:"33",y:"0",opacity:"0.5",rx:"1.5"}),uo.default.createElement("rect",{width:"3",height:"3",x:"22",y:"0",opacity:"0.5",rx:"1.5"}),uo.default.createElement("rect",{width:"3",height:"3",x:"11",y:"0",rx:"1.5"})),uo.default.createElement("rect",{fill:"url(#photoeditorsdk-slider-dots)",x:-t*1.5,y:"0",width:t*4,height:"3",transform:`translate(${r}, 0)`}));var eq=i2e;const Wl=_(require("react")),o2e=()=>Wl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Wl.default.createElement("defs",null,Wl.default.createElement("path",{id:"photoeditorsdk-duplicate-icon",d:"M3.429 8.571v12h12v-12h-12zM1.714 5.143h15.429c.947 0 1.714.767 1.714 1.714v15.429c0 .946-.767 1.714-1.714 1.714H1.714A1.714 1.714 0 010 22.286V6.857c0-.947.768-1.714 1.714-1.714zM22.286 0C23.232 0 24 .768 24 1.714v15.429c0 .947-.768 1.714-1.714 1.714H20.57V3.429L5.142 3.428V1.714C5.143.768 5.91 0 6.858 0h15.429z"})),Wl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Wl.default.createElement("mask",{fill:"currentColor"},Wl.default.createElement("use",{xlinkHref:"#photoeditorsdk-duplicate-icon"})),Wl.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-duplicate-icon"})));var tq=o2e;const o2=_(require("react")),n2e=()=>o2.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},o2.default.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M2.087 7.115h7.66v15.32h5.027l.223-15.32h7.438V2.087H2.087v5.028zM14.075 24h-4.15a2.42 2.42 0 01-1.718-.711 2.423 2.423 0 01-.711-1.717V9.01H2.429c-.67 0-1.278-.273-1.718-.713A2.426 2.426 0 010 6.579V2.43C0 1.76.272 1.153.711.713A2.424 2.424 0 012.43 0h19.142c.671 0 1.278.272 1.718.713.439.44.711 1.047.711 1.718v4.148c0 .671-.272 1.278-.711 1.718-.44.44-1.047.713-1.718.713h-5.067v12.562c0 .67-.272 1.278-.711 1.717a2.42 2.42 0 01-1.718.711z"}));var rq=n2e;const Pa=_(require("react")),s2e=({className:e})=>Pa.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",transform:"scale(-1, 1)",className:e},Pa.default.createElement("title",null,"Flip Horizontal"),Pa.default.createElement("defs",null,Pa.default.createElement("path",{id:"photoeditorsdk-flip-horizontal-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),Pa.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},Pa.default.createElement("mask",{fill:"none"},Pa.default.createElement("use",{xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})),Pa.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})));var iq=s2e;const Ma=_(require("react")),a2e=({className:e})=>Ma.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",className:e},Ma.default.createElement("title",null,"Flip Vertical"),Ma.default.createElement("defs",null,Ma.default.createElement("path",{id:"photoeditorsdk-flip-vertical-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),Ma.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},Ma.default.createElement("mask",{fill:"none"},Ma.default.createElement("use",{xlinkHref:"#photoeditorsdk-flip-vertical-icon"})),Ma.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(-90 41.417 8)",xlinkHref:"#photoeditorsdk-flip-vertical-icon"})));var oq=a2e;const Ba=_(require("react")),l2e=({alt:e="Rotate",className:t})=>Ba.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 16 16",className:t},Ba.default.createElement("title",null,e),Ba.default.createElement("defs",null,Ba.default.createElement("path",{id:"photoeditorsdk-rotate-icon",d:"M132 0l1.25 1.57a8.01 8.01 0 0110.41.77 8.015 8.015 0 010 11.32c-.33.33-.67.62-1.04.859-1.38.991-3 1.481-4.62 1.481v-2c1.22 0 2.44-.37 3.47-1.111a6 6 0 00.77-9.129 5.992 5.992 0 00-7.73-.63L136 5h-5l1-5zm2.43 12.82c.5.38 1.06.67 1.66.87l-.64 1.89a7.56 7.56 0 01-1.48-.67l-.03-.01v-.01h-.02v-.01h-.01c0-.01-.01-.01-.01-.01h-.01v-.01h-.02v-.01h-.01l-.01-.01s-.01 0-.01-.01h-.01c-.2-.12-.4-.26-.6-.4zm-2.15-3.02c.18.6.47 1.17.83 1.68l-1.63 1.16v-.01s-.01 0-.01-.01c0 0 0-.01-.01-.01v-.01h-.01v-.01c-.01 0-.01-.01-.01-.01v-.01h-.01v-.01h-.01v-.01c0-.01-.01-.01-.01-.01v-.01c-.01 0-.01 0-.01-.01-.27-.39-.49-.79-.68-1.21-.01 0-.01-.01-.01-.01v-.01h-.01v-.02l-.01-.01c0-.02-.01-.02-.01-.02v-.02h-.01v-.02h-.01v-.03h-.01v-.02h-.01v-.02c-.01 0-.01 0-.01-.01v-.01c-.1-.23-.19-.47-.26-.7z"})),Ba.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-130)"},Ba.default.createElement("mask",{fill:"none"},Ba.default.createElement("use",{xlinkHref:"#photoeditorsdk-rotate-icon"})),Ba.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-rotate-icon"})));var nq=l2e;const Z_={adjustment:f7,filter:b7,library:_7,overlay:x7,focus:y7,sticker:w7,text:S7,textdesign:C7,frame:v7,transform:T7,brush:g7},Q_={left:h7,right:m7,center:p7},Kt={addText:k7,openWebcam:E7,reset:D7,shuffle:I7,uploadImage:O7},jf={undo:u7,redo:d7,close:l7,export:c7},nt={categories:{[Ut.CommonCategory]:R7,[Ut.FacebookCategory]:F7,[Ut.TwitterCategory]:M7,[Ut.InstagramCategory]:P7},crops:{[Ut.Custom]:L7,[Ut.Square]:j7,[Ut.ThreeByFour]:q7,[Ut.FourByThree]:z7,[Ut.NineBySixteen]:N7,[Ut.SixteenByNine]:U7,[Ut.FacebookPost]:G7,[Ut.FacebookProfile]:W7,[Ut.FacebookTitle]:H7,[Ut.InstagramLandscape]:V7,[Ut.InstagramPortrait]:K7,[Ut.InstagramSquare]:$7,[Ut.InstagramStory]:Y7,[Ut.TwitterPost]:X7,[Ut.TwitterProfile]:J7,[Ut.TwitterTitle]:Z7},dots:eq,duplicate:tq,edit:rq,bringToFront:A7,delete:Q7,flipHorizontal:iq,flipVertical:oq,rotate:nq},sq={[Ue.BRIGHTNESS]:Jj,[Ue.CONTRAST]:Qj,[Ue.SATURATION]:i7,[Ue.CLARITY]:Zj,[Ue.SHADOWS]:o7,[Ue.HIGHLIGHTS]:r7,[Ue.EXPOSURE]:e7,[Ue.GAMMA]:t7,[Ue.BLACKS]:Xj,[Ue.WHITES]:a7,[Ue.TEMPERATURE]:s7,[Ue.SHARPNESS]:n7},aq=_(require("styled-components")),Hl=aq.default.div`
  display: flex;
  position: relative;
  flex-direction: column;
  width: 100%;
  height: 100%;
`,qf=_(require("styled-components")),lq=qf.default.div.attrs(()=>({"data-test":ee.MainCanvasActionBar}))`
  &&& {
    display: ${e=>e.hide?"none":"flex"};
    flex-direction: row;
    align-items: center;
    height: ${e=>e.theme.measurements.mainCanvasActionBar.height}px;
    color: ${e=>e.theme.mainCanvasActionBar.foreground};
    border-bottom: 1px solid
      ${e=>e.theme.mainCanvasActionBar.borderColor};
    padding: 8px 24px;
    box-sizing: border-box;
    position: absolute;
    width: 100%;
    z-index: ${e=>e.theme.measurements.zIndex.canvas.bar};
    background: ${e=>e.transparentBackgound?"transparent":e.theme.mainCanvasActionBar.background};
    ${e=>e.bottom?qf.css`
            justify-content: space-around;
            bottom: 0;
            transform: rotate(180deg);
          `:qf.css`
            justify-content: space-between;
          `}
  }
`,cq=_(require("styled-components")),dq=cq.default.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,uq=_(require("styled-components")),pq=uq.default.div.attrs({role:"main"})`
  background-color: ${e=>e.theme.canvas.background};
  flex-grow: 1;
  flex-shrink: 1;
  flex-basis: auto;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  /* added this for safari, else the webcam overlay did not know the height */
  height: 100%;
  width: 100%;
  margin-top: ${e=>e.theme.measurements.canvas.marginTop}px;
`,hq=_(require("styled-components")),mq=hq.default.div.attrs(({height:e,width:t})=>({style:{height:`${e}px`,width:`${t}px`}}))`
  border-style: solid;
  border-width: 2px 0 2px 0;
  border-color: ${e=>e.theme.canvas.controlsOutline};
  box-shadow: 0 -6px 6px -6px rgba(0, 0, 0, 0.2),
    inset 0 6px 6px -6px rgba(0, 0, 0, 0.2);
  cursor: move;
  position: absolute;
`,fq=_(require("styled-components")),gq=fq.default.div.attrs(({radius:e})=>({style:{height:`${e*2}px`,width:`${e*2}px`}}))`
  border-radius: 50%;
  border: 2px solid ${e=>e.theme.canvas.controlsOutline};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
`,bq=_(require("styled-components")),yq=bq.default.div`
  position: relative;
  height: inherit;
  width: inherit;
`,Bt=_(require("styled-components")),c2e=Bt.default.div(e=>{const{desktop:t,mobile:r}=e.theme.measurements.canvasControls.corner.touchable,i=t/4,o=r/2;return Bt.css`
    position: absolute;
    width: ${t}px;
    height: ${t}px;
    ${n=>n.vertical==="top"?Bt.css`
            top: 0px;
          `:Bt.css`
            bottom: 0px;
          `}
    ${n=>n.horizontal==="left"?Bt.css`
            left: 0px;
          `:Bt.css`
            right: 0px;
          `}
  ${n=>n.vertical==="top"?Bt.css`
            margin-top: -${i}px;
          `:Bt.css`
            margin-bottom: -${i}px;
          `}
  ${n=>n.horizontal==="left"?Bt.css`
            margin-left: -${i}px;
          `:Bt.css`
            margin-right: -${i}px;
          `}
  @media all and (min-width: 0) and (max-width: 599px) {
      width: ${r}px;
      height: ${r}px;
      ${n=>n.vertical==="top"?Bt.css`
              margin-top: -${o}px;
            `:Bt.css`
              margin-bottom: -${o}px;
            `}
      ${n=>n.horizontal==="left"?Bt.css`
              margin-left: -${o}px;
            `:Bt.css`
              margin-right: -${o}px;
            `}
    }
  `}),ex=Bt.default(c2e)(e=>{const t=e.horizontal==="right"?e.borderWidth:0,r=e.vertical==="bottom"?e.borderWidth:0,i=e.horizontal==="left"?e.borderWidth:0,o=e.vertical==="top"?e.borderWidth:0,n=`${o}px ${t}px ${r}px ${i}px`,s=e.horizontal==="left"&&e.vertical==="bottom"||e.horizontal==="right"&&e.vertical==="top"?"nesw-resize":"nwse-resize",a=e.theme.measurements.canvasControls.corner.touchable.desktop/4-e.borderWidth,l=e.theme.measurements.canvasControls.corner.touchable.mobile/4+e.borderWidth;return Bt.css`
    &:before {
      display: block;
      position: absolute;
      content: '';
      width: ${c=>c.theme.measurements.canvasControls.corner.size}px;
      height: ${c=>c.theme.measurements.canvasControls.corner.size}px;
      z-index: ${c=>c.theme.measurements.zIndex.canvas.controls};
      border-color: ${c=>c.theme.canvas.controlsColor};
      border-style: solid;
      border-width: ${n};
      pointer-events: auto;
      ${e.vertical==="top"?Bt.css`
            top: ${a}px;
          `:Bt.css`
            bottom: ${a}px;
          `}
      ${e.horizontal==="left"?Bt.css`
            left: ${a}px;
          `:Bt.css`
            right: ${a}px;
          `}
      @media all and (min-width: 0) and (max-width: 599px) {
        ${e.vertical==="top"?Bt.css`
              margin-top: ${l}px;
            `:Bt.css`
              margin-bottom: ${l}px;
            `}
        ${e.horizontal==="left"?Bt.css`
              margin-left: ${l}px;
            `:Bt.css`
              margin-right: ${l}px;
            `}
      }
    }
    cursor: ${s};
    pointer-events: none;
  `}),vq=_(require("styled-components")),_q=vq.default.div.attrs(()=>({"data-test":ee.Knob}))`
  position: absolute;
  height: ${e=>e.theme.measurements.canvasControls.knob.touchable.desktop}px;
  width: ${e=>e.theme.measurements.canvasControls.knob.touchable.desktop}px;
  margin-left: -10px;
  margin-top: -10px;
  z-index: ${e=>e.theme.measurements.zIndex.canvas.knob};
  will-change: transform;
  cursor: ew-resize;
  &:before {
    display: block;
    position: absolute;
    content: '';
    background: ${e=>e.theme.canvas.controlsColor};
    border-radius: 50%;
    width: ${e=>e.theme.measurements.canvasControls.knob.size}px;
    height: ${e=>e.theme.measurements.canvasControls.knob.size}px;
    top: ${e=>e.theme.measurements.canvasControls.knob.size/4}px;
    left: ${e=>e.theme.measurements.canvasControls.knob.size/4}px;
    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.24);
  }
`,xq=_(require("styled-components")),wq=xq.default.div`
  position: absolute;
  color: ${e=>e.theme.canvas.controlsOutline};
`,Sq=_(require("styled-components")),Cq=Sq.default.div.attrs(e=>({style:{left:`${e.x}px`}}))`
  position: absolute;
  bottom: -${e=>e.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  height: ${e=>e.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  width: 2px;
  background-color: ${e=>e.theme.canvas.controlsOutline};
`,Tq=_(require("styled-components")),kq=Tq.default.div.attrs(({height:e,width:t,theme:r})=>({style:{height:`${e+r.measurements.canvasControls.sprite.controlPadding}px`,width:`${t+r.measurements.canvasControls.sprite.controlPadding}px`}}))`
  left: -${e=>e.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  top: -${e=>e.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  transform-origin: center center;
  border-style: solid;
  border-width: 2px;
  border-color: ${e=>e.theme.canvas.controlsColor};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
  will-change: transform;
  position: absolute;
`,Eq=_(require("styled-components")),Dq=Eq.default.div.attrs(()=>({"data-test":ee.TextWidth}))`
  position: absolute;
  height: ${e=>e.theme.measurements.canvasControls.width.size}px;
  width: 4px;
  z-index: ${e=>e.theme.measurements.zIndex.canvas.controls};
  background: ${e=>e.theme.canvas.controlsColor};
  cursor: pointer;
`,Iq=_(require("styled-components")),Oq=Iq.default.div.attrs({tabIndex:0})`
  position: absolute;
  height: ${e=>e.height}px;
  width: ${e=>e.width}px;
  top: 0;
  left: 0;
  &:focus {
    outline: 0;
  }
`,Vl=_(require("styled-components")),tx=d9()?Vl.css`
      transition: unset;
    `:Vl.css`
      transition: all 0.4s ease-in-out;
    `,Aq=Vl.default.div`
  position: absolute;
  background: ${e=>e.theme.canvas.cropBackdrop};
  z-index: ${e=>e.theme.measurements.zIndex.canvas.crop.backdrop};
  ${tx}
`,Rq=Vl.default.div.attrs({"data-test":ee.CropMask})`
  position: absolute;
  box-shadow: inset 0 0 0 2px ${e=>e.theme.canvas.controlsOutline};
  cursor: move;
  ${tx}
`,Fq=Vl.default.div`
  position: absolute;
  background: ${e=>e.theme.canvas.controlsOutline};
  z-index: ${e=>e.theme.measurements.zIndex.canvas.crop.grid};
  ${tx}
`,cd=Vl.default(ex)`
  z-index: ${e=>e.theme.measurements.zIndex.canvas.controls};
  ${tx};
`,Pq=_(require("styled-components")),Mq=Pq.default.canvas`
  position: absolute;
  top: 0;
  left: 0;
`,Bq=_(require("styled-components")),Lq=Bq.default.video`
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`,zq=_(require("styled-components")),Nq=zq.default.div`
  position: relative;
  transition: all 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);
  height: 100%;
  width: 100%;
  z-index: ${e=>e.theme.measurements.zIndex.canvas.webcam.backdrop};
  background-color: ${e=>e.theme.webcam.background};
`,ge={Index:dq,Area:Hl,Bar:{Index:lq,ButtonGroup:Yj},Button:{TextSecondary:Pf,Float:$j},Container:pq,Element:Mq,Wrapper:Nq,Webcam:Lq,Controls:{Knob:_q,Circle:gq,Corner:ex,Line:wq,Area:mq,Sprite:kq,RotateHandle:Cq,Container:yq,Wrapper:Oq,SpriteActionsWrapper:Mf,SpriteActionButton:Dn,Width:Dq},Crop:{Mask:Rq,GridLine:Fq,Backdrop:Aq,Control:cd}},kg=_(require("react")),p$=_(require("styled-components"));const Mi={};Tt(Mi,{FragmentPrecision:()=>Go,ImageFormat:()=>dd,OptionType:()=>g,RenderType:()=>po,RendererType:()=>De,UniformType:()=>$});const po={IMAGE:"image",DATAURL:"data-url",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"},dd={PNG:"image/png",JPEG:"image/jpeg",RAW:"raw"};var g;(function(e){e.NUMBER="number",e.VECTOR2="vector2",e.COLOR_MATRIX="color-matrix",e.COLOR="color",e.ARRAY="array",e.OBJECT="object",e.STRING="string",e.BOOLEAN="boolean",e.CONFIGURABLE="configurable",e.IMAGE="image",e.FUNCTION="function",e.TEXTURE="texture",e.ALL="*"})(g||(g={}));var $;(function(e){e.SAMPLER2D="sampler2d",e.INT="i",e.INT1="1i",e.INT2="2i",e.INT3="3i",e.INT4="4i",e.FLOAT="f",e.FLOAT1="1f",e.FLOAT2="2f",e.FLOAT_VECTOR2="2fv",e.FLOAT3="3f",e.FLOAT4="4f",e.MAT3="mat3",e.MAT3FV="mat3fv",e.MAT4="mat4"})($||($={}));var De;(function(e){e.WEBGL="webgl",e.CANVAS="canvas"})(De||(De={}));var Go;(function(e){e.High="highp",e.Medium="mediump",e.Low="lowp"})(Go||(Go={}));let qq;const Gf=()=>document.createElement("canvas"),Uq=(e,t)=>{const r=t||Gf();r.width=e.width,r.height=e.height;const i=r.getContext("2d");if(!i)throw new Error("Cannot render context");return i.clearRect(0,0,r.width,r.height),i.drawImage(e,0,0,e.width,e.height),r};class Wf{constructor(e,t,r){this.width=e;this.height=t;this.data=r}}qq=jq().webUtils;const Or=qq,pp=e=>e._type===De.WEBGL,n2=e=>Boolean(e&&"tagName"in e&&e.tagName&&e.tagName.toUpperCase()==="CANVAS"),Gq=e=>Boolean("tagName"in e&&e.tagName.toUpperCase()==="IMG");class Wq{static head(e){return e[0]}static tail(e){return e.slice(1)}static last(e){return e[e.length-1]}static init(e){return e.slice(0,e.length-1)}static remove(e,t){return e.filter((r,i,o)=>!t(r,i,o))}static findIndex(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r;return-1}static find(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return e[r];return}static flatten(e){return e.reduce(function(t,r){return t.concat(Array.isArray(r)?Wq.flatten(r):r)},[])}static range(e,t){const r=[];if(t>e)for(let i=e;i<t;i++)r.push(i);return r}static repeat(e,t){const r=[];for(let i=0;i<t;i++)r[i]=e;return r}static zip(e,t){const r=Math.min(e.length,t.length),i=[];for(let o=0;o<r;o++)i[o]=[e[o],t[o]];return i}}var Hq=Wq;const Kl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f2e={encode(e){let t="",r,i,o,n,s,a,l,c=0;do r=e[c++],i=e[c++],o=e[c++],n=r>>2,s=(r&3)<<4|i>>4,a=(i&15)<<2|o>>6,l=o&63,isNaN(i)?a=l=64:isNaN(o)&&(l=64),t=t+Kl.charAt(n)+Kl.charAt(s)+Kl.charAt(a)+Kl.charAt(l),r=i=o="",n=s=a=l="";while(c<e.length);return t},decode(e){let t,r,i,o,n,s,a,l=0;const c=[],d=/[^A-Za-z0-9+/=]/g;if(d.exec(e))throw new Error(`There were invalid base64 characters in the input text.
Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='
Expect errors in decoding.`);e=e.replace(/[^A-Za-z0-9+/=]/g,"");do o=Kl.indexOf(e.charAt(l++)),n=Kl.indexOf(e.charAt(l++)),s=Kl.indexOf(e.charAt(l++)),a=Kl.indexOf(e.charAt(l++)),t=o<<2|n>>4,r=(n&15)<<4|s>>2,i=(s&3)<<6|a,c.push(t),s!==64&&c.push(r),a!==64&&c.push(i),t=r=i="",o=n=s=a="";while(l<e.length);return c}};var Rn=f2e;class ud{static mapRange(e,t,r){return(e-t.getMin())*r.getLength()/t.getLength()+r.getMin()}static isPlainObject(e){if(typeof e!="object"||!e)return!1;if(typeof Object.getPrototypeOf=="function"){const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}return Object.prototype.toString.call(e)==="[object Object]"}static isMobile(){if(typeof navigator=="undefined")return!1;const e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}static isBrowser(){return typeof window!="undefined"}static values(e){const t=[];for(const r in e)t.push(e[r]);return t}static generateUUID(){let e=new Date().getTime();return typeof window.performance!="undefined"&&typeof window.performance.now=="function"&&(e+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const r=(e+Math.random()*16)%16|0;return e=Math.floor(e/16),(t==="x"?r:r&3|8).toString(16)})}static resizeVectorToFit(e,t){const r=Math.min(t.x/e.x,t.y/e.y),i=e.clone().multiply(r);return i}static resizeVectorToFill(e,t){const r=e.x/e.y,i=t.x/t.y;return r>i?t.clone().set(t.y*r,t.y):t.clone().set(t.x,t.x/r)}static isExtendable(e){return typeof e!="undefined"&&e!==null&&(typeof e=="object"||typeof e=="function")}static defaults(e,...t){const r={};for(const i in e)r[i]=e[i];for(let i=0;i<t.length;i++){const o=t[i];for(const n in o)typeof r[n]=="undefined"&&(r[n]=o[n])}return r}static deepMerge(e,...t){const r=(i,o)=>{if(o===void 0)return r(null,i);if(Array.isArray(o))return[...o];if(!ud.isPlainObject(o))return o;if(!ud.isPlainObject(i))return v({},o);const n=v({},i);return Object.keys(o).forEach(s=>{const a=o[s];if(a===void 0)return;n[s]=r(i[s],a)}),n};return t.reduce(r,e)}static deepDefaults(e,...t){const r=[...t].reverse();return ud.deepMerge(...r,e)}static deepClone(e){const t={};for(const r in e)ud.isExtendable(e[r])?t[r]=ud.deepClone(e[r]):t[r]=e[r];return t}static extend(e,...t){const r={};for(const i in e)r[i]=e[i];for(let i=0;i<t.length;i++){const o=t[i];for(const n in o)r[n]=o[n]}return r}static clone(e){return this.extend({},e)}static getUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0,r=e==="x"?t:t&3|8;return r.toString(16)})}static createCanvas(){return Or.createCanvas()}static isPowerOfTwo(e){return(e.x&e.x-1)===0&&(e.y&e.y-1)===0}static nextLowestPOT(e){for(let t=1;t<32;t<<=1)e|=e>>t;return e-(e>>1)}static nextHighestPOT(e){e--;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}static moveArrayItem(e,t,r){if(r>=e.length){let i=r-e.length;for(;i--+1;)e.push(void 0)}e.splice(r,0,e.splice(t,1)[0])}static ensureCanvasDimensions(e,t){return e.width!==t.x||e.height!==t.y?(e.width=t.x,e.height=t.y,!0):!1}static byteArrayToString(e){return e.map(t=>String.fromCharCode(t)).join("")}static clamp(e,t,r){return Math.max(t,Math.min(e,r))}static wildCardMatch(e,t){return new RegExp(`^${t.split("*").join(".*")}$`).test(e)}static flipObject(e){const t={};for(const r in e)t[e[r]]=r;return t}static ISODateString(e){function t(r){return r<10?`0${r}`:r}return`${e.getUTCFullYear()}-${t(e.getUTCMonth()+1)}-${t(e.getUTCDate())}T${t(e.getUTCHours())}:${t(e.getUTCMinutes())}:${t(e.getUTCSeconds())}Z`}static getCrossOriginValue(e){return e?e==="none"?void 0:e:"anonymous"}static invariant(e,t){if(!e){const r=new Error(t);throw r}}static executePromises(e){const t=e.length;let r=0;const i=[],o=[];return new Promise((n,s)=>{const a=()=>{r++,r>=t&&(o.length<=0?n(i):s(o))},l=d=>{i.push(d),a()},c=d=>{o.push(d),a()};e.forEach(d=>{d.then(l).catch(c)})})}}re(ud,"Array",Hq);var j=ud;const g2e=[{name:"trace",type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{name:"info",type:"log",background:"#BDE5F8",color:"#00529B"},{name:"warn",type:"warn",background:"#FEEFB3",color:"#9F6000"},{name:"error",type:"error",background:"#FFBABA",color:"#D8000C"},{name:"log",type:"log",background:"#EEEEEE",color:"#1f4f6b"}],Vq=()=>console&&console.group&&console.groupCollapsed&&console.groupEnd,b2e=()=>typeof navigator!="undefined"&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/),y2e=(e,t)=>["background: #2D7BFF; line-height: 20px; padding: 4px 0","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0",`background: ${e}; color: ${t}; line-height: 20px; padding: 4px 0; font-weight: bold`,"background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0"];class v2e{constructor(e="warn",t=g2e){this._levels=[...t],this._maxLevel=this.getLevelIndexByName(e),this._consoleFuncs={trace:(...r)=>{Vq()?(console.groupCollapsed(...r),console.trace(),console.groupEnd()):console.trace(...r)}},this._levels.forEach(({name:r})=>{this[r]=(i,...o)=>{this._log(r,i,...o)}})}getLevelIndexByName(e){return j.Array.findIndex(this._levels,t=>t.name===e)}getLevelObjectByName(e){return j.Array.find(this._levels,t=>t.name===e)}canLog(e){const t=this.getLevelIndexByName(e);return t<0?!1:t>=this._maxLevel}setLevel(e){const t=this.getLevelIndexByName(e);if(t<0)return;this._maxLevel=t}_log(e,t,...r){const i=this.getLevelObjectByName(e);if(!i||!this.canLog(e))return;const{name:o,type:n,background:s,color:a}=i,l=r.filter(p=>p!==void 0).map(p=>p.toObject?JSON.parse(JSON.stringify(p.toObject())):p),c=this._consoleFuncs[n]||console[n]?(...p)=>console[n](...p):(...p)=>console.log(...p),d=l.length,u=y2e(s,a);if(!b2e()){const p=l.length;if(p<=0){c(`PhotoEditorSDK | ${t} `);return}if(p===1&&typeof l[0]=="string"){c(`PhotoEditorSDK | ${t} | ${l[0]}`);return}c(`PhotoEditorSDK | ${t} | `,...l);return}if(d<=0){c(`%c  %c PhotoEditorSDK %c  %c ${t} %c %c  `,...u);return}if(d===1&&typeof l[0]=="string"){c(`%c  %c PhotoEditorSDK %c  %c ${t} %c  ${l[0]}  %c  `,...u);return}Vq()?(console.groupCollapsed(`%c  %c PhotoEditorSDK %c  %c ${t} %c`,...j.Array.init(u)),c(...l),console.groupEnd()):c(`%c  %c PhotoEditorSDK %c  %c ${t} %c`,...j.Array.init(u),...l)}image(e="",t){{let r=new window.Image;const i=()=>{const{width:o}=r,{height:n}=r;e&&console.log(e),console.log("%c+",`
        font-size: 1px;
        padding: 0px ${Math.floor(o/2)}px;
        line-height: ${n}px;
        background: url(${r.src});
        color: transparent;
        background-repeat: no-repeat;
        background-size: ${o}px ${n}px;`)};return r.onload=i,t instanceof window.HTMLCanvasElement?r.src=t.toDataURL():t instanceof window.Image?(r=t,i()):typeof t=="string"?r.src=t:this.log(e,t),r}}texture(e="",t){{if(!t){this.log(e,"texture: null or undefined");return}const r=t.getBaseTexture(),i=r.getRenderers(),o=j.Array.find(i,a=>a&&a.constructor.type==="webgl"),{width:n,height:s}=r.getFrame();if(o){const a=o.getContext(),l=r.getGLTextureForRenderer(o);this.logGlTexture(a,l,n,s,e)}else s2.image(e,r.getSource())}}logGlTexture(e,t,r=150,i=150,o){{e.bindTexture(e.TEXTURE_2D,t);const n=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);const s=new Uint8Array(r*i*4);e.readPixels(0,0,r,i,e.RGBA,e.UNSIGNED_BYTE,s),e.deleteFramebuffer(n);const a=document.createElement("canvas");a.width=r,a.height=i;const l=a.getContext("2d"),c=l.createImageData(r,i);return c.data.set(s),l.putImageData(c,0,0),s2.image(o,a)}}}const s2=new v2e("warn");var ie=s2;const u2={};Tt(u2,{ImageLoader:()=>ho,JSONLoader:()=>Fn});var ho={load(e,t={cors:!0,value:"anonymous"}){const r=()=>Promise.resolve([e,e]);return r().then(([i,o])=>this._createAndLoadImage(i,o,t))},loadImage(e,t={cors:!0,value:"anonymous"}){return this._loadWithoutExif(e,t)},_loadWithoutExif(e,t={cors:!0,value:"anonymous"}){return new Promise((r,i)=>{const o=new window.Image;o.addEventListener("load",()=>{r(o)}),o.addEventListener("error",()=>{i(new Error(`Failed to load image at ${e}`))}),t.cors&&(o.crossOrigin=t.value),o.src=e})},_createAndLoadImage(e,t,r={cors:!0,value:"anonymous"}){return new Promise((i,o)=>{{const n=this._loadWithoutExif(t,r).then(a=>i(a)),s=new Promise((a,l)=>{this._loadAsDataURL(t,r).then(c=>{const d=new window.Image;d.addEventListener("load",()=>{a(d)}),d.src=c,d.rawSource=c}).catch(c=>{n.then(d=>a(d))})});return this._stringEndsWith(t,".svg")?n.then(a=>i(a)):s.then(a=>i(a))}})},_stringEndsWith(e,t,r=e.length){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t},_loadAsDataURL(e,t={cors:!0,value:"anonymous"}){return new Promise((r,i)=>{const o=new XMLHttpRequest;o.onload=function(){const n=new FileReader;n.onloadend=function(){n.error&&i(n.error),r(n.result)},n.readAsDataURL(o.response)},o.open("GET",e),o.responseType="blob",o.withCredentials=t.cors&&t.value==="use-credentials",o.send()})},loadXHR(e,t){return new Promise((r,i)=>{let o;window.XDomainRequest?(o=new window.XDomainRequest,t&&o.overrideMimeType(t),o.onload=function(){r(o)},o.onerror=function(n){i(n)}):window.XMLHttpRequest&&(o=new window.XMLHttpRequest,t&&o.overrideMimeType(t),o.onreadystatechange=function(n){o.readyState===4&&(o.status===200?r(o):i(new Error(`HTTP Status ${o.status}`)))}),o.open("GET",e,!0),o.send()})}};const d2=_(oG()),F2e=5e3,$f=typeof window!="undefined"?window:global;class Fn{constructor(e){this._url=e,this._parsedUrl=d2.default.parse(this._url,!0)}_isJSONPRequest(){const{query:e}=this._parsedUrl;for(const t in e){const r=e[t];if(r==="?")return!0}return!1}load(){return this._isJSONPRequest()?this._loadJSONP():this._loadJSON()}_loadJSON(){return new Promise((e,t)=>{let r;$f.XDomainRequest?(r=new $f.XDomainRequest,r.onload=function(){const i=JSON.parse(r.responseText);e(i)},r.onerror=function(i){t(i)},r.open("GET",this._url,!0),r.send()):$f.XMLHttpRequest&&(r=new XMLHttpRequest,r.onreadystatechange=function(i){if(r.readyState===4)if(r.status===200){const o=JSON.parse(r.responseText);e(o)}else t(new Error(`HTTP Status ${r.status}`))},r.open("GET",this._url,!0),r.send())})}_loadJSONP(){let e=!1,t=!1;const r=`pesdk${Math.round(Math.random()*99999999999999)}`;return new Promise((i,o)=>{const n=this._createJSONPNode(r);$f[r]=s=>{this._removeJSONPNode(n),e||(t=!0,i(s))},$f.setTimeout(()=>{t||(this._removeJSONPNode(n),e=!0,o(new Error("Timeout of 5 seconds exceeded.")))},F2e)})}_createJSONPNode(e){const t=this._buildJSONPUrl(e),r=document.querySelector("head"),i=document.createElement("script");return i.src=t,r.appendChild(i),i}_removeJSONPNode(e){e.parentNode.removeChild(e)}_buildJSONPUrl(e){const{query:t}=this._parsedUrl;let r=null;for(const i in t)if(t[i]==="?"){r=i;break}return delete this._parsedUrl.search,t[r]=e,d2.default.format(this._parsedUrl)}}class Ho{constructor(e,t,r,i=1){this.r=e,this.g=t,this.b=r,this.a=i}toRGBA(){const e=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255),this.a.toFixed(2)];return`rgba(${e.join(",")})`}set(e,t,r,i=this.a){return this.r=e,this.g=t,this.b=r,this.a=i,this}toRGB(){return[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)]}toHex(){const e=[this._componentToHex(Math.round(this.r*255)),this._componentToHex(Math.round(this.g*255)),this._componentToHex(Math.round(this.b*255))];return`#${e.join("")}`}toGLColor(){return[this.r,this.g,this.b,this.a]}toArray(){return this.toGLColor()}toRGBGLColor(){return[this.r,this.g,this.b]}toHSV(){const e=Math.max(this.r,this.g,this.b),t=Math.min(this.r,this.g,this.b);let r,i;const o=e,n=e-t;if(i=e===0?0:n/e,e===t)r=0;else{switch(e){case this.r:r=(this.g-this.b)/n,this.g<this.b&&(r+=6);break;case this.g:r=(this.b-this.r)/n+2;break;case this.b:r=(this.r-this.g)/n+4;break}r/=6}return[r,i,o]}fromHSV(e,t,r){return this.copy(Ho.fromHSV(e,t,r)),this}static fromHSV(e,t,r,i=1){let[o,n,s]=[];const a=Math.floor(e*6),l=e*6-a,c=r*(1-t),d=r*(1-l*t),u=r*(1-(1-l)*t);switch(a%6){case 0:o=r,n=u,s=c;break;case 1:o=d,n=r,s=c;break;case 2:o=c,n=r,s=u;break;case 3:o=c,n=d,s=r;break;case 4:o=u,n=c,s=r;break;case 5:o=r,n=c,s=d;break}return new Ho(o,n,s,i)}static fromArray(e){return new Ho(e[0],e[1],e[2],e[3])}static fromHex(e){const[t,r,i]=e.match(/[0-9A-fa-f]{1,2}/g);return new Ho(parseInt(t,16)/255,parseInt(r,16)/255,parseInt(i,16)/255,1)}clone(){return new Ho(this.r,this.g,this.b,this.a)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this.a+=e.a,this}minus(e){return this.r-=e.r,this.g-=e.g,this.b-=e.b,this.a-=e.a,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this.a*=e,this}divideScalar(e){return this.r/=e,this.g/=e,this.b/=e,this.a/=e,this}clamp(e,t){return this.r=Math.min(Math.max(this.r,e),t),this.g=Math.min(Math.max(this.g,e),t),this.b=Math.min(Math.max(this.b,e),t),this.a=Math.min(Math.max(this.a,e),t),this}mix(e,t){return this.r=(1-t)*this.r+t*e.r,this.g=(1-t)*this.g+t*e.g,this.b=(1-t)*this.b+t*e.b,this.a=(1-t)*this.a+t*e.a,this}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}_componentToHex(e){const t=e.toString(16);return t.length===1?`0${t}`:t}toString(){return`Color(${this.r}, ${this.g}, ${this.b}, ${this.a})`}static get TRANSPARENT(){return new Ho(0,0,0,0)}static get WHITE(){return new Ho(1,1,1,1)}static get BLACK(){return new Ho(0,0,0,1)}static get RED(){return new Ho(1,0,0,1)}static get BLUE(){return new Ho(0,0,1,1)}static get GREEN(){return new Ho(0,1,0,1)}}var V=Ho;const P2e=12;class M2e{constructor(){this._maxListeners=P2e,this._events={},this._pipeDestinations=[]}pipeEvents(e){this._pipeDestinations.push(e)}unpipeEvents(e){const t=this._pipeDestinations.indexOf(e);if(t===-1)return;this._pipeDestinations.splice(t,1)}on(e,t){if(typeof e=="undefined")throw new Error(`Invalid event type: \`${e}\``);if(typeof t!="function")throw new TypeError;const r=this._events[e]||(this._events[e]=[]);return r.indexOf(t)!==-1?this:(r.push(t),this._maxListeners&&r.length>this._maxListeners&&(ie.warn("EventEmitter",`Possible memory leak detected, added ${r.length} \`${e}\` listeners (current limit is ${this._maxListeners})`),typeof console!="undefined"&&console.trace()),this)}once(e,t){if(typeof e=="undefined")throw new Error(`Invalid event type: \`${e}\``);const r=this;function i(){r.off(e,i),t.apply(null,arguments)}return this.on(e,i)}off(e,...t){if(typeof e=="undefined")throw new Error(`Invalid event type: \`${e}\``);if(t.length===0)return this._events[e]=null,this;const r=t[0];if(typeof r!="function")throw new TypeError;const i=this._events[e];if(!i||!i.length)return this;const o=i.indexOf(r);return o===-1?this:(i.splice(o,1),this)}emit(e,...t){if(typeof e=="undefined")throw new Error(`Invalid event type: \`${e}\``);this._pipeDestinations.forEach(i=>{i.emit(e,...t)});const r=this._events[e];return!r||!r.length?!1:(r.slice(0).forEach(i=>i.apply(null,t)),!0)}setMaxListeners(e){if(parseInt(e,10)!==e)throw new TypeError;this._maxListeners=e}}var gi=M2e,pd={checkFramebufferStatus(e,t){const r=t.checkFramebufferStatus(t.FRAMEBUFFER),i={[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT]:"Incomplete attachment",[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT]:"Missing attachment",[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS]:"Incomplete dimensions",[t.FRAMEBUFFER_UNSUPPORTED]:"Framebuffer unsupported"};r!==t.FRAMEBUFFER_COMPLETE&&ie.warn(e,`Framebuffer incomplete: ${i[r]}`)},determineGPUName(e){let t=null,r=null;e||(r=document.createElement("canvas"),e=r.getContext("experimental-webgl")||r.getContext("webgl"));const i=e&&e.getExtension("WEBGL_debug_renderer_info");return i&&(t=e.getParameter(i.UNMASKED_RENDERER_WEBGL),r&&r.remove()),t},isGPUBlacklisted(e,t=null){return!1}};const ix=e=>typeof e=="number",B2e=e=>e instanceof ye,hd=(e,t)=>B2e(e)?{x:e.x,y:e.y}:{x:e,y:ix(t)?t:e},ox=(e,t)=>(r,i)=>{const{x:o,y:n}=hd(r,i);return e.x=t(e.x,o),e.y=t(e.y,n),e};class ye{constructor(e=0,t=0){this.add=ox(this,(e,t)=>e+t);this.subtract=ox(this,(e,t)=>e-t);this.divide=ox(this,(e,t)=>e/t);this.multiply=ox(this,(e,t)=>e*t);this.x=e,this.y=t}set(e,t){const{x:r,y:i}=hd(e,t);return this.x=r,this.y=i,this}clone(){return new ye(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}clamp(e,t){return ix(e)&&(e=new ye(e,e)),ix(t)&&(t=new ye(t,t)),e&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y)),t&&(this.x=Math.min(t.x,this.x),this.y=Math.min(t.y,this.y)),this}dot(e,t){const{x:r,y:i}=hd(e,t);return this.x*r+this.y*i}equals(e,t){const{x:r,y:i}=hd(e,t);return r===this.x&&i===this.y}flip(){const e=this.x;return this.x=this.y,this.y=e,this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}floor(){return this.x|=0,this.y|=0,this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}len(){return Math.sqrt(this.x*this.x+this.y*this.y)}min(){return Math.min(this.x,this.y)}max(){return Math.max(this.x,this.y)}toObject(){return{x:this.x,y:this.y}}toString(){return`Vector2({ x: ${this.x}, y: ${this.y} })`}roundDecimal(e){return this.x=parseFloat(this.x.toFixed(e)),this.y=parseFloat(this.y.toFixed(e)),this}asArray(e=!1){return e?[this.y,this.x]:[this.x,this.y]}static fromObject(e){return new ye(e.x,e.y)}static get NULL(){return new ye(0,0)}}class Vo{constructor(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0;this.reset()}multiply(e){let t,r,i,o,n,s;return t=this.a*e.a+this.b*e.c,r=this.a*e.b+this.b*e.d,i=this.c*e.a+this.d*e.c,o=this.c*e.b+this.d*e.d,n=this.tx*e.a+this.ty*e.c+e.tx,s=this.tx*e.b+this.ty*e.d+e.ty,this.a=t,this.b=r,this.c=i,this.d=o,this.tx=n,this.ty=s,this}applyToVector(e){const{x:t,y:r}=e;return e=e.clone(),e.x=this.a*t+this.c*r+this.tx,e.y=this.b*t+this.d*r+this.tx,e}applyInverseToVector(e){const t=1/(this.a*this.d+this.c*-this.b),{x:r,y:i}=e;return e=e.clone(),e.x=this.d*t*r+-this.c*t*i+(this.ty*this.c-this.tx*this.d)*t,e.y=this.a*t*i+-this.b*t*r+(-this.ty*this.a+this.tx*this.b)*t,e}rectangleToCoordinates(e,t=new ye(0,0)){const r=e.width*(1-t.x),i=e.width*-t.x,o=e.height*(1-t.y),n=e.height*-t.y,s=[];return s.push(new ye(this.a*i+this.c*n+this.tx,this.d*n+this.b*i+this.ty)),s.push(new ye(this.a*r+this.c*n+this.tx,this.d*n+this.b*r+this.ty)),s.push(new ye(this.a*r+this.c*o+this.tx,this.d*o+this.b*r+this.ty)),s.push(new ye(this.a*i+this.c*o+this.tx,this.d*o+this.b*i+this.ty)),s}reset(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}toArray(){const e=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];return typeof Float32Array=="undefined"?e:new Float32Array(e)}toString(){return`Matrix({ a: ${this.a}, b: ${this.b}, c: ${this.c}, d: ${this.d}, tx: ${this.tx}, ty: ${this.ty} })`}static get IDENTITY(){return new Vo}}class Ot{constructor(e=0,t=0,r=0,i=0){this.x=0;this.y=0;this.width=0;this.height=0;this.x=e,this.y=t,this.width=r,this.height=i}set(e,t,r,i){return this.x=e,this.y=t,this.width=r,this.height=i,this}clone(){return new Ot(this.x,this.y,this.width,this.height)}copy(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}equals(e,t,r,i){return e instanceof Ot?e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height:e===this.x&&t===this.y&&r===this.width&&i===this.height}translate(e,t){const{x:r,y:i}=hd(e,t);return this.x+=r,this.y+=i,this}scale(e,t){const{x:r,y:i}=hd(e,t);return this.width*=r,this.height*=i,this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),this}getPosition(){return new ye(this.x,this.y)}getSize(){return new ye(this.width,this.height)}insetBy(e,t){return this.x+=e,this.y+=t,this.width-=2*e,this.height-=2*t,this}intersects(e){const t=new ye(this.x,this.y),r=new ye(this.x+this.width,this.y+this.height),i=new ye(e.x,e.y),o=new ye(e.x+e.width,e.y+e.height);return!(i.x>r.x||t.x>o.x||o.y<t.y||r.y<i.y)}toString(){return`Rectangle({ x: ${this.x}, y: ${this.y}, width: ${this.width}, height: ${this.height} })`}static FromDiagonalPoints(e,t){let r=!1;t.x-e.x<0&&(r=!0);const i=r?t:e,o=r?e:t,n=o.x-i.x,s=o.y-i.y;return new Ot(i.x,i.y,n,s)}}const bp=2e3,L2e=5,$l=L2e*4;class yp{constructor(){this._position=new ye(0,0),this._scale=new ye(1,1),this._pivot=new ye(0,0),this._rotation=0,this._lastRotation=null,this._alpha=1,this._visible=!0,this._worldTransform=new Vo,this._parent=null,this._shaders=[],this._boundsNeedUpdate=!0,this._bounds=new Ot(0,0,1,1),this._localBoundsNeedUpdate=!0,this._localBounds=new Ot(0,0,1,1),this._filterRectangle=new Ot(0,0,0,0)}renderWebGL(e){ie.warn(this.constructor.name,"`renderWebGL` is abstract and not implemented in inherited class")}renderCanvas(e){ie.warn(this.constructor.name,"`renderCanvas` is abstract and not implemented in inherited class")}updateTransform(){const e=this._parent?this._parent.getWorldTransform():Vo.IDENTITY,t=this._worldTransform,r=Math.sin(this._rotation),i=Math.cos(this._rotation);t.a=i*this._scale.x,t.b=r*this._scale.x,t.c=-r*this._scale.y,t.d=i*this._scale.y,t.tx=this._position.x,t.ty=this._position.y,(this._pivot.x||this._pivot.y)&&(t.tx-=this._pivot.x*t.a+this._pivot.y*t.c,t.ty-=this._pivot.x*t.b+this._pivot.y*t.d),t.multiply(e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}addShader(e){this._shaders.push(e)}removeShader(e){const t=this._shaders.indexOf(e);return t!==-1?(this._shaders.splice(t,1),!0):!1}removeShaderAt(e){return this._shaders[e]?(this._shaders.splice(e,1),!0):!1}getBounds(){return this._bounds.clone()}getPosition(){return this._position}setPosition(e,t){this._position.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}getScale(){return this._scale}setScale(e,t){this._scale.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}getPivot(){return this._pivot}setPivot(e,t){this._pivot.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}getRotation(){return this._rotation}setRotation(e){this._rotation=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}getAlpha(){return this._alpha}setAlpha(e){this._alpha=e}getWorldAlpha(){return this._parent?this._parent.getAlpha()*this._alpha:this._alpha}getWorldTransform(){return this._worldTransform}getParent(){return this._parent}setParent(e){this._parent=e}getFilterRectangle(){return this._filterRectangle}setFilterRectangle(e){this._filterRectangle.copy(e)}isVisible(){return this._visible}setVisible(e){this._visible=e}}class Yl extends yp{constructor(){super();this._children=[],this._filters=[]}addFilter(e){this._filters.push(e)}removeFilter(e){const t=this._filters.indexOf(e);return t!==-1?(this._filters.splice(t,1),!0):!1}setFilters(e){this._filters=e}addChild(e){const t=e.getParent();t instanceof Yl&&t.removeChild(e),e.setParent(this),this._children.push(e)}prependChild(e){const t=e.getParent();t instanceof Yl&&t.removeChild(e),e.setParent(this),this._children.unshift(e)}hasChild(e){const t=this._children.indexOf(e);return t!==-1}removeChild(e){const t=this._children.indexOf(e);t!==-1?(this._children.splice(t,1),e.setParent(null)):ie.info(this.constructor.name,"Tried to remove a child that does not exist")}clearChildren(){this._children=[]}renderWebGL(e){if(!this._visible)return;const t=e.getFilterManager();this._filters&&this._filters.length&&t.pushFilters(this,this._filters),e.getCurrentObjectRenderer().start(),this._renderWebGL(e),this._children.forEach(r=>{r.renderWebGL(e)}),e.getCurrentObjectRenderer().flush(),this._filters&&this._filters.length&&t.popFilters(),e.getCurrentObjectRenderer().start()}_renderWebGL(e){}renderCanvas(e){if(!this._visible)return;const t=e.getFilterManager();this._filters&&this._filters.length&&t.pushFilters(this,this._filters),this._renderCanvas(e),this._children.forEach(r=>{r.renderCanvas(e)}),this._filters&&this._filters.length&&t.popFilters()}_renderCanvas(e){}updateTransform(){super.updateTransform(),this._children.forEach(e=>{e.updateTransform()})}getLocalBounds(){return this._localBoundsNeedUpdate&&(this._localBoundsNeedUpdate=!1),this._localBounds.clone()}getBounds(){return this._boundsNeedUpdate&&(this._boundsNeedUpdate=!1),this._bounds.clone()}getChildren(){return this._children}getFilters(){return this._filters}dispose(){}}const f2={};Tt(f2,{ColorOverlayFilter:()=>hG,OverlayFilter:()=>vG,TintFilter:()=>bG,UnpremultiplyFilter:()=>p2});"use strict";var z2e=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],N2e=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function sG(e,t,r,i,o,n){if(isNaN(n)||n<1)return;n|=0;var s=e.data,a,l,c,d,u,p,h,b,y,f,w,T,C,F,k,E,W,K,D,B,Y,de,he,ue,ct=n+n+1,H=i-1,L=o-1,M=n+1,q=M*(M+1)/2,G=new nG,we,Q=G;for(c=1;c<ct;c++)Q=Q.next=new nG,c==M&&(we=Q);Q.next=G;var oe=null,ae=null;h=p=0;var ze=z2e[n],St=N2e[n];for(l=0;l<o;l++){for(E=W=K=D=b=y=f=w=0,T=M*(B=s[p]),C=M*(Y=s[p+1]),F=M*(de=s[p+2]),k=M*(he=s[p+3]),b+=q*B,y+=q*Y,f+=q*de,w+=q*he,Q=G,c=0;c<M;c++)Q.r=B,Q.g=Y,Q.b=de,Q.a=he,Q=Q.next;for(c=1;c<M;c++)d=p+((H<c?H:c)<<2),b+=(Q.r=B=s[d])*(ue=M-c),y+=(Q.g=Y=s[d+1])*ue,f+=(Q.b=de=s[d+2])*ue,w+=(Q.a=he=s[d+3])*ue,E+=B,W+=Y,K+=de,D+=he,Q=Q.next;for(oe=G,ae=we,a=0;a<i;a++)s[p+3]=he=w*ze>>St,he!==0?(he=255/he,s[p]=(b*ze>>St)*he,s[p+1]=(y*ze>>St)*he,s[p+2]=(f*ze>>St)*he):s[p]=s[p+1]=s[p+2]=0,b-=T,y-=C,f-=F,w-=k,T-=oe.r,C-=oe.g,F-=oe.b,k-=oe.a,d=h+((d=a+n+1)<H?d:H)<<2,E+=oe.r=s[d],W+=oe.g=s[d+1],K+=oe.b=s[d+2],D+=oe.a=s[d+3],b+=E,y+=W,f+=K,w+=D,oe=oe.next,T+=B=ae.r,C+=Y=ae.g,F+=de=ae.b,k+=he=ae.a,E-=B,W-=Y,K-=de,D-=he,ae=ae.next,p+=4;h+=i}for(a=0;a<i;a++){for(W=K=D=E=y=f=w=b=0,p=a<<2,T=M*(B=s[p]),C=M*(Y=s[p+1]),F=M*(de=s[p+2]),k=M*(he=s[p+3]),b+=q*B,y+=q*Y,f+=q*de,w+=q*he,Q=G,c=0;c<M;c++)Q.r=B,Q.g=Y,Q.b=de,Q.a=he,Q=Q.next;for(u=i,c=1;c<=n;c++)p=u+a<<2,b+=(Q.r=B=s[p])*(ue=M-c),y+=(Q.g=Y=s[p+1])*ue,f+=(Q.b=de=s[p+2])*ue,w+=(Q.a=he=s[p+3])*ue,E+=B,W+=Y,K+=de,D+=he,Q=Q.next,c<L&&(u+=i);for(p=a,oe=G,ae=we,l=0;l<o;l++)d=p<<2,s[d+3]=he=w*ze>>St,he>0?(he=255/he,s[d]=b*ze>>St,s[d+1]=y*ze>>St,s[d+2]=f*ze>>St):s[d]=s[d+1]=s[d+2]=0,b-=T,y-=C,f-=F,w-=k,T-=oe.r,C-=oe.g,F-=oe.b,k-=oe.a,d=a+((d=l+M)<L?d:L)*i<<2,b+=E+=oe.r=s[d],y+=W+=oe.g=s[d+1],f+=K+=oe.b=s[d+2],w+=D+=oe.a=s[d+3],oe=oe.next,T+=B=ae.r,C+=Y=ae.g,F+=de=ae.b,k+=he=ae.a,E-=B,W-=Y,K-=de,D-=he,ae=ae.next,p+=i}}function nG(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}class Xl{constructor(e=1,t=0,r=0,i=0,o=0,n=0,s=1,a=0,l=0,c=0,d=0,u=0,p=1,h=0,b=0,y=0,f=0,w=0,T=1,C=0){this.set(e,t,r,i,o,n,s,a,l,c,d,u,p,h,b,y,f,w,T,C)}set(e,t,r,i,o,n,s,a,l,c,d,u,p,h,b,y,f,w,T,C){this.a=e,this.b=t,this.c=r,this.d=i,this.e=o,this.f=n,this.g=s,this.h=a,this.i=l,this.j=c,this.k=d,this.l=u,this.m=p,this.n=h,this.o=b,this.p=y,this.q=f,this.r=w,this.s=T,this.t=C}reset(){this.a=1,this.b=0,this.c=0,this.d=0,this.e=0,this.f=0,this.g=1,this.h=0,this.i=0,this.j=0,this.k=0,this.l=0,this.m=1,this.n=0,this.o=0,this.p=0,this.q=0,this.r=0,this.s=1,this.t=0}apply(e){const t=this.a*e.r+this.b*e.g+this.c*e.b+this.d*e.a+this.e,r=this.f*e.r+this.g*e.g+this.h*e.b+this.i*e.a+this.j,i=this.k*e.r+this.l*e.g+this.m*e.b+this.n*e.a+this.o,o=this.p*e.r+this.q*e.g+this.r*e.b+this.s*e.a+this.t;return new V(t,r,i,o)}multiply(e){let t,r,i,o,n,s,a,l,c,d,u,p,h,b,y,f,w,T,C,F;const k=e,E=this;return t=k.a*E.a+k.b*E.f+k.c*E.k+k.d*E.p,r=k.a*E.b+k.b*E.g+k.c*E.l+k.d*E.q,i=k.a*E.c+k.b*E.h+k.c*E.m+k.d*E.r,o=k.a*E.d+k.b*E.i+k.c*E.n+k.d*E.s,s=k.f*E.a+k.g*E.f+k.h*E.k+k.i*E.p,a=k.f*E.b+k.g*E.g+k.h*E.l+k.i*E.q,l=k.f*E.c+k.g*E.h+k.h*E.m+k.i*E.r,c=k.f*E.d+k.g*E.i+k.h*E.n+k.i*E.s,u=k.k*E.a+k.l*E.f+k.m*E.k+k.n*E.p,p=k.k*E.b+k.l*E.g+k.m*E.l+k.n*E.q,h=k.k*E.c+k.l*E.h+k.m*E.m+k.n*E.r,b=k.k*E.d+k.l*E.i+k.m*E.n+k.n*E.s,f=k.p*E.a+k.q*E.f+k.r*E.k+k.s*E.p,w=k.p*E.b+k.q*E.g+k.r*E.l+k.s*E.q,T=k.p*E.c+k.q*E.h+k.r*E.m+k.s*E.r,C=k.p*E.d+k.q*E.i+k.r*E.n+k.s*E.s,n=k.a*E.e+k.b*E.j+k.c*E.o+k.d*E.t+k.e,d=k.f*E.e+k.g*E.j+k.h*E.o+k.i*E.t+k.j,y=k.k*E.e+k.l*E.j+k.m*E.o+k.n*E.t+k.o,F=k.p*E.e+k.q*E.j+k.r*E.o+k.s*E.t+k.t,this.a=t,this.b=r,this.c=i,this.d=o,this.e=n,this.f=s,this.g=a,this.h=l,this.i=c,this.j=d,this.k=u,this.l=p,this.m=h,this.n=b,this.o=y,this.p=f,this.q=w,this.r=T,this.s=C,this.t=F,this}clone(){const e=new Xl;return e.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t),e}equals(e){return this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f&&this.g===e.g&&this.h===e.h&&this.i===e.i&&this.j===e.j&&this.k===e.k&&this.l===e.l&&this.m===e.m&&this.n===e.n&&this.o===e.o&&this.p===e.p&&this.q===e.q&&this.r===e.r&&this.s===e.s&&this.t===e.t}getOffsets(){return[this.e,this.j,this.o,this.t]}toString(){return`ColorMatrix( ${this.a}, ${this.b}, ${this.c}, ${this.d}, ${this.e},
      ${this.f}, ${this.g}, ${this.h}, ${this.i}, ${this.j},
      ${this.k}, ${this.l}, ${this.m}, ${this.n}, ${this.o},
      ${this.p}, ${this.q}, ${this.r}, ${this.s}, ${this.t} )`}toArray(){return"abcdefghijklmnopqrst".split("").map(e=>this[e])}static get IDENTITY(){return new Xl}static createBrightnessMatrix(e){const t=new Xl;return t.e=e,t.j=e,t.o=e,t}static createContrastMatrix(e){const t=new Xl,r=(1-e)/2;return t.a=t.g=t.m=e,t.e=t.j=t.o=r,t}static createSaturationMatrix(e=1){const t=new Xl,r=1-e,i=.213*r,o=.715*r,n=.072*r;return t.a=i+e,t.b=o,t.c=n,t.f=i,t.g=o+e,t.h=n,t.k=i,t.l=o,t.m=n+e,t}static createExposureMatrix(e=0){const t=Math.pow(2,e);return new Xl(t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0)}static createLinearMatrix(e=1,t=0){const r=new Xl;return r.a=r.g=r.m=e,r.e=r.j=r.o=t,r}}var Yf=Xl;class nx extends gi{constructor(e={},t={}){super();this.availableOptions=v(v({},Object.getPrototypeOf(this).availableOptions),t),this._onConfigurableUpdate=this._onConfigurableUpdate.bind(this),this._initOptions(e)}_buildConfigError(e){let t="";return this.constructor.name&&(t=`${this.constructor.name}: `),t+=e,new Error(t)}_onOptionsChange(){}validateSettings(){return new Promise((e,t)=>{for(const r in this.availableOptions){const i=this.availableOptions[r];if(i.required&&typeof this._options[r]=="undefined")return t(this._buildConfigError(`Option \`${r}\` is required.`))}e()})}_initOptions(e={}){this._options={};let t,r,i;const o=this;for(t in this.availableOptions){if(i=t.charAt(0).toUpperCase()+t.slice(1),r=this.availableOptions[t],[g.STRING,g.NUMBER,g.BOOLEAN,g.OBJECT,g.VECTOR2,g.COLOR,g.CONFIGURABLE,g.COLOR_MATRIX,g.ARRAY,g.IMAGE,g.FUNCTION,g.ALL].indexOf(r.type)===-1)throw this._buildConfigError(`Unknown option type: \`${r.type}\``);const n=function(a){o[`set${i}`]=function(l,c,d){o.setOption(a,l,c,d)},o[`get${i}`]=function(){return o.getOption(a)}};if(n(t),r.type===g.CONFIGURABLE&&(this._options[t]=new nx(void 0,r.structure||{}),this._options[t].on("update",this._onConfigurableUpdate)),!(t in e)||typeof e[t]=="undefined")if(typeof r.default!="undefined"){let s=r.default;typeof r.default=="function"&&(s=r.default()),this[`set${i}`](s,!1,!0)}else r.type!==g.CONFIGURABLE&&(this._options[t]=void 0)}for(t in e){if(typeof this.availableOptions[t]=="undefined")throw new Error(`Invalid option: ${t}`);typeof e[t]!="undefined"&&(i=t.charAt(0).toUpperCase()+t.slice(1),this[`set${i}`](e[t],!1,!0))}}set(e,t=!0){Object.keys(e).forEach(r=>{this.setOption(r,e[r],!1)}),this._onOptionsChange(),t&&this.emit("update",this,e)}getOption(e){return this._options[e]}hasOption(e){return!!this.availableOptions[e]}getOptionDefault(e){const t=this.availableOptions[e];if(!t)throw new Error(`Invalid option: ${e}`);return t.default}resetOptions(){this.set(this.getDefaultOptions())}getDefaultOptions(){const e={};for(const t in this.availableOptions){const r=this.availableOptions[t].default;if(typeof r=="undefined")continue;e[t]=r}return e}getOptions(){return v({},this._options)}equals(e){const t=e.getOptions();return this.optionsEqual(t)}optionsEqual(e){for(const t in e){const r=e[t];if(!this._optionEquals(t,r))return!1}return!0}_optionEquals(e,t){const r=this.availableOptions[e];if(typeof r=="undefined")throw new Error(`Invalid option: ${e}`);const i=this.availableOptions[e].type,o=this._options[e];if(o===t)return!0;if(typeof t=="undefined"||typeof o=="undefined")return!1;switch(i){case g.OBJECT:return typeof o.optionsEqual=="function"?o.optionsEqual(t._options):o===t;case g.STRING:case g.NUMBER:case g.BOOLEAN:case g.FUNCTION:case"*":return o===t;case g.VECTOR2:return o.equals(t);case g.COLOR:case g.COLOR_MATRIX:return t.equals(o);case g.CONFIGURABLE:return o.optionsEqual(t);case g.ARRAY:return this._arrayOptionEquals(e,t);case g.IMAGE:return o.src===t.src}}_arrayOptionEquals(e,t){const r=this._options[e];if(t.length!==r.length)return!1;let i=!0;for(let o=0;o<r.length;o++){const n=r[o],s=t[o];if(n instanceof nx){if(typeof s=="undefined"||!n.optionsEqual(s)){i=!1;break}}else if(s!==n){i=!1;break}}return i}serializeOptions(e=Object.keys(this._options),t=!1){const r={};return e.forEach(i=>{if(typeof this.availableOptions[i]=="undefined")return Log.warn(`Trying to serialize a key that does not exist: ${i}`);if(this.availableOptions[i].serializable===!1)return;r[i]=this.serializeOption(i,t)}),r}serializeOption(e,t=!1){const r=this.availableOptions[e],i=r.type,o=this._options[e];if(!o)return o;if(r.serializable===!1)throw new Error(`Option \`${e}\` is not serializable.`);switch(i){case g.STRING:case g.NUMBER:case g.BOOLEAN:case g.OBJECT:case g.FUNCTION:case g.ALL:return o;case g.VECTOR2:return t?o.toObject():o.clone();case g.COLOR:case g.COLOR_MATRIX:return t?o.toArray():o.clone();case g.CONFIGURABLE:return o.serializeOptions(void 0,t);case g.ARRAY:return o.slice(0);case g.IMAGE:return t?o.src:o}}setOption(e,t,r=!0,i=!1){const o=this.availableOptions[e];if(!o)throw new Error(`Invalid option: ${e}`);if(typeof o.setter!="undefined"&&(t=o.setter.call(this,t,i)),typeof o.validation!="undefined"&&o.validation(t),t===null||typeof t=="undefined"){if(o.required)throw this._buildConfigError(`Option \`${e}\` is required.`);this._options[e]=t}else switch(o.type){case g.STRING:{if(typeof t!==g.STRING)throw this._buildConfigError(`Option \`${e}\` has to be a string.`);const{available:n}=o;if(typeof n!="undefined"&&n.indexOf(t)===-1)throw this._buildConfigError(`Invalid value for \`${e}\` (valid values are: ${o.available.join(", ")})`);this._options[e]=t;break}case g.NUMBER:if(typeof t!==g.NUMBER)throw this._buildConfigError(`Option \`${e}\` has to be a number.`);this._options[e]=t;break;case g.BOOLEAN:if(typeof t!==g.BOOLEAN)throw this._buildConfigError(`Option \`${e}\` has to be a boolean.`);this._options[e]=t;break;case g.VECTOR2:if(!(t instanceof ye)&&!(typeof t=="object"&&"x"in t&&"y"in t))throw this._buildConfigError(`Option \`${e}\` has to be an instance of Vector2 or an Object holding x and y values.`);t instanceof ye?this._options[e]=t.clone():this._options[e]=ye.fromObject(t);break;case g.COLOR:if(!(t instanceof V))throw this._buildConfigError(`Option \`${e}\` has to be an instance of Color.`);this._options[e]=t;break;case g.COLOR_MATRIX:if(!(t instanceof Yf))throw this._buildConfigError(`Option \`${e}\` has to be an instance of ColorMatrix.`);this._options[e]=t.clone();break;case g.FUNCTION:if(typeof t!="function")throw this._buildConfigError(`Option \`${e}\` has to be a function.`);this._options[e]=t;break;case g.OBJECT:case"*":this._options[e]=t;break;case g.IMAGE:{const{Image:n}=Or;if(typeof t=="string"){const s=new n;Gq(s)&&(s.crossOrigin=j.getCrossOriginValue(o.crossOrigin)),s.src=t,this._options[e]=s}else if(t instanceof n||typeof HTMLCanvasElement!="undefined"&&t instanceof HTMLCanvasElement||typeof HTMLImageElement!="undefined"&&t instanceof HTMLImageElement)this._options[e]=t;else throw this._buildConfigError(`Option \`${e}\` has to be an Image, Canvas or String.`);break}case g.CONFIGURABLE:t instanceof nx?this._options[e]=t:this._options[e].set(t);break;case g.ARRAY:if(!(t instanceof Array))throw this._buildConfigError(`Option \`${e}\` has to be an Array.`);this._options[e]=t.slice(0);break;default:throw this._buildConfigError(`Unknown option type: \`${o.type}\``)}r&&(this._onOptionsChange(),this.emit("update",this,{[e]:t}))}_onConfigurableUpdate(...e){this.emit("update",...e)}hasChanges(){const e=this.getDefaultOptions();return!this.optionsEqual(e)}}var Re=nx;class sx{constructor(e,t,r,i={},o=[]){this._program=null;this._renderer=e,this._vertexSource=t,this._fragmentSource=r,this._uniforms=i,this._uniformLocations={},this._attributes=o,this._attributeLocations={},this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._init()}_init(){this._compile();const e=this._renderer.getContext();e.useProgram(this._program),this._cacheUniformLocations(),this._cacheAttributeLocations()}_onContextChange(){this._init()}setupBuffers(e,t){const r=this._renderer.getContext();r.bindBuffer(r.ARRAY_BUFFER,e),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t),r.vertexAttribPointer(this._attributeLocations.a_position,2,r.FLOAT,!1,$l,0),r.vertexAttribPointer(this._attributeLocations.a_texCoord,2,r.FLOAT,!1,$l,2*4),r.vertexAttribPointer(this._attributeLocations.a_color,4,r.UNSIGNED_BYTE,!0,$l,4*4)}syncUniforms(){Object.keys(this._uniforms).forEach(e=>{this.syncUniform(e)})}syncUniform(e){const t=this._renderer.getContext(),r=this._uniforms[e],i=this._uniformLocations[e];switch(r.type){case $.SAMPLER2D:t.uniform1i(i,r.value);break;case $.INT:case $.INT1:t.uniform1i(i,r.value);break;case $.INT2:t.uniform2i(i,r.value[0],r.value[1]);break;case $.INT3:t.uniform3i(i,r.value[0],r.value[1],r.value[2]);break;case $.INT4:t.uniform4i(i,r.value[0],r.value[1],r.value[2],r.value[3]);break;case $.FLOAT:case $.FLOAT1:t.uniform1f(i,r.value);break;case $.FLOAT2:t.uniform2f(i,r.value[0],r.value[1]);break;case $.FLOAT3:t.uniform3f(i,r.value[0],r.value[1],r.value[2]);break;case $.FLOAT4:t.uniform4f(i,r.value[0],r.value[1],r.value[2],r.value[3]);break;case $.FLOAT_VECTOR2:t.uniform2fv(i,r.value);break;case $.MAT3:case $.MAT3FV:t.uniformMatrix3fv(i,!1,r.value);break;case $.MAT4:t.uniformMatrix4fv(i,!1,r.value);break;default:ie.warn(this.constructor.name,`Unknown uniform type: ${r.type}`)}}_cacheAttributeLocations(){const e=this._renderer.getContext();this._attributes.forEach(t=>{this._program&&(this._attributeLocations[t]=e.getAttribLocation(this._program,t))})}_cacheUniformLocations(){const e=this._renderer.getContext(),t=Object.keys(this._uniforms);t.forEach(r=>{if(this._program){const i=e.getUniformLocation(this._program,r);i&&(this._uniformLocations[r]=i)}})}_addPrecisionToSource(e){const t=this._renderer.getMaxFloatPrecision();let r=Go.Medium;return j.isMobile()&&t===Go.High&&(r=Go.High),`precision ${r} float;
${e}`}_compile(){const e=this._renderer.getContext(),t=this._compileShader(e.VERTEX_SHADER,this._vertexSource);this._vertexShader=t;const r=this._addPrecisionToSource(this._fragmentSource),i=this._compileShader(e.FRAGMENT_SHADER,r);this._fragmentShader=i;const o=e.createProgram();if(!o)return;e.attachShader(o,t),e.attachShader(o,i),e.linkProgram(o);const n=e.getProgramParameter(o,e.LINK_STATUS);if(n)this._program=o;else{let s=e.getProgramInfoLog(o);e.isContextLost()&&(s="WebGL context lost"),e.deleteProgram(o),ie.error(this.constructor.name,`WebGL program linking error: ${s}`)}}_compileShader(e,t){const r=this._renderer.getContext(),i=r.createShader(e);if(!i)throw new Error(`Cannot create shared: ${JSON.stringify(e)}`);r.shaderSource(i,t),r.compileShader(i);const o=r.getShaderParameter(i,r.COMPILE_STATUS);if(!o){let n=r.getShaderInfoLog(i);r.isContextLost()&&(n="WebGL context lost"),r.deleteShader(i),ie.error(this.constructor.name,`WebGL shader compilation error: ${n}`)}return i}setUniform(e,t,r=!1){this._uniforms[e].value=t,r&&this.syncUniform(e)}setUniforms(e,t=!1){Object.keys(e).forEach(r=>{this._uniforms[r].value=e[r],t&&this.syncUniform(r)})}getUniforms(){return this._uniforms}getAttributes(){return this._attributes}getAttributeLocations(){return this._attributeLocations}getProgram(){return this._program}dispose(){const e=this._renderer.getContext();e.deleteProgram(this._program),e.deleteShader(this._vertexShader),e.deleteShader(this._fragmentShader),this._renderer.off("context",this._onContextChange)}}var aG=`uniform sampler2D u_image;
varying vec2 v_texCoord;
varying vec4 v_color;

void main() {
  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;
}
`,lG=`attribute vec2 a_position;
attribute vec2 a_texCoord;
attribute vec4 a_color;
varying vec2 v_texCoord;
varying vec4 v_color;
uniform mat3 u_projMatrix;

void main() {
  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);
  v_texCoord = a_texCoord;
  v_color = vec4(a_color.rgb * a_color.a, a_color.a);
}
`;const U2e=new Vo,La={vertexSource:lG,fragmentSource:aG,uniforms:{u_image:{type:$.SAMPLER2D,value:0},u_projMatrix:{type:$.MAT3,value:U2e.toArray()}},attributes:["a_position","a_texCoord","a_color"]};class cG extends sx{constructor(e,t=La.vertexSource,r=La.fragmentSource){super(e,t,r,La.uniforms,La.attributes)}}class Ds extends Re{constructor(e={},t={}){super(e,t);this._initOptions(e)}_initOptions(e={}){this._shaders=[],this._availableUniforms=La.uniforms,this._attributes=La.attributes,this._vertexSource=La.vertexSource,this._fragmentSource=La.fragmentSource,this._initUniforms(),super._initOptions(e)}_initUniforms(){this._uniforms={};for(const e in this._availableUniforms){const t=this._availableUniforms[e];this._uniforms[e]={type:t.type,value:t.default||null}}for(const e in this.availableOptions){const t=this.availableOptions[e];t.uniformType?this._uniforms[`u_${e}`]={type:t.uniformType,value:t.default||null}:ie.trace(this.constructor.name,`Option \`${e}\` is missing a \`uniformType\`!`)}}setOption(e,t,r=!0){super.setOption(e,t,r);let i=t;const o=this.availableOptions[e];if(!o.uniformType)return;const n=`u_${e}`;switch(o.type){case g.COLOR:o.uniformType===$.FLOAT4?i=t.toGLColor():o.uniformType===$.FLOAT3&&(i=t.toRGBGLColor());break;case g.VECTOR2:i=[t.x,t.y];break;case g.COLOR_MATRIX:{i=[t.a,t.b,t.c,t.d,t.f,t.g,t.h,t.i,t.k,t.l,t.m,t.n,t.p,t.q,t.r,t.s];const s=[t.e,t.j,t.o,t.t];this._uniforms[`${n}_vec`]={value:s,type:$.FLOAT4}}}this.setUniform(n,i)}setUniform(e,t,r=!1){this._uniforms[e].value=t}setUniforms(e,t=!1){Object.entries(e).forEach(([r,i])=>{this._uniforms[r].value=i,t&&this.syncUniform(r)})}syncUniform(e){this._shaders.forEach(t=>{t.syncUniform(e)})}syncUniforms(){this._shaders.forEach(e=>{e.syncUniforms()})}getShaderForRenderer(e){const{id:t}=e;this._shaders||(this._shaders=[]);let r=this._shaders[t];return r||(r=new sx(e,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes),this._shaders[t]=r),r}apply(e,t,r,i=!1){pp(e)?this._applyWebGL(e,t,r,i):this._applyCanvas(e,t,r,i)}_applyWebGL(e,t,r,i=!1){const o=e.getContext(),n=this.getShaderForRenderer(e);e.setRenderTarget(r),i&&r.clear(),e.setShader(n);const s=e.getCurrentRenderTarget().getProjectionMatrix().toArray();n.setUniform("u_projMatrix",s),n.syncUniforms(),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.getTexture()),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0)}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=r.getContext();ie.warn(this.constructor.name,"`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`."),n.clearRect(0,0,o.width,o.height),n.drawImage(o,0,0)}dispose(){this._shaders.forEach(e=>e.dispose()),this._shaders=[]}_blurImage(e,t,r){const i=10,o=e.getCanvas(),n=Math.min(1,i/(r*Math.min(o.width,o.height))),s=j.createCanvas();s.width=Math.round(o.width*n),s.height=Math.round(o.height*n);const a=s.getContext("2d");a.drawImage(o,0,0,o.width,o.height,0,0,s.width,s.height);const l=r*Math.min(s.width,s.height),c=a.getImageData(0,0,s.width,s.height);sG(c,0,0,s.width,s.height,l),a.putImageData(c,0,0),t.getContext().drawImage(s,0,0,s.width,s.height,0,0,o.width,o.height)}}var dG=`uniform sampler2D u_image;
varying vec2 v_texCoord;
varying vec4 v_color;

void main() {
  vec4 color = texture2D(u_image, v_texCoord);
  gl_FragColor = vec4(color.a > 0. ? color.rgb / color.a : vec3(0), color.a);
}
`;class p2 extends Ds{constructor(){super();this._fragmentSource=dG}}var uG=`uniform sampler2D u_image;
varying vec2 v_texCoord;
uniform vec4 u_color;

void main() {
  vec4 color = texture2D(u_image, v_texCoord);
  gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;
}
`;const{OptionType:j2e,UniformType:q2e}=Mi;class pG extends Ds{constructor(...e){super(...e);this._fragmentSource=uG}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=t.getContext(),s=r.getContext(),{color:a}=this._options,l=n.getImageData(0,0,o.width,o.height),c=s.getImageData(0,0,o.width,o.height),d=o.width*o.height,u=new V,p=new V;for(let h=0;h<d*4;h+=4){u.set(l.data[h]/255,l.data[h+1]/255,l.data[h+2]/255,l.data[h+3]/255),p.set(c.data[h]/255,c.data[h+1]/255,c.data[h+2]/255,c.data[h+3]/255);const b=p.r+u.a*(u.r-p.r);c.data[h]=(b+u.a*(a.r-b))*255;const y=p.g+u.a*(u.g-p.g);c.data[h+1]=(y+u.a*(a.g-y))*255;const f=p.b+u.a*(u.b-p.b);c.data[h+2]=(f+u.a*(a.b-f))*255}s.putImageData(c,0,0)}}pG.prototype.availableOptions={color:{type:j2e.COLOR,default:V.WHITE,uniformType:q2e.FLOAT4}};var hG=pG;var mG=`uniform sampler2D u_image;
varying vec2 v_texCoord;
uniform vec4 u_color;
uniform int u_mode;

vec3 W = vec3(0.2125, 0.7154, 0.0721);

void main() {
  vec4 color = texture2D(u_image, v_texCoord);
  if (u_mode == 0) {
    gl_FragColor = color * color.a;
  } else if (u_mode == 1) {
    gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;
  } else if (u_mode == 2) {
    float luminance = dot(color.rgb, W);
    vec3 colorized = vec3(luminance) * u_color.rgb;
    gl_FragColor = vec4(mix(color.rgb, colorized, u_color.a), color.a) * color.a;
  }
}
`;const{OptionType:fG,UniformType:gG}=Mi;class vp extends Ds{constructor(...e){super(...e);this._fragmentSource=mG}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=t.getContext(),s=r.getContext(),a=n.getImageData(0,0,o.width,o.height),{mode:l,color:c}=this._options,{r:d,g:u,b:p,a:h}=c,b=[.2125,.7154,.0721];switch(l){case vp.MODES.SOLID:for(let y=0;y<o.width*o.height;y++){const f=y*4;a.data[f]+=(d*255-a.data[f])*h,a.data[f+1]+=(u*255-a.data[f+1])*h,a.data[f+2]+=(p*255-a.data[f+2])*h}break;case vp.MODES.COLORIZED:for(let y=0;y<o.width*o.height;y++){const f=y*4,w=a.data[f]/255*b[0]+a.data[f+1]/255*b[1]+a.data[f+2]/255*b[2],T=new V(w*d,w*u,w*p);a.data[f]+=(T.r*255-a.data[f])*h,a.data[f+1]+=(T.g*255-a.data[f+1])*h,a.data[f+2]+=(T.b*255-a.data[f+2])*h}break}s.putImageData(a,0,0)}}vp.MODES={NONE:0,SOLID:1,COLORIZED:2};vp.prototype.availableOptions={color:{type:fG.COLOR,default:V.WHITE,uniformType:gG.FLOAT4},mode:{type:fG.NUMBER,default:vp.MODES.NONE,uniformType:gG.INT}};var bG=vp;var yG=`uniform sampler2D u_image;
varying vec2 v_texCoord;
uniform sampler2D u_overlayImage;
uniform int u_blendMode;
uniform float u_alpha;

const float EPSILON = 0.000001;

vec4 overlay(vec4 a, vec4 b) {
    vec3 result = mix(
          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),
          2.0 * a.rgb * b.rgb,
          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)
      );
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 hardLight(vec4 b, vec4 a) {
    vec3 result = mix(
          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),
          2.0 * a.rgb * b.rgb,
          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)
      );
    return mix(b, vec4(result, b.a), u_alpha * a.a);
}

vec4 softLight(vec4 a, vec4 b) {
    vec3 result = mix(
          2.0 * a.rgb * (1.0 - b.rgb) + (2.0 * b.rgb - 1.0) * sqrt(a.rgb),
          2.0 * a.rgb * b.rgb + a.rgb * a.rgb * (1.0 - 2.0 * b.rgb),
          vec3(b.r < 0.5, b.g < 0.5, b.b < 0.5)
      );
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 multiply(vec4 a, vec4 b) {
    vec3 result = a.rgb * b.rgb;
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 darken(vec4 a, vec4 b) {
    vec3 result = min(a.rgb, b.rgb);
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 lighten(vec4 a, vec4 b) {
    vec3 result = max(a.rgb, b.rgb);
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 screen(vec4 a, vec4 b) {
    vec3 result = 1.0 - (1.0 - a.rgb) * (1.0 - b.rgb);
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 colorBurn(vec4 a, vec4 b) {
    vec3 result = clamp(1.0 - (1.0 - a.rgb) / max(b.rgb, EPSILON), 0.0, 1.0);
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 normal(vec4 a, vec4 b) {
    return mix(a, vec4(b.rgb, a.a), u_alpha * b.a);
}

void main() {
  vec4 color = texture2D(u_image, v_texCoord);
  vec4 overlayColor = texture2D(u_overlayImage, v_texCoord);

  vec4 resultColor;
  if (u_blendMode == 0) {
    resultColor = normal(color, overlayColor);
  } else if (u_blendMode == 1) {
    resultColor = overlay(color, overlayColor);
  } else if (u_blendMode == 2) {
    resultColor = hardLight(color, overlayColor);
  } else if (u_blendMode == 3) {
    resultColor = softLight(color, overlayColor);
  } else if (u_blendMode == 4) {
    resultColor = multiply(color, overlayColor);
  } else if (u_blendMode == 5) {
    resultColor = darken(color, overlayColor);
  } else if (u_blendMode == 6) {
    resultColor = lighten(color, overlayColor);
  } else if (u_blendMode == 7) {
    resultColor = screen(color, overlayColor);
  } else if (u_blendMode == 8) {
    resultColor = colorBurn(color, overlayColor);
  }
  gl_FragColor = vec4(resultColor.rgb * resultColor.a, resultColor.a);
}
`;const{OptionType:ax,UniformType:h2}=Mi,m2=1e-6;class mo extends Ds{constructor(...e){super(...e);this._fragmentSource=yG,this._lastImage=null}_applyCanvas(e,t,r,i=!1){const o=this._options.overlayTexture.getRenderTarget().getContext(),n=t.getCanvas(),s=t.getContext(),a=r.getContext(),l=s.getImageData(0,0,n.width,n.height),c=o.getImageData(0,0,n.width,n.height),{blendMode:d,alpha:u}=this._options,p=new V,h=new V,b=new V;for(let y=0;y<n.width*n.height*4;y+=4){p.set(l.data[y]/255,l.data[y+1]/255,l.data[y+2]/255,l.data[y+3]/255),h.set(c.data[y]/255,c.data[y+1]/255,c.data[y+2]/255,c.data[y+3]/255);let f,w,T,C,F,k,E,W,K;switch(d){case mo.BLEND_MODES.NORMAL:b.set(p.r+h.a*u*(h.r-p.r),p.g+h.a*u*(h.g-p.g),p.b+h.a*u*(h.b-p.b),p.a);break;case mo.BLEND_MODES.OVERLAY:f=1-2*(1-p.r)*(1-h.r),w=2*p.r*h.r,T=f+(p.r<.5?1:0)*(w-f),C=1-2*(1-p.g)*(1-h.g),F=2*p.g*h.g,k=C+(p.g<.5?1:0)*(F-C),E=1-2*(1-p.b)*(1-h.b),W=2*p.b*h.b,K=E+(p.b<.5?1:0)*(W-E),b.set(p.r+h.a*u*(T-p.r),p.g+h.a*u*(k-p.g),p.b+h.a*u*(K-p.b),p.a);break;case mo.BLEND_MODES.HARD_LIGHT:f=1-2*(1-h.r)*(1-p.r),w=2*h.r*p.r,T=f+(h.r<.5?1:0)*(w-f),C=1-2*(1-h.g)*(1-p.g),F=2*h.g*p.g,k=C+(h.g<.5?1:0)*(F-C),E=1-2*(1-h.b)*(1-p.b),W=2*h.b*p.b,K=E+(h.b<.5?1:0)*(W-E),b.set(p.r+h.a*u*(T-p.r),p.g+h.a*u*(k-p.g),p.b+h.a*u*(K-p.b),p.a);break;case mo.BLEND_MODES.SOFT_LIGHT:f=2*p.r*(1-h.r)+(2*h.r-1)*Math.sqrt(p.r),w=2*p.r*h.r+p.r*p.r*(1-2*h.r),T=f+(h.r<.5?1:0)*(w-f),C=2*p.g*(1-h.g)+(2*h.g-1)*Math.sqrt(p.g),F=2*p.g*h.g+p.g*p.g*(1-2*h.g),k=C+(h.g<.5?1:0)*(F-C),E=2*p.b*(1-h.b)+(2*h.b-1)*Math.sqrt(p.b),W=2*p.b*h.b+p.b*p.b*(1-2*h.b),K=E+(h.b<.5?1:0)*(W-E),b.set(p.r+h.a*u*(T-p.r),p.g+h.a*u*(k-p.g),p.b+h.a*u*(K-p.b),p.a);break;case mo.BLEND_MODES.MULTIPLY:T=p.r*h.r,k=p.g*h.g,K=p.b*h.b,b.set(p.r+h.a*u*(T-p.r),p.g+h.a*u*(k-p.g),p.b+h.a*u*(K-p.b),p.a);break;case mo.BLEND_MODES.DARKEN:T=Math.min(p.r,h.r),k=Math.min(p.g,h.g),K=Math.min(p.b,h.b),b.set(p.r+h.a*u*(T-p.r),p.g+h.a*u*(k-p.g),p.b+h.a*u*(K-p.b),p.a);break;case mo.BLEND_MODES.LIGHTEN:T=Math.max(p.r,h.r),k=Math.max(p.g,h.g),K=Math.max(p.b,h.b),b.set(p.r+h.a*u*(T-p.r),p.g+h.a*u*(k-p.g),p.b+h.a*u*(K-p.b),p.a);break;case mo.BLEND_MODES.SCREEN:T=1-(1-p.r)*(1-h.r),k=1-(1-p.g)*(1-h.g),K=1-(1-p.b)*(1-h.b),b.set(p.r+h.a*u*(T-p.r),p.g+h.a*u*(k-p.g),p.b+h.a*u*(K-p.b),p.a);break;case mo.BLEND_MODES.COLOR_BURN:T=Math.max(0,Math.min(1,1-(1-p.r)/Math.max(h.r,m2))),k=Math.max(0,Math.min(1,1-(1-p.g)/Math.max(h.g,m2))),K=Math.max(0,Math.min(1,1-(1-p.b)/Math.max(h.b,m2))),b.set(p.r+h.a*u*(T-p.r),p.g+h.a*u*(k-p.g),p.b+h.a*u*(K-p.b),p.a);break}l.data[y]=b.r*255,l.data[y+1]=b.g*255,l.data[y+2]=b.b*255,l.data[y+3]=b.a*255}a.putImageData(l,0,0)}}mo.BLEND_MODES={NORMAL:0,OVERLAY:1,HARD_LIGHT:2,SOFT_LIGHT:3,MULTIPLY:4,DARKEN:5,LIGHTEN:6,SCREEN:7,COLOR_BURN:8};mo.prototype.availableOptions={blendMode:{type:ax.NUMBER,default:mo.BLEND_MODES.NORMAL,uniformType:h2.INT},overlayImage:{type:ax.NUMBER,required:!0,uniformType:h2.SAMPLER2D},overlayTexture:{type:ax.OBJECT,required:!0},alpha:{type:ax.NUMBER,default:1,uniformType:h2.FLOAT}};var vG=mo;var Ko;(function(e){e[e.Nearest=0]="Nearest",e[e.Linear=1]="Linear",e[e.Bilinear=2]="Bilinear",e[e.Trilinear=3]="Trilinear"})(Ko||(Ko={}));var Jl;(function(e){e[e.ClampToEdge=0]="ClampToEdge",e[e.Repeat=1]="Repeat",e[e.MirroredRepeat=2]="MirroredRepeat"})(Jl||(Jl={}));const _G={[1]:"LINEAR",[0]:"NEAREST",[2]:"LINEAR_MIPMAP_NEAREST",[3]:"LINEAR_MIPMAP_LINEAR"};class At extends gi{constructor(e){super();this._renderers=[];this._glTextures={};this._dirty=!0;this._mipMapping=!1;this._glUnit=0;this._magFilter=At.DefaultMagFilter;this._minFilter=At.DefaultMinFilter;this._repeatX=0;this._repeatY=0;this._pixelRatio=1;this._loaded=!1;this._frame=new Ot(0,0,100,100);this._onSourceLoaded=this._onSourceLoaded.bind(this),this._source=e,this._loadSource()}resizeTo(e){if(this._frame.width===e.x&&this._frame.height===e.y)return;this._frame.width=e.x,this._frame.height=e.y,this._dirty=!0}_loadSource(){const e=this._source;if(!e)return;if(Or.isCanvas(e))return this._onSourceLoaded();if(e.complete)return this._onSourceLoaded();e.addEventListener&&e.addEventListener("load",this._onSourceLoaded)}_onSourceLoaded(){this._loaded=!0,this.emit("loaded"),this.update()}_updateGLFilters(){if(!this._source)return;const e=new ye(this._source.width,this._source.height);j.isPowerOfTwo(e)?(ie.info(this.constructor.name,"Mip-mapping enabled"),this._minFilter=At.TrilinearFilter,this._mipMapping=!0):(this._minFilter=At.LinearFilter,this._mipMapping=!1)}update(){if(!this._source)return;(this._frame.width!==this._source.width||this._frame.height!==this._source.height)&&(this._frame=new Ot(0,0,this._source.width,this._source.height),this._dirty=!0),this._updateGLFilters(),this.emit("update")}getRenderers(){return[...this._renderers]}getGLFilter(e,t){switch(t){case"min":return e[_G[this._minFilter]];case"mag":return e[_G[this._magFilter]]}}isLoaded(){return this._loaded}setLoaded(e){this._loaded=e}getSource(){return this._source}setSource(e){this._source=e}getGLTextureForRenderer(e){return this._glTextures[e.id]}setGLTextureForRenderer(e,t){this._renderers[t.id]=t,this._glTextures[t.id]=e}getFrame(){return this._frame}setFrame(e){this._frame=e}getDimensions(){return new ye(this._frame.width,this._frame.height)}getPixelRatio(){return this._pixelRatio}setPixelRatio(e){this._pixelRatio=e}getGLUnit(){return this._glUnit}setGLUnit(e){this._glUnit=e}setMinFilter(e){this._minFilter=e}getMinFilter(){return this._minFilter}setMagFilter(e){this._magFilter=e}getMagFilter(){return this._magFilter}setRepeatX(e){this._repeatX=e}getRepeatX(){return this._repeatX}setRepeatY(e){this._repeatY=e}getRepeatY(){return this._repeatY}getGLRepeat(e,t){const r=t==="x"?this.getRepeatX():this.getRepeatY();switch(r){case 0:return e.CLAMP_TO_EDGE;case 1:return e.REPEAT;case 2:return e.MIRRORED_REPEAT;default:return 0}}isDirty(){return this._dirty}setDirty(e){this._dirty=e}disposeGLTextures(){this._renderers.forEach(e=>{pp(e)&&this.disposeGLTexturesForRenderer(e)})}disposeGLTexturesForRenderer(e){if(!this._glTextures[e.id])return;const t=e.getContext();t.deleteTexture(this._glTextures[e.id]),delete this._glTextures[e.id],this._renderers[e.id]||delete this._renderers[e.id]}isMipMappingEnabled(){return this._mipMapping}setMipMappingEnabled(e){this._mipMapping=e}dispose(){this.disposeGLTextures(),this._source=void 0}}At.NearestFilter=0,At.LinearFilter=1,At.BilinearFilter=2,At.TrilinearFilter=3,At.DefaultMagFilter=0,At.DefaultMinFilter=1,At.Repeat=1,At._id=0;class Zl{constructor(e,t,r,i=Or.createCanvas(),o){this._width=e,this._height=t,this._pixelRatio=r,this._baseTexture=new At,this._canvas=i;const n=o||this._canvas.getContext("2d");if(!n)throw new Error("Cannot get canvas context");this._context=n,this._baseTexture.setSource(this._canvas),this._canvas.width=this._width*this._pixelRatio,this._canvas.height=this._height*this._pixelRatio,this._filterStack=[{renderTarget:this,filters:[]}]}clear(){const e=this._context;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)}resizeTo(e){this._baseTexture.resizeTo(e),this._width!==e.x&&(this._width=e.x,this._canvas.width=this._width*this._pixelRatio),this._height!==e.y&&(this._height=e.y,this._canvas.height=this._height*this._pixelRatio)}getCanvas(){return this._canvas}getContext(){return this._context}getFilterStack(){return this._filterStack}getWidth(){return this._width}getHeight(){return this._height}getPixelRatio(){return this._pixelRatio}setPixelRatio(e){this._pixelRatio=e}getDimensions(){return new ye(this._width,this._height)}getBaseTexture(){return this._baseTexture}dispose(){delete this._canvas,delete this._context,this._baseTexture.dispose()}}class _p{constructor(e){this._renderer=e,this._filterStack=[{renderTarget:e.getCurrentRenderTarget(),filters:[]}],this._textures=[],this._textureFrame=new Ot(0,0,e.getWidth(),e.getHeight())}resizeTo(e){this._textureFrame.width=e.x,this._textureFrame.height=e.y,this._textures.forEach(t=>t.resizeTo(e))}pushFilters(e,t){this._currentFrame=e.getBounds();const r=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(r),this._filterStack.push({renderTarget:r,filters:t}),r.clear()}popFilters(){const e=this._filterStack.pop();if(!e)return;const{filters:t,renderTarget:r}=e,i=this._filterStack[this._filterStack.length-1],o=r,n=i.renderTarget;if(t.length===1){const s=t[0];s.apply(this._renderer,o,n),this._textures.push(o)}else this._applyFilters(t,o,n);return t}_applyFilters(e,t,r){let i=t,o=this._getOrCreateRenderTarget(!0);const n=e[e.length-1];e.forEach(s=>{const a=s===n;if(a)s.apply(this._renderer,i,r);else{s.apply(this._renderer,i,o);const l=i;i=o,o=l}}),this._textures.push(i),this._textures.push(o)}_getOrCreateRenderTarget(e=!1){let t=this._textures.pop();return t||(t=new Zl(this._textureFrame.width,this._textureFrame.height,1)),e&&t.clear(),t}setFilterStack(e){this._filterStack=e}dispose(){}}const wG=typeof window!="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):Jf();class G2e{constructor(e){this._context=e,this._tracking=!1;const t=this;for(const r in e){const i=e[r];typeof i=="function"?this[r]=function(...o){const n=e[r];if(!t._tracking)return n.apply(e,o);const s=wG(),a=n.apply(e,o),l=wG()-s,c={functionName:r,arguments:o,duration:l};return t._trackedCalls.push(c),a}:this._makePropertyWrapper(r)}}_makePropertyWrapper(e){const t=["_context","_trackedCalls","_tracking"];if(t.indexOf(e)!==-1)return;const r=this._context;this.__defineGetter__(e,()=>r[e]),this.__defineSetter__(e,i=>{r[e]=i})}startFrame(){this._tracking=!0,this._trackedCalls=[]}endFrame(){const e="Rendering";ie.log(e,"Frame rendering results:"),ie.log(e,`Context calls: ${this._trackedCalls.length}`);const t={};this._trackedCalls.forEach(({functionName:i,duration:o})=>{t[i]=t[i]||{totalDuration:0,calls:0},t[i].totalDuration+=o,t[i].calls++});let r=[];for(const i in t){const o=t[i];o.averageDuration=o.totalDuration/o.calls,r.push({functionName:i,data:o})}r.sort((i,o)=>o.data.totalDuration-i.data.totalDuration),r=r.slice(0,3),r.forEach(i=>{ie.log(e,`${i.functionName}: ${i.data.calls} calls, ${i.data.totalDuration.toFixed(2)}ms`)})}}var lx=G2e;class cx extends gi{constructor(e=800,t=600,r){super();this._maxTextureSize=null;this._options=v(v({debug:!1},r),{pixelRatio:1,transparent:!1,clearColor:V.BLACK}),this.setMaxListeners(0),this._width=e,this._height=t,this._dimensions=new ye(this._width,this._height),this._maxTextureSize=null,this._pixelRatio=this._options.pixelRatio,this._canvas=this._options.canvas,this._clearColor=this._options.transparent?V.TRANSPARENT:this._options.clearColor||V.BLACK}setCanvas(e){const t=this._canvas;this._canvas=e,t!==e&&(this._createContext(),this._onBeforeContext(),this._setupContext()),this.resizeTo(new ye(this._width,this._height))}getCanvas(){return this._canvas}_onBeforeContext(){}resizeTo(e,t=!0){this._width=e.x*this._pixelRatio,this._height=e.y*this._pixelRatio,t&&this._canvas&&(this._canvas.width=this._width,this._canvas.height=this._height,"style"in this._canvas&&(this._canvas.style.width=`${this._width/this._pixelRatio}px`,this._canvas.style.height=`${this._height/this._pixelRatio}px`)),this._dimensions=e.clone()}_createContext(){ie.warn(this.constructor.name,"`_createContext` is abstract and not implemented in inherited class")}_setupContext(){ie.warn(this.constructor.name,"`_setupContext` is abstract and not implemented in inherited class")}render(e){ie.warn(this.constructor.name,"`render` is abstract and not implemented in inherited class")}getMaxDimensions(){return null}getContext(){return this._context}getWidth(){return this._dimensions.x}getHeight(){return this._dimensions.y}getDimensions(){return this._dimensions}getPixelRatio(){return this._pixelRatio}setPixelRatio(e){this._pixelRatio=e,this._defaultRenderTarget&&this._defaultRenderTarget.setPixelRatio(e)}getMaxTextureSize(){return this._maxTextureSize}getFilterManager(){return this._filterManager}setFilterManager(e){this._filterManager=e}isOfType(e){return this._type===e}dispose(){ie.warn(this.constructor.name,"`dispose` is abstract and not implemented in inherited class")}}const{RendererType:SG}=Mi;class xp extends cx{constructor(e=800,t=600,r){super(e,t,v({},r));this.id=0;this.setCanvas((r==null?void 0:r.canvas)||Or.createCanvas()),this._type=SG.CANVAS}_createContext(){const e=this._canvas;let t=e.getContext("2d");return t?(this._options.debug&&(t=new lx(t)),this.id=xp.contextId++,this._context=t,this.emit("context",t),t):void 0}_setupContext(){const e=this._context;"imageSmoothingEnabled"in e?e.imageSmoothingEnabled=!0:["moz","webkit","ms"].forEach(t=>{e[t]&&(e[t]=!0)}),this._defaultRenderTarget=new Zl(this._width,this._height,this._pixelRatio,this._canvas,this._context),this.setRenderTarget(this._defaultRenderTarget),this._filterManager=new _p(this)}render(e){const t=this._renderTarget.getContext(),r=e.getParent();e.setParent(new yp),e.updateTransform(),r&&e.setParent(r),t.setTransform(1,0,0,1,0,0),t.globalAlpha=1;const{width:i,height:o}=this._canvas;t.clearRect(0,0,i,o),this._clearColor.a!==0&&(t.save(),t.fillStyle=this._clearColor.toRGBA(),t.fillRect(0,0,i,o),t.restore()),this.renderDisplayObject(e,this._renderTarget)}renderDisplayObject(e,t){const r=this._renderTarget;this._filterManager.setFilterStack(t.getFilterStack()),this.setRenderTarget(t),e.renderCanvas(this),this.setRenderTarget(r)}getCurrentRenderTarget(){return this._renderTarget}setRenderTarget(e){this._renderTarget=e}getContext(){return this._renderTarget.getContext()}dispose(){this._filterManager.dispose()}}xp.contextId=0,xp.type=SG.CANVAS;const CG=e=>{if(typeof window!="undefined"){const{WebGLDebugUtils:t}=window;if(t){const r=(i,o)=>{console.error(`gl.${i}(${t.glFunctionArgsToString(i,o)})`)};e=t.makeDebugContext(e,null,r)}}return e};class TG{constructor(e){this.vertices=new Float32Array([0,0,100,0,100,100,0,100]);this.uvs=new Float32Array([0,0,1,0,1,1,0,1]);this.indices=new Uint16Array([0,1,2,0,3,2]);this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]);this.vertexBuffer=null;this.indexBuffer=null;this.gl=e,this.initBuffers(),this.uploadBuffers()}map(e,t){const{x:r,y:i}=t;this.uvs[2]=t.width/e.width,this.uvs[4]=this.uvs[2],this.uvs[5]=t.height/e.height,this.uvs[7]=this.uvs[5],this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+t.width,this.vertices[3]=i,this.vertices[4]=this.vertices[2],this.vertices[5]=i+t.height,this.vertices[6]=r,this.vertices[7]=this.vertices[5],this.uploadBuffers()}getVertexBuffer(){return this.vertexBuffer}getIndexBuffer(){return this.indexBuffer}dispose(){this.cleanBuffer()}initBuffers(){const{gl:e}=this;this.cleanBuffer(),this.vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,(8+8+16)*4,e.DYNAMIC_DRAW),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)}uploadBuffers(){const{gl:e}=this;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices),e.bufferSubData(e.ARRAY_BUFFER,8*4,this.uvs),e.bufferSubData(e.ARRAY_BUFFER,(8+8)*4,this.colors)}cleanBuffer(){const{gl:e}=this;e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer)}}class Ql{constructor(e,t,r,i,o=!1){this._renderer=e,this._gl=e.getContext(),this._width=t,this._height=r,this._frame=null,this._pixelRatio=i,this._projectionMatrix=new Vo,this._mipMapping=!1,this._baseTexture=new At;const n=this._baseTexture.getFrame();n.width=t,n.height=r,this._baseTexture.setPixelRatio(i),this._baseTexture.setLoaded(!0),this._framebuffer=null,this._isRoot=o,this._filterStack=[{renderTarget:this,filters:[]}],o||this._initFrameBuffer()}resizeTo(e){this._width=e.x|0,this._height=e.y|0,this._baseTexture.resizeTo(e),this._isRoot||this._resizeTexture(),this._baseTexture.setMinFilter(this._getMinFilter()),this._baseTexture.setMagFilter(this._getMagFilter()),this._calculateProjectionMatrix()}_getMinFilter(){let e=At.DefaultMinFilter;return this._mipMapping&&(e=At.TrilinearFilter),e}_getMagFilter(){return At.DefaultMagFilter}_resizeTexture(){const e=this._gl,t=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this._texture&&(e.deleteTexture(this._texture),this._texture=null),this._texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,r,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),this._texture&&this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this._renderer._options.debug&&pd.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",e);const i=new ye(this._width,this._height);j.isPowerOfTwo(i)?(ie.info("WebGLRenderTarget","Mip-mapping enabled"),this._mipMapping=!0):this._mipMapping=!1,this._baseTexture.setMipMappingEnabled(this._mipMapping)}activate(){const e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),this._calculateProjectionMatrix(),e.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),e.disable(e.STENCIL_TEST)}clear(e=V.TRANSPARENT){const t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),this._renderer._options.debug&&pd.checkFramebufferStatus("WebGLRenderTarget#clear",t),t.clearColor.apply(t,e.toGLColor()),t.clear(t.COLOR_BUFFER_BIT)}_calculateProjectionMatrix(){const e=this._projectionMatrix;e.reset();const t=this._frame||new Ot(0,0,this._width,this._height),{x:r,y:i}=t;this._isRoot?(e.a=1/this._width*2,e.d=-1/this._height*2,e.tx=-1-r*e.a,e.ty=1-i*e.d):(e.a=1/this._width*2,e.d=1/this._height*2,e.tx=-1-r*e.a,e.ty=-1-i*e.d)}_initFrameBuffer(){const e=this._gl;this._framebuffer&&(e.deleteFramebuffer(this._framebuffer),this._framebuffer=null),this._texture&&(e.deleteTexture(this._texture),this._texture=null),this._framebuffer=e.createFramebuffer(),this._texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._texture),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),this._texture&&this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this.resizeTo(new ye(this._width,this._height)),this._renderer._options.debug&&pd.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",e)}getProjectionMatrix(){return this._projectionMatrix}getTexture(){return this._texture}getFrame(){return this._frame}setFrame(e){this._frame=e}getFilterStack(){return this._filterStack}getPixelRatio(){return this._pixelRatio}setPixelRatio(e){this._pixelRatio=e,this._isRoot||this._resizeTexture()}getBaseTexture(){return this._baseTexture}dispose(){const e=this._gl;this._baseTexture.dispose(),this._framebuffer&&(e.deleteFramebuffer(this._framebuffer),this._framebuffer=null),this._texture&&(e.deleteTexture(this._texture),this._texture=null)}}class dx{constructor(e){this._renderer=e,this._filterStack=[],this._currentFrame=null,this._renderTargets=[],this._textureFrame=new Ot(0,0,e.getWidth(),e.getHeight()),this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._onContextChange()}resizeTo(e){this._textureFrame.width=e.x,this._textureFrame.height=e.y,this._renderTargets.forEach(t=>t.resizeTo(e))}getFilterStack(){return this._filterStack}setFilterStack(e){this._filterStack=e}_getOrCreateRenderTarget(e=!1){let t=this._renderTargets.pop();return t||(t=new Ql(this._renderer,this._textureFrame.width,this._textureFrame.height,1)),this._currentFrame&&t.setFrame(this._currentFrame),e&&t.clear(),t}pushFilters(e,t){const r=e.getBounds();this._currentFrame=r;const i=e.getFilterRectangle();i.width>0&&i.height>0&&(this._currentFrame=i);const o=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(o),o.clear(),this._filterStack.push({renderTarget:o,filters:t})}popFilters(){const e=this._filterStack.pop();if(!e)return;const{filters:t,renderTarget:r}=e,i=this._filterStack[this._filterStack.length-1],o=r,n=i.renderTarget,s=o.getFrame();s&&this._quad.map(this._textureFrame,s);const a=t[0].getShaderForRenderer(this._renderer),l=this._quad.getVertexBuffer(),c=this._quad.getIndexBuffer(),d=this._renderer.getContext();d.bindBuffer(d.ARRAY_BUFFER,l),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,c);const u=a.getAttributeLocations();return d.vertexAttribPointer(u.a_position,2,d.FLOAT,!1,0,0),d.vertexAttribPointer(u.a_texCoord,2,d.FLOAT,!1,0,2*4*4),d.vertexAttribPointer(u.a_color,4,d.FLOAT,!1,0,4*4*4),this._renderer.updateTexture(o.getBaseTexture(),!1),t.length===1?(t[0].apply(this._renderer,o,n),this._renderTargets.push(o)):this._applyFilters(t,o,n),t}_applyFilters(e,t,r){let i=t,o=this._getOrCreateRenderTarget(!0);this._renderer.updateTexture(o.getBaseTexture(),!1);const n=e[e.length-1];e.forEach(s=>{const a=s===n;if(a)s.apply(this._renderer,i,r,!0);else{s.apply(this._renderer,i,o,!0);const l=i;i=o,o=l}}),this._renderTargets.push(i),this._renderTargets.push(o)}_onContextChange(){this._renderTargets.length=0,pp(this._renderer)&&(this._quad&&this._quad.dispose(),this._quad=new TG(this._renderer.getContext()))}dispose(){this._renderer.off("context",this._onContextChange),this._quad&&this._quad.dispose(),this._renderTargets.forEach(e=>{e.dispose()})}}const ec=_(kG());class b2{constructor(e){this._context=e,this._domAvailable=typeof document!="undefined",this._hookIntoContext(),this._textures={},this._framebuffers={},this._programs={},this._shaders={},this._buffers={},this._boundTexture=null,this._id=0,this._enums={},this._setupStats(),this._createEnumMap(),this._updateMemoryStats=this._updateMemoryStats.bind(this),this._updateMemoryStats()}_createEnumMap(){for(const e in this._context){const t=this._context[e];typeof t=="number"&&(this._enums[t]=e)}}_enumValueToString(e){const t=this._enums[e];return typeof t=="undefined"?e:t}_setupStats(){if(!this._domAvailable)return;this._stats=new ec.default,this._stats.showPanel(3),this._memPanel=this._stats.addPanel(new ec.default.Panel("MB [WebGL]","#43ADEB","#282828")),this._texPanel=this._stats.addPanel(new ec.default.Panel("Textures","#43ADEB","#282828")),this._bufPanel=this._stats.addPanel(new ec.default.Panel("Buffers","#43ADEB","#282828")),this._fboPanel=this._stats.addPanel(new ec.default.Panel("FBOs","#43ADEB","#282828")),this._prgPanel=this._stats.addPanel(new ec.default.Panel("Programs","#43ADEB","#282828")),this._shdPanel=this._stats.addPanel(new ec.default.Panel("Shaders","#43ADEB","#282828"))}_updatePanel(e){if(!this._domAvailable)return;this._stats.begin();switch(e){case"tex":this._texPanel.update(this.getTexturesCount(),50);break;case"buf":this._bufPanel.update(this.getBuffersCount(),50);break;case"fbo":this._fboPanel.update(this.getFBOCount(),50);break;case"prg":this._prgPanel.update(this.getProgramCount(),50);break;case"shd":this._shdPanel.update(this.getShaderCount(),50);break}this._stats.end()}getTexturesCount(){return Object.keys(this._textures).length}getBuffersCount(){return Object.keys(this._buffers).length}getFBOCount(){return Object.keys(this._framebuffers).length}getProgramCount(){return Object.keys(this._programs).length}getShaderCount(){return Object.keys(this._shaders).length}_updateMemoryStats(){if(!this._domAvailable)return;const e=this._getMemoryUsage()/1e3/1e3;this._memPanel.update(e,400),setTimeout(this._updateMemoryStats,1e3)}_getMemoryUsage(){let e=0;for(const t in this._textures)e+=this._textures[t].memory;for(const t in this._buffers)e+=this._buffers[t].memory;return e}_hookIntoContext(){for(const e in this._context){const t=this._context[e];typeof t=="function"?this[e]=function(...r){const i=this._context[e];return this._trackGLCall(i,e,r)}:this._makePropertyWrapper(e)}}_makePropertyWrapper(e){const t=["_context"];if(t.indexOf(e)!==-1)return;const r=this._context;this.__defineGetter__(e,()=>r[e]),this.__defineSetter__(e,i=>{r[e]=i})}_trackGLCall(e,t,r){const i=["texImage2D","bindTexture","createTexture","deleteTexture","createBuffer","bindBuffer","bufferData","deleteBuffer","createFramebuffer","deleteFramebuffer","createProgram","deleteProgram","createShader","deleteShader"];let o;i.indexOf(t)!==-1?o=this[`_${t}`](r):o=e.apply(this._context,r);const n=this._context.getError();if(n!==0){let s=r.join(", ");s.length>100&&(s=`${s.substr(0,100)}...`),console.error(new Error(`WebGL Error ${this._enumValueToString(n)} in ${t}(${s})`))}return o}_createProgram(){const e=this._context.createProgram();return e._wmmId=this._id++,this._programs[e._wmmId]=e,this._updatePanel("prg"),e}_deleteProgram([e]){if(!e||!this._programs[e._wmmId])return;delete this._programs[e._wmmId],this._context.deleteProgram(e),this._updatePanel("prg")}_createShader([e]){const t=this._context.createShader(e);return t._wmmId=this._id++,this._shaders[t._wmmId]=t,this._updatePanel("shd"),t}_deleteShader([e]){if(!e||!this._shaders[e._wmmId])return;delete this._shaders[e._wmmId],this._context.deleteShader(e),this._updatePanel("shd")}_createFramebuffer(){const e=this._context.createFramebuffer();return e._wmmId=this._id++,this._framebuffers[e._wmmId]=e,this._updatePanel("fbo"),e}_deleteFramebuffer([e]){if(!e||!this._framebuffers[e._wmmId])return;delete this._framebuffers[e._wmmId],this._context.deleteFramebuffer(e),this._updatePanel("fbo")}_createBuffer(){const e=this._context.createBuffer();return e._wmmId=this._id++,this._buffers[e._wmmId]={buffer:e,memory:0},this._updatePanel("buf"),e}_bindBuffer([e,t]){this._context.bindBuffer(e,t),this._boundBuffer=t._wmmId}_bufferData([e,t,r]){this._context.bufferData(e,t,r);let i;typeof t=="number"?i=t:"byteLength"in t?i=t.byteLength:"length"in t&&(i=t.length),this._buffers[this._boundBuffer].memory=i}_deleteBuffer([e]){if(!e||!this._buffers[e._wmmId])return;delete this._buffers[e._wmmId],this._context.deleteBuffer(e),this._updatePanel("buf")}_createTexture(){const e=this._context.createTexture();return e._wmmId=this._id++,this._textures[e._wmmId]={texture:e,memory:0},this._updatePanel("tex"),e}_deleteTexture([e]){if(!e||!this._textures[e._wmmId])return;delete this._textures[e._wmmId],this._context.deleteTexture(e),this._updatePanel("tex")}_bindTexture([e,t]){this._context.bindTexture(e,t),this._boundTexture=t._wmmId}_texImage2D(e){let[,,t,r,i,o,,,n]=e;typeof n=="undefined"&&(n=o),this._context.texImage2D.apply(this._context,e);const s=this._calculateByteCountForTexture(t,r,i,n);this._textures[this._boundTexture].memory=s}_calculateByteCountForTexture(e,t,r,i){if(i!==null)if("width"in i)t=i.width,r=i.height;else return i.length;let o=1;switch(e){case this._context.ALPHA:o=1;break;case this._context.RGB:o=3;break;case this._context.RGBA:o=4;break}return t*r*o}}class ux{constructor(e){this._renderer=e,this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange)}_onContextChange(){}start(){}stop(){this.flush()}flush(){}dispose(){this._renderer.off("context",this._onContextChange),delete this._renderer}}class EG extends ux{constructor(e){super(e);this._vertexBuffer=null;this._indexBuffer=null;this._maxBatchSize=bp,this._vertices=new ArrayBuffer(bp*4*$l),this._positions=new Float32Array(this._vertices),this._colors=new Uint32Array(this._vertices),this._indices=new Uint16Array(bp*6);for(let t=0,r=0;t<bp*6;t+=6,r+=4)this._indices[t+0]=r+0,this._indices[t+1]=r+1,this._indices[t+2]=r+2,this._indices[t+3]=r+0,this._indices[t+4]=r+2,this._indices[t+5]=r+3;this._sprites=[],this._currentBatchSize=0,this._onContextChange()}render(e){const t=e.getTexture();if(!t)return;const r=t.getFrame(),i=t.getBaseTexture();this._currentBatchSize>=this._maxBatchSize&&this.flush();const o=t.getUVs();if(!o)return;const n=this._currentBatchSize*$l;this._addVertexCoordinates(e,n,r),this._addTextureUVs(e,n,o),this._addColors(e,n),this._sprites[this._currentBatchSize]=e,this._currentBatchSize++}_addColors(e,t){const r=this._colors,i=16777215,o=(i>>16)+(i&65280)+((i&255)<<16)+(e.getWorldAlpha()*255<<24);r[t+4]=r[t+9]=r[t+14]=r[t+19]=o}_addTextureUVs(e,t,r){const i=this._positions,[o,n,s,a]=r;i[t+2]=o.x,i[t+3]=o.y,i[t+7]=n.x,i[t+8]=n.y,i[t+12]=s.x,i[t+13]=s.y,i[t+17]=a.x,i[t+18]=a.y}_addVertexCoordinates(e,t,r){const i=this._positions,o=e.getWorldTransform(),n=e.getAnchor(),s=o.rectangleToCoordinates(r,n),a=5;for(let l=0;l<4;l++)i[t+l*a]=s[l].x,i[t+l*a+1]=s[l].y}_onContextChange(){const e=this._renderer.getContext();this._shader=this._renderer.shaders.default,this._vertexBuffer&&(this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer=null),this._vertexBuffer=e.createBuffer(),this._indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this._indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this._vertices,e.DYNAMIC_DRAW)}start(){this._vertexBuffer&&this._indexBuffer&&this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer)}flush(){var u;const e=this._renderer,t=e.getContext();if(this._currentBatchSize===0)return;if(this._currentBatchSize>bp*.5)t.bufferSubData(t.ARRAY_BUFFER,0,this._vertices);else{const p=this._positions.subarray(0,this._currentBatchSize*$l);t.bufferSubData(t.ARRAY_BUFFER,0,p)}let r=0,i=null,o=null,n=null,s=null,a=!1,l=!1,c=null,d=0;for(let p=0,h=this._currentBatchSize;p<h;p++){if(c=this._sprites[p],o=(u=c.getTexture())==null?void 0:u.getBaseTexture(),s=c.getShader()||this._shader,a=n!==s,l=i!==o,(l||a)&&(i&&this._renderBatch(i,r,d),d=p,r=0,i=o,a)){n=s,e.setShader(n);const b=e.getCurrentRenderTarget(),y=b.getProjectionMatrix().toArray();n.setUniform("u_projMatrix",y),n.syncUniforms(),t.activeTexture(t.TEXTURE0)}r++}i&&this._renderBatch(i,r,d),this._currentBatchSize=0,this._sprites=[]}_renderBatch(e,t,r){if(t===0)return;const i=this._renderer,o=i.getContext();let n=e.getGLTextureForRenderer(i);n||(n=i.getOrCreateGLTexture(e)),e.isDirty()&&(i.updateTexture(e),e.setDirty(!1)),o.activeTexture(o.TEXTURE0+e.getGLUnit()),o.bindTexture(o.TEXTURE_2D,n);const s=t*6,a=r*6*2;o.drawElements(o.TRIANGLES,s,o.UNSIGNED_SHORT,a)}dispose(){const e=this._renderer,t=e.getContext();this._sprites.forEach(r=>{r.dispose()}),this._vertexBuffer&&(t.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(t.deleteBuffer(this._indexBuffer),this._indexBuffer=null),delete this._vertices,delete this._positions,delete this._colors,delete this._indices,super.dispose()}}class px extends cx{constructor(e=800,t=600,r){super(e,t,r);this.type=De.WEBGL;this.maxTextureDimensions=null;this._type=De.WEBGL,this._onContextLost=this._onContextLost.bind(this),this._onContextRestored=this._onContextRestored.bind(this),this.setCanvas(this._options.canvas||Or.createCanvas()),this.shaders={default:new cG(this,void 0,void 0)},this.renderers={sprite:new EG(this)}}_onContextLost(e){e.preventDefault(),ie.warn(this.constructor.name,"WebGL context has been lost - trying to restore.")}_onContextCreationError(e){e.preventDefault(),ie.warn(this.constructor.name,`Failed to create WebGL context: ${e.statusMessage||"Unknown error"}`)}_onContextRestored(){ie.warn(this.constructor.name,"WebGL context has been restored. Clearing all textures."),this._createContext(),this._setupContext(),this.emit("context-restored")}_onBeforeContext(){this._filterManager&&this._filterManager.dispose(),this._filterManager=new dx(this),this._currentObjectRenderer=new ux(this)}setShader(e){this._currentShader=e,this._context.useProgram(e.getProgram()),this._setAttributesForShader(e)}setCanvas(e){this._canvas&&this._removeContextEventListeners(),super.setCanvas(e),this._addContextEventListeners()}_addContextEventListeners(){n2(this._canvas)&&(this._canvas.addEventListener("webglcontextlost",this._onContextLost),this._canvas.addEventListener("webglcontextrestored",this._onContextRestored),this._canvas.addEventListener("webglcontextcreationerror",this._onContextCreationError))}_removeContextEventListeners(){n2(this._canvas)&&(this._canvas.removeEventListener("webglcontextlost",this._onContextLost),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored),this._canvas.removeEventListener("webglcontextcreationerror",this._onContextCreationError))}_setAttributesForShader(e){if(!this._canvas)return;const t=this._context,r=e.getAttributes(),i=e.getAttributeLocations();r.forEach(o=>{const n=i[o];t.enableVertexAttribArray(n)})}_createContext(){if(!this._canvas)return;let e=Or.glGet(this._canvas);return this._options.debug&&CG(e),this._options.debug&&(e=new lx(e),e=new b2(e)),this.id=px.contextId++,this._context=e,this._maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.emit("context",e),e}_setupContext(){const e=this._context;e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),this._defaultRenderTarget=new Ql(this,this._width,this._height,this._pixelRatio,!0),this.setRenderTarget(this._defaultRenderTarget),this._getMaxPrecision()}getContext(){return this._context}_getMaxPrecision(){const e=this._context,t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);this._maxFloatPrecision=(t==null?void 0:t.precision)!==0?Go.High:Go.Medium;const r=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT);this._maxIntPrecision=(r==null?void 0:r.rangeMax)!==0?Go.High:Go.Low}resizeTo(e,t=!0){super.resizeTo(e,t),this._currentRenderTarget&&this._currentRenderTarget.resizeTo(e),this._context=Or.glResize(this._context,e)}setRenderTarget(e=this._defaultRenderTarget){this._currentRenderTarget=e,this._currentRenderTarget.activate()}setObjectRenderer(e){this._currentObjectRenderer.stop(),this._currentObjectRenderer=e,this._currentObjectRenderer.start()}render(e){this.setRenderTarget(this._defaultRenderTarget),this._defaultRenderTarget.clear(this._clearColor);const t=e.getParent();e.setParent(new yp),e.updateTransform(),t&&e.setParent(t),this.renderDisplayObject(e,this._defaultRenderTarget)}renderDisplayObject(e,t){this.setRenderTarget(t),this._filterManager.setFilterStack(t.getFilterStack()),e.renderWebGL(this),this._currentObjectRenderer.flush()}clear(){const e=this._context;e.clearColor.apply(e,this._clearColor.toGLColor),e.clear(e.COLOR_BUFFER_BIT)}save(){return{renderTarget:this._currentRenderTarget,objectRenderer:this._currentObjectRenderer,filterStack:this._filterManager.getFilterStack()}}restore(e){this.setRenderTarget(e.renderTarget),this._filterManager.setFilterStack(e.filterStack),this._currentObjectRenderer=e.objectRenderer}getOrCreateGLTexture(e){const t=this._context;let r=e.getGLTextureForRenderer(this);return r||(r=t.createTexture(),e.setGLTextureForRenderer(r,this)),r}updateTexture(e,t=!0){const r=e.getSource(),i=this._context,o=e.getGLUnit(),n=this.getOrCreateGLTexture(e);i.activeTexture(i.TEXTURE0+o),i.bindTexture(i.TEXTURE_2D,n),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t&&r&&Or.glTexImage(i,r),e.isMipMappingEnabled()?i.generateMipmap(i.TEXTURE_2D):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e.getGLRepeat(i,"x")),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e.getGLRepeat(i,"y"))),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,e.getGLFilter(i,"min")),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,e.getGLFilter(i,"mag")),i.activeTexture(i.TEXTURE0)}getMaxDimensions(){return this.maxTextureDimensions||(this.maxTextureDimensions=Or.glMaxTexture(this._context)),this.maxTextureDimensions}getCurrentRenderTarget(){return this._currentRenderTarget}getCurrentObjectRenderer(){return this._currentObjectRenderer}getMaxFloatPrecision(){return this._maxFloatPrecision}getMaxIntPrecision(){return this._maxIntPrecision}dispose(){this._filterManager.dispose(),this._currentObjectRenderer.dispose(),this._defaultRenderTarget.dispose();for(const r in this.shaders)this.shaders[r].dispose(),delete this.shaders[r];this._removeContextEventListeners();const e=this._context,t=e.getExtension("WEBGL_lose_context");t&&t.loseContext()}}px.contextId=0;const W2e=()=>[new ye(0,0),new ye(1,0),new ye(1,1),new ye(0,1)],H2e=(e,t,r)=>{const[i,o,n,s]=e;return i.x=t.x/r.width,i.y=t.y/r.height,o.x=(t.x+t.width)/r.width,o.y=t.y/r.height,n.x=(t.x+t.width)/r.width,n.y=(t.y+t.height)/r.height,s.x=t.x/r.width,s.y=(t.y+t.height)/r.height,e},y2={create:W2e,updateViaFrames:H2e};class wp extends gi{constructor(e,t){super();if(!(e instanceof At))throw new Error("`baseTexture` should be an instance of BaseTexture");this._uvs=y2.create(),this._frame=t?t.clone():new Ot(0,0,1,1),this._frameLocked=Boolean(t),this._onBaseTextureLoaded=this._onBaseTextureLoaded.bind(this),this._onBaseTextureUpdated=this._onBaseTextureUpdated.bind(this),this.setBaseTexture(e)}static fromImage(e){const t=new At(e);return new wp(t)}static fromCanvas(e){const t=new At(e);return new wp(t)}_onBaseTextureLoaded(){if(!this._frameLocked){const e=this._baseTexture.getFrame().clone();this.setFrame(e)}this._baseTexture.on("update",this._onBaseTextureUpdated)}_onBaseTextureUpdated(){const{width:e,height:t}=this._baseTexture.getFrame();this._frame.width=e,this._frame.height=t,this.emit("update")}_updateUVs(){this._uvs=y2.updateViaFrames(this._uvs,this._frame,this._baseTexture.getFrame())}getBaseTexture(){return this._baseTexture}setBaseTexture(e){if(this._baseTexture=e,!this._baseTexture.isLoaded())this._baseTexture.once("loaded",this._onBaseTextureLoaded);else{const{width:t,height:r}=e.getFrame();this._frameLocked||(this._frame=new Ot(0,0,t,r)),this._onBaseTextureLoaded()}}getFrame(){return this._frame}setFrame(e){this._frame=e,this._updateUVs()}getWidth(){return this._frame.width}getHeight(){return this._frame.height}getUVs(){return this._uvs}getDimensions(){return new ye(this._frame.width,this._frame.height)}dispose(e=!0){e&&this._baseTexture.dispose()}}const Qf=e=>e._type===De.WEBGL;class hx extends wp{constructor(e,t=100,r=100,i=1){super(new At,new Ot(0,0,t,r));this._loaded=!0,this._width=t,this._height=r,this._pixelRatio=i,this._renderer=e,this._setupFilterManager(),this._setupBuffer(),this.setBaseTexture(this._renderTarget.getBaseTexture()),this._updateUVs()}_setupFilterManager(){this._filterManager&&this._filterManager.dispose(),Qf(this._renderer)?this._filterManager=new dx(this._renderer):this._filterManager=new _p(this._renderer),this._filterManager.resizeTo(new ye(this._width,this._height))}_setupBuffer(){this._renderTarget&&this._renderTarget.dispose(),Qf(this._renderer)?this._renderTarget=new Ql(this._renderer,this._width,this._height,this._pixelRatio):this._renderTarget=new Zl(this._width,this._height,this._pixelRatio)}clear(e){this._renderTarget.clear(e)}resizeTo(e){if(this._width===e.x&&this._height===e.y)return;this._width=e.x,this._height=e.y,this._frame.width=e.x,this._frame.height=e.y,this._renderTarget.resizeTo(e),this._filterManager.resizeTo(e)}render(e){Qf(this._renderer)?this._renderWebGL(e):this._renderCanvas(e)}_renderWebGL(e){if(!Qf(this._renderer))return;this._renderTarget.activate(),e.getWorldTransform().reset(),e.getChildren().forEach(r=>{r.updateTransform()});const t=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(e,this._renderTarget),this._renderer.setFilterManager(t)}_renderCanvas(e){if(Qf(this._renderer))return;e.getWorldTransform().reset(),e.getChildren().forEach(r=>{r.updateTransform()});const t=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(e,this._renderTarget),this._renderer.setFilterManager(t)}getRenderTarget(){return this._renderTarget}dispose(){this._renderTarget.dispose(),this._filterManager.dispose(),super.dispose()}}const tg={};Tt(tg,{Base64:()=>Rn,Color:()=>V,ColorMatrix:()=>Yf,Configurable:()=>Re,Constants:()=>Mi,CubicBezierCurve:()=>C2,Engine:()=>U,EventEmitter:()=>gi,Events:()=>Sp,FreeLicenseChecker:()=>zG,GLUtils:()=>pd,LicenseChecker:()=>gx,Log:()=>ie,Matrix:()=>Vo,Range:()=>T2,Rectangle:()=>Ot,Utils:()=>j,Vector2:()=>ye,Vector3:()=>k2,cancelAnimationFrame:()=>ic,requestAnimationFrame:()=>Na});const Sp={EXPORT:"export",CLOSE:"close",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed",EDITOR_READY:"editor:ready",WINDOW_RESIZE:"window:resize",ZOOM_DONE:"editor:zoom_done",HISTORY_UNDO:"history:undo",HISTORY_UPDATED:"history:update",FEATURES_DISABLED:"editor:features:disabled",FEATURES_ENABLED:"editor:features:enabled",FEATURES_UPDATED:"editor:features:updated",TRANSFORM_REAPPLY_RATIO:"transform:reapply_ratio"};var za={DEFAULTS:{FILTERS:[{identifier:"imgly_filters_duotone",defaultName:"DuoTone",assetFileName:"duotone",filters:[{identifier:"imgly_duotone_desert",defaultName:"Desert",lightColor:"#e1de9a",darkColor:"#cb2129"},{identifier:"imgly_duotone_peach",defaultName:"Peach",lightColor:"#e9abb8",darkColor:"#0040ff"},{identifier:"imgly_duotone_clash",defaultName:"Clash",lightColor:"#f41a0f",darkColor:"#23007c"},{identifier:"imgly_duotone_plum",defaultName:"Plum",lightColor:"#74d7ff",darkColor:"#23007c"},{identifier:"imgly_duotone_breezy",defaultName:"Breezy",lightColor:"#68fdff",darkColor:"#c20000"},{identifier:"imgly_duotone_deepblue",defaultName:"Deep Blue",lightColor:"#2de9eb",darkColor:"#58007c"},{identifier:"imgly_duotone_frog",defaultName:"Frog",lightColor:"#5bff60",darkColor:"#7f23a9"},{identifier:"imgly_duotone_sunset",defaultName:"Sunset",lightColor:"#f8ea46",darkColor:"#c400be"}]},{identifier:"imgly_filters_bw",assetFileName:"b&w",defaultName:"Black & White",filters:[{identifier:"imgly_lut_ad1920",defaultName:"1920 A.D.",lutImage:"filters/imgly_lut_ad1920_5_5_128.png"},{identifier:"imgly_lut_bw",defaultName:"Greyed",lutImage:"filters/imgly_lut_bw_5_5_128.png"},{identifier:"imgly_lut_x400",defaultName:"Dusty",lutImage:"filters/imgly_lut_dusty_5_5_128.png"},{identifier:"imgly_lut_litho",defaultName:"Litho",lutImage:"filters/imgly_lut_litho_5_5_128.png"},{identifier:"imgly_lut_sepiahigh",defaultName:"Sepia",lutImage:"filters/imgly_lut_sepia_5_5_128.png"},{identifier:"imgly_lut_plate",defaultName:"Weathered",lutImage:"filters/imgly_lut_weathered_5_5_128.png"},{identifier:"imgly_lut_sin",defaultName:"Hard Stuff",lutImage:"filters/imgly_lut_hard_stuff_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8}]},{identifier:"imgly_filters_retro",assetFileName:"vintage",defaultName:"Vintage",filters:[{identifier:"imgly_lut_blues",defaultName:"Polaroid",lutImage:"filters/imgly_lut_polaroid_5_5_128.png"},{identifier:"imgly_lut_front",defaultName:"Sunny 70s",lutImage:"filters/imgly_lut_sunny_70s_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_texas",defaultName:"Oldtimer",lutImage:"filters/imgly_lut_oldtimer_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_celsius",defaultName:"Inferno",lutImage:"filters/imgly_lut_inferno_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_cool",defaultName:"Snappy",lutImage:"filters/imgly_lut_snappy_5_5_128.png"}]},{identifier:"imgly_filters_analog",assetFileName:"smooth",defaultName:"Smooth",filters:[{identifier:"imgly_lut_chest",defaultName:"Chestnut",lutImage:"filters/imgly_lut_chestnut_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_winter",defaultName:"Softly",lutImage:"filters/imgly_lut_softly_5_5_128.png"},{identifier:"imgly_lut_kdynamic",defaultName:"Pebble",lutImage:"filters/imgly_lut_pebble_5_5_128.png"},{identifier:"imgly_lut_fall",defaultName:"Moss",lutImage:"filters/imgly_lut_moss_5_5_128.png"},{identifier:"imgly_lut_lenin",defaultName:"Lemon",lutImage:"filters/imgly_lut_lemon_5_5_128.png"},{identifier:"imgly_lut_pola669",defaultName:"Green Gap",lutImage:"filters/imgly_lut_green_gap_5_5_128.png"}]},{identifier:"imgly_filters_winter",assetFileName:"cold",defaultName:"Cold",filters:[{identifier:"imgly_lut_elder",defaultName:"Colla",lutImage:"filters/imgly_lut_colla_5_5_128.png"},{identifier:"imgly_lut_orchid",defaultName:"Solanus",lutImage:"filters/imgly_lut_solanus_5_5_128.png"},{identifier:"imgly_lut_bleached",defaultName:"Kalmen",lutImage:"filters/imgly_lut_kalmen_5_5_128.png"},{identifier:"imgly_lut_bleachedblue",defaultName:"Joran",lutImage:"filters/imgly_lut_joran_5_5_128.png"},{identifier:"imgly_lut_breeze",defaultName:"Levante",lutImage:"filters/imgly_lut_levante_5_5_128.png"},{identifier:"imgly_lut_blueshadows",defaultName:"Zephyr",lutImage:"filters/imgly_lut_zephyr_5_5_128.png"}]},{identifier:"imgly_filters_summer",assetFileName:"warm",defaultName:"Warm",filters:[{identifier:"imgly_lut_sunset",defaultName:"Golden",lutImage:"filters/imgly_lut_golden_5_5_128.png"},{identifier:"imgly_lut_eighties",defaultName:"Low Fire",lutImage:"filters/imgly_lut_low_fire_5_5_128.png"},{identifier:"imgly_lut_evening",defaultName:"Sunrise",lutImage:"filters/imgly_lut_sunrise_5_5_128.png"},{identifier:"imgly_lut_k2",defaultName:"Flat Black",lutImage:"filters/imgly_lut_flat_black_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_nogreen",defaultName:"Pumpkin",lutImage:"filters/imgly_lut_pumpkin_5_5_128.png"}]},{identifier:"imgly_filters_legacy",defaultName:"Legacy",assetFileName:"legacy",filters:[{identifier:"imgly_lut_ancient",defaultName:"Ancient",lutImage:"filters/imgly_lut_ancient_5_5_128.png"},{identifier:"imgly_lut_cottoncandy",defaultName:"Candy",lutImage:"filters/imgly_lut_cottoncandy_5_5_128.png"},{identifier:"imgly_lut_classic",defaultName:"Classic",lutImage:"filters/imgly_lut_classic_5_5_128.png"},{identifier:"imgly_lut_colorful",defaultName:"Colorful",lutImage:"filters/imgly_lut_colorful_5_5_128.png"},{identifier:"imgly_lut_creamy",defaultName:"Creamy",lutImage:"filters/imgly_lut_creamy_5_5_128.png"},{identifier:"imgly_lut_fixie",defaultName:"Fixie",lutImage:"filters/imgly_lut_fixie_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_food",defaultName:"Food",lutImage:"filters/imgly_lut_food_5_5_128.png"},{identifier:"imgly_lut_fridge",defaultName:"Fridge",lutImage:"filters/imgly_lut_fridge_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_glam",defaultName:"Glam",lutImage:"filters/imgly_lut_glam_5_5_128.png"},{identifier:"imgly_lut_gobblin",defaultName:"Gobblin",lutImage:"filters/imgly_lut_gobblin_5_5_128.png"},{identifier:"imgly_lut_highcontrast",defaultName:"Hicon",lutImage:"filters/imgly_lut_highcontrast_5_5_128.png"},{identifier:"imgly_lut_highcarb",defaultName:"High Carb",lutImage:"filters/imgly_lut_highcarb_5_5_128.png"},{identifier:"imgly_lut_k1",defaultName:"K1",lutImage:"filters/imgly_lut_k1_5_5_128.png"},{identifier:"imgly_lut_k6",defaultName:"K6",lutImage:"filters/imgly_lut_k6_5_5_128.png"},{identifier:"imgly_lut_keen",defaultName:"Keen",lutImage:"filters/imgly_lut_keen_5_5_128.png"},{identifier:"imgly_lut_lomo",defaultName:"Lomo",lutImage:"filters/imgly_lut_lomo_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_lomo100",defaultName:"Lomo 100",lutImage:"filters/imgly_lut_lomo100_5_5_128.png"},{identifier:"imgly_lut_lucid",defaultName:"Lucid",lutImage:"filters/imgly_lut_lucid_5_5_128.png"},{identifier:"imgly_lut_mellow",defaultName:"Mellow",lutImage:"filters/imgly_lut_mellow_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_neat",defaultName:"Neat",lutImage:"filters/imgly_lut_neat_5_5_128.png"},{identifier:"imgly_lut_pale",defaultName:"Pale",lutImage:"filters/imgly_lut_pale_5_5_128.png"},{identifier:"imgly_lut_pitched",defaultName:"Pitched",lutImage:"filters/imgly_lut_pitched_5_5_128.png"},{identifier:"imgly_lut_polasx",defaultName:"Pola SX",lutImage:"filters/imgly_lut_polasx_5_5_128.png"},{identifier:"imgly_lut_pro400",defaultName:"Pro 400",lutImage:"filters/imgly_lut_pro400_5_5_128.png"},{identifier:"imgly_lut_quozi",defaultName:"Quozi",lutImage:"filters/imgly_lut_quozi_5_5_128.png"},{identifier:"imgly_lut_settled",defaultName:"Settled",lutImage:"filters/imgly_lut_settled_5_5_128.png"},{identifier:"imgly_lut_seventies",defaultName:"Seventies",lutImage:"filters/imgly_lut_seventies_5_5_128.png"},{identifier:"imgly_lut_soft",defaultName:"Soft",lutImage:"filters/imgly_lut_soft_5_5_128.png"},{identifier:"imgly_lut_steel",defaultName:"Steel",lutImage:"filters/imgly_lut_steel_5_5_128.png"},{identifier:"imgly_lut_summer",defaultName:"Summer",lutImage:"filters/imgly_lut_summer_5_5_128.png"},{identifier:"imgly_lut_tender",defaultName:"Tender",lutImage:"filters/imgly_lut_tender_5_5_128.png"},{identifier:"imgly_lut_twilight",defaultName:"Twilight",lutImage:"filters/imgly_lut_twilight_5_5_128.png"}]}],OVERLAYS:[{identifier:"imgly_overlay_golden",defaultName:"Golden",image:"overlays/imgly_overlay_golden.jpg",thumbnail:"overlays/imgly_overlay_golden_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_bokeh",defaultName:"Bokeh",image:"overlays/imgly_overlay_bokeh.jpg",thumbnail:"overlays/imgly_overlay_bokeh_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_hearts",defaultName:"Hearts",image:"overlays/imgly_overlay_hearts.jpg",thumbnail:"overlays/imgly_overlay_hearts_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak1",defaultName:"Light Leak",image:"overlays/imgly_overlay_lightleak1.jpg",thumbnail:"overlays/imgly_overlay_lightleak1_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak2",defaultName:"Light Leak 2",image:"overlays/imgly_overlay_lightleak2.jpg",thumbnail:"overlays/imgly_overlay_lightleak2_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_rain",defaultName:"Rain",image:"overlays/imgly_overlay_rain.jpg",thumbnail:"overlays/imgly_overlay_rain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_wood",defaultName:"Wood",image:"overlays/imgly_overlay_wood.jpg",thumbnail:"overlays/imgly_overlay_wood_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_mosaic",defaultName:"Mosaic",image:"overlays/imgly_overlay_mosaic.jpg",thumbnail:"overlays/imgly_overlay_mosaic_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_chop",defaultName:"Chop",image:"overlays/imgly_overlay_chop.jpg",thumbnail:"overlays/imgly_overlay_chop_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_vintage",defaultName:"Vintage",image:"overlays/imgly_overlay_vintage.jpg",thumbnail:"overlays/imgly_overlay_vintage_thumb.jpg",blendMode:"darken"},{identifier:"imgly_overlay_metal",defaultName:"Metal",image:"overlays/imgly_overlay_metal.jpg",thumbnail:"overlays/imgly_overlay_metal_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_paper",defaultName:"Paper",image:"overlays/imgly_overlay_paper.jpg",thumbnail:"overlays/imgly_overlay_paper_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_painting",defaultName:"Painting",image:"overlays/imgly_overlay_painting.jpg",thumbnail:"overlays/imgly_overlay_painting_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_grain",defaultName:"Grain",image:"overlays/imgly_overlay_grain.jpg",thumbnail:"overlays/imgly_overlay_grain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_clouds",defaultName:"Clouds",image:"overlays/imgly_overlay_clouds.jpg",thumbnail:"overlays/imgly_overlay_clouds_thumb.jpg",blendMode:"softLight"},{identifier:"imgly_overlay_wall1",defaultName:"Wall",image:"overlays/imgly_overlay_wall1.jpg",thumbnail:"overlays/imgly_overlay_wall1_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_wall2",defaultName:"Wall 2",image:"overlays/imgly_overlay_wall2.jpg",thumbnail:"overlays/imgly_overlay_wall2_thumb.jpg",blendMode:"overlay"}],FRAME_CATEGORIES:[{identifier:"imgly_frame_generic",defaultName:"Generic",metaData:{backgroundImage:"frames/generic.png"},frames:[{identifier:"imgly_frame_dia",defaultName:"Dia",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_left.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_right.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",defaultName:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",defaultName:"Black Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",defaultName:"Low Poly",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",defaultName:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}}]}],STICKER_CATEGORIES:[{identifier:"imgly_sticker_emoticons",defaultName:"Emoticons",metaData:{backgroundImage:"stickers/emoticons/background.png"},stickers:[{identifier:"imgly_sticker_emoticons_alien",defaultName:"Alien",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_alien.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_alien.png"],width:1e3,height:935}}},{identifier:"imgly_sticker_emoticons_angel",defaultName:"Angel",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angel.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angel.png"]}}},{identifier:"imgly_sticker_emoticons_angry",defaultName:"Angry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angry.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angry.png"]}}},{identifier:"imgly_sticker_emoticons_anxious",defaultName:"Anxious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_anxious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_anxious.png"]}}},{identifier:"imgly_sticker_emoticons_asleep",defaultName:"Asleep",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_asleep.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_asleep.png"]}}},{identifier:"imgly_sticker_emoticons_attention",defaultName:"Attention",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_attention.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_attention.png"]}}},{identifier:"imgly_sticker_emoticons_baby_chicken",defaultName:"Baby Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_baby_chicken.png"],width:61,height:42},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_baby_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_batman",defaultName:"Batman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_batman.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_batman.png"]}}},{identifier:"imgly_sticker_emoticons_beer",defaultName:"Beer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_beer.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_beer.png"]}}},{identifier:"imgly_sticker_emoticons_blush",defaultName:"Blush",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_blush.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_blush.png"]}}},{identifier:"imgly_sticker_emoticons_boxer",defaultName:"Boxer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_boxer.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_boxer.png"]}}},{identifier:"imgly_sticker_emoticons_business",defaultName:"Business",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_business.png"],width:60,height:63},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_business.png"]}}},{identifier:"imgly_sticker_emoticons_chicken",defaultName:"Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_chicken.png"],width:63,height:55},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_cool",defaultName:"Cool",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cool.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cool.png"]}}},{identifier:"imgly_sticker_emoticons_cry",defaultName:"Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cry.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cry.png"]}}},{identifier:"imgly_sticker_emoticons_deceased",defaultName:"Deceased",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_deceased.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_deceased.png"]}}},{identifier:"imgly_sticker_emoticons_devil",defaultName:"Devil",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_devil.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_devil.png"]}}},{identifier:"imgly_sticker_emoticons_duckface",defaultName:"Duckface",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_duckface.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_duckface.png"]}}},{identifier:"imgly_sticker_emoticons_furious",defaultName:"Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_furious.png"],width:62,height:61},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_furious.png"]}}},{identifier:"imgly_sticker_emoticons_grin",defaultName:"Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_grin.png"]}}},{identifier:"imgly_sticker_emoticons_guitar",defaultName:"Guitar",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_guitar.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_guitar.png"]}}},{identifier:"imgly_sticker_emoticons_harry_potter",defaultName:"Harry Potter",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_harry_potter.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_harry_potter.png"]}}},{identifier:"imgly_sticker_emoticons_hippie",defaultName:"Hippie",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hippie.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hippie.png"]}}},{identifier:"imgly_sticker_emoticons_hitman",defaultName:"Hitman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hitman.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hitman.png"]}}},{identifier:"imgly_sticker_emoticons_humourous",defaultName:"Humourous",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_humourous.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_humourous.png"]}}},{identifier:"imgly_sticker_emoticons_idea",defaultName:"Idea",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_idea.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_idea.png"]}}},{identifier:"imgly_sticker_emoticons_impatient",defaultName:"Impatient",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_impatient.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_impatient.png"]}}},{identifier:"imgly_sticker_emoticons_kiss",defaultName:"Kiss",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kiss.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kiss.png"]}}},{identifier:"imgly_sticker_emoticons_kisses",defaultName:"Kisses",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kisses.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kisses.png"]}}},{identifier:"imgly_sticker_emoticons_laugh",defaultName:"Laugh",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_laugh.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_laugh.png"]}}},{identifier:"imgly_sticker_emoticons_loud_cry",defaultName:"Loud Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loud_cry.png"],width:64,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loud_cry.png"]}}},{identifier:"imgly_sticker_emoticons_loving",defaultName:"Loving",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loving.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loving.png"]}}},{identifier:"imgly_sticker_emoticons_masked",defaultName:"Masked",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_masked.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_masked.png"]}}},{identifier:"imgly_sticker_emoticons_music",defaultName:"Music",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_music.png"],width:62,height:54},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_music.png"]}}},{identifier:"imgly_sticker_emoticons_nerd",defaultName:"Nerd",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_nerd.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_nerd.png"]}}},{identifier:"imgly_sticker_emoticons_ninja",defaultName:"Ninja",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_ninja.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_ninja.png"]}}},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",defaultName:"Not Speaking To You",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_not_speaking_to_you.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_not_speaking_to_you.png"]}}},{identifier:"imgly_sticker_emoticons_pig",defaultName:"Pig",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pig.png"],width:63,height:41},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pig.png"]}}},{identifier:"imgly_sticker_emoticons_pumpkin",defaultName:"Pumpkin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pumpkin.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pumpkin.png"]}}},{identifier:"imgly_sticker_emoticons_question",defaultName:"Question",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_question.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_question.png"]}}},{identifier:"imgly_sticker_emoticons_rabbit",defaultName:"Rabbit",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_rabbit.png"],width:65,height:47},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_rabbit.png"]}}},{identifier:"imgly_sticker_emoticons_sad",defaultName:"Sad",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sad.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sad.png"]}}},{identifier:"imgly_sticker_emoticons_sick",defaultName:"Sick",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sick.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sick.png"]}}},{identifier:"imgly_sticker_emoticons_skateboard",defaultName:"Skateboard",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skateboard.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skateboard.png"]}}},{identifier:"imgly_sticker_emoticons_skull",defaultName:"Skull",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skull.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skull.png"]}}},{identifier:"imgly_sticker_emoticons_sleepy",defaultName:"Sleepy",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sleepy.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sleepy.png"]}}},{identifier:"imgly_sticker_emoticons_smile",defaultName:"Smile",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smile.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smile.png"]}}},{identifier:"imgly_sticker_emoticons_smoking",defaultName:"Smoking",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smoking.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smoking.png"]}}},{identifier:"imgly_sticker_emoticons_sobbing",defaultName:"Sobbing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sobbing.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sobbing.png"]}}},{identifier:"imgly_sticker_emoticons_star",defaultName:"Star",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_star.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_star.png"]}}},{identifier:"imgly_sticker_emoticons_steaming_furious",defaultName:"Steaming Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_steaming_furious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_steaming_furious.png"]}}},{identifier:"imgly_sticker_emoticons_sunbathing",defaultName:"Sunbathing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sunbathing.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sunbathing.png"]}}},{identifier:"imgly_sticker_emoticons_tired",defaultName:"Tired",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tired.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tired.png"]}}},{identifier:"imgly_sticker_emoticons_tongue_out_wink",defaultName:"Tongue Out Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tongue_out_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tongue_out_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wave",defaultName:"Wave",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wave.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wave.png"]}}},{identifier:"imgly_sticker_emoticons_wide_grin",defaultName:"Wide Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wide_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wide_grin.png"]}}},{identifier:"imgly_sticker_emoticons_wink",defaultName:"Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wrestler",defaultName:"Wrestler",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wrestler.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wrestler.png"]}}}]},{identifier:"imgly_sticker_shapes",defaultName:"Shapes",metaData:{backgroundImage:"stickers/shapes/background.png"},stickers:[{identifier:"imgly_sticker_shapes_arrow_02",defaultName:"Arrow 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236}}},{identifier:"imgly_sticker_shapes_arrow_03",defaultName:"Arrow 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_01",defaultName:"Badge 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_04",defaultName:"Badge 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589}}},{identifier:"imgly_sticker_shapes_badge_06",defaultName:"Badge 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733}}},{identifier:"imgly_sticker_shapes_badge_08",defaultName:"Badge 4",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_11",defaultName:"Badge 5",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_12",defaultName:"Badge 6",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903}}},{identifier:"imgly_sticker_shapes_badge_13",defaultName:"Badge 7",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718}}},{identifier:"imgly_sticker_shapes_badge_15",defaultName:"Badge 8",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_18",defaultName:"Badge 9",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_19",defaultName:"Badge 10",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_19.png"],width:2127,height:481},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_19.png"],width:2127,height:481}}},{identifier:"imgly_sticker_shapes_badge_20",defaultName:"Badge 11",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404}}},{identifier:"imgly_sticker_shapes_badge_28",defaultName:"Badge 12",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_32",defaultName:"Badge 13",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_35",defaultName:"Badge 14",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002}}},{identifier:"imgly_sticker_shapes_badge_36",defaultName:"Badge 15",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668}}},{identifier:"imgly_sticker_shapes_spray_01",defaultName:"Spray 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039}}},{identifier:"imgly_sticker_shapes_spray_03",defaultName:"Spray 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779}}},{identifier:"imgly_sticker_shapes_spray_04",defaultName:"Spray 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248}}}]}]}};let v2={};v2=window.navigator;var tc,V2e=244837814094590,DG=(V2e&16777215)==15715070;function Z(e,t,r){e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}function et(){return new Z(null)}function K2e(e,t,r,i,o,n){for(;--n>=0;){var s=t*this[e++]+r[i]+o;o=Math.floor(s/67108864),r[i++]=s&67108863}return o}function $2e(e,t,r,i,o,n){for(var s=t&32767,a=t>>15;--n>=0;){var l=this[e]&32767,c=this[e++]>>15,d=a*l+c*s;l=s*l+((d&32767)<<15)+r[i]+(o&1073741823),o=(l>>>30)+(d>>>15)+a*c+(o>>>30),r[i++]=l&1073741823}return o}function Y2e(e,t,r,i,o,n){for(var s=t&16383,a=t>>14;--n>=0;){var l=this[e]&16383,c=this[e++]>>14,d=a*l+c*s;l=s*l+((d&16383)<<14)+r[i]+o,o=(l>>28)+(d>>14)+a*c,r[i++]=l&268435455}return o}DG&&v2.appName=="Microsoft Internet Explorer"?(Z.prototype.am=$2e,tc=30):DG&&v2.appName!="Netscape"?(Z.prototype.am=K2e,tc=26):(Z.prototype.am=Y2e,tc=28);Z.prototype.DB=tc;Z.prototype.DM=(1<<tc)-1;Z.prototype.DV=1<<tc;var _2=52;Z.prototype.FV=Math.pow(2,_2);Z.prototype.F1=_2-tc;Z.prototype.F2=2*tc-_2;var X2e="0123456789abcdefghijklmnopqrstuvwxyz",mx=new Array,Cp,$o;Cp="0".charCodeAt(0);for($o=0;$o<=9;++$o)mx[Cp++]=$o;Cp="a".charCodeAt(0);for($o=10;$o<36;++$o)mx[Cp++]=$o;Cp="A".charCodeAt(0);for($o=10;$o<36;++$o)mx[Cp++]=$o;function IG(e){return X2e.charAt(e)}function OG(e,t){var r=mx[e.charCodeAt(t)];return r==null?-1:r}function J2e(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function Z2e(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function rc(e){var t=et();return t.fromInt(e),t}function Q2e(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var i=e.length,o=!1,n=0;--i>=0;){var s=r==8?e[i]&255:OG(e,i);if(s<0){e.charAt(i)=="-"&&(o=!0);continue}o=!1,n==0?this[this.t++]=s:n+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-n)-1)<<n,this[this.t++]=s>>this.DB-n):this[this.t-1]|=s<<n,n+=r,n>=this.DB&&(n-=this.DB)}r==8&&(e[0]&128)!=0&&(this.s=-1,n>0&&(this[this.t-1]|=(1<<this.DB-n)-1<<n)),this.clamp(),o&&Z.ZERO.subTo(this,this)}function eEe(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function tEe(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,i,o=!1,n="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(i=this[s]>>a)>0&&(o=!0,n=IG(i));s>=0;)a<t?(i=(this[s]&(1<<a)-1)<<t-a,i|=this[--s]>>(a+=this.DB-t)):(i=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),i>0&&(o=!0),o&&(n+=IG(i));return o?n:"0"}function rEe(){var e=et();return Z.ZERO.subTo(this,e),e}function iEe(){return this.s<0?this.negate():this}function oEe(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this[r]-e[r])!=0)return t;return 0}function fx(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function nEe(){return this.t<=0?0:this.DB*(this.t-1)+fx(this[this.t-1]^this.s&this.DM)}function sEe(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s}function aEe(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s}function lEe(e,t){var r=e%this.DB,i=this.DB-r,o=(1<<i)-1,n=Math.floor(e/this.DB),s=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)t[a+n+1]=this[a]>>i|s,s=(this[a]&o)<<r;for(a=n-1;a>=0;--a)t[a]=0;t[n]=s,t.t=this.t+n+1,t.s=this.s,t.clamp()}function cEe(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var i=e%this.DB,o=this.DB-i,n=(1<<i)-1;t[0]=this[r]>>i;for(var s=r+1;s<this.t;++s)t[s-r-1]|=(this[s]&n)<<o,t[s-r]=this[s]>>i;i>0&&(t[this.t-r-1]|=(this.s&n)<<o),t.t=this.t-r,t.clamp()}function dEe(e,t){for(var r=0,i=0,o=Math.min(e.t,this.t);r<o;)i+=this[r]-e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i-=e[r],t[r++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[r++]=this.DV+i:i>0&&(t[r++]=i),t.t=r,t.clamp()}function uEe(e,t){var r=this.abs(),i=e.abs(),o=r.t;for(t.t=o+i.t;--o>=0;)t[o]=0;for(o=0;o<i.t;++o)t[o+r.t]=r.am(0,i[o],t,o,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&Z.ZERO.subTo(t,t)}function pEe(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var i=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,i,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()}function hEe(e,t,r){var i=e.abs();if(i.t<=0)return;var o=this.abs();if(o.t<i.t){t!=null&&t.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=et());var n=et(),s=this.s,a=e.s,l=this.DB-fx(i[i.t-1]);l>0?(i.lShiftTo(l,n),o.lShiftTo(l,r)):(i.copyTo(n),o.copyTo(r));var c=n.t,d=n[c-1];if(d==0)return;var u=d*(1<<this.F1)+(c>1?n[c-2]>>this.F2:0),p=this.FV/u,h=(1<<this.F1)/u,b=1<<this.F2,y=r.t,f=y-c,w=t==null?et():t;for(n.dlShiftTo(f,w),r.compareTo(w)>=0&&(r[r.t++]=1,r.subTo(w,r)),Z.ONE.dlShiftTo(c,w),w.subTo(n,n);n.t<c;)n[n.t++]=0;for(;--f>=0;){var T=r[--y]==d?this.DM:Math.floor(r[y]*p+(r[y-1]+b)*h);if((r[y]+=n.am(0,T,r,f,0,c))<T)for(n.dlShiftTo(f,w),r.subTo(w,r);r[y]<--T;)r.subTo(w,r)}t!=null&&(r.drShiftTo(c,t),s!=a&&Z.ZERO.subTo(t,t)),r.t=c,r.clamp(),l>0&&r.rShiftTo(l,r),s<0&&Z.ZERO.subTo(r,r)}function mEe(e){var t=et();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(Z.ZERO)>0&&e.subTo(t,t),t}function md(e){this.m=e}function fEe(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function gEe(e){return e}function bEe(e){e.divRemTo(this.m,null,e)}function yEe(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function vEe(e,t){e.squareTo(t),this.reduce(t)}md.prototype.convert=fEe;md.prototype.revert=gEe;md.prototype.reduce=bEe;md.prototype.mulTo=yEe;md.prototype.sqrTo=vEe;function _Ee(){if(this.t<1)return 0;var e=this[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function fd(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function xEe(e){var t=et();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(Z.ZERO)>0&&this.m.subTo(t,t),t}function wEe(e){var t=et();return e.copyTo(t),this.reduce(t),t}function SEe(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e[t]&32767,i=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e[r]+=this.m.am(0,i,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function CEe(e,t){e.squareTo(t),this.reduce(t)}function TEe(e,t,r){e.multiplyTo(t,r),this.reduce(r)}fd.prototype.convert=xEe;fd.prototype.revert=wEe;fd.prototype.reduce=SEe;fd.prototype.mulTo=TEe;fd.prototype.sqrTo=CEe;function kEe(){return(this.t>0?this[0]&1:this.s)==0}function EEe(e,t){if(e>4294967295||e<1)return Z.ONE;var r=et(),i=et(),o=t.convert(this),n=fx(e)-1;for(o.copyTo(r);--n>=0;)if(t.sqrTo(r,i),(e&1<<n)>0)t.mulTo(i,o,r);else{var s=r;r=i,i=s}return t.revert(r)}function DEe(e,t){var r;return e<256||t.isEven()?r=new md(t):r=new fd(t),this.exp(e,r)}Z.prototype.copyTo=J2e;Z.prototype.fromInt=Z2e;Z.prototype.fromString=Q2e;Z.prototype.clamp=eEe;Z.prototype.dlShiftTo=sEe;Z.prototype.drShiftTo=aEe;Z.prototype.lShiftTo=lEe;Z.prototype.rShiftTo=cEe;Z.prototype.subTo=dEe;Z.prototype.multiplyTo=uEe;Z.prototype.squareTo=pEe;Z.prototype.divRemTo=hEe;Z.prototype.invDigit=_Ee;Z.prototype.isEven=kEe;Z.prototype.exp=EEe;Z.prototype.toString=tEe;Z.prototype.negate=rEe;Z.prototype.abs=iEe;Z.prototype.compareTo=oEe;Z.prototype.bitLength=nEe;Z.prototype.mod=mEe;Z.prototype.modPowInt=DEe;Z.ZERO=rc(0);Z.ONE=rc(1);function IEe(){var e=et();return this.copyTo(e),e}function OEe(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function AEe(){return this.t==0?this.s:this[0]<<24>>24}function REe(){return this.t==0?this.s:this[0]<<16>>16}function FEe(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function PEe(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function MEe(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),i=rc(r),o=et(),n=et(),s="";for(this.divRemTo(i,o,n);o.signum()>0;)s=(r+n.intValue()).toString(e).substr(1)+s,o.divRemTo(i,o,n);return n.intValue().toString(e)+s}function BEe(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),i=Math.pow(t,r),o=!1,n=0,s=0,a=0;a<e.length;++a){var l=OG(e,a);if(l<0){e.charAt(a)=="-"&&this.signum()==0&&(o=!0);continue}s=t*s+l,++n>=r&&(this.dMultiply(i),this.dAddOffset(s,0),n=0,s=0)}n>0&&(this.dMultiply(Math.pow(t,n)),this.dAddOffset(s,0)),o&&Z.ZERO.subTo(this,this)}function LEe(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(Z.ONE.shiftLeft(e-1),x2,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(Z.ONE.shiftLeft(e-1),this);else{var i=new Array,o=e&7;i.length=(e>>3)+1,t.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256)}}function zEe(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,i,o=0;if(e-- >0)for(r<this.DB&&(i=this[e]>>r)!=(this.s&this.DM)>>r&&(t[o++]=i|this.s<<this.DB-r);e>=0;)r<8?(i=(this[e]&(1<<r)-1)<<8-r,i|=this[--e]>>(r+=this.DB-8)):(i=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),(i&128)!=0&&(i|=-256),o==0&&(this.s&128)!=(i&128)&&++o,(o>0||i!=this.s)&&(t[o++]=i);return t}function NEe(e){return this.compareTo(e)==0}function UEe(e){return this.compareTo(e)<0?this:e}function jEe(e){return this.compareTo(e)>0?this:e}function qEe(e,t,r){var i,o,n=Math.min(e.t,this.t);for(i=0;i<n;++i)r[i]=t(this[i],e[i]);if(e.t<this.t){for(o=e.s&this.DM,i=n;i<this.t;++i)r[i]=t(this[i],o);r.t=this.t}else{for(o=this.s&this.DM,i=n;i<e.t;++i)r[i]=t(o,e[i]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function GEe(e,t){return e&t}function WEe(e){var t=et();return this.bitwiseTo(e,GEe,t),t}function x2(e,t){return e|t}function HEe(e){var t=et();return this.bitwiseTo(e,x2,t),t}function AG(e,t){return e^t}function VEe(e){var t=et();return this.bitwiseTo(e,AG,t),t}function RG(e,t){return e&~t}function KEe(e){var t=et();return this.bitwiseTo(e,RG,t),t}function $Ee(){for(var e=et(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function YEe(e){var t=et();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function XEe(e){var t=et();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function JEe(e){if(e==0)return-1;var t=0;return(e&65535)==0&&(e>>=16,t+=16),(e&255)==0&&(e>>=8,t+=8),(e&15)==0&&(e>>=4,t+=4),(e&3)==0&&(e>>=2,t+=2),(e&1)==0&&++t,t}function ZEe(){for(var e=0;e<this.t;++e)if(this[e]!=0)return e*this.DB+JEe(this[e]);return this.s<0?this.t*this.DB:-1}function QEe(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function eDe(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=QEe(this[r]^t);return e}function tDe(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this[t]&1<<e%this.DB)!=0}function rDe(e,t){var r=Z.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function iDe(e){return this.changeBit(e,x2)}function oDe(e){return this.changeBit(e,RG)}function nDe(e){return this.changeBit(e,AG)}function sDe(e,t){for(var r=0,i=0,o=Math.min(e.t,this.t);r<o;)i+=this[r]+e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i+=e[r],t[r++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[r++]=i:i<-1&&(t[r++]=this.DV+i),t.t=r,t.clamp()}function aDe(e){var t=et();return this.addTo(e,t),t}function lDe(e){var t=et();return this.subTo(e,t),t}function cDe(e){var t=et();return this.multiplyTo(e,t),t}function dDe(){var e=et();return this.squareTo(e),e}function uDe(e){var t=et();return this.divRemTo(e,t,null),t}function pDe(e){var t=et();return this.divRemTo(e,null,t),t}function hDe(e){var t=et(),r=et();return this.divRemTo(e,t,r),new Array(t,r)}function mDe(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function fDe(e,t){if(e==0)return;for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}function eg(){}function FG(e){return e}function gDe(e,t,r){e.multiplyTo(t,r)}function bDe(e,t){e.squareTo(t)}eg.prototype.convert=FG;eg.prototype.revert=FG;eg.prototype.mulTo=gDe;eg.prototype.sqrTo=bDe;function yDe(e){return this.exp(e,new eg)}function vDe(e,t,r){var i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r[--i]=0;var o;for(o=r.t-this.t;i<o;++i)r[i+this.t]=this.am(0,e[i],r,i,0,this.t);for(o=Math.min(e.t,t);i<o;++i)this.am(0,e[i],r,i,0,t-i);r.clamp()}function _De(e,t,r){--t;var i=r.t=this.t+e.t-t;for(r.s=0;--i>=0;)r[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)r[this.t+i-t]=this.am(t-i,e[i],r,0,0,this.t+i-t);r.clamp(),r.drShiftTo(1,r)}function Tp(e){this.r2=et(),this.q3=et(),Z.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function xDe(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=et();return e.copyTo(t),this.reduce(t),t}function wDe(e){return e}function SDe(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function CDe(e,t){e.squareTo(t),this.reduce(t)}function TDe(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Tp.prototype.convert=xDe;Tp.prototype.revert=wDe;Tp.prototype.reduce=SDe;Tp.prototype.mulTo=TDe;Tp.prototype.sqrTo=CDe;function kDe(e,t){var r=e.bitLength(),i,o=rc(1),n;if(r<=0)return o;r<18?i=1:r<48?i=3:r<144?i=4:r<768?i=5:i=6,r<8?n=new md(t):t.isEven()?n=new Tp(t):n=new fd(t);var s=new Array,a=3,l=i-1,c=(1<<i)-1;if(s[1]=n.convert(this),i>1){var d=et();for(n.sqrTo(s[1],d);a<=c;)s[a]=et(),n.mulTo(d,s[a-2],s[a]),a+=2}var u=e.t-1,p,h=!0,b=et(),y;for(r=fx(e[u])-1;u>=0;){for(r>=l?p=e[u]>>r-l&c:(p=(e[u]&(1<<r+1)-1)<<l-r,u>0&&(p|=e[u-1]>>this.DB+r-l)),a=i;(p&1)==0;)p>>=1,--a;if((r-=a)<0&&(r+=this.DB,--u),h)s[p].copyTo(o),h=!1;else{for(;a>1;)n.sqrTo(o,b),n.sqrTo(b,o),a-=2;a>0?n.sqrTo(o,b):(y=o,o=b,b=y),n.mulTo(b,s[p],o)}for(;u>=0&&(e[u]&1<<r)==0;)n.sqrTo(o,b),y=o,o=b,b=y,--r<0&&(r=this.DB-1,--u)}return n.revert(o)}function EDe(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var i=t;t=r,r=i}var o=t.getLowestSetBit(),n=r.getLowestSetBit();if(n<0)return t;for(o<n&&(n=o),n>0&&(t.rShiftTo(n,t),r.rShiftTo(n,r));t.signum()>0;)(o=t.getLowestSetBit())>0&&t.rShiftTo(o,t),(o=r.getLowestSetBit())>0&&r.rShiftTo(o,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return n>0&&r.lShiftTo(n,r),r}function DDe(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this[0]%e;else for(var i=this.t-1;i>=0;--i)r=(t*r+this[i])%e;return r}function IDe(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return Z.ZERO;for(var r=e.clone(),i=this.clone(),o=rc(1),n=rc(0),s=rc(0),a=rc(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!o.isEven()||!n.isEven())&&(o.addTo(this,o),n.subTo(e,n)),o.rShiftTo(1,o)):n.isEven()||n.subTo(e,n),n.rShiftTo(1,n);for(;i.isEven();)i.rShiftTo(1,i),t?((!s.isEven()||!a.isEven())&&(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(i)>=0?(r.subTo(i,r),t&&o.subTo(s,o),n.subTo(a,n)):(i.subTo(r,i),t&&s.subTo(o,s),a.subTo(n,a))}if(i.compareTo(Z.ONE)!=0)return Z.ZERO;if(a.compareTo(e)>=0)return a.subtract(e);if(a.signum()<0)a.addTo(e,a);else return a;return a.signum()<0?a.add(e):a}var bi=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ODe=(1<<26)/bi[bi.length-1];function ADe(e){var t,r=this.abs();if(r.t==1&&r[0]<=bi[bi.length-1]){for(t=0;t<bi.length;++t)if(r[0]==bi[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<bi.length;){for(var i=bi[t],o=t+1;o<bi.length&&i<ODe;)i*=bi[o++];for(i=r.modInt(i);t<o;)if(i%bi[t++]==0)return!1}return r.millerRabin(e)}function RDe(e){var t=this.subtract(Z.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var i=t.shiftRight(r);e=e+1>>1,e>bi.length&&(e=bi.length);for(var o=et(),n=0;n<e;++n){o.fromInt(bi[Math.floor(Math.random()*bi.length)]);var s=o.modPow(i,this);if(s.compareTo(Z.ONE)!=0&&s.compareTo(t)!=0){for(var a=1;a++<r&&s.compareTo(t)!=0;)if(s=s.modPowInt(2,this),s.compareTo(Z.ONE)==0)return!1;if(s.compareTo(t)!=0)return!1}}return!0}Z.prototype.chunkSize=FEe;Z.prototype.toRadix=MEe;Z.prototype.fromRadix=BEe;Z.prototype.fromNumber=LEe;Z.prototype.bitwiseTo=qEe;Z.prototype.changeBit=rDe;Z.prototype.addTo=sDe;Z.prototype.dMultiply=mDe;Z.prototype.dAddOffset=fDe;Z.prototype.multiplyLowerTo=vDe;Z.prototype.multiplyUpperTo=_De;Z.prototype.modInt=DDe;Z.prototype.millerRabin=RDe;Z.prototype.clone=IEe;Z.prototype.intValue=OEe;Z.prototype.byteValue=AEe;Z.prototype.shortValue=REe;Z.prototype.signum=PEe;Z.prototype.toByteArray=zEe;Z.prototype.equals=NEe;Z.prototype.min=UEe;Z.prototype.max=jEe;Z.prototype.and=WEe;Z.prototype.or=HEe;Z.prototype.xor=VEe;Z.prototype.andNot=KEe;Z.prototype.not=$Ee;Z.prototype.shiftLeft=YEe;Z.prototype.shiftRight=XEe;Z.prototype.getLowestSetBit=ZEe;Z.prototype.bitCount=eDe;Z.prototype.testBit=tDe;Z.prototype.setBit=iDe;Z.prototype.clearBit=oDe;Z.prototype.flipBit=nDe;Z.prototype.add=aDe;Z.prototype.subtract=lDe;Z.prototype.multiply=cDe;Z.prototype.divide=uDe;Z.prototype.remainder=pDe;Z.prototype.divideAndRemainder=hDe;Z.prototype.modPow=kDe;Z.prototype.modInverse=IDe;Z.prototype.pow=yDe;Z.prototype.gcd=EDe;Z.prototype.isProbablePrime=ADe;Z.prototype.square=dDe;var PG=Z;function MG(e){var t=8,r=0;function i(f,w){var T=(f&65535)+(w&65535),C=(f>>16)+(w>>16)+(T>>16);return C<<16|T&65535}function o(f,w){return f>>>w|f<<32-w}function n(f,w){return f>>>w}function s(f,w,T){return f&w^~f&T}function a(f,w,T){return f&w^f&T^w&T}function l(f){return o(f,2)^o(f,13)^o(f,22)}function c(f){return o(f,6)^o(f,11)^o(f,25)}function d(f){return o(f,7)^o(f,18)^n(f,3)}function u(f){return o(f,17)^o(f,19)^n(f,10)}function p(f,w){var T=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),C=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),F=new Array(64),k,E,W,K,D,B,Y,de,he,ue,ct,H;f[w>>5]|=128<<24-w%32,f[(w+64>>9<<4)+15]=w;for(var he=0;he<f.length;he+=16){k=C[0],E=C[1],W=C[2],K=C[3],D=C[4],B=C[5],Y=C[6],de=C[7];for(var ue=0;ue<64;ue++)ue<16?F[ue]=f[ue+he]:F[ue]=i(i(i(u(F[ue-2]),F[ue-7]),d(F[ue-15])),F[ue-16]),ct=i(i(i(i(de,c(D)),s(D,B,Y)),T[ue]),F[ue]),H=i(l(k),a(k,E,W)),de=Y,Y=B,B=D,D=i(K,ct),K=W,W=E,E=k,k=i(ct,H);C[0]=i(k,C[0]),C[1]=i(E,C[1]),C[2]=i(W,C[2]),C[3]=i(K,C[3]),C[4]=i(D,C[4]),C[5]=i(B,C[5]),C[6]=i(Y,C[6]),C[7]=i(de,C[7])}return C}function h(f){for(var w=Array(),T=(1<<t)-1,C=0;C<f.length*t;C+=t)w[C>>5]|=(f.charCodeAt(C/t)&T)<<24-C%32;return w}function b(f){f=f.replace(/\r\n/g,`
`);for(var w="",T=0;T<f.length;T++){var C=f.charCodeAt(T);C<128?w+=String.fromCharCode(C):C>127&&C<2048?(w+=String.fromCharCode(C>>6|192),w+=String.fromCharCode(C&63|128)):(w+=String.fromCharCode(C>>12|224),w+=String.fromCharCode(C>>6&63|128),w+=String.fromCharCode(C&63|128))}return w}function y(f){for(var w=r?"0123456789ABCDEF":"0123456789abcdef",T="",C=0;C<f.length*4;C++)T+=w.charAt(f[C>>2]>>(3-C%4)*8+4&15)+w.charAt(f[C>>2]>>(3-C%4)*8&15);return T}return e=b(e),y(p(h(e),e.length*t))}const FDe=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g,PDe=/^(0|[1-9]\d*)\.(0|[1-9]\d*)(\.(0|[1-9]\d*))?(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g;class kp{get major(){return this._major}get minor(){return this._minor}get patch(){return this._patch}constructor(e,t=!1){const r=t?PDe:FDe,i=r.exec(e);r.lastIndex=0,this._major=i[1],this._minor=i[2],this._patch=i[3]||0}equals(e){return this._major===e._major&&this._minor===e._minor&&this._patch===e._patch}isMoreRecentThan(e){if(this._major<e.major)return!1;if(this._major>e.major)return!0;if(this._minor<e.minor)return!1;if(this._minor>e.minor)return!0;if(this._patch<=e.patch)return!1;if(this._patch>e.patch)return!0}}const Gr=e=>j.byteArrayToString(Rn.decode(e));function MDe(e){return e.map(t=>`0${(t&255).toString(16)}`.slice(-2)).join("")}const BDe="TDNSeVlXTnJQMkZ3YVV0bGVUMD0=",LDe="ZW50ZXJwcmlzZV9saWNlbnNl",BG="YXBwX2lkZW50aWZpZXJz",zDe="cGxhdGZvcm0=",LG="ZmVhdHVyZXM=",w2="ZXhwaXJlc19hdA==",NDe="ZG9tYWlucw==",UDe="YXBpX3Rva2Vu",S2="c2lnbmF0dXJl",jDe="dmVyc2lvbg==";class qDe{constructor(e){this._version="2.4",this._l=typeof e=="string"?e.trim():e,this._e=this._parseBigInt("65537",10),this._n=this._parseBigInt("681984042382424091378806337544846672160292647422517223678775230983366046720611873368204040735766698395282492937192783016867164773742859209434481353888637963692711665138989982680829529436715362566735813634679619274059040232728883894511099669775400556584329435375723951309340934658571478665059403241851229195311069345899870108307225910988692123234379186643268583453907260879685992156955936561142314233983397819356937109343127504441076920088455337597736475086676246750168976219763398350254797168313954762459542746440628077261880980924552698138857743609502132632199713575442848784271304503226045319991689413234228439044522583790713890093165912455428688507463773064216328753265963237930998706891042679105987175588970202082466871461192706070321938250462103821558100761330890228135620208935801286878657384108721268761878694436895194628411397454202904351577771506916746612289964053490210990342857409030179406810634136188751670648983222653319056818302012063874664196648868156305696644664362171542503665321455971335955948698828939948786720193132672749776162913092000667953299803216404664087988046584107737900256954976744353601826341965438148646041640662195744770544094748295945844184507459808803114917301124088082458306086473490516969815873631",10),this._parseLicense()}v(){return this._sigValid()&&!this.isExp()}_jsonValid(){try{this._decLic=JSON.parse(this._l)}catch(e){return this._decLic={},!1}return!0}_hostnameValid(){if(typeof window=="undefined")return!0;if(!this._decLic[Gr(BG)].length)return!0;const{hostname:e}=window.location;let t=!1;return this._decLic[Gr(BG)].forEach(r=>{j.wildCardMatch(e,r)&&(t=!0)}),t}_platformValid(){const e=this._decLic[Gr(zDe)],t="HTML5";return t===e}c(){return new Promise((e,t)=>{const r=this._validateError();r!==null&&t(r),e()})}validate(){const e=this._validateError();return!(e!==null)}_validateError(){const e=typeof this._l;if(e!=="string"||!this._jsonValid()){const t=new Error;return t.code="ELICINVFMT",t}if(!this._sigValid()){const t=new Error;return t.code="ELICINV",t}if(!this._hostnameValid()){const t=new Error;return t.code="ELICINVHOST",t}if(!this._platformValid()){const t=new Error;return t.code="ELICINVPLAT",t}if(this.isExp()){const t=new Error;return t.code="ELICEXP",t}return null}isToolAllowed(e){return this._includesFeature(e)}isWhiteLabel(){return this._includesFeature("whitelabel",new kp("2.4",!0))}areCustomAssetsAllowed(){return this._includesFeature("customassets",new kp("2.4",!0))}t(){if(this._decLic.enterprise_license)return Promise.resolve();if(this._includesFeature("noexporttracking",new kp("2.4",!0)))return Promise.resolve();const e=this._decLic[Gr(NDe)][0]+Gr(Gr(BDe))+this._decLic[Gr(UDe)],t=new Fn(e);return t.load()}isENT(){return this._decLic?this._decLic[Gr(LDe)]:!1}_sigValid(){return this._verify(this._message,this._sig)}exp(){return!!this._decLic[Gr(w2)]}dl(){return Math.ceil((this._expAt()-Date.now())/(60*60*24*1e3))}isExp(e=Date.now()){return this._decLic[Gr(w2)]===null?!1:e>this._expAt()}_expAt(){return this._decLic[Gr(w2)]*1e3}_verify(e,t){let r,i;i=this._encodeMessage(e),r=this._decodeSignature(t),r=r.substr(-64);const o=i===r;return o}_encodeMessage(e){const t=MG(e);return t}_decodeSignature(e){let t;return e=Rn.decode(e),e=MDe(e),e=this._parseBigInt(e,16),t=e.modPowInt(this._e,this._n),t=t.toString(16),t}_parseBigInt(e,t){return new PG(e,t)}_parseLicense(){if(typeof this._l!="string")return;if(!this._jsonValid())return;this._sig=this._decLic[Gr(S2)]||"",delete this._decLic[Gr(S2)],this._sig=this._sig.replace(/[^A-Za-z0-9+/=]/g,""),this._message=this._l.replace(new RegExp(`,"${Gr(S2)}":"([^"]*)"`),"")}_includesFeature(e,t=new kp("1.0",!0)){const r=new kp(this._decLic[Gr(jDe)],!0);return t.isMoreRecentThan(r)?!0:this._decLic[Gr(LG)]&&this._decLic[Gr(LG)].indexOf(e)!==-1}}class zG{v(){return!0}c(){return Promise.resolve()}isToolAllowed(e){return!0}isWhiteLabel(){return!1}areCustomAssetsAllowed(){return!0}t(){return Promise.resolve()}isENT(){return!1}exp(){return!1}dl(){return 0}isExp(e=Date.now()){return!1}}var gx=qDe;const gd=typeof window=="undefined"?global:window;let Na=gd.requestAnimationFrame,ic=gd.cancelAnimationFrame,NG=0;const bx=["ms","moz","webkit","o"];for(let e=0;e<bx.length&&!Na;++e)Na=gd[`${bx[e]}RequestAnimationFrame`],ic=gd[`${bx[e]}CancelAnimationFrame`]||gd[`${bx[e]}CancelRequestAnimationFrame`];Na&&(Na=Na.bind(gd));ic&&(ic=ic.bind(gd));Na||(Na=function(e,t){const r=new Date().getTime(),i=Math.max(0,16-(r-NG)),o=setTimeout(function(){e(r+i)},i);return NG=r+i,o});ic||(ic=function(e){clearTimeout(e)});const te={};Tt(te,{ColorMatrix:()=>Yf,CubicBezierCurve:()=>C2,Matrix:()=>Vo,Range:()=>T2,Rectangle:()=>Ot,Vector2:()=>ye,Vector3:()=>k2});class GDe{constructor(e=new ye(0,0),t=new ye(1,1),r=new ye(2,-1),i=new ye(2,0)){this._p0=e.clone(),this._p1=t.clone(),this._p2=r.clone(),this._p3=i.clone(),this._segments=[],this._length=-1,this._sample=[]}set(e=new ye(0,0),t=new ye(1,1),r=new ye(2,1),i=new ye(2,0)){this._p0=e.clone(),this._p1=t.clone(),this._p2=r.clone(),this._p3=i.clone()}getLength(){return this._length}calculateSegments(e=100){let t=0,r=0;const i=[],o=1/e;let n=this._p0.clone();for(let s=1;s<=e;s++){const a=[];a.push({t,s:r,point:n}),t+=o,t=Math.min(t,1);const l=this.evalAt(t),c=l.clone().subtract(n);r+=c.len(),a.push({t,s:r,point:l}),i.push(a),n=l}return this._segments=i,this._length=r,r}evalAt(e){e=this.normalizeParameter(e);const t=this._p0.clone().multiply((1-e)**3),r=this._p1.clone().multiply(3*(1-e)*(1-e)*e),i=this._p2.clone().multiply(3*(1-e)*e*e),o=this._p3.clone().multiply(e*e*e);return t.add(r).add(i).add(o)}isInSegment(e,t){return e=this.normalizeArcLength(e),e>=t[0].s&&e<=t[1].s}getArcLengthSegment(e){e=this.normalizeArcLength(e);for(let t=0;t<this._segments.length;t++){const r=this._segments[t];if(this.isInSegment(e,r))return r}return null}normalizeArcLength(e){return Math.max(Math.min(this._length,e),0)}normalizeParameter(e){return Math.max(Math.min(1,e),0)}getParameterForArcLength(e){const t=this.normalizeArcLength(e),r=this.getArcLengthSegment(t);if(!r)return ie.warn("CubicBezierCurve#getParameterForArcLength","Segment not found."),-1;const i=(t-r[1].s)/(r[0].s-r[1].s);return i*r[0].t+(1-i)*r[1].t}evalAtArcLength(e){return this.evalAt(this.getParameterForArcLength(e))}approximateAtArcLength(e){const t=this.normalizeArcLength(e),r=this.getArcLengthSegment(t);if(!r)return-1;const i=(t-r[1].s)/(r[0].s-r[1].s);return r[0].point.clone().multiply(i).add(r[1].point.clone().multiply(1-i))}parameterSample(e=100){const t=1/e,r=[];let i=0;for(let o=0;o<=e+1;o++)r.push(this.evalAt(i)),i+=t;return this._sample=r,[...r]}arcLengthApproxSample(e=100,t=!1,r=!1){const i=this._length/e,o=[];let n=0;for(let s=t?1:0;s<e+1;s++)o.push(this.approximateAtArcLength(n)),n+=i;return r&&o.pop(),this._sample=o,[...o]}}var C2=GDe;class WDe{constructor(e,t){this.min=e,this.max=t}getMin(){return this.min}getMax(){return this.max}getLength(){return this.max-this.min}contains(e){return this.min<=e&&e<=this.max}}var T2=WDe;class fo{constructor(e,t,r){this.x=e,this.y=t,this.z=r,typeof this.x=="undefined"&&(this.x=0),typeof this.y=="undefined"&&(this.y=0),typeof this.z=="undefined"&&(this.z=0)}set(e,t,r){return this.x=e,this.y=t,this.z=r,this}clone(){return new fo(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}clamp(e,t){const r=e!==null&&typeof e!="undefined",i=t!==null&&typeof t!="undefined";return!(e instanceof fo)&&r&&(e=new fo(e,e,e)),!(t instanceof fo)&&i&&(t=new fo(t,t,t)),r&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y),this.z=Math.max(e.z,this.z)),i&&(this.x=Math.min(t.x,this.x),this.y=Math.min(t.y,this.y),this.z=Math.min(t.z,this.z)),this}divide(e){return e instanceof fo?(this.x/=e.x,this.y/=e.y,this.z/=e.z):(this.x/=e,this.y/=e,this.z/=e),this}subtract(e){return e instanceof fo?(this.x-=e.x,this.y-=e.y,this.z-=e.z):(this.x-=e,this.y-=e,this.z-=e),this}multiply(e){return e instanceof fo?(this.x*=e.x,this.y*=e.y,this.z*=e.z):(this.x*=e,this.y*=e,this.z*=e),this}add(e){return e instanceof fo?(this.x+=e.x,this.y+=e.y,this.z+=e.z):(this.x+=e,this.y+=e,this.z+=e),this}equals(e){return e instanceof fo?e.x===this.x&&e.y===this.y&&e.z===this.z:e===this.x&&e===this.y&&e===this.z}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}fract(){return this.x%=1,this.y%=1,this.z%=1,this}toInt(){return this.x|=0,this.y|=0,this.z|=0,this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this}len(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}min(){return Math.min(Math.min(this.x,this.y),this.z)}max(){return Math.max(Math.max(this.x,this.y),this.z)}toObject(){return{x:this.x,y:this.y,z:this.z}}toString(){return`Vector3({ x: ${this.x}, y: ${this.y}, z: ${this.z} })`}roundDecimal(e){return this.x=parseFloat(this.x.toFixed(e)),this.y=parseFloat(this.y.toFixed(e)),this.z=parseFloat(this.z.toFixed(e)),this}static fromObject(e){return new fo(e.x,e.y,e.z)}static get NULL(){return new fo(0,0,0)}}var k2=fo;class UG{constructor(){this._container=new Yl;this._sprite=new yx;this._container.addChild(this._sprite)}render(e,t,r){const i=r.getDimensions(),o=this._getNextHighestPOT(i);this._renderTexture?this._renderTexture.resizeTo(o):this._renderTexture=new hx(e,o.x,o.y);const n=this._renderTexture.getDimensions();this._sprite.setTexture(r),this._sprite.updateTransform(),this._renderTexture.clear(),this._renderTexture.render(this._container),this._updateSprite(e,t,i,n)}_updateSprite(e,t,r,i){t.setTexture(this._renderTexture),this._renderTexture.setFrame(new Ot(0,0,r.x,r.y))}_getNextHighestPOT(e){return new ye(j.nextHighestPOT(e.x),j.nextHighestPOT(e.y))}getRenderTexture(){return this._renderTexture}dispose(){if(!this._renderTexture)return;this._renderTexture.dispose(),delete this._renderTexture}}class yx extends Yl{constructor(e){super();this._shader=null;this._width=0;this._height=0;this._anchor=new ye(0,0);this._canvasSmoothingEnabled=!0;this._smoothDownscaling=!1;this._onTextureUpdate=this._onTextureUpdate.bind(this),this.setTexture(e)}_onTextureUpdate(){this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}_renderWebGL(e){const t=e.save();this._smoothDownscaling&&(this._potRenderer||(this._potRenderer=new UG),this._texture&&this._potRenderer.render(e,this,this._texture)),e.restore(t),e.setObjectRenderer(e.renderers.sprite),e.renderers.sprite.render(this)}_renderCanvas(e){if(!this._texture)return;const t=this._worldTransform,r=this._texture.getFrame(),{width:i,height:o}=r,n=e.getCurrentRenderTarget().getPixelRatio(),s=this._anchor.x*-i|0,a=this._anchor.y*-o|0,l=e.getContext();if(l.setTransform(t.a,t.b,t.c,t.d,t.tx*n,t.ty*n),l.globalAlpha=this.getWorldAlpha(),!this._texture)return;const c=this._texture.getBaseTexture(),d=c.getPixelRatio(),u=c.getSource();l.imageSmoothingEnabled=this._canvasSmoothingEnabled,"beforeDraw"in e&&e.beforeDraw(l),l.drawImage(u,0,0,(u.naturalWidth||i)*d,(u.naturalHeight||o)*d,s*n,a*n,i*n,o*n)}isAtPosition(e){if(!this._texture)return;const t=this._worldTransform.applyInverseToVector(e),r=this._texture.getFrame(),{width:i,height:o}=r,n=new ye(-i,-o);n.multiply(this._anchor);const s=n.clone().add(i,o);return!(t.x<n.x||t.x>s.x||t.y<n.y||t.y>s.y)}getLocalBounds(){if(this._localBoundsNeedUpdate&&this._texture){const e=this._localBounds,t=this._texture.getFrame();e.x=-t.width*this._anchor.x,e.y=-t.height*this._anchor.y,e.width=t.width,e.height=t.height,this._localBoundsNeedUpdate=!1}return this._localBounds.clone()}getBounds(){if(this._boundsNeedUpdate&&this._texture){const e=this._bounds,t=this._texture.getFrame(),r=this._worldTransform,i=this._anchor,o=r.rectangleToCoordinates(t,i);let n=o[0].x,s=o[0].y,a=n,l=s;o.forEach(({x:c,y:d})=>{n=Math.min(n,c),s=Math.min(s,d),a=Math.max(a,c),l=Math.max(l,d)}),e.x=n,e.width=Math.abs(a-n),e.y=s,e.height=Math.abs(l-s),this._boundsNeedUpdate=!1}return this._bounds.clone()}getTexture(){return this._texture}clearTexture(e=!0){if(!this._texture)return;this._texture.off("update",this._onTextureUpdate),e&&this._texture.dispose(),this._texture=null,this._potRenderer&&(e&&this._potRenderer.dispose(),delete this._potRenderer)}setTexture(e){if(!e)return;this._texture&&this._texture.off("update",this._onTextureUpdate),this._potRenderer&&this._potRenderer.getRenderTexture().getBaseTexture().setDirty(!0),this._texture=e,e.getBaseTexture().isLoaded()&&this._onTextureUpdate(),e.on("update",this._onTextureUpdate)}getShader(){return this._shader}setShader(e){this._shader=e}getWidth(){return this._width}setWidth(e){if(!this._texture)return;this._scale.x=e/this._texture.getFrame().width,this._width=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}getHeight(){return this._height}setHeight(e){if(!this._texture)return;this._scale.y=e/this._texture.getFrame().height,this._height=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}getDimensions(){return new ye(this._width,this._height)}getAnchor(){return this._anchor}setAnchor(e,t){this._anchor.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}isSmoothDownscaling(){return this._smoothDownscaling}setSmoothDownscaling(e){this._smoothDownscaling=e}dispose(e=!1,t=!1){this._texture&&this._texture.off("update",this._onTextureUpdate),(e||t)&&this._texture&&this._texture.dispose(t),this._potRenderer&&this._potRenderer.dispose()}}const HDe={CanvasFilterManager:_p,Container:Yl,BaseTexture:At,Texture:wp,RenderTexture:hx,WebGLRenderTarget:Ql,CanvasRenderTarget:Zl,Sprite:yx,Filter:Ds,Filters:f2,PixelArrayImage:Wf,autoDetectRenderer(e,t,r={}){return Or.isSupported()?new px(e,t,r):new xp(e,t,r)},canvasRenderer(e,t,r={}){return new xp(e,t,r)}};var U=HDe;class VDe{static current(){return process.env.ENV}static isTest(){return process.env.ENV==="test"}static isDevelopment(){return process.env.ENV==="development"}static isProduction(){return process.env.ENV==="production"||!this.isTest()&&!this.isDevelopment()}}var jG=VDe;class KDe{constructor(e){this._head=0,this._buf=e}peekInt8(){return this._buf[this._head]}peekInt16(e=!1){const t=this._buf[this._head],r=this._buf[this._head+1];return e?(r<<8)+t:(t<<8)+r}peekInt24(e=!1){const t=this._buf[this._head],r=this._buf[this._head+1],i=this._buf[this._head+2];return e?(i<<16)+(r<<8)+t:(t<<16)+(r<<8)+i}peekInt32(e=!1){const t=this._buf[this._head],r=this._buf[this._head+1],i=this._buf[this._head+2],o=this._buf[this._head+3];return e?(o<<32)+(i<<16)+(r<<8)+t:(t<<32)+(r<<16)+(i<<8)+o}writeInt8(e){this._buf[this._head]=e&255}writeInt16(e){this._buf[this._head]=e>>8,this._buf[this._head+1]=e&255}readInt8(){const e=this.peekInt8();return this._head+=1,e}readInt16(e=!1){const t=this.peekInt16(e);return this._head+=2,t}readInt24(e=!1){const t=this.peekInt24(e);return this._head+=3,t}readInt32(e=!1){const t=this.peekInt32(e);return this._head+=4,t}readString(e){let t="";for(let r=0;r<e;r++){const i=this.readInt8();t+=String.fromCharCode(i)}return t}getHead(){return this._head}setHead(e){this._head=e}}var bd=KDe;const $De={SOI:65496,SOS:65498,APP0:65504,APP1:65505,JFIF:65504,EXIF:65505},YDe={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"};var Ep={MARKERS:$De,EXIF_TAGS:YDe};const{invariant:E2}=j,{MARKERS:XDe,EXIF_TAGS:qG}=Ep;class JDe{constructor(e){this._buf=e,this._stream=new bd(this._buf),this._stream.setHead(0),this._parse(),this._bigEndian=!1}isValid(){this._stream.setHead(0);const e=this._stream.readInt16();if(e!==XDe.EXIF)return!1;const t=this._stream.readInt16();if(!(t>0))return!1;const r=this._stream.readString(4);return!(r!=="Exif")}_parse(){if(!this.isValid())return;this._stream.setHead(10);const e=this._stream.getHead();this._bigEndian=!1;const t=this._stream.readInt16();t===18761?this._bigEndian=!1:t===19789?this._bigEndian=!0:E2(!1,"Invalid TIFF data: No endian type found"),E2(this._stream.readInt16(!this._bigEndian)===42,"Invalid TIFF data: No 0x002A");const r=this._stream.readInt32(!this._bigEndian);E2(r>=8,"Invalid TIFF data: First IFD offset < 8");const i=e+r,o=this._readTags(this._stream,e,i,this._bigEndian);this._tags=o.tags,this._tagData=o.tagData}getTags(){return this._tags}getTagData(){return this._tagData}setOrientation(e){if(this._tagData.Orientation){const{entryOffset:t}=this._tagData.Orientation;this._stream.setHead(t+8),this._stream.writeInt16(this._bigEndian?e:(e&255)<<8|e>>8&255)}}_readTags(e,t,r,i){e.setHead(r);const o=e.readInt16(!i),n={},s=[];for(let a=0;a<o;a++){const l=r+a*12+2;e.setHead(l);let c=e.readInt16(!i),d,u,p;if(qG[c]){c=qG[c],d=e.readInt16(!i),u=e.readInt32(!i),p=e.readInt32(!i)+t;let h=null;switch(d){case 1:case 7:if(u===1)h=e.readInt8(!i);else{h=[];for(let b=0;b<u;b++)h.push(e.readInt8(!i))}break;case 2:e.setHead(u>4?p:l+8),h=e.readString(u);break;case 3:if(e.setHead(u>2?p:l+8),u===1)h=e.readInt16(!i);else{h=[];for(let b=0;b<u;b++)h.push(e.readInt16(!i))}break;case 4:case 9:if(e.setHead(u>1?p:l+8),u===1)h=e.readInt32(!i);else{h=[];for(let b=0;b<u;b++)h.push(e.readInt32(!i))}break;case 5:case 10:if(e.setHead(p),u===1){const b=e.readInt32(!i),y=e.readInt32(!i);h=b/y}else{h=[];for(let b=0;b<u;b++){const y=e.readInt32(!i),f=e.readInt32(!i),w=y/f;h.push(w)}}break}n[c]=h,s[c]={value:h,numValues:u,entryOffset:l,valueOffset:p,type:d}}}return{tags:n,tagData:s}}getBuffer(){return this._buf}}var GG=JDe;const{MARKERS:ZDe}=Ep;class QDe{constructor(e){this._buf=e,this._stream=new bd(this._buf),this._stream.setHead(0)}isValid(){this._stream.setHead(0);const e=this._stream.readInt16();if(e!==ZDe.APP0)return!1;const t=this._stream.readInt16();if(!(t>=16))return!1;const r=this._stream.readString(4),i=this._stream.readInt8();return r==="JFIF"?i===0:!1}setUnitDensity(e){this._stream.setHead(11),this._stream.writeInt8(e)}setDensityX(e){this._stream.setHead(12),this._stream.writeInt16(e)}setDensityY(e){this._stream.setHead(14),this._stream.writeInt16(e)}getUnitDensity(){return this._stream.setHead(11),this._stream.readInt8()}getDensityX(){return this._stream.setHead(12),this._stream.readInt16()}getDensityY(){return this._stream.setHead(14),this._stream.readInt16()}getBuffer(){return this._buf}}var D2=QDe;const{invariant:Zot}=j,{MARKERS:rg}=Ep,vx="data:image/jpeg;base64,",eIe=new RegExp(`^${vx}`,"i");class oc{constructor(e){this._buf=e,this._stream=new bd(this._buf),this._stream.setHead(0),this._segments=this._sliceIntoSegments(this._buf),this._exifData=new GG(this._getMarkerBuffer(rg.EXIF)),this._jfifData=new D2(this._getMarkerBuffer(rg.JFIF))}static toDataURL(e){return vx+Rn.encode(e)}static fromDataURL(e){const t=e.replace(vx,""),r=Rn.decode(t);return r}restoreSegmentsInArray(e){return e=this.restoreExifTagsToImageData(e),this.restoreJfifSegmentToImageData(e)}restoreSegments(e){let t=oc.fromDataURL(e);return t=this.restoreSegmentsInArray(t),oc.toDataURL(t)}restoreExifTagsToImageData(e){if(!this._exifData.isValid())return e;const t=this._sliceIntoSegments(e),r=t[1][0],i=e.slice(0,r),o=e.slice(r);let n=i.concat(this._exifData.getBuffer());return n=n.concat(o),n}restoreJfifSegmentToImageData(e){if(!this._jfifData.isValid())return e;const t=this._sliceIntoSegments(e),r=this._findSegment(rg.JFIF,t);let i=[];if(r){const o=r[0],n=r[1],s=e.slice(0,o),a=e.slice(o,n),l=e.slice(n),c=new D2(a);c.setDensityX(this._jfifData.getDensityX()),c.setDensityY(this._jfifData.getDensityY()),c.setUnitDensity(this._jfifData.getUnitDensity()),i=s.concat(a).concat(l)}else return e;return i}restoreExifTags(e){const t=oc.fromDataURL(e),r=this.restoreExifTagsToImageData(t);return oc.toDataURL(r)}restoreJfifSegment(e){if(!this._jfifData.isValid())return e;const t=oc.fromDataURL(e),r=this.restoreJfifSegmentToImageData(t);return oc.toDataURL(r)}setOrientation(e){return this._exifData.setOrientation(e)}static isJPEG(e){return eIe.test(e)}static bufferIsJPEG(e){return e[0]===255&&e[1]===216&&e[2]===255}static fromBase64String(e){const t=e.replace(vx,""),r=Rn.decode(t);return new oc(r)}_findSegment(e,t=this._segments){for(let r=0;r<t.length;r++){const i=t[r][0],o=t[r][1];this._stream.setHead(i);const n=this._stream.peekInt16();if(n===e)return[i,o]}return!1}_getLastSegment(e=this._segments){return e[e.length-1]}_getMarkerBuffer(e,t=this._segments){const r=this._findSegment(e,t);if(r){const i=r[0],o=r[1];return this._buf.slice(i,o)}return!1}_sliceIntoSegments(e){const t=new bd(e),r=[];for(;t.getHead()<e.length;){const i=t.readInt16();if(i===rg.SOI)continue;if(i===rg.SOS)break;if(i>=65280&&i<=65535){const o=t.readInt16(),n=t.getHead()+o-2;r.push([t.getHead()-4,n]),t.setHead(n)}else throw new Error(`Invalid marker: 0x${i.toString(16)}`)}return this._stream.setHead(0),r}getTags(){return this._exifData.getTags()}getTagData(){return this._exifData.getTagData()}dispose(){this._buf=[],this._segments=[]}}var ig=oc;let WG;WG=window.Image;var Bi=WG;class HG extends gi{constructor(e=[]){super();this._onOperationUpdate=this._onOperationUpdate.bind(this),this._cacheEnabled=!0,this._stack=e,this._stack.forEach(t=>{t.on("update",this._onOperationUpdate)})}clear(){this.forEach(e=>this.remove(e)),this._stack=[]}hasChanges(){return this._stack.filter(e=>!!e).some(e=>e.hasChanges())}_onOperationUpdate(e,t){this.emit(Sp.OPERATION_UPDATED,e,t)}enableCache(){this._cacheEnabled=!0}disableCache(){this._cacheEnabled=!1}forEach(e){return this._stack.filter(t=>!!t).forEach(e)}render(e,t){const r=t,i=this._stack.filter(l=>!!l).filter(l=>l.getEnabled());i.reverse();const o=i.filter(l=>!l.isDirtyForRenderer(e.getRenderer()))[0],n=i.indexOf(o);i.reverse();let s=0;n!==-1&&(s=i.length-n-1);for(let l=0;l<s;l++)ie.info(this.constructor.name,`Skipping ${i[l].constructor.name}`);let a=Promise.resolve(r);for(let l=s;l<i.length;l++){const c=i[l];let d,u;a=a.then(p=>c.render(p).then(h=>(d&&h!==d&&!this._cacheEnabled&&u.disposeRenderTextures(),d=h,u=c,h)))}return a.then(l=>{const c=!i.some(d=>d.isDirtyForRenderer(e.getRenderer()));return{outputTexture:l,renderDone:c}})}validateSettings(){return Promise.all(this._stack.filter(e=>!!e).map(e=>e.validateSettings()))}setAllToDirty(e=!1){this.forEach(t=>t.setDirty(!0,e))}updateDirtinessForRenderer(e){let t=!1;for(let r=0;r<this._stack.length;r++){const i=this._stack[r];if(!i)continue;i.isDirtyForRenderer(e)&&(t=!0),t&&i.setDirtyForRenderer(!0,e)}}push(e){this._stack.push(e),e.on("update",this._onOperationUpdate)}pop(){const e=this._stack.pop();e&&(e.off("update",this._onOperationUpdate),e.dispose())}unshift(e){this._stack.unshift(e),e.on("update",this._onOperationUpdate)}clone(){return new HG(this._stack.slice(0))}get(e){return this._stack[e]}getByIdentifier(e){return j.Array.find(this._stack,t=>t&&t.constructor.identifier===e)}getIndexByIdentifier(e){return j.Array.findIndex(this._stack,t=>t&&t.constructor.identifier===e)}moveToTop(e){const t=j.Array.findIndex(this._stack,i=>i&&i.constructor.identifier===e);if(t<0||t===this._stack.length-1)return;const r=this.getByIdentifier(e);this._stack.splice(t,1),this._stack[this._stack.length]=r}set(e,t){this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),this._stack[e]=t,t.on("update",this._onOperationUpdate)}remove(e){const t=this._stack.indexOf(e);if(t===-1)return;this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),this._stack.splice(t,1)}removeAt(e){this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),delete this._stack[e]}getStack(){return this._stack}dispose(){this.forEach(e=>{e.dispose()})}}var _x=HG;const Dp={};Tt(Dp,{ExifOrientationOperation:()=>$G});const VG=typeof window!="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):Jf();class tIe{constructor(e,t){this._tag=e,this._name=t,this._start=VG()}stop(){const e=VG(),t=e-this._start,r=Math.round(1e3/t);ie.info(this._tag,`${this._name} took ${t.toFixed(2)}ms (${r} FPS)`)}}var xx=tIe;class KG extends Re{constructor(e,t={}){super(t,{enabled:{type:g.BOOLEAN,default:!0,serializable:!1}});this._sdk=e,this._cacheEnabled=!1,this._dirtiness={},this._sprite=new U.Sprite,this._container=new U.Container,this._container.addChild(this._sprite)}_onOptionsChange(){this.setDirty(!0)}render(e){if(!this.getEnabled())return ie.info(this.constructor.name,"Disabled - skipping"),Promise.resolve(e);if(!this._renderTexture){const o=e.getDimensions().floor();this._renderTexture=new U.RenderTexture(this._sdk.getRenderer(),o.x,o.y)}const t=this._sdk.getRenderer();let r,i;if(ie.canLog("info")&&(i=new xx(this.constructor.name,"Rendering")),this.isDirtyForRenderer(t)){this._sprite.setTexture(e);const o=this.getNewDimensions(e.getDimensions()).floor();this._renderTexture.resizeTo(o),this._renderTexture.clear(),r=this._render(e).then((n=!1)=>(this.setDirtyForRenderer(n,t),this._renderTexture))}else ie.info(this.constructor.name,"Rendering from cache"),r=Promise.resolve(this._renderTexture);return r.then(o=>(i&&i.stop(),o))}_render(e){let t;return this._sdk.getRenderer().isOfType(De.WEBGL)?t=this._renderWebGL.bind(this):t=this._renderCanvas.bind(this),t(e)}_renderWebGL(e){throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.")}_renderCanvas(e){throw new Error("Operation#_renderCanvas is abstract and not implemented in inherited class.")}getNewDimensions(e){return e.clone()}onBeforeExport(){this.transform&&this._tempTransformChange&&this.transform(this._tempTransformChange),this._onBeforeExport()}onAfterExport(){this.transform&&this._tempInverseTransformChange&&this.transform(this._tempInverseTransformChange),this._onAfterExport()}_onBeforeExport(){}_onAfterExport(){}setTemporaryTransformChange(e,t){this._tempTransformChange=e,this._tempInverseTransformChange=t}reset(){this._dirty=!0,this._glslPrograms={}}isDirtyForRenderer(e){const t=this._dirtiness[e.id];return typeof t=="undefined"?!0:t}setDirtyForRenderer(e,t,r=!1){this._dirtiness[t.id]=e}setDirty(e,t=!1){for(const r in this._dirtiness)this.setDirtyForRenderer(e,{id:r},t)}getSDK(){return this._sdk}getInputDimensions(e=!0){let t=this._sdk.getInputDimensions();e&&t.multiply(this._sdk.getZoom()).floor();let r;return this._sdk.getOperationsStack().forEach(i=>{if(r)return;if(i===this){r=!0;return}t=i.getNewDimensions(t)}),t.floor()}clone(){const e=this.constructor;return new e(this._sdk,this.serializeOptions())}disposeRenderTextures(){this._renderTexture&&this._renderTexture.dispose(),this._renderTexture=null}dispose(){this.disposeRenderTextures(),this._sprite.dispose()}}KG.identifier=null;var Je=KG;const{OptionType:rIe}=Mi;class I2 extends Je{getRotation(){let e=0;switch(this.getTags().Orientation){case 7:case 8:e=-90;break;case 3:case 4:e=-180;break;case 5:case 6:e=90;break}return e}_getFlipVertically(){const{Orientation:e}=this.getTags();return[5,7].indexOf(e)!==-1}_getFlipHorizontally(){const{Orientation:e}=this.getTags();return[2,4].indexOf(e)!==-1}_getFinalOptions(){return{rotation:this.getRotation(),flipVertically:this._getFlipVertically(),flipHorizontally:this._getFlipHorizontally()}}_render(e){const t=this._getFinalOptions(),r=t.rotation%360,i=r*(Math.PI/180);this._sprite.setScale(t.flipHorizontally?-1:1,t.flipVertically?-1:1),this._sprite.setRotation(i),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();const o=this._sprite.getBounds();return this._renderTexture.resizeTo(new ye(o.width,o.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),Promise.resolve()}getNewDimensions(e){const t=this._getFinalOptions();return e=e.clone(),t.rotation%180&&e.flip(),e}applyTo(e){const t=this._getFinalOptions(),r=j.createCanvas();Math.abs(t.rotation%180)===90?(r.width=e.height,r.height=e.width):(r.width=e.width,r.height=e.height);const i=r.getContext("2d"),o=t.rotation*Math.PI/180,n=.5*(r.width-e.width),s=.5*(r.height-e.height);return i.translate(n,s),i.translate(.5*e.width,.5*e.height),i.rotate(o),i.translate(-.5*e.width,-.5*e.height),t.flipVertically&&(i.translate(0,e.height),i.scale(1,-1)),t.flipHorizontally&&(i.translate(e.width,0),i.scale(-1,1)),i.drawImage(e,0,0),r}}I2.identifier="exif-orientation";I2.prototype.availableOptions={tags:{type:rIe.OBJECT,default:{}}};var $G=I2;class YG extends Re{constructor(e,t={}){super(t);this._sdk=e}export(){const{imageFormat:e}=this._options,t=r=>r.renderDone?r:this._sdk.render().then(i=>t(i));return this.validateSettings().then(()=>this._prepareSDK().then(r=>t(r))).then(r=>{const{outputTexture:i,renderDone:o}=r,n=this._sdk.getRenderer();let s=n.getCanvas();return n.isOfType(De.WEBGL)&&(s=this._createCanvasFromTexture(i)),this._encodeImageFormat(s)}).then(r=>this._restoreExifMetadata(r,e)).then(r=>this._restoreSDK().then(()=>r))}_restoreExifMetadata(e,t,r){if(t===dd.JPEG){const i=this._sdk.getExif();i&&(typeof e=="string"&&(e=i.restoreSegments(e)))}return Promise.resolve(e)}_encodeAsDataURL(e,t,r){return j.isBrowser?Promise.resolve(e.toDataURL(t,r)):new Promise((i,o)=>{e.toDataURL(t,r,(n,s)=>{n?o(n):i(s)})})}_encodeAsHTMLImage(e,t,r){return this._encodeAsDataURL(e,t,r).then(i=>{const o=new Bi;return o.src=i,Promise.resolve(o)})}_encodeAsBuffer(e,t,r){return Promise.reject(new Error("Unsupported platform for RenderType"))}_encodeAsMSBlob(e,t,r){return Promise.resolve(e.msToBlob())}_encodeAsBLOB(e,t,r){return new Promise((i,o)=>{e.toBlob(n=>{i(n)},t,r)})}_encodeImageFormat(e){const{imageFormat:t,quality:r}=this._options;let{renderType:i}=this._options;i===po.BLOB&&e.msToBlob&&!e.toBlob&&(i=po.MSBLOB);switch(i){case po.IMAGE:return this._encodeAsHTMLImage(e,t,r);case po.DATAURL:return this._encodeAsDataURL(e,t,r);case po.BUFFER:return this._encodeAsBuffer(e,t,r);case po.MSBLOB:return this._encodeAsMSBlob(e,t,r);case po.BLOB:return this._encodeAsBLOB(e,t,r)}return Promise.reject(new Error(`Unsupported RenderType: ${i}!`))}_prepareSDK(){const e=this._sdk.getRenderer();this._sdkSettings={dimensions:e.getDimensions().clone(),textureQuality:this._sdk.getTextureQuality(),pixelRatio:this._sdk.getPixelRatio(),renderMode:this._sdk.getRenderMode()},this._sdk.setRenderMode("export"),this._sdk.setTextureQuality(1);const t=e.isOfType(De.CANVAS);e.setPixelRatio(1),e.resizeTo(this._sdk.getFinalDimensions(),t),this._sdk.setAllOperationsToDirty(!0);const r=this._sdk.getOperationsStack();return r.forEach(i=>{i.disposeRenderTextures()}),r.disableCache(),this._sdk.render()}_restoreSDK(){const e=this._sdk.getOperationsStack();e.enableCache(),this._sdk.setRenderMode(this._sdkSettings.renderMode);const t=this._sdk.getRenderer(),r=t.isOfType(De.CANVAS);return t.setPixelRatio(this._sdkSettings.pixelRatio),t.resizeTo(this._sdkSettings.dimensions,r),this._sdk.setTextureQuality(this._sdkSettings.textureQuality),this._sdk.setAllOperationsToDirty(!0),this._sdk.render()}_createCanvasFromTexture(e){const t=this._sdk.getRenderer(),r=this._sdk.getFinalDimensions(),i=this._sdk.getRenderer().getContext(),o=i.createFramebuffer();i.bindFramebuffer(i.FRAMEBUFFER,o);const n=e.getBaseTexture().getGLTextureForRenderer(t);i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,n,0);const s=new Uint8Array(r.x*r.y*4);i.readPixels(0,0,r.x,r.y,i.RGBA,i.UNSIGNED_BYTE,s);const a=this._checkPixelsForTransparency(s);let l;if(a){const p=new U.Sprite(e);p.setFilters([new U.Filters.UnpremultiplyFilter]);const h=new U.Container;h.addChild(p),l=new U.RenderTexture(t,r.x,r.y),l.render(h);const b=l.getBaseTexture().getGLTextureForRenderer(t);i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,b,0),i.readPixels(0,0,r.x,r.y,i.RGBA,i.UNSIGNED_BYTE,s),t.setRenderTarget(),l.dispose()}const c=j.createCanvas();c.width=r.x,c.height=r.y;const d=c.getContext("2d"),u=d.createImageData(r.x,r.y);return u.data.set(s),d.putImageData(u,0,0),i.deleteFramebuffer(o),c}_checkPixelsForTransparency(e){const t=this._sdk.getFinalDimensions(),r=t.x*t.y*4;let i;for(let o=3;o<r;o+=4)if(i=e[o],i!==255)return!0;return!1}}YG.prototype.availableOptions={renderType:{type:g.STRING,available:j.values(po),default:po.IMAGE},imageFormat:{type:g.STRING,available:j.values(dd),default:dd.PNG},quality:{type:g.NUMBER,default:.8}};var XG=YG;const{Rectangle:iIe,Constants:oIe,Engine:Yo,Utils:JG,EventEmitter:nIe,Events:O2,Vector2:A2,Log:Pn,Base64:sIe,Color:aIe}=tg,ut=e=>JG.byteArrayToString(sIe.decode(e)),{RenderType:lIe,ImageFormat:cIe,RendererType:ZG}=oIe;class dIe extends nIe{constructor(e,t={}){super();if(this._onOperationUpdate=this._onOperationUpdate.bind(this),this._onContextRestored=this._onContextRestored.bind(this),this.version="3.9.0",this[ut("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!0,this._preferredRenderer=e,this._options=v(v({},t),{extensions:{},renderMode:"dynamic",versionCheck:!0,displayWelcomeMessage:!0,image:null,canvas:null,transparent:!1,clearColor:aIe.TRANSPARENT,textureQuality:1,zoom:1,spriteScale:1,rotation:0,smoothDownscaling:!1,smoothUpscaling:!1,crossOrigin:"anonymous",logLevel:"warn",pixelRatio:typeof window!="undefined"&&window.devicePixelRatio||1}),this._options.smoothUpscaling&&(Yo.BaseTexture.DefaultMagFilter=Yo.BaseTexture.LinearFilter),this._options.extensions=Object.assign(this._options.extensions,{operations:[],controls:[],languages:[]}),Pn.setLevel(this._options.logLevel),this[ut("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!1,!this[ut("X29wdGlvbnM=")][ut("bGljZW5zZQ==")])this[ut("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!0,this._l=new tg[ut("RnJlZUxpY2Vuc2VDaGVja2Vy")];else{if(!this._v())return;const i=tg[ut("TGljZW5zZUNoZWNrZXI=")];this._l=new i(this[ut("X29wdGlvbnM=")][ut("bGljZW5zZQ==")]),this._cv(!0).then(()=>{this._ct()}).catch(o=>{Pn.error(ut("TGljZW5zaW5n"),o.message)})}this._defaultRenderMode=this._options.renderMode,this._renderMode=this._options.renderMode,this._textureQuality=this._options.textureQuality,this._offset=new A2,this._zoom=this._options.zoom,this._spriteScale=this._options.spriteScale,this._rotation=this._options.rotation,this._operations={},this._operationsStack=null,this.setOperationsStack(new _x),this._container=new Yo.Container,this._sprite=new Yo.Sprite,this._container.addChild(this._sprite),this._inputTexture=this._options.inputTexture,this._currentInputTexture=null,this._currentTexture=null,this._resizedTexture=null,this._resizedContainer=new Yo.Container,this._resizedSprite=new Yo.Sprite,this._resizedContainer.addChild(this._resizedSprite),this._texturesToDispose=[],this.setSmoothDownscaling(this._options.smoothDownscaling),this._registerOperations(),this._initRenderer();const r=this._renderer.constructor.type;this._options.displayWelcomeMessage,this[ut("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]&&Pn.log(ut("VGhlIFBob3RvRWRpdG9yIFNESyBpcyBhIGNvbW1lcmNpYWwgcHJvZHVjdC4gQmVmb3JlIGJlaW5nIGFibGUgdG8gdXNlIGl0IHdpdGhvdXQgbGltaXRhdGlvbnMsIHlvdSBuZWVkIHRvIHVubG9jayB0aGUgU0RLIHdpdGggYSBsaWNlbnNlIGZpbGUuIFlvdSBjYW4gb2J0YWluIGEgdGltZS1saW1pdGVkIGV2YWx1YXRpb24gbGljZW5zZSBieSBzdGFydGluZyBhIHRyaWFsIGF0IGh0dHBzOi8vd3d3LnBob3RvZWRpdG9yc2RrLmNvbS9zaWdudXAgb3IgeW91IGNhbiBwdXJjaGFzZSBhIGxpY2Vuc2UgYnkgcmVxdWVzdGluZyBhIHF1b3RlIGF0IGh0dHBzOi8vd3d3LnBob3RvZWRpdG9yc2RrLmNvbS9wcmljaW5nLgoKQmVjYXVzZSB5b3UgZGlkIG5vdCBzcGVjaWZ5IGEgbGljZW5zZSBmaWxlIHlldCwgdGhlIFNESyB3aWxsIG5vdyBkaXNwbGF5IGEgd2F0ZXJtYXJrIGltYWdlIG9uIHRvcCBvZiBhbnkgcGhvdG9zIHlvdSBkaXNwbGF5IG9yIGV4cG9ydCB3aXRoIGl0LiBGb3IgaW5zdHJ1Y3Rpb25zIGZvciBob3cgdG8gdW5sb2NrIHRoZSBTREssIHBsZWFzZSB2aXNpdCBodHRwczovL2RvY3MucGhvdG9lZGl0b3JzZGsuY29tL2d1aWRlcy9odG1sNS92NV84L2ludHJvZHVjdGlvbi9nZXR0aW5nX3N0YXJ0ZWQu")),this._options.image&&this.setImage(this._options.image,this._options.exif)}_v(){return this[ut("X29wdGlvbnM=")][ut("bGljZW5zZQ==")]?!0:(Pn.error(ut("TGljZW5zaW5n"),ut("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbi4=")),Pn.error(ut("TGljZW5zaW5n"),ut("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)}_ct(){if(this._l.exp()){const e=this._l.isExp();e?Pn.error(ut("TGljZW5zaW5n"),ut("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tLg==")):Pn.warn(ut("TGljZW5zaW5n"),ut("WW91ciB0cmlhbCBsaWNlbnNlIHdpbGwgZXhwaXJlIGluICVkIGRheXMu").replace("%d",this._l.dl()))}}_cv(e=!1){return this._l.c().catch(t=>{this[ut("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!1;let r=ut("SW52YWxpZCBsaWNlbnNlLg==");throw e&&(t.code==="ELICEXP"?r=ut("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tLg=="):t.code==="ELICINVHOST"?r=ut("VGhlIGJ1bmRsZSBpZGVudGlmaWVycyB0aGF0IHlvdSBzcGVjaWZpZWQgaW4geW91ciBsaWNlbnNlIGZpbGUgZG8gbm90IG1hdGNoIHRoZSBhcHAncyBidW5kbGUgaWRlbnRpZmllci4gUGxlYXNlIHVwZGF0ZSBhbmQgcmVkb3dubG9hZCB5b3VyIGxpY2Vuc2UgZnJvbSB5b3VyIGN1c3RvbWVyIGRhc2hib2FyZCBhdCBodHRwczovL3d3dy5waG90b2VkaXRvcnNkay5jb20vbG9naW4u"):t.code==="ELICINVPLAT"?r=ut("VGhlIGxpY2Vuc2UgdGhhdCB5b3Ugc3BlY2lmaWVkIGlzIGZvciBhbm90aGVyIHBsYXRmb3JtLiBQbGVhc2UgZG93bmxvYWQgeW91ciBsaWNlbnNlIGZvciB0aGUgd2ViIHBsYXRmb3JtIGZyb20geW91ciBjdXN0b21lciBkYXNoYm9hcmQgYXQgaHR0cHM6Ly93d3cucGhvdG9lZGl0b3JzZGsuY29tL2xvZ2luLg=="):t.code==="ELICINVFMT"?r=ut("SW52YWxpZCBsaWNlbnNlIGZvcm1hdC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UncmUgcGFzc2luZyB5b3VyIGxpY2Vuc2UgYXMgYSBzdHJpbmcsIG5vdCBhcyBgJGZvcm1hdGAu").replace("$format",typeof this._options.license):t.code==="ELICINV"?r=ut("VGhlIHNpZ25hdHVyZSBvZiB5b3VyIGxpY2Vuc2UgaXMgbm90IHZhbGlkLiBQbGVhc2UgdHJ5IHRvIHJlZG93bmxvYWQgeW91ciBsaWNlbnNlIGZyb20geW91ciBjdXN0b21lciBkYXNoYm9hcmQgYXQgaHR0cHM6Ly93d3cucGhvdG9lZGl0b3JzZGsuY29tL2xvZ2luLg=="):r=ut("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),t.message=r,new Error(t)})}_t(){this._l.t()}_fl(){return this[ut("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]}_onOperationUpdate(...e){this.emit(O2.OPERATION_UPDATED,...e)}_onContextRestored(){Pn.warn(this.constructor.name,"Trying to re-render after WebGL context has been restored."),this.setAllOperationsToDirty(),this._operationsStack.forEach(e=>{e.disposeRenderTextures()}),this.render()}export(e=lIe.DATAURL,t=cIe.PNG,r=.8){return this._cv(!0).then(()=>{this.hasChanges()&&this._t(),this._operationsStack.forEach(o=>{o.onBeforeExport()});const i=new XG(this,{renderType:e,imageFormat:t,quality:r});return i.export().then(o=>(this._operationsStack.forEach(n=>{n.onAfterExport()}),Promise.resolve(o)))})}render(e=!0){if(!this._inputTexture)throw new Error("You need to set an image before calling PhotoEditorSDK#render.");const t=this._renderer.getContext();t.startFrame&&t.startFrame();let r;Pn.canLog("info")&&(r=new xx("\u26A1\u26A1\u26A1","Frame rendering")),Pn.info("\u26A1\u26A1\u26A1","Rendering starts");const i=this._operationsStack;return i.updateDirtinessForRenderer(this._renderer),this._prepareTexture().then(o=>{this._renderMode==="export"&&(o=this._inputTexture),this._currentTexture=o,this._sprite.setTexture(o),this._container.updateTransform()}).then(()=>i.validateSettings()).then(()=>((this._fl()||!this[ut("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")])&&(i.getByIdentifier("license-watermark")?i.moveToTop("license-watermark"):this.createOperation("license-watermark")),i.render(this,this._currentTexture))).then(o=>{const{outputTexture:n}=o;this._currentTexture=n,this._sprite.setTexture(this._currentTexture);switch(this._renderMode){case"dynamic":{const s=this._renderer.getDimensions().clone().divide(2).add(this._offset);this._container.setScale(this._zoom/this.getTextureScale(),this._zoom/this.getTextureScale()),this._container.setPosition(s),this._sprite.setAnchor(.5,.5),this._sprite.setScale(this._spriteScale,this._spriteScale),this._sprite.setRotation(this._rotation);break}case"export":this._container.setScale(1,1),this._container.setPosition(0,0),this._sprite.setAnchor(0,0),this._sprite.setPosition(0,0),this._sprite.setScale(this._spriteScale,this._spriteScale),this._sprite.setRotation(0);break;case"adapter":this._container.setScale(1,1),this._container.setPosition(0,0),this._sprite.setAnchor(0,0),this._sprite.setPosition(0,0),this._sprite.setScale(1,1),this._sprite.setRotation(0);break}return e&&this._renderer.render(this._container),o}).then(o=>(r&&r.stop(),t.endFrame&&t.endFrame(),this._disposeTextures(),o))}getTextureScale(){return Math.min(1,this._textureQuality*this._options.pixelRatio)}_prepareTexture(){return new Promise((e,t)=>{const r=this.getTextureScale();if(this._textureQuality===1)return e(this._inputTexture);const i=this.getInputDimensions().multiply(r).floor();let o;this._resizedTexture?this._resizedTexture.getDimensions().equals(i)||(this._resizedTexture.resizeTo(i),o=!0):(this._resizedTexture=new Yo.RenderTexture(this._renderer,i.x,i.y),o=!0),o&&(this._resizedSprite.setScale(r,r),this._resizedSprite.setTexture(this._inputTexture),this._resizedTexture.render(this._resizedContainer)),e(this._resizedTexture)})}_registerOperations(){this._operations={};for(const e in Dp){const t=Dp[e];this._operations[t.identifier]=t}this._operations=v(v({},this._operations),this._options.extensions.operations)}registerOperations(e){e.forEach(t=>{this._operations[t.identifier]=t})}setAllOperationsToDirty(e=!1){this._operationsStack.setAllToDirty(e)}createOperation(e,t={},r=!0){const i=this._operations[e];if(!i)throw new Error(`No operation with identifier \`${e}\` found.`);const o=new i(this,t);return r&&this.addOperation(o),o}addOperation(e){this._operationsStack.push(e)}removeOperation(e){this._operationsStack.remove(e)}getInputDimensions(){const e=this._inputTexture.getFrame();return new A2(e.width,e.height)}getFinalDimensions(e=!1){let t=this.getInputDimensions();const r=this._operationsStack;return r.forEach(i=>{if(!i.getEnabled())return;t=i.getNewDimensions(t)}),e&&t.multiply(this._spriteScale),t.floor()}getOutputDimensions(e=!1){return this.getFinalDimensions(e).clone().multiply(this._zoom).floor()}getOutputTextureDimensions(e=!1){const t=this.getTextureScale();let r=this.getInputDimensions().multiply(t).floor();return this._operationsStack.forEach(i=>{r=i.getNewDimensions(r)}),r}getCrossOrigin(){return JG.getCrossOrigin(this._options.crossOrigin||"Anonymous")}_initRenderer(){const e={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent,clearColor:this._options.clearColor};let t,r;if(this._renderMode!=="export"&&this._options.canvas){const{canvas:i}=this._options;t=i.width,r=i.height}else if(this._inputTexture){const i=this.getFinalDimensions();t=i.x,r=i.y}else t=1,r=1;switch(this._preferredRenderer){case ZG.WEBGL:this._renderer=Yo.autoDetectRenderer(t,r,e),this._renderer.on("context-restored",this._onContextRestored);break;case ZG.CANVAS:this._renderer=Yo.canvasRenderer(t,r,e),this._renderer.on("context-restored",this._onContextRestored);break;default:Pn.warn("PhotoEditorSDK",`PhotoEditorSDK Error: Renderer \`${this._preferredRenderer}\` not supported. Falling back to automatically detected renderer.`),this._renderer=Yo.autoDetectRenderer(t,r,e)}}resizeTo(e){this._renderer.resizeTo(e,!0)}reset(){this._operationsStack.clear()}parseExif(e){if(!e)return;let{src:t}=e,r=!1,i=null;if(r=ig.isJPEG(t),i=t,r){let o=null;try{o=ig.fromBase64String(i)}catch(n){}return o||void 0}}_handleExifOrientation(){const e=this._exif.getTags();if(e&&e.Orientation){const t=e.Orientation!==1&&e.Orientation!==2,r=[2,4,5,7].indexOf(e.Orientation)!==-1;if(t||r){if(typeof navigator=="undefined")this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(e);else{const i=window&&window.navigator&&window.navigator.userAgent||"";(!!i.match(/msie|trident/i)||i.indexOf("Edge")!==-1||!CSS.supports("image-orientation","from-image"))&&(this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(e))}this._exif.setOrientation(1)}}}correctExifOrientation(e){const t=this.parseExif(e);if(!t)return e;const r=t.getTags();if(r&&r.Orientation){const i=r.Orientation!==1&&r.Orientation!==2,o=[2,4,5,7].indexOf(r.Orientation)!==-1;if(i||o){if(typeof navigator=="undefined"){const n=this.createOperation("exif-orientation",{},!1);n.setTags(r),e=n.applyTo(e)}else{const n=window&&window.navigator&&window.navigator.userAgent||"";if(!!n.match(/msie|trident/i)||n.indexOf("Edge")!==-1||!CSS.supports("image-orientation","from-image")){const s=this.createOperation("exif-orientation",{},!1);s.setTags(r),e=s.applyTo(e)}}return t.setOrientation(1),r.Orientation=1,e}}return e}hasImage(){return this._image!==null&&typeof this._image!="undefined"}getImage(){return this._image}disposeTexture(e){this._texturesToDispose.push(e)}_disposeTextures(){for(let e=0;e<this._texturesToDispose.length;e++)this._texturesToDispose[e].dispose();this._texturesToDispose=[]}setImage(e,t=null,r=null){this._disposeTextures(),this._exifOperation&&(this.removeOperation(this._exifOperation),this._exifOperation=null),this._options.image=e,this._image=e,this._exif=t||this.parseExif(e),this._exif&&this._handleExifOrientation();const i=new Yo.BaseTexture(this._image),o=new iIe(0,0,this._image.naturalWidth||this._image.width,this._image.naturalHeight||this._image.height);r&&(o.width=r.x,o.height=r.y),this._resizedTexture&&this._resizedTexture.dispose(),this._resizedTexture=null,this._inputTexture&&this.disposeTexture(this._inputTexture.getBaseTexture()),this._inputTexture=new Yo.Texture(i,o),this._currentTexture=this._inputTexture,this._sprite.clearTexture(!1),this._sprite.setTexture(this._inputTexture),this.emit("new-image"),this.setAllOperationsToDirty(!0)}setInputTexture(e){this._inputTexture=e}getCanvas(){return this._renderer.getCanvas()}setCanvas(e){this._renderer.setCanvas(e)}getSprite(){return this._sprite}getContainer(){return this._container}getOperationsStack(){return this._operationsStack}setOperationsStack(e){this._operationsStack&&this._operationsStack.off(O2.OPERATION_UPDATED,this._onOperationUpdate),this._operationsStack=e,this._operationsStack.on(O2.OPERATION_UPDATED,this._onOperationUpdate)}getOperations(){return this._operations}getRenderer(){return this._renderer}getOffset(){return this._offset}setOffset(e,t){e instanceof A2?this._offset.copy(e):this._offset.set(e,t)}getRenderMode(){return this._renderMode}setRenderMode(e){this._renderMode=e}getZoom(){return this._zoom}setZoom(e){this._zoom=e,this._container.setScale(this._zoom,this._zoom),this._container.updateTransform()}getTextureQuality(){return this._renderMode==="export"?1:this._textureQuality}setTextureQuality(e){e!==this._textureQuality&&this.setAllOperationsToDirty(!0),this._textureQuality=Math.min(1,e),this._textureQuality===1&&this._resizedTexture&&(this._resizedTexture.dispose(),this._resizedTexture=null)}getSpriteScale(){return this._spriteScale}setSpriteScale(e){this._spriteScale=e,this._sprite.setScale(e,e),this._sprite.updateTransform()}getPixelRatio(){return this._options.pixelRatio}getExif(){return this._exif}getOptions(){return this._options}getInputTexture(){return this._inputTexture}setSmoothDownscaling(e){this._options.smoothDownscaling=e,this._sprite.setSmoothDownscaling(e),this._resizedSprite.setSmoothDownscaling(e)}setRotation(e){this._rotation=e}getRotation(){return this._rotation}hasChanges(){return this.getOperationsStack().hasChanges()}dispose(){this._operationsStack.dispose(),this._renderer.dispose(),this._exif&&this._exif.dispose(),this._resizedTexture&&this._resizedTexture.dispose()}}var jt=dIe;jt.version="3.9.0";jt.Math=te;jt.Operations=Dp;jt.Engine=U;jt.Color=V;jt.LicenseChecker=gx;jt.Operation=Je;jt.EventEmitter=gi;jt.Utils=j;jt.Env=jG;jt.OperationsStack=_x;jt.EXIF=ig;jt.Image=Bi;jt.Configurable=Re;jt.Log=ie;jt.Loaders=u2;jt.RenderType=po;jt.ImageFormat=dd;jt.OptionType=g;jt.RendererType=De;jt.UniformType=$;jt.Base64=Rn;const uIe={};jt.UI=uIe;var Te=jt;var QG=`precision highp float;

varying vec2 v_texCoord;
uniform sampler2D u_image;

uniform float u_gamma;
uniform float u_shadows;
uniform float u_highlights;
uniform float u_whites;
uniform float u_blacks;

uniform mat4 u_colorMatrix;
uniform vec4 u_colorOffset;

const float EPSILON = 0.0000001;

float calculateLuminance(vec3 rgb) {
    // This is the luminance calculation part of the RGB to HSL formular.
    vec4 p = mix(
        vec4(rgb.gb, 0.0, -1.0 / 3.0),
        vec4(rgb.bg, -1.0, 2.0 / 3.0),
        vec4(rgb.g < rgb.b)
    );

    vec4 q = mix(
        vec4(rgb.r, p.yzx),
        vec4(p.xyw, rgb.r),
        vec4(rgb.r < p.x)
    );

    float croma = q.x - min(q.w, q.y);
    float luminance = q.x - croma * 0.5;
    return luminance;
}

vec3 map(vec3 x, float in_min, float in_max, float out_min, float out_max){
  return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;
}

void main() {

  vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);
  color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha

  // Apply gamma
  if (u_gamma != 1.0) {
    color.rgb = pow(color.rgb, vec3(1.0 / max(u_gamma, EPSILON)));
  }

  // Apply shadows and highlights
  float luminance = calculateLuminance(color.rgb);

  float shadow = u_shadows >= 0.0
    ? clamp(
          pow(luminance, 1.0 / (u_shadows + 1.0))
          + pow(luminance, 2.0 / (u_shadows + 1.0)) * -0.76
          - luminance
    , 0.0, max(u_shadows, 1.0))
    : -clamp(
          pow(luminance, 1.0 / (-u_shadows + 1.0))
          + pow(luminance, 2.0 / (-u_shadows + 1.0)) * -0.76
          - luminance
    , 0.0, max(-u_shadows, 1.0));

  float highlight = u_highlights < 0.0
    ? clamp(
          1.0
          - pow(1.0 - luminance, 1.0 / (1.0 - u_highlights))
          - pow(1.0 - luminance, 2.0 / (1.0 - u_highlights)) * -0.8
          - luminance
     , -1.0, 0.0)
    : -clamp(
          1.0
          - pow(1.0 - luminance, 1.0 / (1.0 + u_highlights))
          - pow(1.0 - luminance, 2.0 / (1.0 + u_highlights)) * -0.8
          - luminance
     , -1.0, 0.0);

  // Bright color need more contrast and dark color need more brightness.
  // This is to keep saturatation because the color information of a dark colors is lost.
  float shadowContrast   = shadow * luminance * luminance;
  float shadowBrightness = shadow - shadowContrast;

  float offset = luminance + shadowContrast + highlight;
  color.rgb = clamp(offset * ((color.rgb + shadowBrightness) / max(luminance, EPSILON)), 0.0, 1.0);
  
  // Apply Color Matrix
  color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;
  color.rgb = map(color.rgb, 0.0, 1.0, u_blacks / 2.0, 1.0 + u_whites / 2.0);
  color = clamp(color, 0.0, 1.0);
  color.rgb *= color.a; // Reset premultiplied alpha

  gl_FragColor = color;
}
`;const{ColorMatrix:pIe}=te,Ip=1e-7;function R2(e,t,r,i,o){return(e-t)*(o-i)/(r-t)+i}const hIe=e=>{const t=Math.max(e.r,e.g,e.b),r=Math.min(e.r,e.g,e.b);return(t+r)/2};class eW extends U.Filter{constructor(){super();this._fragmentSource=QG}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=t.getContext(),s=r.getContext(),a=n.getImageData(0,0,o.width,o.height),{colorMatrix:l,gamma:c,shadows:d,highlights:u,whites:p,blacks:h}=this._options,b=c!==1,y=d!==0||u!==0;let f=new V(0,0,0,0);for(let w=0;w<o.width*o.height;w++){const T=w*4;if(f.r=a.data[T]/255,f.g=a.data[T+1]/255,f.b=a.data[T+2]/255,b&&(f.r=Math.pow(f.r,1/Math.max(c,Ip)),f.g=Math.pow(f.g,1/Math.max(c,Ip)),f.b=Math.pow(f.b,1/Math.max(c,Ip))),y){const C=hIe(f),F=d>=0?j.clamp(Math.pow(C,1/(d+1))+Math.pow(C,2/(d+1))*-.76-C,0,Math.max(d,1)):-j.clamp(Math.pow(C,1/(-d+1))+Math.pow(C,2/(-d+1))*-.76-C,0,Math.max(-d,1)),k=u<0?j.clamp(1-Math.pow(1-C,1/(1-u))-Math.pow(1-C,2/(1-u))*-.8-C,-1,0):-j.clamp(1-Math.pow(1-C,1/(1+u))-Math.pow(1-C,2/(1+u))*-.8-C,-1,0),E=F*C*C,W=F-E,K=C+E+k;f.r=j.clamp(K*((f.r+W)/Math.max(C,Ip)),0,1),f.g=j.clamp(K*((f.g+W)/Math.max(C,Ip)),0,1),f.b=j.clamp(K*((f.b+W)/Math.max(C,Ip)),0,1)}f=l.apply(f).clamp(0,1),f.r=R2(f.r,0,1,h/2,1+p/2),f.g=R2(f.g,0,1,h/2,1+p/2),f.b=R2(f.b,0,1,h/2,1+p/2),a.data[T]=f.r*255,a.data[T+1]=f.g*255,a.data[T+2]=f.b*255}s.putImageData(a,0,0)}}eW.prototype.availableOptions={gamma:{type:g.NUMBER,default:1,uniformType:$.FLOAT},shadows:{type:g.NUMBER,default:0,uniformType:$.FLOAT},highlights:{type:g.NUMBER,default:1,uniformType:$.FLOAT},whites:{type:g.NUMBER,default:0,uniformType:$.FLOAT},blacks:{type:g.NUMBER,default:0,uniformType:$.FLOAT},colorMatrix:{type:g.COLOR_MATRIX,default:new pIe,uniformType:$.MAT4},colorOffset:{type:g.ARRAY,default:[],uniformType:$.FLOAT4}};var wx=eW,tW=`precision mediump float;

// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE
uniform sampler2D u_image;

// Size of one pixel == vec2(1.0 / u_image.width, 1.0 / u_image.height)
uniform vec2 u_pixelDimension;

// Range (-1.0 - 1.0)
uniform float u_clarity;

varying vec2 v_texCoord;

uniform mat4 u_colorMatrix;
uniform vec4 u_colorOffset;

const float EPSILON = 0.000001;

vec4 unpremultiply(vec4 col) {
    col.rgb /= max(col.a, EPSILON);
    return col;
}

void main() {
    vec4 color = texture2D(u_image, v_texCoord);
    color = unpremultiply(color);

    // L = Left, R = Right, C = Center, T = Top, B = Bottom
    vec4 colLB = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x, -u_pixelDimension.y));
    vec4 colLC = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,                 0.0));
    vec4 colLT = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,  u_pixelDimension.y));

    vec4 colCL = texture2D(u_image, v_texCoord + vec2(                0.0, -u_pixelDimension.y));
    vec4 colCR = texture2D(u_image, v_texCoord + vec2(                0.0,  u_pixelDimension.y));
    
    vec4 colRB = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x, -u_pixelDimension.y));
    vec4 colRC = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,                 0.0));
    vec4 colRT = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,  u_pixelDimension.y));

    vec4 mergedColor = color;
    mergedColor.rgb += unpremultiply(colLB).rgb + unpremultiply(colLC).rgb + unpremultiply(colLT).rgb;
    mergedColor.rgb += unpremultiply(colCL).rgb + unpremultiply(colCR).rgb;
    mergedColor.rgb += unpremultiply(colRB).rgb + unpremultiply(colRC).rgb + unpremultiply(colRT).rgb;

    mergedColor /= 9.0;

    float grayValue = clamp(color.r * 0.3 + color.g * 0.59 + color.b * 0.1, 0.111111, 0.999999);
    // 1.0 and 0.0 result in white not black, therefore we clamp

    // Here we create a function that will map values below 0.1 to 0. Values above 0.2 will be mapped to 1,
    // and for values between 0.1 and 0.2 it will produce a gradient.
    // The funtion is mirror at 0.5, meaning values between 0.8 and 0.9 will result in a decending gradient.
    // And values above 0.9 will be mapped to 0.
    float frequenceFactor = min(smoothstep(1.0 - grayValue, 0.0, 0.11), smoothstep(grayValue, 0.0, 0.11));

    // here we apply the high pass filter. Its strength is determined by the uniform ,
    // and the frequence factor. That means the only the mid tones are affected by this filter.
    // Clarity input is ranging from -1 to 1. But we want to strengthen the effect.
    // Therefore we see this little magic number '3.7'.
    color.rgb = clamp(color + clamp((color - mergedColor) * u_clarity * 3.7 * frequenceFactor, 0.0, 10.0), 0.0, 1.0).rgb;

    // apply exposure but only to the mid tones.
    color.rgb = color.rgb * pow(2.0, u_clarity * 0.27 * frequenceFactor);

    // apply contrast and desaturation matrix
    color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;

    color.rgb *= color.a; // Premultiply alpha

    gl_FragColor = clamp(color, 0.0, 1.0);
}
`;const{Vector2:mIe,ColorMatrix:fIe}=te;class rW extends U.Filter{constructor(){super();this._fragmentSource=tW}_applyCanvas(e,t,r,i=!1){const o=r.getContext(),n=t.getCanvas(),s=t.getContext(),{clarity:a}=this._options,{colorMatrix:l}=this._options,c=new V(this._options.colorOffset[0],this._options.colorOffset[1],this._options.colorOffset[2],this._options.colorOffset[3]),{width:d}=n,{height:u}=n,p=s.getImageData(0,0,d,u),h=o.createImageData(d,u);this.canvasShader(p,h,a,l,c),o.putImageData(h,0,0)}canvasShader(e,t,r,i,o){const n=(f,w,T)=>Math.min(Math.max(f,w),T),s=(f,w,T)=>{const C=n((T-f)/(w-f),0,1);return C*C*(3-2*C)},a=e.width*4,{length:l}=e.data,c=l-1,d=0,u=e.data,p=t.data,h=new V,b=255*9,y=f=>(f=f<d?d:f,f=f>c?c:f,u[f]);for(let f=0;f<l;f+=4){let w=y(f+0),T=y(f+1),C=y(f+2),F=y(f+3);const k=(w+y(f-4-a+0)+y(f-4+0)+y(f-4+a+0)+y(f-a+0)+y(f+a+0)+y(f+4-a+0)+y(f+4+0)+y(f+4+a))/b,E=(T+y(f-4-a+1)+y(f-4+1)+y(f-4+a+1)+y(f-a+1)+y(f+a+1)+y(f+4-a+1)+y(f+4+1)+y(f+4+a+1))/b,W=(C+y(f-4-a+2)+y(f-4+2)+y(f-4+a+2)+y(f-a+2)+y(f+a+2)+y(f+4-a+2)+y(f+4+2)+y(f+4+a+2))/b,K=(F+y(f-4-a+3)+y(f-4+3)+y(f-4+a+3)+y(f-a+3)+y(f+a+3)+y(f+4-a+3)+y(f+4+3)+y(f+4+a+3))/b;w/=255,T/=255,C/=255,F/=255;const D=n(w*.3+T*.59+C*.1,.111111,.999999),B=Math.min(s(1-D,0,.11),s(D,0,.11)),Y=r*3.7*B,de=Math.pow(2,r*.27*B),he=n(w+n((w-k)*Y,0,10),0,1)*de,ue=n(T+n((T-E)*Y,0,10),0,1)*de,ct=n(C+n((C-W)*Y,0,10),0,1)*de,H=n(F+n((F-K)*Y,0,10),0,1);h.set(he,ue,ct,H);const L=i.apply(h).clamp(0,1);p[f+0]=L.r*255,p[f+1]=L.g*255,p[f+2]=L.b*255,p[f+3]=L.a*255}}}rW.prototype.availableOptions={clarity:{type:g.NUMBER,default:0,uniformType:$.FLOAT},pixelDimension:{type:g.VECTOR2,default:new mIe(100,100),uniformType:$.FLOAT2},colorMatrix:{type:g.COLOR_MATRIX,default:new fIe,uniformType:$.MAT4},colorOffset:{type:g.ARRAY,default:[],uniformType:$.FLOAT4}};var iW=rW,oW=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform vec2 u_pixelDimension;
uniform float u_sharpness;
 
const float EPSILON = 0.000001;
 
void main() {
    vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);

    float factor        = mix(0.2, -1.0, float(u_sharpness > 0.0));
    vec4 sharpenedColor = mix(0.2,  5.0, float(u_sharpness > 0.0)) * color;
 
    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2(-1.0,  0.0)), 0.0, 1.0);
    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0, -1.0)), 0.0, 1.0);
    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0,  1.0)), 0.0, 1.0);
    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 1.0,  0.0)), 0.0, 1.0);
 
    color.rgb /= max(color.a, EPSILON); // unpremultiply
    sharpenedColor.rgb /= max(sharpenedColor.a, EPSILON); // unpremultiply
 
    sharpenedColor = clamp(sharpenedColor, 0.0, 1.0);
 
    color = clamp(mix(color, sharpenedColor, abs(u_sharpness)), 0.0, 1.0);
      
    gl_FragColor = vec4(color.rgb * color.a, color.a); // premultiply
}`;const{Vector2:gIe}=te;class nW extends U.Filter{constructor(){super();this._fragmentSource=oW}_applyCanvas(e,t,r,i=!1){const o=r.getContext(),n=t.getCanvas(),s=t.getContext(),{sharpness:a}=this._options,{width:l}=n,{height:c}=n,d=s.getImageData(0,0,l,c),u=o.createImageData(l,c);this.canvasShader(d,u,a),o.putImageData(u,0,0)}canvasShader(e,t,r){const i=(C,F,k)=>Math.min(Math.max(C,F),k),o=1e-6,{width:n}=e,{height:s}=e,a=e.data,l=t.data,c=(C,F,k)=>C*(1-k)+F*k,d=C=>i(a[C]/255,0,1),u=(C,F)=>{const k=i(C,0,n-1),E=i(F,0,s-1);return 4*(k+n*E)},p=[],h=[],b=[-1,0,0,1],y=[0,-1,1,0],f=r>0?-1:.2,w=r>0?5:.2,T=Math.abs(r);for(let C=0;C<n;C++)for(let F=0;F<s;F++){const k=u(C,F);p[0]=d(k+0),p[1]=d(k+1),p[2]=d(k+2),p[3]=d(k+3),h[0]=w*p[0]*p[3],h[1]=w*p[1]*p[3],h[2]=w*p[2]*p[3],h[3]=w*p[3];for(let E=0;E<4;E++){const W=b[E],K=y[E],D=u(C+W,F+K),B=d(D+3);h[3]+=f*B;for(let Y=0;Y<3;Y++)h[Y]+=f*d(D+Y)*B}for(let E=0;E<3;E++)h[E]/=Math.max(h[3],o),h[E]=i(h[E],0,1);h[3]=i(h[3],0,1);for(let E=0;E<4;E++)p[E]=i(c(p[E],h[E],T),0,1),l[k+E]=p[E]*255}}}nW.prototype.availableOptions={sharpness:{type:g.NUMBER,default:0,uniformType:$.FLOAT},pixelDimension:{type:g.VECTOR2,default:new gIe(100,100),uniformType:$.FLOAT2}};var sW=nW,aW=`precision mediump float;

// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE
uniform sampler2D u_image;

// Range (-1.0 - 1.0)
uniform float u_temperature;

const lowp vec3 warmFilter = vec3(0.93, 0.54, 0.0);

const mediump mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.596, -0.274, -0.322, 0.212, -0.523, 0.311);
const mediump mat3 YIQtoRGB = mat3(1.0, 0.956, 0.621, 1.0, -0.272, -0.647, 1.0, -1.105, 1.702);

const float EPSILON = 0.0000001;

varying vec2 v_texCoord;
void main() {
  float temperature = u_temperature;
  const float tint = 0.0;
  vec4 source = texture2D(u_image, v_texCoord);

  source.rgb /= max(source.a, EPSILON);   // Revert premultiplied alpha

  vec3 yiq = RGBtoYIQ * source.rgb;
  yiq.b = clamp(yiq.b + tint*0.5226*0.1, -0.5226, 0.5226);
  vec3 rgb = YIQtoRGB * yiq;

  vec3 processed = mix(
    (1.0 - 2.0 * (1.0 - rgb) * (1.0 - warmFilter)),
    (2.0 * rgb * warmFilter),
    vec3(rgb.r < 0.5, rgb.g < 0.5, rgb.b < 0.5)
  );

  vec4 color = vec4(mix(rgb, processed, temperature), source.a);

  color.rgb *= color.a;   // Premultiply alpha again

  gl_FragColor = color;
}
`;const{Vector3:bst}=te;class lW extends U.Filter{constructor(){super();this._fragmentSource=aW}_applyCanvas(e,t,r,i=!1){const o=r.getContext(),n=t.getCanvas(),s=t.getContext(),{temperature:a}=this._options,{width:l}=n,{height:c}=n,d=s.getImageData(0,0,l,c),u=o.createImageData(l,c);this.canvasShader(d,u,a),o.putImageData(u,0,0)}canvasShader(e,t,r){const i=(f,w,T)=>Math.min(Math.max(f,w),T),o=(f,w,T)=>f*(1-T)+w*T,n=(f,w)=>{const T=f[0]*w[0]+f[3]*w[1]+f[6]*w[2],C=f[1]*w[0]+f[4]*w[1]+f[7]*w[2],F=f[2]*w[0]+f[5]*w[1]+f[8]*w[2];return[T,C,F]},{length:s}=e.data,a=s-1,l=0,c=e.data,d=t.data,u=f=>(f=f<l?l:f,f=f>a?a:f,c[f]),p=[.93,.54,0],h=[.299,.587,.114,.596,-.274,-.322,.212,-.523,.311],b=[1,.956,.621,1,-.272,-.647,1,-1.105,1.702],y=0;for(let f=0;f<s;f+=4){const w=u(f+0)/255,T=u(f+1)/255,C=u(f+2)/255,F=u(f+3)/255,k=[w,T,C],E=n(h,k);E.z=i(E.z+y*.5226*.1,-.5226,.5226);const W=n(b,E),K=[W[0]<.5?2*W[0]*p[0]:1-2*(1-W[0])*(1-p[0]),W[1]<.5?2*W[1]*p[1]:1-2*(1-W[1])*(1-p[1]),W[2]<.5?2*W[2]*p[2]:1-2*(1-W[2])*(1-p[2])];d[f+0]=o(W[0],K[0],r)*255,d[f+1]=o(W[1],K[1],r)*255,d[f+2]=o(W[2],K[2],r)*255,d[f+3]=F*255}}}lW.prototype.availableOptions={temperature:{type:g.NUMBER,default:0,uniformType:$.FLOAT}};var cW=lW;const{ColorMatrix:nc}=te;class Sx extends Je{constructor(...e){super(...e);this._clarityFilter=new iW,this._temperatureFilter=new cW,this._sharpnessFilter=new sW,this._filter=new wx,this._sprite.setFilters([this._clarityFilter,this._temperatureFilter,this._filter])}_render(e){const t=e.getDimensions();t.x=1/t.x,t.y=1/t.y;const r=new nc;r.multiply(nc.createSaturationMatrix(-.3*this._options.clarity+1)),r.multiply(nc.createContrastMatrix(.1*this._options.clarity+1)),this._clarityFilter.set({clarity:this._options.clarity,pixelDimension:t,colorMatrix:r,colorOffset:r.getOffsets()}),this._temperatureFilter.set({temperature:this._options.temperature}),this._sharpnessFilter.set({sharpness:this._options.sharpness,pixelDimension:t});const i=new nc;i.multiply(nc.createExposureMatrix(this._options.exposure)),i.multiply(nc.createSaturationMatrix(this._options.saturation+1)),i.multiply(nc.createContrastMatrix((this._options.contrast>0?this._options.contrast*2:this._options.contrast)+1)),i.multiply(nc.createBrightnessMatrix(this._options.brightness)),this._filter.set({gamma:this._options.gamma,shadows:this._options.shadows,highlights:this._options.highlights,whites:this._options.whites,blacks:this._options.blacks,colorMatrix:i,colorOffset:i.getOffsets()});const o=[];return this._options.clarity!==0&&o.push(this._clarityFilter),this._options.sharpness!==0&&o.push(this._sharpnessFilter),this._options.temperature!==0&&o.push(this._temperatureFilter),o.push(this._filter),this._sprite.setFilters(o),this._renderTexture.render(this._container),Promise.resolve()}dispose(){super.dispose(),this._filter.dispose(),this._clarityFilter.dispose(),this._temperatureFilter.dispose(),this._sharpnessFilter.dispose()}}Sx.identifier="adjustments";Sx.prototype.availableOptions={brightness:{type:g.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},saturation:{type:g.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},contrast:{type:g.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},gamma:{type:g.NUMBER,default:1,minValue:.5,midValue:1,maxValue:2},exposure:{type:g.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},shadows:{type:g.NUMBER,default:0,minValue:-2,midValue:0,maxValue:2},highlights:{type:g.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},clarity:{type:g.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},whites:{type:g.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},blacks:{type:g.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},temperature:{type:g.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},sharpness:{type:g.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1}};Te.Operations.AdjustmentsOperation=Sx;var dW=Sx,uW=`/*
 * Based on evanw's glfx.js tilt shift shader:
 * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js
 * @license
 */

uniform sampler2D u_image;
uniform float u_blurRadius;
uniform vec2 u_delta;
uniform vec2 u_texSize;
varying vec2 v_texCoord;

float random(vec2 co)
{
    highp float a = 12.9898;
    highp float b = 78.233;
    highp float c = 43758.5453;
    highp float dt = dot(co.xy,vec2(a,b));
    highp float sn = mod(dt, 3.14);
    return fract(sin(sn) * c);
}

void main() {
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(gl_FragCoord.xy / u_texSize.xy);
    float radius = u_blurRadius;

    const float steps = 30.0;

    for (float t = -steps; t <= steps; t++) {
        float percent = (t + offset - 0.5) / steps;
        float weight = 1.0 - abs(percent);

        // Somehow \`sample\` is a keyword in headless-gl
        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);

        color += _sample * weight;
        total += weight;
    }

    gl_FragColor = color / total;
}
`;const{Vector2:Cx}=te;class pW extends U.Filter{constructor(...e){super(...e);this._fragmentSource=uW,this._lastBlurRadius=null,this._lastDimensions=new Cx(0,0),this._blurredRenderTarget=new U.CanvasRenderTarget(100,100,1)}_applyCanvas(e,t,r,i=!1,o=null){if(this._options.blurQuality==="low"){this._renderLQBlur(e,t,r,i);return}const n=t.getCanvas(),s=t.getContext(),a=r.getContext();this._lastBlurRadius===this._options.blurRadius&&a.drawImage(n,0,0);const l=s.getImageData(0,0,n.width,n.height),c=a.getImageData(0,0,n.width,n.height);let d=this._options.blurRadius;const{delta:u}=this._options,p=30;for(let h=0;h<n.width;h++)for(let b=0;b<n.height;b++){const y=h+b*n.width,f=y*4;let w=0,T=0,C=0,F=0,k=0;o&&(d=o(h/n.width,b/n.height));const E=this._random(h,1-b/n.height);for(let W=-p;W<=p;W++){const K=(W+E-.5)/p,D=1-Math.abs(K),B=u.x*K*d,Y=u.y*K*d,de=Math.max(Math.min(h+B,n.width-1),0),he=Math.max(Math.min(b+Y,n.height-1),0),ue=(Math.round(he)*n.width+Math.round(de))*4,ct=l.data[ue+3],H=ct*l.data[ue],L=ct*l.data[ue+1],M=ct*l.data[ue+2];w+=H*D,T+=L*D,C+=M*D,F+=ct*D,k+=D}w/=k,T/=k,C/=k,F/=k,c.data[f]=w/F,c.data[f+1]=T/F,c.data[f+2]=C/F,c.data[f+3]=F}a.putImageData(c,0,0),this._lastDimensions.copy(new Cx(n.width,n.height))}_renderLQBlur(e,t,r,i){const o=t.getDimensions(),n=!this._lastDimensions.equals(o);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),r.setPixelRatio(t.getPixelRatio()),r.resizeTo(t.getDimensions()),(this._lastBlurRadius!==this._options.blurRadius||n)&&(this._blurImage(t,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius);const s=r.getContext();s.drawImage(this._blurredRenderTarget.getCanvas(),0,0),this._lastDimensions.copy(o)}_random(e,t){const r=12.9898,i=78.233,o=43758.5453,n=e*r+t*i,s=n-3.14*Math.floor(n/3.14),a=Math.sin(s)*o;return a-Math.floor(a)}}pW.prototype.availableOptions={blurRadius:{type:g.NUMBER,default:30,uniformType:$.FLOAT},delta:{type:g.VECTOR2,default:new Cx(1,1),uniformType:$.FLOAT2},texSize:{type:g.VECTOR2,default:new Cx(100,100),uniformType:$.FLOAT2},blurQuality:{type:g.STRING,default:"low"}};var Li=pW;const{Vector2:hW}=te;class Tx extends Je{constructor(...e){super(...e);this._lastBlurRadius=this._options.blurRadius;const t={blurQuality:{type:g.STRING}};this._horizontalFilter=new Li({},t),this._verticalFilter=new Li({},t),this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]),this._horizontalFilter.setDelta(new hW(.5,.5)),this._verticalFilter.setDelta(new hW(-.5,.5)),this._filter=new Li({},t)}_renderWebGL(e){return this._renderBlur(e)}_renderCanvas(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}_renderBlur(e){const t=e.getDimensions(),r=t.min(),{blurRadius:i}=this._options,o={blurRadius:i*r,texSize:t,blurQuality:"high"};return this._horizontalFilter.set(o),this._verticalFilter.set(o),this._renderTexture.render(this._container),Promise.resolve()}_renderLQCanvasBlur(e){const{blurRadius:t}=this._options,r=e.getDimensions();return this._filter.set({blurRadius:t,texSize:r,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),Promise.resolve()}transform(e){const t=this.getBlurRadius(),r=e.applyToRelativeSize(t);this.set({blurRadius:r},!1)}dispose(){super.dispose(),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}hasChanges(){return!0}}Tx.identifier="blur";Tx.prototype.availableOptions={blurRadius:{type:g.NUMBER,default:.025},highQualityCanvasBlur:{type:g.BOOLEAN,default:!1}};Te.Operations.BlurOperation=Tx;var mW=Tx;const $2={};Tt($2,{A15Filter:()=>ZW,BWFilter:()=>rH,BWHardFilter:()=>oH,BreezeFilter:()=>eH,CelsiusFilter:()=>sH,ChestFilter:()=>lH,DuoToneFilter:()=>cH,FixieFilter:()=>uH,FoodFilter:()=>hH,FridgeFilter:()=>fH,FrontFilter:()=>bH,GlamFilter:()=>vH,GobblinFilter:()=>xH,IdentityFilter:()=>Bx,K1Filter:()=>SH,K2Filter:()=>TH,K6Filter:()=>EH,KDynamicFilter:()=>IH,LUTFilter:()=>rV,LeninFilter:()=>AH,LomoFilter:()=>FH,MellowFilter:()=>MH,MetalFilter:()=>LH,MorningFilter:()=>NH,OrchidFilter:()=>jH,Pola669Filter:()=>HH,PolaFilter:()=>GH,QuoziFilter:()=>KH,SemiredFilter:()=>YH,SunnyFilter:()=>JH,TexasFilter:()=>QH,ThreeDLUTFilter:()=>iV,X400Filter:()=>tV});var fW=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform sampler2D u_filteredImage;
uniform float u_intensity;

void main() {
  vec4 color0 = texture2D(u_image, v_texCoord);
  vec4 color1 = texture2D(u_filteredImage, v_texCoord);
  gl_FragColor = mix(color0, color1, u_intensity);
}
`;class gW extends U.Filter{constructor(){super();this._fragmentSource=fW}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=r.getContext(),{filteredCanvas:s}=this._options;n.save(),n.globalAlpha=1-this._options.intensity,n.drawImage(o,0,0),n.globalAlpha=this._options.intensity,n.drawImage(s,0,0),n.restore()}}gW.prototype.availableOptions={filteredImage:{type:g.NUMBER,default:1,uniformType:$.INT},filteredCanvas:{type:g.OBJECT,default:null},intensity:{type:g.NUMBER,default:1,uniformType:$.FLOAT}};class bIe{constructor(e=1){this._intensity=e,this._stack=[],this._dirtiness={},this._renderTextures={},this._container=new U.Container,this._sprite=new U.Sprite,this._container.addChild(this._sprite),this._blendFilter=new gW}push(e){this._stack.push(e)}clear(){this._stack=[]}render(e,t,r){if(this.isEmpty())return Promise.resolve();const i=e.getRenderer();this._sprite.setTexture(t);let o=this._renderTextures[i.id];if(!o){const a=e.getSprite().getTexture().getFrame();o=new U.RenderTexture(e.getRenderer(),a.width,a.height),this._renderTextures[i.id]=o}const n=r.getDimensions();o.resizeTo(n);const s=this.isDirtyForRenderer(i);if(s){this._stack.forEach(l=>{l.update(e)});const a=this._stack.map(l=>l.getFilter());this._sprite.setFilters(a),o.render(this._container),this.setDirtyForRenderer(!1,i)}if(this._blendFilter.setIntensity(this._intensity),i.isOfType(De.CANVAS))this._blendFilter.setFilteredCanvas(o.getRenderTarget().getCanvas());else if(i.isOfType(De.WEBGL)){const a=o.getBaseTexture();a.setGLUnit(this._blendFilter.getFilteredImage()),i.updateTexture(a,!1)}return this._sprite.setFilters([this._blendFilter]),r.clear(V.TRANSPARENT),r.render(this._container),s&&this.disposeRenderTextures(),Promise.resolve()}setIntensity(e){this._intensity=e}isEmpty(){return this._stack.length===0}isDirtyForRenderer(e){return e.id in this._dirtiness||(this._dirtiness[e.id]=!0),this._dirtiness[e.id]}setDirtyForRenderer(e,t){this._dirtiness[t.id]=e}setDirty(e){for(const t in this._dirtiness)this._dirtiness[t]=e}disposeRenderTextures(){for(const e in this._renderTextures)this._renderTextures[e].dispose(),delete this._renderTextures[e]}dispose(){this.disposeRenderTextures(),this._stack.forEach(e=>e.dispose()),this._stack=[],this._blendFilter.dispose(),this._sprite.dispose()}}var F2=bIe;class og extends Re{constructor(e={},t={}){super(e,v({intensity:{type:g.NUMBER,default:1,setter(r){return this._stack&&this._stack.setIntensity(r),r}},dirty:{type:g.BOOLEAN,default:!0}},t));this._stack=new F2(this._options.intensity)}render(e,t,r){return this._stack.render(e,t,r).then(i=>(this.setDirty(!1),i))}setDirtyForRenderer(e,t){this._stack.setDirtyForRenderer(e,t)}disposeRenderTextures(){this._stack.disposeRenderTextures()}dispose(){this._stack.dispose()}}og.identifier=null;og.isIdentity=!1;og.displayName=null;og.PrimitivesStack=F2;var ve=og;const G2={};Tt(G2,{Brightness:()=>yd,ColorMatrixPrimitive:()=>kx,Contrast:()=>zi,Desaturation:()=>Is,DuoTone:()=>Ex,Gamma:()=>Dx,Glow:()=>Op,Gobblin:()=>Ix,Grayscale:()=>Ap,LookupTable:()=>Ox,LookupTableImage:()=>Ax,Saturation:()=>Ni,SoftColorOverlay:()=>Rx,ThreeDLookupTableImage:()=>Mx,ToneCurve:()=>Me,X400:()=>Fx});var bW=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform float u_brightness;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;
}
`;class yIe extends Re{update(){}getFilter(){return this._filter}dispose(){this._filter&&(this._filter.dispose(),this._filter=null)}}var _t=yIe;class P2 extends U.Filter{constructor(){super();this._fragmentSource=bW}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=t.getContext(),s=r.getContext(),a=n.getImageData(0,0,o.width,o.height);let{brightness:l}=this._options;if(l===0){s.putImageData(a,0,0);return}l*=255;for(let c=0;c<o.width*o.height;c++){const d=c*4;a.data[d]+=l,a.data[d+1]+=l,a.data[d+2]+=l}s.putImageData(a,0,0)}}P2.prototype.availableOptions={brightness:{type:g.NUMBER,default:0,uniformType:$.FLOAT}};class yW extends _t{constructor(...e){super(...e);this._filter=new P2}update(){this._filter.setBrightness(this._options.brightness)}}yW.prototype.availableOptions=P2.prototype.availableOptions;var yd=yW;var vW=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform float u_contrast;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);
}
`;class M2 extends U.Filter{constructor(){super();this._fragmentSource=vW}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=t.getContext(),s=r.getContext(),a=n.getImageData(0,0,o.width,o.height),{contrast:l}=this._options;if(l===1)return;for(let c=0;c<o.width*o.height;c++){const d=c*4;a.data[d]=(a.data[d]-127)*l+127,a.data[d+1]=(a.data[d+1]-127)*l+127,a.data[d+2]=(a.data[d+2]-127)*l+127}s.putImageData(a,0,0)}}M2.prototype.availableOptions={contrast:{type:g.NUMBER,default:1,uniformType:$.FLOAT}};class _W extends _t{constructor(...e){super(...e);this._filter=new M2}update(){this._filter.setContrast(this._options.contrast)}}_W.prototype.availableOptions=M2.prototype.availableOptions;var zi=_W;var xW=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform mat4 u_colorMatrix;
uniform vec4 u_colorMatrixOffset;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  gl_FragColor = texColor * u_colorMatrix + u_colorMatrixOffset;
}
`;const{ColorMatrix:vIe}=te;class B2 extends U.Filter{constructor(){super();this._fragmentSource=xW}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=t.getContext(),s=r.getContext(),a=n.getImageData(0,0,o.width,o.height),{colorMatrix:l}=this._options;let c=new V(0,0,0,0);for(let d=0;d<o.width*o.height;d++){const u=d*4;c.r=a.data[u]/255,c.g=a.data[u+1]/255,c.b=a.data[u+2]/255,c=l.apply(c),a.data[u]=c.r*255,a.data[u+1]=c.g*255,a.data[u+2]=c.b*255}s.putImageData(a,0,0)}}B2.prototype.availableOptions={colorMatrix:{type:g.COLOR_MATRIX,default:new vIe,uniformType:$.MAT4},colorMatrixOffset:{type:g.ARRAY,default:[],uniformType:$.FLOAT4}};class wW extends _t{constructor(...e){super(...e);this._filter=new B2}update(){this._filter.setColorMatrix(this._options.colorMatrix)}}wW.prototype.availableOptions=B2.prototype.availableOptions;var kx=wW;var SW=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform float u_desaturation;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  vec3 grayXfer = vec3(0.3, 0.59, 0.11);
  vec3 gray = vec3(dot(grayXfer, texColor.xyz));
  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);
}
`;class L2 extends U.Filter{constructor(){super();this._fragmentSource=SW}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=t.getContext(),s=r.getContext(),a=n.getImageData(0,0,o.width,o.height),l=[.3,.59,.11],{desaturation:c}=this._options;for(let d=0;d<o.width*o.height;d++){const u=d*4,p=l[0]*a.data[u]/255+l[1]*a.data[u+1]/255+l[2]*a.data[u+2]/255;a.data[u]+=(p*255-a.data[u])*c,a.data[u+1]+=(p*255-a.data[u+1])*c,a.data[u+2]+=(p*255-a.data[u+2])*c}s.putImageData(a,0,0)}}L2.prototype.availableOptions={desaturation:{type:g.NUMBER,default:1,uniformType:$.FLOAT}};class CW extends _t{constructor(...e){super(...e);this._filter=new L2}update(){this._filter.setDesaturation(this._options.desaturation)}}CW.prototype.availableOptions=L2.prototype.availableOptions;var Is=CW;var TW=`precision highp float;

uniform sampler2D u_image;
uniform vec4 u_lightColor;
uniform vec4 u_darkColor;
uniform float u_intensity;
varying vec2 v_texCoord;

const float EPSILON = 0.0000001;
const vec3 GRAYSCALE_WEIGHTS = vec3(0.2126, 0.7152, 0.0722);

vec4 duotoneKernel(vec4 sampledCol, vec4 light, vec4 dark, float intensity) {
  vec4 color = clamp(sampledCol, 0.0, 1.0);
  color.rgb /= max(color.a, EPSILON);
  color = clamp(color, 0.0, 1.0); // necessary to get rid of all extended sRGB issues with OpenGL ES
 
  // Apply intensity as "symmetric gamma"
  if (intensity > 0.0) {
    color.rgb = 1.0 - pow(1.0 - color.rgb, vec3(max(intensity + 1.0, EPSILON)));
  } else {
    color.rgb = pow(color.rgb, vec3(max(-intensity + 1.0, EPSILON)));
  }
 
  // Colorimetric (perceptual luminance-preserving) RGB to grayscale conversion
  // https://en.wikipedia.org/wiki/Grayscale#Colorimetric_(perceptual_luminance-preserving)_conversion_to_grayscale
  float luminance = dot(GRAYSCALE_WEIGHTS, color.rgb);
 
  // Apply DuoTone
  vec4 duotone = mix(dark, light, clamp(luminance, 0.0, 1.0));
  duotone.a *= color.a;
  
  duotone.rgb *= duotone.a;

  return duotone;
}

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  gl_FragColor = duotoneKernel(texColor, u_lightColor, u_darkColor, u_intensity);
}`;class z2 extends U.Filter{constructor(){super();this._fragmentSource=TW}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=t.getContext(),s=r.getContext(),a=n.getImageData(0,0,o.width,o.height),{lightColor:l,darkColor:c,intensity:d}=this._options;for(let u=0;u<o.width*o.height;u++){const p=u*4,h=a.data[p]/255,b=a.data[p+1]/255,y=a.data[p+2]/255,f=a.data[p+3]/255,w=new V(h,b,y,f),T=this._duoToneKernel(w,l,c,d);a.data[p]=T.r*255,a.data[p+1]=T.g*255,a.data[p+2]=T.b*255,a.data[p+3]=T.a*255}s.putImageData(a,0,0)}_duoToneKernel(e,t,r,i){const o=1e-7;if(e.clone().clamp(0,1),i>0){const l=Math.max(i+1,o);e.r=1-Math.pow(1-e.r,l),e.g=1-Math.pow(1-e.g,l),e.b=1-Math.pow(1-e.b,l)}else{const l=Math.max(-i+1,o);e.r=Math.pow(e.r,l),e.g=Math.pow(e.g,l),e.b=Math.pow(e.b,l)}const n=.2126*e.r+.7152*e.g+.0722*e.b,s=Math.min(Math.max(n,0),1),a=r.clone().mix(t,s);return a.a*=e.a,a}}z2.prototype.availableOptions={lightColor:{type:g.COLOR,default:V.RED,uniformType:$.FLOAT4},darkColor:{type:g.COLOR,default:V.BLACK,uniformType:$.FLOAT4},intensity:{type:g.NUMBER,default:.5,uniformType:$.FLOAT}};class kW extends _t{constructor(...e){super(...e);this._filter=new z2}update(){this._filter.setLightColor(this._options.lightColor),this._filter.setDarkColor(this._options.darkColor);const e=2*this._options.intensity-1;this._filter.setIntensity(e)}}kW.prototype.availableOptions=z2.prototype.availableOptions;var Ex=kW;var EW=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform vec3 u_gamma;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);
  rgb = pow(rgb, u_gamma);
  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;
}
`;class N2 extends U.Filter{constructor(){super();this._fragmentSource=EW}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=t.getContext(),s=r.getContext(),a=n.getImageData(0,0,o.width,o.height),{gamma:l}=this._options,c=new Float32Array(256);for(let p=0;p<256;p++)c[p]=255*Math.pow(p/255,l.r);const d=new Float32Array(256);for(let p=0;p<256;p++)d[p]=255*Math.pow(p/255,l.g);const u=new Float32Array(256);for(let p=0;p<256;p++)u[p]=255*Math.pow(p/255,l.b);for(let p=0;p<o.width*o.height;p++){const h=p*4;a.data[h]=c[a.data[h]],a.data[h+1]=d[a.data[h+1]],a.data[h+2]=u[a.data[h+2]]}s.putImageData(a,0,0)}}N2.prototype.availableOptions={gamma:{type:g.COLOR,default:V.WHITE,uniformType:$.FLOAT3}};class DW extends _t{constructor(...e){super(...e);this._filter=new N2}update(){this._filter.setGamma(this._options.gamma)}}DW.prototype.availableOptions=N2.prototype.availableOptions;var Dx=DW;var IW=`varying vec2 v_texCoord;
uniform sampler2D u_image;

uniform vec3 u_color;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);

  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);
  textureCoord /= 0.75;

  float d = 1.0 - dot(textureCoord, textureCoord);
  d = clamp(d, 0.2, 1.0);
  vec3 newColor = texColor.rgb * d * u_color.rgb;
  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);
}
`;class U2 extends U.Filter{constructor(){super();this._fragmentSource=IW}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=t.getContext(),s=r.getContext(),a=n.getImageData(0,0,o.width,o.height),{color:l}=this._options;let c;for(let d=0;d<o.width;d++)for(let u=0;u<o.height;u++){const p=(o.width*u+d)*4,h=d/o.width,b=u/o.height,y=(h-.5)/.75,f=(b-.5)/.75,w=y*y,T=f*f;c=1-(w+T),c=Math.min(Math.max(c,.1),1),a.data[p]*=c*l.r,a.data[p+1]=a.data[p+1]*(c*l.g),a.data[p+2]=a.data[p+2]*(c*l.b),a.data[p+3]=255}s.putImageData(a,0,0)}}U2.prototype.availableOptions={color:{type:g.COLOR,default:V.WHITE,uniformType:$.FLOAT3}};class OW extends _t{constructor(...e){super(...e);this._filter=new U2}update(){this._filter.setColor(this._options.color)}}OW.prototype.availableOptions=U2.prototype.availableOptions;var Op=OW;var AW=`varying vec2 v_texCoord;
uniform sampler2D u_image;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  texColor.b = texColor.g * 0.33;
  texColor.r = texColor.r * 0.6;
  texColor.b += texColor.r * 0.33;
  texColor.g = texColor.g * 0.7;
  gl_FragColor = texColor;
}
`;class _Ie extends U.Filter{constructor(){super();this._fragmentSource=AW}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=t.getContext(),s=r.getContext(),a=n.getImageData(0,0,o.width,o.height);for(let l=0;l<o.width;l++)for(let c=0;c<o.height;c++){const d=(o.width*c+l)*4;a.data[d+2]=a.data[d+1]*.33,a.data[d]*=.6,a.data[d+2]+=a.data[d]*.33,a.data[d+1]=a.data[d+1]*.7,a.data[d+3]=255}s.putImageData(a,0,0)}}class xIe extends _t{constructor(...e){super(...e);this._filter=new _Ie}}var Ix=xIe;var RW=`varying vec2 v_texCoord;
uniform sampler2D u_image;
vec3 W = vec3(0.2125, 0.7154, 0.0721);

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  float luminance = dot(texColor.rgb, W);
  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);
}
`;class wIe extends U.Filter{constructor(){super();this._fragmentSource=RW}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=t.getContext(),s=r.getContext(),a=n.getImageData(0,0,o.width,o.height);for(let l=0;l<o.width;l++)for(let c=0;c<o.height;c++){const d=(o.width*c+l)*4,u=a.data[d]*.2125+a.data[d+1]*.7154+a.data[d+2]*.0721;a.data[d]=u,a.data[d+1]=u,a.data[d+2]=u}s.putImageData(a,0,0)}}class SIe extends _t{constructor(...e){super(...e);this._filter=new wIe}}var Ap=SIe;var FW=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform sampler2D u_lookupTable;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;
  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;
  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;

  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);
}
`;class PW extends U.Filter{constructor(...e){super(...e);this._fragmentSource=FW}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=t.getContext(),s=r.getContext(),a=n.getImageData(0,0,o.width,o.height),l=this._options.lookupTableData;for(let c=0;c<o.width*o.height;c++){const d=c*4,u=a.data[d];a.data[d]=l[u*4];const p=a.data[d+1];a.data[d+1]=l[1+p*4];const h=a.data[d+2];a.data[d+2]=l[2+h*4]}s.putImageData(a,0,0)}}PW.prototype.availableOptions={lookupTable:{type:g.NUMBER,default:1,uniformType:$.INT},lookupTableData:{type:g.ARRAY,default:[]}};class CIe extends _t{constructor(...e){super(...e);this._filter=new PW({lookupTable:this._options.textureGLUnit}),this._textures={},this._renderers={}}update(e){const t=e.getRenderer();t.isOfType(De.WEBGL)?this._updateWebGLTexture(e):t.isOfType(De.CANVAS)&&this._filter.setLookupTableData(this._options.data)}_updateWebGLTexture(e){if(typeof this._options.data=="undefined")throw new Error("LookupTable: No data specified.");const t=new Uint8Array(this._options.data),r=e.getRenderer(),{id:i}=r;this._renderers[i]=r,this._textures[i]||(this._textures[i]=new U.BaseTexture);const o=this._textures[i],n=new U.PixelArrayImage(256,1,t);o.setSource(n),o.setGLUnit(this._options.textureGLUnit),r.isOfType(De.WEBGL)&&r.updateTexture(o)}dispose(){super.dispose();for(const e in this._textures)this._textures[e].dispose(),delete this._textures[e];delete this._options.data}}var Ox=CIe;var MW=`/**
 * Based off of GPUImage's LookupFilter:
 * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m
 */

varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform sampler2D u_lookupTable;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  float blueColor = texColor.b * 63.0;

  vec2 quad1;
  quad1.y = floor(floor(blueColor) / 8.0);
  quad1.x = floor(blueColor) - (quad1.y * 8.0);

  vec2 quad2;
  quad2.y = floor(ceil(blueColor) / 8.0);
  quad2.x = ceil(blueColor) - (quad2.y * 8.0);

  vec2 texCoord1;
  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);
  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);

  vec2 texCoord2;
  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);
  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);

  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);
  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);

  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));
  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);
}
`;const{Vector2:BW}=te,LW=3;class zW extends U.Filter{constructor(){super();this._precomputeQuads(),this._fragmentSource=MW}_precomputeQuads(){this._quads=[];for(let e=0;e<256;e++){const t=e/255*63,r=new BW;r.y=(t|0)*.125|0,r.x=(t|0)-r.y*8,this._quads.push(r)}}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=t.getContext(),s=r.getContext(),a=this._options.lookupTableImage,l=this._createImageCanvas(a),c=l.getContext("2d"),d=n.getImageData(0,0,o.width,o.height),u=c.getImageData(0,0,a.width,a.height),p=new BW;for(let h=0;h<o.width*o.height*4;h+=4){const b=d.data[h],y=d.data[h+1],f=d.data[h+2],w=d.data[h+3]/255,T=this._quads[f],C=64;p.x=T.x*C,p.y=T.y*C,p.x+=Math.floor(b/4),p.y+=Math.floor(y/4);const F=(a.width*p.y+p.x)*4|0;let k=u.data[F];k=b*(1-w)+k*w;let E=u.data[F+1];E=y*(1-w)+E*w;let W=u.data[F+2];W=f*(1-w)+W*w,d.data[h]=k,d.data[h+1]=E,d.data[h+2]=W}s.putImageData(d,0,0)}_createImageCanvas(e){const t=j.createCanvas();t.width=e.width,t.height=e.height;const r=t.getContext("2d");return r.drawImage(e,0,0),t}}zW.prototype.availableOptions={lookupTable:{type:g.NUMBER,default:LW,uniformType:$.INT},lookupTableImage:{type:g.IMAGE,uniformType:null}};class NW extends _t{constructor(...e){super(...e);this._filter=new zW,this._textures={}}update(e){const t=e.getRenderer();t.isOfType(De.WEBGL)?this._updateWebGLTexture(e):t.isOfType(De.CANVAS)&&this._filter.setLookupTableImage(this._options.image)}_updateWebGLTexture(e){const t=e.getRenderer(),{id:r}=t;this._textures[r]||(this._textures[r]=new U.BaseTexture);const i=this._textures[r];i.setSource(this._options.image),i.setGLUnit(LW),t.updateTexture(i)}dispose(){super.dispose();for(const e in this._textures)delete this._textures[e]}}NW.prototype.availableOptions={image:{type:g.IMAGE}};var Ax=NW;var UW=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform float u_saturation;

const vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  float luminance = dot(texColor.rgb, luminanceWeighting);

  vec3 greyScaleColor = vec3(luminance);

  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);
}
`;class j2 extends U.Filter{constructor(){super();this._fragmentSource=UW}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=t.getContext(),s=r.getContext(),a=n.getImageData(0,0,o.width,o.height),{saturation:l}=this._options;for(let c=0;c<o.width;c++)for(let d=0;d<o.height;d++){const u=(o.width*d+c)*4,p=a.data[u]*.2125+a.data[u+1]*.7154+a.data[u+2]*.0721;a.data[u]=p*(1-l)+a.data[u]*l,a.data[u+1]=p*(1-l)+a.data[u+1]*l,a.data[u+2]=p*(1-l)+a.data[u+2]*l}s.putImageData(a,0,0)}}j2.prototype.availableOptions={saturation:{type:g.NUMBER,default:0,uniformType:$.FLOAT}};class jW extends _t{constructor(...e){super(...e);this._filter=new j2}update(){this._filter.setSaturation(this._options.saturation)}}jW.prototype.availableOptions=j2.prototype.availableOptions;var Ni=jW;var qW=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform vec3 u_color;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  vec4 overlayVec4 = vec4(u_color, texColor.a);
  gl_FragColor = max(overlayVec4 * texColor.a, texColor);
}
`;class q2 extends U.Filter{constructor(){super();this._fragmentSource=qW}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=t.getContext(),s=r.getContext(),a=n.getImageData(0,0,o.width,o.height);for(let l=0;l<o.width;l++)for(let c=0;c<o.height;c++){const d=(o.width*c+l)*4;a.data[d]=Math.max(this._options.color.r*255,a.data[d]),a.data[d+1]=Math.max(this._options.color.g*255,a.data[d+1]),a.data[d+2]=Math.max(this._options.color.b*255,a.data[d+2])}s.putImageData(a,0,0)}}q2.prototype.availableOptions={color:{type:g.COLOR,default:V.WHITE,uniformType:$.FLOAT3}};class GW extends _t{constructor(...e){super(...e);this._filter=new q2}update(){this._filter.setColor(this._options.color)}}GW.prototype.availableOptions=q2.prototype.availableOptions;var Rx=GW;class WW extends Ox{constructor(...e){super(...e);this._options.rgbControlPoints||(this._options.rgbControlPoints={red:this._options.controlPoints,green:this._options.controlPoints,blue:this._options.controlPoints}),this._updateLookupTable()}_updateLookupTable(){const e=this._calculateSplineCurve(this._options.rgbControlPoints.red),t=this._calculateSplineCurve(this._options.rgbControlPoints.green),r=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(e,t,r)}_buildLookupTable(e,t,r){const i=[];for(let o=0;o<256;o++)i.push(Math.min(Math.max(o+e[o],0),255)),i.push(Math.min(Math.max(o+t[o],0),255)),i.push(Math.min(Math.max(o+r[o],0),255)),i.push(255);return i}_calculateSplineCurve(e){e=e.sort(function(n,s){return n[0]>s[0]});const t=this._getSplineCurve(e),r=t[0];let i;if(r[0]>0)for(i=0;i<r[0];i++)t.unshift([0,0]);const o=[];for(i=0;i<t.length;i++){const n=t[i],s=[n[0],n[0]];let a=Math.sqrt(Math.pow(s[0]-n[0],2)+Math.pow(s[1]-n[1],2));s[1]>n[1]&&(a=-a),o.push(a)}return o}_getSplineCurve(e){const t=this._secondDerivative(e),r=t.length,i=[];let o;for(o=0;o<r;o++)i[o]=t[o];const n=[];for(o=0;o<r-1;o++){const s=e[o],a=e[o+1];for(let l=s[0];l<a[0];l++){const c=(l-s[0])/(a[0]-s[0]),d=1-c,u=c,p=a[0]-s[0];let h=d*s[1]+u*a[1]+p*p/6*((d*d*d-d)*i[o]+(u*u*u-u)*i[o+1]);h>255?h=255:h<0&&(h=0),n.push([l,h])}}return n.length===255&&n.push(e[e.length-1]),n}_secondDerivative(e){const t=e.length;if(t<=0||t===1)return null;const r=[],i=[];let o,n;for(r[0]=[0,1,0],o=1;o<t-1;o++){const a=e[o-1],l=e[o],c=e[o+1];r[o]=r[o]||[],r[o][0]=(l[0]-a[0])/6,r[o][1]=(c[0]-a[0])/3,r[o][2]=(c[0]-l[0])/6,i[o]=(c[1]-l[1])/(c[0]-l[0])-(l[1]-a[1])/(l[0]-a[0])}for(i[0]=0,i[t-1]=0,r[t-1]=[0,1,0],o=1;o<t;o++)n=r[1][0]/r[o-1][1],r[o][1]-=n*r[o-1][2],r[o][0]=0,i[o]-=n*i[o-1];for(o=t-2;o>0;o--)n=r[o][2]/r[o+1][1],r[o][1]-=n*r[o+1][0],r[o][2]=0,i[o]-=n*i[o+1];const s=[];for(o=0;o<t;o++)s[o]=i[o]/r[o][1];return s}}WW.prototype.availableOptions={rgbControlPoints:{type:g.OBJECT},controlPoints:{type:g.ARRAY,default:[]},textureGLUnit:{type:g.NUMBER,default:1}};var Me=WW;var HW=`varying vec2 v_texCoord;
uniform sampler2D u_image;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;
  gray -= 0.2;
  gray = clamp(gray, 0.0, 1.0);
  gray += 0.15;
  gray *= 1.4;
  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);
}
`;class TIe extends U.Filter{constructor(){super();this._fragmentSource=HW}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=t.getContext(),s=r.getContext(),a=n.getImageData(0,0,o.width,o.height);for(let l=0;l<o.width;l++)for(let c=0;c<o.height;c++){const d=(o.width*c+l)*4;let u=a.data[d]/255*.3+a.data[d+1]/255*.3+a.data[d+2]/255*.3;u-=.2,u=Math.max(0,Math.min(1,u)),u+=.15,u*=1.4,u*=255,a.data[d]=u,a.data[d+1]=u,a.data[d+2]=u}s.putImageData(a,0,0)}}class kIe extends _t{constructor(...e){super(...e);this._filter=new TIe}}var Fx=kIe;var VW=`precision highp float;

uniform sampler2D u_image;

uniform sampler2D u_lookupTable;

uniform float u_resolution;     // Texture-Resolution, must be power of 2: 64, 128, 256, 512, 1024, 2048, 4096
uniform float u_horizontalTileCount; // Horizontal Blue Tiles
uniform float u_verticalTileCount; // Vertical Blue Tiles

varying vec2 v_texCoord;

const float EPSILON = 0.000001;

// Try to get the exact pixel of the lut map image
vec3 lutColor(int texPosX, int texPosY) {
    return texture2D(u_lookupTable, (0.5 / u_resolution) + vec2(float(texPosX), float(texPosY)) / u_resolution).rgb;
}

vec3 bilinearInterpolate(vec3 cRfGf, vec3 cRfGc, vec3 cRcGf, vec3 cRcGc, float redFract, float greenFract) {
    return mix(mix(cRfGf, cRcGf, redFract), mix(cRfGc, cRcGc, redFract), greenFract);
}

void main() {
    vec4 inputColor = clamp(texture2D(u_image, v_texCoord.xy), 0.0, 1.0);

    vec3 sourceColor = vec3(inputColor.rgb / max(inputColor.a, EPSILON)); 

    vec3 ranges = vec3(
        floor(u_resolution / u_horizontalTileCount - 1.0),
        floor(u_resolution / u_verticalTileCount - 1.0),
        floor(u_horizontalTileCount * u_horizontalTileCount - 1.0)
    );
    
    vec3 tmp = sourceColor * ranges;
    ivec3 floors = ivec3(tmp);
    ivec3 ceils = ivec3(ceil(tmp));
    vec3 fracts = fract(tmp);

    // Map tile index to tile pixel pos.
    ivec2 pixelsPerTile = ivec2(
        u_resolution / u_horizontalTileCount, 
        u_resolution / u_verticalTileCount
      );

    ivec2 tileFloor; // Blue tile index
    tileFloor.y = floors.z / int(u_horizontalTileCount);
    tileFloor.x = (floors.z - (tileFloor.y * int(u_horizontalTileCount)));

    ivec2 tileCeil; // Blue tile index
    tileCeil.y = ceils.z / int(u_horizontalTileCount);
    tileCeil.x = (ceils.z - (tileCeil.y * int(u_horizontalTileCount)));
    
    tileFloor *= pixelsPerTile;
    tileCeil *= pixelsPerTile; 
    
    
    // Interpolate between red and green
    vec3 lutColorFB = bilinearInterpolate(
        lutColor(tileFloor.x + floors.x, tileFloor.y + floors.y),
        lutColor(tileFloor.x + floors.x, tileFloor.y + ceils.y),
        lutColor(tileFloor.x + ceils.x,  tileFloor.y + floors.y),
        lutColor(tileFloor.x + ceils.x,  tileFloor.y + ceils.y),
        fracts.x, fracts.y
    );
    vec3 lutColorCB = bilinearInterpolate(
        lutColor(tileCeil.x + floors.x, tileCeil.y + floors.y),
        lutColor(tileCeil.x + floors.x, tileCeil.y + ceils.y),
        lutColor(tileCeil.x + ceils.x,  tileCeil.y + floors.y),
        lutColor(tileCeil.x + ceils.x,  tileCeil.y + ceils.y),
        fracts.x, fracts.y
    );

    // Interpolate between the blue values
    vec3 interpolation = mix(lutColorFB, lutColorCB, fracts.z);

    // Round Color Values to prevent that for ex. 254.999999 is cutting to 254 instead of 255;
    interpolation = clamp(floor(interpolation * 255. + .5) / 255., 0.0, 1.0);

    gl_FragColor = vec4(interpolation.rgb * inputColor.a, inputColor.a);
}
`;const{Vector2:Px,Vector3:KW}=te,$W=3;class YW extends U.Filter{constructor(){super();this._precomputeQuads(),this._fragmentSource=VW}_precomputeQuads(){this._quads=[];for(let e=0;e<256;e++){const t=e/255*63,r=new Px;r.y=(t|0)*.125|0,r.x=(t|0)-r.y*8,this._quads.push(r)}}_applyCanvas(e,t,r,i=!1){const{resolution:o,horizontalTileCount:n,verticalTileCount:s}=this._options,a=t.getCanvas(),l=t.getContext(),c=r.getContext(),d=this._options.lookupTableImage,u=this._createImageCanvas(d),p=u.getContext("2d");let h={width:128,height:128};o?h={width:o,height:o}:d.width&&d.height&&(h={width:d.width,height:d.height});const b=l.getImageData(0,0,a.width,a.height),y=p.getImageData(0,0,h.width,h.height),f=new KW(h.width/n-1|0,h.height/s-1|0,n*s-1|0),w=new V,T=new V,C=new V,F=new V,k=new V,E=new V,W=new V,K=new V,D=new Px,B=new Px,Y=(L,M,q,G)=>{L.r=M.r*(1-G)+q.r*G,L.g=M.g*(1-G)+q.g*G,L.b=M.b*(1-G)+q.b*G},de=(L,M,q)=>{M=.5+M|0,q=.5+q|0;const G=(q*h.width+M)*4;L.r=y.data[G]/255,L.g=y.data[G+1]/255,L.b=y.data[G+2]/255,L.a=y.data[G+3]/255},he=new V,ue=new V,ct=(L,M,q,G,we,Q,oe)=>{Y(he,M,G,Q),Y(ue,q,we,Q),Y(L,he,ue,oe)},H=new Px(h.width,h.height).divide(n,s).floor();for(let L=0;L<a.width*a.height*4;L+=4){w.set(b.data[L]/255,b.data[L+1]/255,b.data[L+2]/255,b.data[L+3]/255);const M=new KW(w.r*f.x,w.g*f.y,w.b*f.z),q=M.clone().floor().toInt(),G=M.clone().ceil().toInt(),we=M.clone().fract();D.y=q.z/n|0,D.x=q.z-D.y*n|0,B.y=G.z/n|0,B.x=G.z-B.y*n|0,D.multiply(H),B.multiply(H),de(k,D.x+q.x,D.y+q.y),de(E,D.x+q.x,D.y+G.y),de(W,D.x+G.x,D.y+q.y),de(K,D.x+G.x,D.y+G.y),ct(C,k,E,W,K,we.x,we.y),de(k,B.x+q.x,B.y+q.y),de(E,B.x+q.x,B.y+G.y),de(W,B.x+G.x,B.y+q.y),de(K,B.x+G.x,B.y+G.y),ct(F,k,E,W,K,we.x,we.y),Y(T,C,F,we.z),b.data[L]=Math.ceil(T.r*255),b.data[L+1]=Math.ceil(T.g*255),b.data[L+2]=Math.ceil(T.b*255)}c.putImageData(b,0,0)}_createImageCanvas(e){const t=j.createCanvas();t.width=e.width,t.height=e.height;const r=t.getContext("2d");return r.drawImage(e,0,0),t}}YW.prototype.availableOptions={lookupTable:{type:g.NUMBER,default:$W,uniformType:$.INT},lookupTableImage:{type:g.IMAGE,uniformType:null},resolution:{type:g.NUMBER,uniformType:$.FLOAT},horizontalTileCount:{type:g.NUMBER,default:5,uniformType:$.FLOAT},verticalTileCount:{type:g.NUMBER,default:5,uniformType:$.FLOAT}};class XW extends _t{constructor(...e){super(...e);this._filter=new YW,this._textures={}}update(e){const t=e.getRenderer();t.isOfType(De.WEBGL)?this._updateWebGLTexture(e):t.isOfType(De.CANVAS)&&this._filter.setLookupTableImage(this._options.image);const{resolution:r,verticalTileCount:i,horizontalTileCount:o,image:n}=this._options;this._filter.set({resolution:r||n.width,verticalTileCount:i,horizontalTileCount:o})}_updateWebGLTexture(e){const t=e.getRenderer(),{id:r}=t;this._textures[r]||(this._textures[r]=new U.BaseTexture);const i=this._textures[r];i.setSource(this._options.image),i.setGLUnit($W),i.setMinFilter(U.BaseTexture.NearestFilter),t.updateTexture(i)}dispose(){super.dispose();for(const e in this._textures)delete this._textures[e]}}XW.prototype.availableOptions={image:{type:g.IMAGE},resolution:{type:g.NUMBER},horizontalTileCount:{type:g.NUMBER,default:5},verticalTileCount:{type:g.NUMBER,default:5}};var Mx=XW;class W2 extends ve{constructor(...e){super(...e);this._stack.push(new yd({brightness:0}))}render(e,t,r){return this._stack.isEmpty()&&this._stack.push(new yd({brightness:0})),super.render(e,t,r)}}W2.isIdentity=!0;W2.identifier="identity";var Bx=W2;class JW extends ve{constructor(...e){super(...e);this._stack.push(new zi({contrast:.63})),this._stack.push(new yd({brightness:.12})),this._stack.push(new Me({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}}))}}JW.identifier="a15";var ZW=JW;class QW extends ve{constructor(...e){super(...e);this._stack.push(new Is({desaturation:.5})),this._stack.push(new Me({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}}))}}QW.identifier="breeze";var eH=QW;class tH extends ve{constructor(...e){super(...e);this._stack.push(new Ap)}}tH.identifier="bw";var rH=tH;class iH extends ve{constructor(...e){super(...e);this._stack.push(new Ap),this._stack.push(new zi({contrast:1.5}))}}iH.identifier="bwhard";var oH=iH;class nH extends ve{constructor(...e){super(...e);this._stack.push(new Me({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}}))}}nH.identifier="celsius";var sH=nH;class aH extends ve{constructor(...e){super(...e);this._stack.push(new Me({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}}))}}aH.identifier="chest";var lH=aH;class H2 extends ve{constructor(...e){super(...e,{intensity:{type:g.NUMBER,default:.5,required:!0,setter(t){return this._filterPrimitive&&(this._filterPrimitive.setIntensity(t),this._stack.setIntensity(1)),this._dirty=!0,t}}});this._filterPrimitive=new Ex({lightColor:this._options.lightColor||V.WHITE,darkColor:this._options.darkColor||V.BLACK,intensity:this._options.intensity||.5}),this._stack.push(this._filterPrimitive)}}H2.prototype.availableOptions={lightColor:{type:g.COLOR,default:V.WHITE,required:!0,setter(e){return this._filterPrimitive&&this._filterPrimitive.setLightColor(e),this.setDirty&&this.setDirty(!0),e}},darkColor:{type:g.COLOR,default:V.BLACK,required:!0,setter(e){return this._filterPrimitive&&this._filterPrimitive.setDarkColor(e),this.setDirty&&this.setDirty(!0),e}},intensity:{type:g.NUMBER,default:.5,required:!0}};H2.identifier="duotone";var cH=H2;class dH extends ve{constructor(...e){super(...e);this._stack.push(new Me({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}}))}}dH.identifier="fixie";var uH=dH;class pH extends ve{constructor(...e){super(...e);this._stack.push(new Ni({saturation:1.35})),this._stack.push(new zi({contrast:1.1}))}}pH.identifier="food";var hH=pH;class mH extends ve{constructor(...e){super(...e);this._stack.push(new Me({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}}))}}mH.identifier="fridge";var fH=mH;class gH extends ve{constructor(...e){super(...e);this._stack.push(new Me({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}}))}}gH.identifier="front";var bH=gH;class yH extends ve{constructor(...e){super(...e);this._stack.push(new zi({contrast:1.1})),this._stack.push(new Me({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}}))}}yH.identifier="glam";var vH=yH;class _H extends ve{constructor(...e){super(...e);this._stack.push(new Ix)}}_H.identifier="gobblin";var xH=_H;class wH extends ve{constructor(...e){super(...e);this._stack.push(new Me({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),this._stack.push(new Ni({saturation:.9}))}}wH.identifier="k1";var SH=wH;class CH extends ve{constructor(...e){super(...e);this._stack.push(new Me({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),this._stack.push(new Rx({color:new V(40/255,40/255,40/255)}))}}CH.identifier="k2";var TH=CH;class kH extends ve{constructor(...e){super(...e);this._stack.push(new Ni({saturation:.5}))}}kH.identifier="k6";var EH=kH;class DH extends ve{constructor(...e){super(...e);this._stack.push(new Me({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),this._stack.push(new Ni({saturation:.7}))}}DH.identifier="kdynamic";var IH=DH;class OH extends ve{constructor(...e){super(...e);this._stack.push(new Is({desaturation:.4})),this._stack.push(new Me({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}}))}}OH.identifier="lenin";var AH=OH;class RH extends ve{constructor(...e){super(...e);this._stack.push(new Me({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]}))}}RH.identifier="lomo";var FH=RH;class PH extends ve{constructor(...e){super(...e);this._stack.push(new Me({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}}))}}PH.identifier="mellow";var MH=PH;const{ColorMatrix:EIe}=te;class BH extends ve{constructor(...e){super(...e);const t=new EIe(.8158218291630716,0,0,0,-.01779810181190647,0,.8098360655737704,0,0,.0916393442622953,0,0,.4596336773932402,0,.12760574782432707,0,0,0,1,0);this._stack.push(new kx({colorMatrix:t}));const r=new V(.8,.6,.9);this._stack.push(new Dx({gamma:r}))}}BH.identifier="metal";var LH=BH;class zH extends ve{constructor(...e){super(...e);this._stack.push(new Me({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),this._stack.push(new Op)}}zH.identifier="morning";var NH=zH;class UH extends ve{constructor(...e){super(...e);this._stack.push(new Me({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]},textureGLUnit:2})),this._stack.push(new Me({controlPoints:[[0,0],[117,151],[189,217],[255,255]],textureGLUnit:3})),this._stack.push(new Is({desaturation:.65}))}}UH.identifier="orchid";var jH=UH;class qH extends ve{constructor(...e){super(...e);this._stack.push(new Me({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),this._stack.push(new Ni({saturation:.8})),this._stack.push(new zi({contrast:1.5}))}}qH.identifier="pola";var GH=qH;class WH extends ve{constructor(...e){super(...e);this._stack.push(new Me({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),this._stack.push(new Ni({saturation:.8})),this._stack.push(new zi({contrast:1.5}))}}WH.identifier="pola669";var HH=WH;class VH extends ve{constructor(...e){super(...e);this._stack.push(new Is({desaturation:.65})),this._stack.push(new Me({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}}))}}VH.identifier="quozi";var KH=VH;class $H extends ve{constructor(...e){super(...e);this._stack.push(new Me({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),this._stack.push(new Op)}}$H.identifier="semired";var YH=$H;class XH extends ve{constructor(...e){super(...e);this._stack.push(new Me({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]},textureGLUnit:2})),this._stack.push(new Me({controlPoints:[[0,0],[55,20],[158,191],[255,255]],textureGLUnit:3}))}}XH.identifier="sunny";var JH=XH;class ZH extends ve{constructor(...e){super(...e);this._stack.push(new Me({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}}))}}ZH.identifier="texas";var QH=ZH;class eV extends ve{constructor(...e){super(...e);this._stack.push(new Fx)}}eV.identifier="x400";var tV=eV;class V2 extends ve{constructor(...e){super(...e);this._lutPrimitive=new Ax({image:this._options.image}),this._stack.push(this._lutPrimitive)}}V2.prototype.availableOptions={image:{type:g.IMAGE,required:!0,setter(e){return this._lutPrimitive&&this._lutPrimitive.setImage(e),this.setDirty(!0),e}}};V2.identifier="lut";var rV=V2;class K2 extends ve{constructor(...e){super(...e);const{image:t,resolution:r,verticalTileCount:i,horizontalTileCount:o}=this._options;this._lutPrimitive=new Mx({image:t,resolution:r,verticalTileCount:i,horizontalTileCount:o}),this._stack.push(this._lutPrimitive)}}K2.prototype.availableOptions={image:{type:g.IMAGE,required:!0,setter(e){return this._lutPrimitive&&this._lutPrimitive.setImage(e),this.setDirty(!0),e}},resolution:{type:g.NUMBER},horizontalTileCount:{type:g.NUMBER,default:5},verticalTileCount:{type:g.NUMBER,default:5}};K2.identifier="3d-lut";var iV=K2;class vd extends Je{_render(e){return this._selectedFilter.render(this._sdk,e,this._renderTexture)}render(e){return this._selectedFilter.getDirty()&&this.setDirty(!0),this.getEnabled()?super.render(e):(this.setDirtyForRenderer(!1,this._sdk.getRenderer()),Promise.resolve(e))}setDirtyForRenderer(e,t){super.setDirtyForRenderer(e,t),this._selectedFilter.setDirtyForRenderer(e,t)}disposeRenderTextures(){super.disposeRenderTextures(),this._selectedFilter&&this._selectedFilter.disposeRenderTextures()}dispose(){super.dispose(),this._selectedFilter&&this._selectedFilter.dispose()}restoreSnapshot(e){const t=v({},e);if(delete t.filter,e.filter){const r=e.filter.constructor;r.identifier==="3d-lut"?this.setFilter(new r({image:e.filter.getImage(),resolution:e.filter.getResolution(),horizontalTileCount:e.filter.getHorizontalTileCount(),verticalTileCount:e.filter.getVerticalTileCount()})):r.identifier==="duotone"?this.setFilter(new r({lightColor:e.filter.getLightColor(),darkColor:e.filter.getDarkColor(),intensity:e.filter.getIntensity()})):this.setFilter(new r)}this.set(t)}resetToDefaultFilterIntensity(){const e=this._selectedFilter&&this._selectedFilter.availableOptions,t=e&&e.intensity.default;this.setIntensity(t||1)}}vd.identifier="filter";vd.prototype.availableOptions={identifier:{type:g.STRING,default:"identity"},intensity:{type:g.NUMBER,default:1,setter(e){return this._selectedFilter&&this._selectedFilter.setIntensity(e),e}},filter:{type:g.OBJECT,default:new Bx,setter(e){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=e,typeof this._options.intensity!="undefined"&&this._selectedFilter.set({intensity:this._options.intensity}),e}}};vd.FilterPrimitives=G2;vd.Filters=$2;vd.Filter=ve;Te.Operations.FilterOperation=vd;var oV=vd;const{Vector2:Tut}=te;class Lx extends Je{constructor(...e){super(...e);this._flipContainer=new U.Container}_render(e){const{outputResolution:t,flipHorizontally:r,flipVertically:i}=this._options;if(r||i){const o=e.getDimensions();this._flipRenderTexture?this._flipRenderTexture.resizeTo(o):(this._flipRenderTexture=new U.RenderTexture(this._sdk.getRenderer(),o.x,o.y),this._flipSprite=new U.Sprite(this._flipRenderTexture),this._flipContainer.addChild(this._flipSprite));const n=r?-1:1,s=i?-1:1;this._flipSprite.setScale(n,s),this._flipSprite.setPivot(0,0),this._flipSprite.setPosition(o.x*(1-n)*.5,o.y*(1-s)*.5),this._flipRenderTexture.clear(),this._flipRenderTexture.render(this._container),this._renderTexture.render(this._flipContainer)}else this._renderTexture.render(this._container);return Promise.resolve()}}Lx.identifier="flip";Lx.prototype.availableOptions={flipHorizontally:{type:g.BOOLEAN,default:!1},flipVertically:{type:g.BOOLEAN,default:!1}};Te.Operations.FlipOperation=Lx;var nV=Lx;const{Vector2:Rp}=te;class ng extends Je{constructor(...e){super(...e);this._colorOverlayFilter=new U.Filters.ColorOverlayFilter({color:this.getTintColor()}),this._frameContainer=new U.Container,this._resetSprites(),this._options.frame&&this._createSpritesForFrame(this._options.frame)}_resetSprites(){this._spriteGroups={top:{},left:{},right:{},bottom:{}},this._sprites=[],this._repeatSprites={top:[],left:[],right:[],bottom:[]}}_createSpritesForFrame(e){if(!e)return this._disposeSprites();const{imageGroups:t,layoutMode:r}=e;this._layoutMode=r||"horizontal-inside",this._disposeSprites(),["top","left","right","bottom"].forEach(i=>{if(typeof t[i]=="undefined")return;["start","mid","end"].forEach(o=>{if(typeof t[i][o]=="undefined")return;let n=t[i][o];"image"in n&&(n=n.image);const s=U.Texture.fromImage(n),a=new U.Sprite(s);this._spriteGroups[i][o]=a,this._sprites.push(a),this._frameContainer.addChild(a)})})}_render(e){const t=this._renderTexture.getDimensions();return this._options.frame&&(this._colorOverlayFilter.setColor(this.getTintColor()),this._updateSprites(e)),this._frameRenderTexture?this._frameRenderTexture.resizeTo(t):(this._frameRenderTexture=new U.RenderTexture(this._sdk.getRenderer(),t.x,t.y),this._frameSprite=new U.Sprite(this._frameRenderTexture),this._container.addChild(this._frameSprite)),this._frameSprite.setAlpha(this._options.alpha),this._options.frame&&this._options.frame.tintable?this._frameSprite.setFilters([this._colorOverlayFilter]):this._frameSprite.setFilters([]),this._frameRenderTexture.clear(),this._frameRenderTexture.render(this._frameContainer),this._renderTexture.render(this._container),Promise.resolve()}_updateSprites(e){const t=e.getDimensions();this._frameWidth=Math.ceil(e.getDimensions().min()*this._options.scale),this._updateHorizontalSpriteGroup(e,"top",0),this._updateHorizontalSpriteGroup(e,"bottom",t.y-this._frameWidth),this._updateVerticalSpriteGroup(e,"left",0),this._updateVerticalSpriteGroup(e,"right",t.x-this._frameWidth)}_updateHorizontalSpriteGroup(e,t,r=0){const i=e.getDimensions(),o=this._layoutMode==="vertical-inside",n=this._spriteGroups[t].start,s=this._spriteGroups[t].mid,a=this._spriteGroups[t].end;let l=0,c=0,d,u;if(n){d=n.getTexture().getDimensions(),u=d.y/d.x,l=Math.floor(this._frameWidth/u);const p=new Rp(0,r);p.x=o?this._frameWidth:0,n.setPosition(p),n.setHeight(this._frameWidth),n.setWidth(l)}if(a){d=a.getTexture().getDimensions(),u=d.y/d.x,c=Math.floor(this._frameWidth*u);const p=new Rp(i.x-c,r);p.x-=o?this._frameWidth:0,a.setPosition(p),a.setHeight(this._frameWidth),a.setWidth(c)}if(s){d=s.getTexture().getDimensions(),u=d.y/d.x;const p=new Rp(l,r);let h=i.x-l-c;if(o&&(p.x+=this._frameWidth,h-=this._frameWidth*2),s.setPosition(p),s.setWidth(h),s.setHeight(this._frameWidth),this._options.frame.imageGroups[t].mid.mode==="repeat"){const b=this._frameWidth/u,y=Math.ceil(h/b);let f=0;if(y!==-1){let w=Math.round(h/y);s.setWidth(w),f+=w,this._ensureRepeatSpritesExist(y-1,t,s);for(let T=0;T<y-1;T++){w=Math.round((h-f)/(y-T-1));const C=this._repeatSprites[t][T],F=p.clone().add(f,0).floor();C.setPosition(F),C.setWidth(w),C.setHeight(this._frameWidth),f+=w}}}}}_ensureRepeatSpritesExist(e,t,r){r.getTexture().setMaxListeners(e+1);const i=this._repeatSprites[t].length;if(e>i){const o=e-i;for(let n=0;n<o;n++){const s=new U.Sprite(r.getTexture());this._repeatSprites[t].push(s),this._frameContainer.addChild(s),this._sprites.push(s)}}else if(e<i){const o=this._repeatSprites[t].splice(e);o.forEach(n=>{const s=this._sprites.indexOf(n);if(s===-1)return;this._sprites.splice(s,1),this._frameContainer.removeChild(n),n.dispose()})}}_updateVerticalSpriteGroup(e,t,r=0){const i=e.getDimensions(),o=this._layoutMode==="horizontal-inside",n=this._spriteGroups[t].start,s=this._spriteGroups[t].mid,a=this._spriteGroups[t].end;let l=0,c=0,d,u;if(n){d=n.getTexture().getDimensions(),u=d.y/d.x,l=Math.floor(this._frameWidth*u);const p=new Rp(r,0);p.y=o?this._frameWidth:0,n.setPosition(p),n.setWidth(this._frameWidth),n.setHeight(l)}if(a){d=a.getTexture().getDimensions(),u=d.y/d.x,c=Math.floor(this._frameWidth*u);const p=new Rp(r,i.y-c);p.y-=o?this._frameWidth:0,a.setPosition(p),a.setWidth(this._frameWidth),a.setHeight(c)}if(s){d=s.getTexture().getDimensions(),u=d.y/d.x;const p=new Rp(r,l);let h=i.y-l-c;if(o&&(p.y+=this._frameWidth,h-=this._frameWidth*2),s.setPosition(p),s.setHeight(h),s.setWidth(this._frameWidth),this._options.frame.imageGroups[t].mid.mode==="repeat"){const b=this._frameWidth*u,y=Math.ceil(h/b);let f=0;if(y!==-1){let w=Math.round(h/y);s.setHeight(w),f+=w,this._ensureRepeatSpritesExist(y-1,t,s);for(let T=0;T<y-1;T++){w=Math.round((h-f)/(y-T-1));const C=this._repeatSprites[t][T],F=p.clone().add(0,f).floor();C.setPosition(F),C.setHeight(w),C.setWidth(this._frameWidth),f+=w}}}}}_disposeSprites(){this._sprites.forEach(e=>{this._frameContainer.removeChild(e),e.getTexture().dispose(),e.dispose()}),this._resetSprites()}dispose(){super.dispose(),this._disposeSprites(),this._colorOverlayFilter&&this._colorOverlayFilter.dispose(),this._frameRenderTexture&&this._frameRenderTexture.dispose()}static validateFrame(e){if(!e)return;const{imageGroups:t,layoutMode:r}=e;if(typeof e.identifier!="string")throw new Error("Frame needs a property `identifier` of type String.");if(typeof e.imageGroups!="object")throw new Error("Frame needs a property `imageGroups` of type Object.");const i=o=>{const{start:n,end:s,mid:a}=t[o];if(typeof t[o]=="undefined")return;if(typeof t[o]!="object")throw new Error(`Frame: \`imageGroups.${o}\` needs to be of type Object.`);if(typeof n!="undefined"&&!(n instanceof Bi||typeof HTMLImageElement!="undefined"&&n instanceof HTMLImageElement))throw new Error(`Frame: \`imageGroups.${o}.start\` needs to be of type Image.`);if(typeof a!="undefined"&&!(n instanceof Bi||typeof HTMLImageElement!="undefined"&&n instanceof HTMLImageElement)&&typeof a!="object")throw new Error(`Frame: \`imageGroups.${o}.mid\` needs to be of type Image or Object.`);if(typeof s!="undefined"&&!(s instanceof Bi||typeof HTMLImageElement!="undefined"&&s instanceof HTMLImageElement))throw new Error(`Frame: \`imageGroups.${o}.end\` needs to be of type Image.`)};if(typeof r!="undefined"&&["vertical-inside","horizontal-inside"].indexOf(r)===-1)throw new Error("Frame: `layoutMode` must be one of vertical-inside, horizontal-inside");if(typeof tintable!="undefined"&&typeof tintable!="boolean")throw new Error("Frame: `tintable` needs to be of type Boolean.");i("top"),i("left"),i("right"),i("bottom")}}ng.identifier="frame";ng.prototype.availableOptions={frame:{type:g.OBJECT,validation:ng.validateFrame,setter(e,t){return t||this._createSpritesForFrame(e),e},default:null},alpha:{type:g.NUMBER,default:1},tintColor:{type:g.COLOR,default:new V(1,1,1,0)},scale:{type:g.NUMBER,default:.1}};Te.Operations.FrameOperation=ng;var sV=ng;const DIe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDA4NDFGODc4N0ZCMTFFOEFCRjZEQ0E4MkRCQzYyNjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDA4NDFGODg4N0ZCMTFFOEFCRjZEQ0E4MkRCQzYyNjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowMDg0MUY4NTg3RkIxMUU4QUJGNkRDQTgyREJDNjI2MiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowMDg0MUY4Njg3RkIxMUU4QUJGNkRDQTgyREJDNjI2MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ppk6b2UAAAASUExURQAAAP///8zMzDMzM2ZmZpmZmer1GSkAABunSURBVHja7F3rgt6mDlzr8v6v3O5ukqaJbQSS0GDjn+c0+9lomBkJEB8fD3tEPvbz5ocO3oPw6vgfx+aA9z56HBsBL37k+H50D8UrHz6OjYAd/42ANxvAjYC3G8BfD+0ReacB3AjYBmAj4IXPcfJQVVFQaFuQSgNYiwBW2uxTbADrEMDyA4p7RaLUABYhgP8D4i5H1xrAAgT8mvzbgWIYgLkI4D9VaGtAuQGYiAD5G4NbAxAEYAoCvmz/rkJAVQAmxoKvCGhrAIABSEeAXP/81oDiDDAfASx36NvFQAgDkIcA1kLh2U+HAKTMx1b4twlAyADTEMBUgLn9DAtAcDyYCo3HfroywAQEiFl2tgbgCEAYAuzh34lgUQaokheRnvBvE1BjAOiuNiATw79NQE0GyB9JCOgN/zYBJQIgd/+nIybcH/5tAgoEQO/hMYqAofBvDZgvANTOEAYWh1mPYwNgCQFgQ45Is8K/TcB0ARBTlaAPAY7wbxNQJgD3oevIz+3WX8+YYmtAlQDEIMAcfhI+p6WtAVUCcI8AEzWzPfyXvLQBME8A1F4ssiDA7P1Ibn5tV4PnCUBPubA9NcUafr79N9sEFArALY3flwOs4q/ceDPaGhD+aJev44Fk0Mr+ym2+2QCYIwDUSxg38iyD4T8FwK4EzHGA/BGFAKP3V7ZBZ5uAUgG4n9EyXPhTtmJtA2CGA6RBR89j5k+5g562CZggADJEG395dHaGf5uAIgfYrraoJRUQb/i3CUh/OkpAtoKQ9k1/5W6F2gBId4AmkqWGEZTOqp/domwTkOwA1fFvf8bHMv1NRb3tAqFKAFYEGKY/yShH7fWgXAcovn/+ObMNub+Mk9Q2AakOkLwAOgK83wZAnQNk91+IEf9tApAdYCsVCBD/XQoqcYAU8UdC9/XKdoHfbCs8gwAk5K9EiP82AX9NNSJhxiKATiNIEgPUF5qAX8NAGgMCiTp4I3nsv13gxTwg8usBhTVg0Azvf//35eUACGACCTx6SVnsf/mqLzQB5wEbBgEHUrTJCGog9l8JALo9QxVD2xQYoqjpf/7tGwBOIuDgo9eS2ttpu0CDzvYRgUaHSdOm//kffx0ALDJL5iJLNAHcAtRfttu1QHPBzSgGGt96gbOm/3aBvdWWthhwRvcdyWvtuAHQu+7awACl9F7RvKY+2wX2L7rdYCCFAD6MXWY2ACYB4AYDlDRROU0EZBeDx9oqnmIgiwDMjYZCoPWyNICP4cdy5D6KUTVJBLYLdADgz/oAZ3n1a6LShL+7ATAqBZrZf5OTROD1LlAO9/OjIpNKAGki8HoA0BHwfElBKgF8jJ4232nADAB80UAuAWSJwOvTgCgA5BXrGmql4QCglwOAhKJQoTPAKuED8B86fnvkt+f3//15ScDn97MQHAEMNh0acYGi9P1YtO/7UZUl8XAtgcxKWATgPnM8QwO/0SDLYIFvx9OJgfghoPjf0TQD9BMJqwHgj25c42KgU17X9UMBNGcGwjJ1II4aJZ7zvqO/xHFm14oDQBhYd0UOYCAnm4o5dzg7+L/DAAsDHZXQXgzwLM3q9IFTaH/6uGRkwT4M0DzO6vixoPzWQwEfCwOgBwNpFXXHr5VH/wEA+DDe0ZD3naOHT4uZH3OpabASbiBSmQlaw+8JRPThLMD4UkgLAzz1pVuvDRN+tIuJXIuhd5yauqTae/wIJ/xwFoCd3H05tDz5rW9GFin8cJsN2B26cxpIxrnYKQAr/HD7zSTgDaXA6lopgMHC/0gAaMFnim1sFS38cLuNAhokcInQWXRH4KY/3n7DgE3RFQpgoQD2Tf9f+3z+t//r/4+IdmwdgtxxHAAAquE5akwvGY770HaeH4jQFhoYHgC9weOie9hPA+yY/t+r9THx+cLCKRDgNhwHAKAK5nRDsNIZ+5yNGitcSeMHgFbBXK5toHbEXvM26axwHYEfAFQGc7rgHnPuTzK9XsmPA0DhV8q5DbTRf+bMv34/OAvgPxdV+JV8utamtujXMJQ+DwCVXzmY6CuX4ZMXAIC6ASCFb1+t+68DQO1XDnS4mze2uoAFcG8HKDY6ghv+Re6kcwOg9isZN/yLXEjl3g9S3GGnQwNmG/A1bqPxAqC6vYZZA+ZvxaQNACAKEISRRWw+5QVA+X0LBJT4N7mJnweA8iZ7Ajn9V0kCHwAAhpz+H8tcTC7hAKD6gUYY9VVuJXYCAKDHnmKew1pEARIAoABTDWDxbYWVwBwACBAA6kR3kSTQDQCpFzqGPIari1gAbwQB7t1UyBMYtIgF8AKgvtc+Qx7AWEYB4gGAkgUK2rCC3kKxOgAEswvHMgqwPAAwT+CuowCrA0AxD+CuowCLA4Ax47+QAiwOAELk/6UUYG0ABDYOf2cV6MO9HFwLAALtwLGQAiwNAFQCWEkBVgYAAxaAllOAlQGgmA5wLQVYGACwBLCUAngX9AsBQKgEsJQCrAsAVAe4mAJ493TVLQejpoBFXROrAFC2IWQpAgBWAO+23qotYbAO8LxtzQfw41NxLgIAbAq4mgIsCgBcAlhNARIAIEWjjEEADGpNJwJgwufiOsDFigABmXxJIQA2BTzdogZtAd2ZfAUAzveBQYymLKcArUz+99sRQAAA7ADXs4CnmP3tGgz6+woN+r5CI4ZAnpUCrlcE+BhrtvnzYo1/cTC/FMjA93DoakWAz/tfD9cznwGAHeDHsZACfM7ejquOeloxvzUFXMYCfoX+SHto+iRDGWV8C3h1k9E6AAB2gOAW8Cv2x5Rn9r3xKD4L1gJOjH02AGgxAqhXAD6/2zv1yUM9sgO8UCcpfLvJE3/CjEROAT+gGlUmG/0iAEATgMD0Kq1g/SkhgXaA9x1L50GAEW5MT4oJcgrYbFo9AwJVmj+JAhYmgAkQqOf9dF+GnALa1tT00byfTQHQDtB4hWXKtVVQUz9xYkKngOZF9WAIMGT0U6T5CQTwDQFeg/h/bglSVZHPPUKnm4Sun1c5wL5dNUFuUJOCLtcbAH/SDkt7K4FOmGIwS21aYZI1NvByG/SBaiNvAsi1AhwTehVmnw7RBB9IjyKAICtA3tAzx8xS1mwKwHaAg1PRbQWkatbPV2jkfWAOMZbpwPua9utVaYGPAvm02KkDhBD7CRyN7QDP4WnN0V06YL85O39fSmadDtsB8tXbMaXrAFVP/CkUwNAO8DwI329ng4BDB7Q98bl0HAidXBIJoAMCEjs3ZrH+JKGWZQnADoFhEiCM4GemgoydAkr7q00Q0Lifr7owK4kCsFPAJgF8h8li1sZGCokdU7h6xRTwhPYsENCoFyCo2aAJfxM7BTzHvOaQAD+cAlZ0gBeQZ00hAUJySPHTldZzgNfwNLjBfhKAooBwwX4QAVitgEa8RJlHCk4FV3SADXhqeE1AoLKk2KRdF3SALXgarID6x7xskoRyNjgBjDqetg70kQBUJhjq2lbcBybj/3QU5Qw1TQKX7lbcB2aEZzsf0GUpIE63sVNA8sGzqQMdMoDVmyZMuBWaADRl3g7+McKngKMOSBPNbt9XchgJCNZUiaFu6BSQYzZ2aJQXxKKAEPO2YjeI/iFvkoA+hwJo/t+YrHJDIy4xMoDllwNm74r9wMboqUkCsiAF+PUbeR+YBJ+FlAAZ4IdRAPI+MA4/Dd0iAYsMKBYFOBkc2QFyxjm/VjrAq1GAMxUEdoCccxi+RQLyKgoAPgp0GSj326nTCCxBATSDPkriH3EAhnxGAIwCODilgSCAy/jHoFNdCECjgOFU8GKdleufy3wtyp6IywgsQQHqnQeQD6dTjGX0GMw6DzI5rxd/ySZOYzjBKGDQy9Fy8dcJ88YEADQKGMrmZLn4R4/w3bZhHqAPAaMAehgBxM8wHfYaa1CAPIsABCf+eBTQvaazoAOMvhhOPVBDo4DuVd0FU8CvL2KM+ONRQO/x2WPVJ6otizP+eMsofT6QjuPdEFC31VCwgnCXD5Rj6ccPAfLXGuAooGdJgI7j1RAIiD/edvoOCtBj/cdjB0Pif2G80Sjg7IX4eMQzCgEOir+lcyHmkoAeD3mkNP4XA46fCvLxmGeg3RsHrjXBbaixpYJ0POhRros/3pY6kw+U41lPwDmo4bgtmQqef720n3N+kZyn455WLYs/3rZ6AwWMZ6+T4W6/q9d3ut/F23AHa5q2xPPG0ysfZgw43t+p27qED9QYzqqAu/VGqKL4412y0KAAX+JSkvbYaKAtA5QR/+VSQWfeUpT2mGiAR8s/zg9Yygd64VoGd0sHeBlL/70AFjQRuNkd5hfxOrizp+mnRNeT29oCeVDIb+Mr0x4e7veXGn9fJ9OpPjAieqWL4E0IaK/9D8GuFs6KLp6O4O/iygcPHO7Pjv8qIsAxlbzqtKcBAe2x/1HAFTQROJ/qQTlc+QrY/cFe7fiPw2CLJgIdK/4cxS/1LucMAXLMiP/VgIO1D4wCKUDl41YH1DYOofe+womAdR0tvNSEQAJqiv8E1S0UAckSgEapCcMJSFv+o00LnAhQGgF8oLSX1XsEyDEx/ldvUycCnEcAMCtgcvdlk+N/NeXq1gRy7s9FSQWbKKcjP/03vYwAU0B4qWn+Rw7tcJapU67MBkjmOMCcixtAAM99F7CbJYNeDGczZO8xJ+LZpKugFMAJ4/4BjwAteBWBpADN+OOKjgAtGfEqG8CZSgi0GVKr7V9rxMtsgGZOBaDNkAoS/8s3ITgKoKw/XqN3VGz/miNeZQRl+k6oIqwbEECV411mBClxMJAoIPaW+Iy8S6AogBP/eI3l5XL5b1kRBqIAyhz0Irnj6tFvkhDSzJBMxDMU2VXbv3J7pJM9QF3OI6jyXzwwaRRAaI63MAlXhDrkZKsmaEi/hKRU/TAIAmhiJbCWArjGfnFKP6PsYeE0AsBb/aAS2OEgIMMHMiDVXcNS5/8k0tBkpIKKmPNWpKbdfXcVZlQyaQ9tHxTBxH9OVcKUCmr4MANvhtWZcMNDQHQqaNC9MgqQeSJwb/8FSSGDU0HYlHeqCHBjmgsQQcamgibhqzsWN2nM22ePBGh+RKaCtsQX7lgcT4y/NP+b2UYgMhU0Oh+09gg0L/5s4UqIA/WZlS+0HjmhI25tPaE42UCYDzSnPnA9cubEX+1+SespgGO5D1sEdH78GwggqaYAiplcinZ7Tmrrvj5lV5SqUIwPvEgn0LqmZ/Zv7e08pyiFwYhU8BJFaF3T01r33ZX/LmLZ7HDL61DAZZzhbs+hHB94G//hytkkCPh5+uYvrHGXsibGXz3OeY4QuK3azR+Ao4CM+5yGL54w5E4zMoLUG0PgLtCa1RjFBHVL+YyESyiAfN8v4aWmVLhLSfytW0ezzYCPpxsyv+hdyiHx59Hhm00DHqvWRM+CF6nGlECNDs5aRE3FgMMbN+P7aB8YsbRrP0GQh4Fxnjb8S7RUMNCWSMyyZ8cmUkp6hn/MwB2rXaQaEv++z5OhfaS4T9aAg/nAyM1d+qT4Sx7nZvpALoz/aIdjyIfyOBch7THkf2MO9zE6wOm5d1LaI6Xxf4wOaHruneUDqTj+tuuwVyQApDbSd5wkxfF/BAQ0vNQ0zwdSefwfAIHs3BuBAm4ce4SsLQ0BmbQGk5QKOsATaWvWhQAl597ZqaBAxP9zuBZNCjk394agAHUt/z67LqDTlmGzKEBh4v8x2GkClQBW2R3Gw/Gfe9R8LQeIuSQgA++jARsA/Lnmcg5wpVSQxyelvDv+7e9HSwX7KaCRn+mrDQANglpWooBppzovf4cAnmETrMtTQNOaSeKbFXumADe3BgWMF4K/xiGCBHhaqhHHTjwObMaigDEvExokQo6/axov0TPCUQyK+R5Fjr9PyJ9BAS0j4DzSycj679VxtFSQxl6ntYdTw2kJJf7eCKL5QBl9nQYCHAmhQsffzeH6DAow9HiJFQDCiL9/bxfaQaFhCmgu1gySwHiZpS4FnMshKBTQPsyhYSOMEv8QBacFKIBd0XKQACMngEEenh9DAYY1e40YYRQDGMXeYD7QQwFtGeirCQi0AYwib7RUkFxf1SYBdo4MigGIs29gB4XE91kcd1uWQhuAwAQOTOi8b9Pcxm80g4wtAIHSDZYKipeQ2vs3TXgiaAEIVW6sJQF2f1lbBmh0iQlFAGJjBuYD1f9pAZ1/CVoAgllb8Smg89sMTV6UJ44waAq4EAVkdHqSKR57AQJAwzuHvIyBBK6tgEILQMKExVoSoJiXMZDAhRVgbAeYAE8sCpCg0pSl3ZuaLxHSBxMAmumlqA+0NHdQ4whjO0BCRFUoBYx9oYUE/rIC+i4HCGd7+PzUH0eO1x0EPB1r1ksBwSjg3+BT9L4+6oSArucAI/Sp3gfeBN83B03dHX5BgN+WAkKkgq3g+77S1unrBwT0bSlgufdlIdMBfM9n2ro8fUJgRQIIClJBKvg58e3dFzh86pxAQN+XAtb4QLZO/Cg9ctwC8NRVQNskgYh9SByGu/3BEED2GlX6Ghj3cf6cakcy86SngOkME3JDmjP0YeUOWpgAJmj01fCQMo9HXvyhD6x30LIEMMGl3zXEo08UcE/gP+d8bIc1zeM5fAKYUqprb6omEvkMLp/H/N/5/jnhKaW1XtAF7n0d4J92FGicAv6GgqllXVTwIy9r7YHAqwgA9bYsCr+13ewGUQhg2jZFekH0e9wgyirAtPV6rMbolHlTuwUC2ASQgk56+tTvgsCjukGE+8BVp74dAigEMHW3hr4l+AYIQBNAVoWK3xP8JgT4hQRQB4CK4N9DAKQKPHvDJtUYvtLZJgRMALO3bNP8ic+QLEvvJICJpQCqnvj3qAd+tVRw8stif/XNIAQwf8M+vyv2lzIrwASg838yKPQCF/tLzDMsNLPfjRIi37edBIFmH3EpSBgAnKv9uKFHt4Alp3blbDT4azf3IBDAAYBrAWvOa/Ed53xt+1I9u8VS9Wu3mCwHAFwLWNO5g32CyMsBAFYBis5ssw90jLuqZudZDAtYtUJB7wKAohJAWSv3cADoagRAqC82ZzKFA4CQASCoFrCudxv5KJHWAgCqBSxsV6dvAgCsAhQ27ZE3AQBVASrbdvGbAECYBFDauO9NAEAtApS27nwTAATTAtZ27nSWcpYCAKgC1LbvfhEAQBWguHGrs5anC60GgZaBi6/weBEAMBWgunPzewDAkEWA+t7tPhVfaEcIpgLU397wGgBAKgDA5Q1vAQCkAiDcW/0WACBWgQRgX63TBK4DAEAFEIST6m8BAKACXPVn+dgAeIUCEEavGmcpeBkAoCnAZfvK2W/lXA1cBQBoCiAwJ6vkHQAAUwDF6Van7wCAIinAXffi6W9F7wAAAa0EC9ThWueC/iIAYCAFUKiOtd6THYsAAEcBms3rdQPgyQrQbstG5S8kzqkFCACUJNB0d8Xc8fMGcA0AgCSBtq6Mc5FJrwAARBnQenXN1Ddzn+6lFQBwNvTTFcDemp/XBgDgtnCAJLDnEkuphaU+DwDlSWDfNbYz383N4EsAoDgJ7L7FmBfixhUAUKsAAzfZz0OnuPlnBQBIHcuyDHXb5HW4cQUAlCWBpmtrqdIG+tOjRQEgM6Jvmvxc2bYmQBwXAECBBWBj9A/i872BkyggID1aAACTLYA5+D/jXHiFkd8CrNAncGIS2BP87+n/+ZTZwABuXKFT6BQL8NlWvbO/vt4Q8ZxpFKAACwCAL641oa9+9+yP/NfdCv0Xq8j9G/Ia3LhAs2hp3nDzfb1RDxz4+yaF4Us1/hhoqqGAiF0SC9wX0BOi/12I8eP5N9I/nv+uzjicD0kbo1yhAN2/+jAATHrU8o4Vd4X0/yj+lkCGCz+xTaakQBvleQAQtPCfjnHFqnBI53T8HWEEzv5lFHBOjequBG8A3IWfu3LV6Rbwm6Ie1SqYVwj/VTikaGBINgDitf+eXKdfGSKet10IAIps/ZovqoXSaMMAPAAInfuLKEBssOX+t6atAGOmSqb6QIp5e/i1IF4k+le1gCwfyEHfAL8WJLW2j/3vmiMCGoRj+KUACVi5GQp+XzZ9Q8sEQoznH7REd4CBvRrzg39NAVJPANcYWOm2gO+NG9lAEM8Wk/OXQ3JGf+aGtA4AfgeC5gGB4wMTb6sljOAWuzn4DyD83NQTCQZJoOZwEYgray4MgL/BIPrfhqDWjiH93CnEEj5djxk+UOKczkMAcAGJkye7DiYzRCDQ7h5PBUDZWhjli0BubURfDgCvCeYEb2kgAO060ZJngjYALnwgJRMAfww1MjjWywLT7ZQkgCp0Yt3gK4IG3gWAjMWw5Iuk9P6Ps24A+ABAOSGKEoH25kN2ScG7koCcPJgz7bVp76EDAxsAARwoef7avPt41A5sAESIoKbJa8/m4yEM6MsAICkTlbNmV+/xg34MyMsAkLQpMutKUeqPWScGeAMgRAUpZX4N7jvtwcDbAJCzHHbdW5bjYWX6k9a84G0eMMcFStIA+zaef26o2gCw2GrvcpAmueyAoydNMXgfAML3hEiazdaQiN2LgbwOAMEu0FCK5zoC+PmXromANwBcAJBEn0WhinLhCN4HgEgXyJlOO+Hc0QkINgAco6Cp5VbKKdz+HwTv84BxLjD5VilNPHPyubv+vQCIMQGd+zA44C1jPfunMaTXLQVdDS0H0EgsAuacO+UXWoAIEzCw/YIiAPbKcE0BQBe1ju3C6yPbXbWb6wJ7hnZ0E6a6f2MTAIALNLA/uVOBWYeOtwb0Ti5L+PnDjYBZbQc2ADrX2MlG9OxMBeY1HnnpM3YBt8n7yW2SSDacbQcIaAJM4f/VjkU8ySBtB4hXCtLOgq+OpwKyHSCcCTAVfv7fjYlGEXBhIHbQkgGgzvD/2VyaR9eFaDtArFKQreyr1pnciqVsB1jkAtkRfmJzKBsImNBvZD92E2Bc9JFO48hbAAABIKPhv75boB8BWwBgTID5ZI10G7rrgtAWABQTYF7xlZGU7nJO0y4BQJgAc/h14IKWGwRsAYCoBJjDb6nsS8fuAN5ndwBMgNjv5hn9oSsEbAGoNQFHT/jt81KtCNDtAKsTQXtbhZ4Le40I2AJQDoAjI/x3P6VbAKBMQKD360fAFgAAExDo/Yy/JQ08bgEA0wCSYLTJ7X+wBQALADQ8IaWBANoCgG8CSFJ+Ta4NwBYAIBNAkoU32QKArwEkiYxzUX3aawDJj84M/0f/mcJtAEA0gGQ64rYATAEATQ1/JwK2AECYAIo14roFYKlEkLgAczsDRDEByjWsswUAQQNIefpv7oNgMIkgSQnqtgHA0ABKFWBD8rEzwEoN0Ozp10TANgB1GkAygX1bCNgCUKUBOmno7xGwM8CJAKAJvr8TAdsAlJgA5TLkbQNQ+Mg85TciYBuA2SaAtGTMeXcCwMgDykb8FAHbALy7CrENwLsRsOP/cgRsA/g+C7IN4EbANoAbAdsAbATs+L/2kW0ANwK2AXz1w4+L/z8CDADebzi4XHs84QAAAABJRU5ErkJggg==";var aV=DIe,lV=`uniform sampler2D u_image;
uniform sampler2D u_watermarkTex;

varying vec2 v_texCoord;


void main() {
  vec4 color = texture2D(u_image, v_texCoord);
  vec4 watermarkColor = texture2D(u_watermarkTex, v_texCoord);

  if (watermarkColor.r > 0.8) {
    gl_FragColor = mix(color, watermarkColor, 0.3);
  } else {
    gl_FragColor = color;
  }
}
`;class cV extends U.Filter{constructor(...e){super(...e);this._fragmentSource=lV}_applyWebGL(e,t,r,i=!1){const o=e.getContext(),{canvas:n}=o,s=this.getShaderForRenderer(e),a=t.getFrame(),l=this._watermarkCanvas;(!l||a.width!==l.width||a.height!==l.height)&&this._createWatermarkCanvas(a.width,a.height);const c=U.Texture.fromCanvas(this._watermarkCanvas),d=c.getBaseTexture();e.updateTexture(d),d.setGLUnit(1),e.setRenderTarget(r),i&&r.clear(),e.setShader(s);const u=e.getCurrentRenderTarget().getProjectionMatrix().toArray();s.setUniform("u_projMatrix",u),s.syncUniforms(),o.uniform1i(o.getUniformLocation(s.getProgram(),"u_watermarkTex"),1),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.getTexture()),o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,d.getGLTextureForRenderer(e)),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0),c.dispose()}_createWatermarkCanvas(e,t){const r=this._options.watermarkImage,i=j.createCanvas();i.width=e,i.height=t;const o=i.getContext("2d");let n,s,a,l,c;e>t?(n=e/r.width,a=(t-r.height*n)/2,s=0):(n=t/r.height,a=0,s=(e-r.width*n)/2),o.drawImage(r,0,0,r.width,r.height,s,a,r.width*n,r.height*n),this._watermarkCanvas=i,this._watermarkContext=o}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=t.getContext(),s=r.getContext(),a=this._options.watermarkImage;this._createWatermarkCanvas(o.width,o.height);const l=n.getImageData(0,0,o.width,o.height),c=this._watermarkContext.getImageData(0,0,o.width,o.height),d=new V,u=new V,p=new V;for(let h=0;h<o.width*o.height*4;h+=4)d.set(l.data[h]/255,l.data[h+1]/255,l.data[h+2]/255,l.data[h+3]/255),u.set(c.data[h]/255,c.data[h+1]/255,c.data[h+2]/255,c.data[h+3]/255),u.r>.8?p.copy(d.clone().mix(u,.3)):p.copy(d),l.data[h]=p.r*255,l.data[h+1]=p.g*255,l.data[h+2]=p.b*255,l.data[h+3]=p.a*255;s.putImageData(l,0,0)}}cV.prototype.availableOptions={watermarkImage:{type:g.OBJECT,required:!0}};var dV=cV;class zx extends Je{constructor(...e){super(...e);re(this,"_applyWatermarkFilter",()=>(this._watermarkFilter||(this._watermarkFilter=new dV({watermarkImage:this._watermarkImage})),this._sprite.setFilters([this._watermarkFilter]),this._renderTexture.render(this._container),Promise.resolve()));re(this,"_loadWatermarkImage",()=>this._watermarkImage?Promise.resolve():new Promise((e,t)=>{this._watermarkImage=new Bi,this._watermarkImage.onload=e,this._watermarkImage.src=aV}));this._watermarkFilter=null,this._watermarkImage=null}_render(e){return this._loadWatermarkImage().then(this._applyWatermarkFilter)}dispose(){this._watermarkFilter&&this._watermarkFilter.dispose(),super.dispose()}}zx.identifier="license-watermark";zx.prototype.availableOptions={};Te.Operations.LicenseWatermarkOperation=zx;var uV=zx,pV=`/*!
 * Based on evanw's glfx.js tilt shift shader:
 * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js
 */

uniform sampler2D u_image;
uniform float u_blurRadius;
uniform vec2 u_controlPoint1;
uniform vec2 u_controlPoint2;
uniform vec2 u_delta;
uniform vec2 u_texSize;
varying vec2 v_texCoord;

float random(vec2 co)
{
    highp float a = 12.9898;
    highp float b = 78.233;
    highp float c = 43758.5453;
    highp float dt = dot(co.xy,vec2(a,b));
    highp float sn = mod(dt, 3.14);
    return fract(sin(sn) * c);
}

void main() {
    vec4 color = vec4(0.0);
    float total = 0.0;

    vec2 vector = u_controlPoint2 - u_controlPoint1;
    float offset = random(gl_FragCoord.xy / u_texSize.xy);

    float radius = smoothstep(0.0, 1.0,
      abs(
        clamp(dot(v_texCoord - u_controlPoint1, vector) / dot(vector, vector), 0.0, 1.0)
      )
    ) * u_blurRadius;

    for (float t = -30.0; t <= 30.0; t++) {
      float percent = (t + offset - 0.5) / 30.0;
      float weight = 1.0 - abs(percent);
      vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);

      color += _sample * weight;
      total += weight;
    }

    gl_FragColor = color / total;
}
`;const{Vector2:Ua}=te;class hV extends U.Filter{constructor(...e){super(...e);this._fragmentSource=pV,this._lastBlurRadius=null,this._lastControlPoint1=new Ua,this._lastControlPoint2=new Ua,this._blurFilter=new Li,this._blurredRenderTarget=new U.CanvasRenderTarget(100,100,1),this._maskRenderTarget=new U.CanvasRenderTarget(100,100,1)}_applyCanvas(e,t,r,i=!1){if(this._options.blurQuality==="low"){this._renderLQBlur(e,t,r,i);return}const o=t.getDimensions(),n=!r.getDimensions().equals(o),s=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||n;if(s){const a=new Ua(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(a);const l={blurRadius:this._options.blurRadius,texSize:o},c=(b,y,f)=>Math.min(Math.max(b,y),f),d=(b,y,f)=>{const w=c((f-b)/(y-b),0,1);return w*w*(3-2*w)},u=this._options.controlPoint2.clone().subtract(this._options.controlPoint1.clone()),{blurRadius:p}=this._options,h=(b,y)=>d(0,1,Math.abs(c(new Ua(b,y).subtract(this._options.controlPoint1).dot(u)/u.dot(u),0,1)))*p;this._blurFilter.set(l),this._blurFilter._applyCanvas(e,t,r,i,h),this._lastBlurRadius=this._options.blurRadius}}_renderLQBlur(e,t,r,i=!1){const o=t.getDimensions(),n=!this._blurredRenderTarget.getDimensions().equals(o);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions());const s=!this._lastControlPoint1.equals(this._options.controlPoint1)||!this._lastControlPoint2.equals(this._options.controlPoint2)||n,a=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||n;s&&(this._renderMask(),this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone()),a&&(this._blurImage(t,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,r)}_renderMask(){const e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),r=new Ua(e.width,e.height),i=this._options.controlPoint1.clone().multiply(r),o=this._options.controlPoint2.clone().multiply(r),n=t.createLinearGradient(i.x,i.y,o.x,o.y);n.addColorStop(0,"#FFFFFF"),n.addColorStop(1,"#000000"),t.fillStyle=n,t.fillRect(0,0,e.width,e.height)}_applyMask(e,t){const r=t.getContext(),i=e.getCanvas(),o=e.getContext(),n=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),a=o.getImageData(0,0,i.width,i.height),l=a.data,c=n.getImageData(0,0,i.width,i.height).data,d=s.getImageData(0,0,i.width,i.height).data;let u;for(let p=0;p<i.width*i.height*4;p+=4)u=d[p]/255,l[p]=u*l[p]+(1-u)*c[p],l[p+1]=u*l[p+1]+(1-u)*c[p+1],l[p+2]=u*l[p+2]+(1-u)*c[p+2];r.putImageData(a,0,0)}dispose(){super.dispose(),this._blurFilter.dispose(),this._blurredRenderTarget.dispose(),this._maskRenderTarget.dispose()}}hV.prototype.availableOptions={blurRadius:{type:g.NUMBER,default:30,uniformType:$.FLOAT},controlPoint1:{type:g.VECTOR2,default:new Ua(0,.5),uniformType:$.FLOAT2},controlPoint2:{type:g.VECTOR2,default:new Ua(1,.5),uniformType:$.FLOAT2},delta:{type:g.VECTOR2,default:new Ua(1,1),uniformType:$.FLOAT2},texSize:{type:g.VECTOR2,default:new Ua(100,100),uniformType:$.FLOAT2}};var Nx=hV;const{Vector2:Ux}=te;class jx extends Je{constructor(...e){super(...e);this._lastBlurRadius=this._options.blurRadius,this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone();const t={blurQuality:{type:g.STRING}};this._horizontalFilter=new Nx({},t),this._verticalFilter=new Nx({},t),this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]),this._horizontalFilter.setDelta(new Ux(.5,.5)),this._verticalFilter.setDelta(new Ux(-.5,.5)),this._filter=new Nx({},t)}rotate(e){const{controlPoint1:t}=this._options,{controlPoint2:r}=this._options;e===90?(t.flip(),t.x=1-t.x,r.flip(),r.x=1-r.x):e===-90&&(t.flip(),t.y=1-t.y,r.flip(),r.y=1-r.y),this.set({controlPoint1:t,controlPoint2:r})}flip(e){const{controlPoint1:t}=this._options,{controlPoint2:r}=this._options;switch(e){case"horizontal":t.x=1-t.x,r.x=1-r.x;break;case"vertical":t.y=1-t.y,r.y=1-r.y;break}this.set({controlPoint1:t,controlPoint2:r})}transform(e){const t={};["controlPoint1","controlPoint2"].forEach(r=>{const i=this.getOption(r);t[r]=e.applyToRelativePoint(i)}),["blurRadius"].forEach(r=>{const i=this.getOption(r);t[r]=e.applyToRelativeSize(i)}),this.set(t,!1)}_renderWebGL(e){return this._renderBlur(e)}_renderCanvas(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}_renderBlur(e){const t=e.getDimensions(),r=t.min(),{blurRadius:i,controlPoint1:o,controlPoint2:n}=this._options,s={blurRadius:i*r,controlPoint1:o.clone(),controlPoint2:n.clone(),texSize:t,blurQuality:"high"};return this._horizontalFilter.set(s),this._verticalFilter.set(s),this._renderTexture.render(this._container),Promise.resolve()}_renderLQCanvasBlur(e){const t=e.getDimensions(),{blurRadius:r,controlPoint1:i,controlPoint2:o}=this._options;return this._filter.set({blurRadius:r,controlPoint1:i.clone(),controlPoint2:o.clone(),texSize:t,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),Promise.resolve()}dispose(){super.dispose(),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}hasChanges(){return!0}}jx.identifier="linear-focus";jx.prototype.availableOptions={controlPoint1:{type:g.VECTOR2,default:new Ux(0,.5)},controlPoint2:{type:g.VECTOR2,default:new Ux(1,.5)},blurRadius:{type:g.NUMBER,default:.025},highQualityCanvasBlur:{type:g.BOOLEAN,default:!1}};Te.Operations.LinearFocusOperation=jx;var mV=jx,fV=`/*
 * Based on evanw's glfx.js tilt shift shader:
 * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js
 * @license
 */

uniform sampler2D u_image;
uniform float u_blurRadius;
uniform float u_gradientSize;
uniform float u_size;
uniform vec2 u_start;
uniform vec2 u_end;
uniform vec2 u_delta;
uniform vec2 u_texSize;
varying vec2 v_texCoord;

float random(vec2 co)
{
    highp float a = 12.9898;
    highp float b = 78.233;
    highp float c = 43758.5453;
    highp float dt = dot(co.xy,vec2(a,b));
    highp float sn = mod(dt, 3.14);
    return fract(sin(sn) * c);
}

void main() {
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(gl_FragCoord.xy / u_texSize.xy);

    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));
    float radius = smoothstep(0.0, 1.0,
      (abs(
        dot(v_texCoord * u_texSize - u_start, normal)
      ) - u_size) / u_gradientSize
    ) * u_blurRadius;

    for (float t = -30.0; t <= 30.0; t++) {
        float percent = (t + offset - 0.5) / 30.0;
        float weight = 1.0 - abs(percent);
        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);

        color += _sample * weight;
        total += weight;
    }

    gl_FragColor = color / total;
}
`;const{Vector2:ja}=te;class gV extends U.Filter{constructor(...e){super(...e);this._fragmentSource=fV,this._lastBlurRadius=null,this._lastGradientRadius=null,this._lastStart=new ja,this._lastEnd=new ja,this._blurFilter=new Li,this._blurredRenderTarget=new U.CanvasRenderTarget(100,100,1),this._maskRenderTarget=new U.CanvasRenderTarget(100,100,1)}_applyCanvas(e,t,r,i=!1){if(this._options.blurQuality==="low"){this._renderLQBlur(e,t,r,i);return}const o=t.getDimensions(),n=!r.getDimensions().equals(o),s=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||n;if(s){const a=new ja(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(a);const l={blurRadius:this._options.blurRadius,texSize:o},c=(C,F,k)=>Math.min(Math.max(C,F),k),d=(C,F,k)=>{const E=c((k-C)/(F-C),0,1);return E*E*(3-2*E)},{blurRadius:u,gradientSize:p,size:h,start:b,end:y,texSize:f}=this._options,w=new ja(b.y-y.y,y.x-b.x);w.divide(w.len());const T=(C,F)=>d(0,1,(Math.abs(f.clone().multiply(C,F).subtract(b).dot(w))-h)/p)*u;this._blurFilter.set(l),this._blurFilter._applyCanvas(e,t,r,i,T),this._lastBlurRadius=this._options.blurRadius}}_renderLQBlur(e,t,r,i=!1){const o=t.getDimensions(),n=!this._blurredRenderTarget.getDimensions().equals(o);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions());const s=!this._lastStart.equals(this._options.start)||!this._lastEnd.equals(this._options.end)||this._lastGradientRadius!==this._options.size||n,a=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||n;s&&(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size),a&&(this._blurImage(t,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,r)}_renderMask(){const e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),r=this._maskRenderTarget.getPixelRatio(),i=new ja(e.width,e.height),o=this._options.size*i.min()*r,n=this._options.gradientSize*i.min()*r,s=this._options.start.clone().multiply(i),a=this._options.end.clone().multiply(i),l=a.clone().subtract(s),c=s.clone().add(l.clone().divide(2)),d=l.len(),u=l.clone().divide(d),p=c.clone().add((o+n)*u.y,-(o+n)*u.x),h=c.clone().add(-(o+n)*u.y,(o+n)*u.x),b=t.createLinearGradient(p.x,p.y,h.x,h.y),y=h.clone().subtract(p).len();b.addColorStop(0,"#000000"),b.addColorStop(n/2/y,"#FFFFFF"),b.addColorStop(1-n/2/y,"#FFFFFF"),b.addColorStop(1,"#000000"),t.fillStyle=b,t.fillRect(0,0,e.width,e.height)}_applyMask(e,t){const r=t.getContext(),i=e.getCanvas(),o=e.getContext(),n=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),a=o.getImageData(0,0,i.width,i.height),l=a.data,c=n.getImageData(0,0,i.width,i.height).data,d=s.getImageData(0,0,i.width,i.height).data;let u;for(let p=0;p<i.width*i.height*4;p+=4)u=d[p]/255,l[p]=u*l[p]+(1-u)*c[p],l[p+1]=u*l[p+1]+(1-u)*c[p+1],l[p+2]=u*l[p+2]+(1-u)*c[p+2];r.putImageData(a,0,0)}dispose(){super.dispose(),this._blurFilter.dispose()}}gV.prototype.availableOptions={blurRadius:{type:g.NUMBER,default:30,uniformType:$.FLOAT},size:{type:g.NUMBER,default:50,uniformType:$.FLOAT},gradientSize:{type:g.NUMBER,default:50,uniformType:$.FLOAT},start:{type:g.VECTOR2,default:new ja(0,.5),uniformType:$.FLOAT2},end:{type:g.VECTOR2,default:new ja(1,.5),uniformType:$.FLOAT2},delta:{type:g.VECTOR2,default:new ja(1,1),uniformType:$.FLOAT2},texSize:{type:g.VECTOR2,default:new ja(100,100),uniformType:$.FLOAT2}};var qx=gV;const{Vector2:Gx}=te;class Wx extends Je{constructor(...e){super(...e);this._lastBlurRadius=this._options.blurRadius,this._lastSize=this._options.size,this._lastGradientSize=this._options.gradientSize;const t={blurQuality:{type:g.STRING}};this._horizontalFilter=new qx({},t),this._verticalFilter=new qx({},t),this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]),this._horizontalFilter.setDelta(new Gx(.5,.5)),this._verticalFilter.setDelta(new Gx(-.5,.5)),this._filter=new qx({},t),this._renderBlur.bind(this)}rotate(e){const{start:t}=this._options,{end:r}=this._options;e===90?(t.flip(),t.x=1-t.x,r.flip(),r.x=1-r.x):e===-90&&(t.flip(),t.y=1-t.y,r.flip(),r.y=1-r.y),this.set({start:t,end:r})}flip(e){const{start:t}=this._options,{end:r}=this._options;switch(e){case"horizontal":t.x=1-t.x,r.x=1-r.x;break;case"vertical":t.y=1-t.y,r.y=1-r.y;break}this.set({start:t,end:r})}transform(e){const t={};["start","end"].forEach(r=>{const i=this.getOption(r);t[r]=e.applyToRelativePoint(i)}),["blurRadius","size","gradientSize"].forEach(r=>{const i=this.getOption(r);t[r]=e.applyToRelativeSize(i)}),this.set(t,!1)}_renderWebGL(e){return this._renderBlur(e)}_renderCanvas(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}_renderBlur(e){const t=e.getDimensions(),r=t.min(),i=this._options.start.clone(),o=this._options.end.clone(),{blurRadius:n,size:s,gradientSize:a}=this._options,l={blurRadius:n*r,size:s*r,gradientSize:a*r,start:i.clone().multiply(t),end:o.clone().multiply(t),texSize:t,blurQuality:"high"};return this._horizontalFilter.set(l),this._verticalFilter.set(l),this._renderTexture.render(this._container),Promise.resolve()}_renderLQCanvasBlur(e){const t=e.getDimensions(),{blurRadius:r,size:i,gradientSize:o,start:n,end:s}=this._options;return this._filter.set({blurRadius:r,gradientSize:o,size:i,start:n.clone(),end:s.clone(),texSize:t,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),Promise.resolve()}dispose(){super.dispose(),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}hasChanges(){return!0}}Wx.identifier="mirrored-focus";Wx.prototype.availableOptions={start:{type:g.VECTOR2,default:new Gx(0,.5)},end:{type:g.VECTOR2,default:new Gx(1,.5)},blurRadius:{type:g.NUMBER,default:.025},size:{type:g.NUMBER,default:.1},gradientSize:{type:g.NUMBER,default:.1},highQualityCanvasBlur:{type:g.BOOLEAN,default:!1}};Te.Operations.MirroredFocusOperation=Wx;var bV=Wx;const{Vector2:IIe}=te;class Hx extends Je{_render(e){const t=this._options.rotation%360,r=t*(Math.PI/180),i=t===90||t===270,o=this._options.flipHorizontally!==this._options.flipVertically,n=i&&o?!this._options.flipVertically:this._options.flipVertically,s=i&&o?!this._options.flipHorizontally:this._options.flipHorizontally;this._sprite.setScale(s?-1:1,n?-1:1),this._sprite.setRotation(r),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();const a=this._sprite.getBounds();return this._renderTexture.resizeTo(new IIe(a.width,a.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2).round()),this._renderTexture.render(this._container),Promise.resolve()}getNewDimensions(e){return e=e.clone(),this._options.rotation%180&&e.flip(),e}flip(e){const{rotation:t}=this._options;(t===90||t===270)&&(e==="vertical"?e="horizontal":e="vertical");switch(e){case"vertical":this.setFlipVertically(!this.getFlipVertically());break;case"horizontal":this.setFlipHorizontally(!this.getFlipHorizontally());break}}}Hx.identifier="orientation";Hx.prototype.availableOptions={rotation:{type:g.NUMBER,default:0,validation(e){if(e%90!==0)throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.")},setter:e=>(e+360)%360},flipVertically:{type:g.BOOLEAN,default:!1},flipHorizontally:{type:g.BOOLEAN,default:!1}};Te.Operations.OrientationOperation=Hx;var yV=Hx;const{Vector2:Vx}=te;class Kx extends Je{constructor(...e){super(...e);this._flipContainer=new U.Container}_render(e){const{position:t,rotation:r,scale:i,pivot:o,outputResolution:n}=this._options,s=this._sdk.getTextureScale(),a=n.clone().multiply(s).ceil();return this._renderTexture.resizeTo(a),this._sprite.setRotation(r),this._sprite.setPosition(t),this._sprite.setPivot(o),this._sprite.setScale(i),this._renderTexture.render(this._container),Promise.resolve()}getNewDimensions(e){const t=this._sdk.getTextureScale();return this._options.outputResolution.clone().multiply(t).ceil()}}Kx.identifier="output";Kx.prototype.availableOptions={position:{type:g.VECTOR2,default:new Vx(0,0)},rotation:{type:g.NUMBER,default:0},scale:{type:g.VECTOR2,default:new Vx(1,1)},pivot:{type:g.VECTOR2,default:new Vx(0,0)},outputResolution:{type:g.VECTOR2,default:new Vx(100,100)}};Te.Operations.OutputOperation=Kx;var vV=Kx;const{OverlayFilter:$x}=U.Filters,{Vector2:_V}=te,OIe=4;class sg extends Je{constructor(...e){super(...e);this._overlayTexture=U.Texture.fromImage(this._options.image),this._overlayContainer=new U.Container,this._overlaySprite=new U.Sprite,this._overlaySprite.setTexture(this._overlayTexture),this._overlaySprite.setAnchor(0,0),this._overlayContainer.addChild(this._overlaySprite),this._overlayFilter=new U.Filters.OverlayFilter({overlayImage:this._overlayTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayTexture}),this._sprite.setFilters([this._overlayFilter]),this._renderedOverlaySprite=new U.Sprite,this._renderedOverlayContainer=new U.Container,this._renderedOverlayContainer.addChild(this._renderedOverlaySprite),this._overlayRendered=!1,this._lastInputDimensions=new _V(0,0)}setOption(e,t){if(super.setOption(e,t),e==="image"&&t&&this._sdk){const r=this._sdk.getRenderer(),i=this._overlayTexture.getBaseTexture();i.setSource(t),r.isOfType(De.WEBGL)&&r.updateTexture(i),this._overlayRendered=!1}}_render(e){const t=e.getDimensions(),{image:r,alpha:i,blendMode:o}=this._options;return r?((!this._overlayRendered||!this._lastInputDimensions.equals(t))&&(this._renderOverlayToRenderTexture(e),this._overlayRendered=!0,this._lastInputDimensions.copy(t)),this._overlayFilter.set({blendMode:o,overlayImage:this._overlayRenderTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:i}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),Promise.resolve()):(this._sprite.setFilters([]),this._renderTexture.render(this._container),Promise.resolve())}_renderOverlayToRenderTexture(e){const t=this._sdk.getRenderer(),r=e.getDimensions();this._overlayRenderTexture||(this._overlayRenderTexture=new U.RenderTexture(t,r.x,r.y),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture));const{width:i,height:o}=this._options.image,n=j.resizeVectorToFill(new _V(i,o),r),{flipHorizontally:s,flipVertically:a}=this._options,l=s?-1:1,c=a?-1:1;this._overlaySprite.setWidth(n.x*l),this._overlaySprite.setHeight(n.y*c),this._overlaySprite.setPosition(r.x*(1-l)*.5,r.y*(1-c)*.5);const d=this._overlayRenderTexture.getBaseTexture();this._overlayRenderTexture.resizeTo(r),t.isOfType(De.WEBGL)&&(d.setGLUnit(OIe),t.updateTexture(d,!1)),this._overlayRenderTexture.render(this._overlayContainer)}dispose(){super.dispose(),this._overlaySprite&&this._overlaySprite.dispose(),this._overlayRenderTexture&&this._renderedOverlaySprite.dispose(),this._overlayFilter&&this._overlayFilter.dispose(),this._overlayTexture&&this._overlayTexture.dispose(),this._overlayRenderTexture&&this._overlayRenderTexture.dispose(),this._renderedOverlaySprite&&this._renderedOverlaySprite.dispose()}}sg.identifier="overlay";sg.BLEND_MODES=$x.BLEND_MODES;sg.prototype.availableOptions={identifier:{type:g.STRING},image:{type:g.IMAGE},blendMode:{type:g.NUMBER,default:$x.BLEND_MODES.MULTIPLY,available:Object.keys($x.BLEND_MODES).map(e=>$x.BLEND_MODES[e])},alpha:{type:g.NUMBER,default:1},flipHorizontally:{type:g.BOOLEAN,default:!1},flipVertically:{type:g.BOOLEAN,default:!1}};Te.Operations.OverlayOperation=sg;var xV=sg,wV=`/*
 * Based on evanw's glfx.js tilt shift shader:
 * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js
 * @license
 */

uniform sampler2D u_image;
uniform float u_radius;
uniform float u_blurRadius;
uniform float u_gradientRadius;
uniform vec2 u_position;
uniform vec2 u_delta;
uniform vec2 u_texSize;
varying vec2 v_texCoord;

const float blurSteps = 30.0;
const float EPSILON = 0.000000001;

float random(vec2 co)
{
    highp float a = 12.9898;
    highp float b = 78.233;
    highp float c = 43758.5453;
    highp float dt = dot(co.xy,vec2(a,b));
    highp float sn = mod(dt, 3.14);
    return fract(sin(sn) * c);
}

void main() {
    vec4 color = vec4(0.0);
    float total = 0.0;

    vec2 coord = v_texCoord * u_texSize;
    vec2 diff = coord - u_position;
    float dist = sqrt(diff.x * diff.x + diff.y * diff.y);

    float blurPercentage = smoothstep( 
      0.0, 1.0,
      (abs(dist) - u_radius) / u_gradientRadius
    );

    float radius = blurPercentage * u_blurRadius;
    float offset = random(gl_FragCoord.xy / u_texSize.xy);

    for (float t = -blurSteps; t <= blurSteps; t++) {
        float percent = (t + offset - 0.5) / blurSteps;
        float weight = 1.0 - abs(percent);
        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);

        color += _sample * weight;
        total += weight;
    }

    gl_FragColor = color / max(total, EPSILON);
}
`;const{Vector2:Fp}=te;class SV extends U.Filter{constructor(...e){super(...e);this._fragmentSource=wV,this._lastBlurRadius=null,this._lastGradientRadius=null,this._lastPosition=new Fp,this._blurFilter=new Li,this._blurredRenderTarget=new U.CanvasRenderTarget(100,100,1),this._maskRenderTarget=new U.CanvasRenderTarget(100,100,1)}_applyCanvas(e,t,r,i=!1){if(this._options.blurQuality==="low"){this._renderLQBlur(e,t,r,i);return}const o=t.getDimensions(),n=!r.getDimensions().equals(o),{blurRadius:s,position:a,texSize:l,gradientRadius:c}=this._options,d=t.getBaseTexture().isDirty()||this._lastBlurRadius!==s||n;if(d){const u=new Fp(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(u);const p={blurRadius:s,texSize:o},h=(f,w,T)=>Math.min(Math.max(f,w),T),b=(f,w,T)=>{const C=h((T-f)/(w-f),0,1);return C*C*(3-2*C)},y=(f,w)=>b(0,1,(Math.abs(l.clone().multiply(f,w).subtract(a).len())-this._options.radius)/(c*2))*s;this._blurFilter.set(p),this._blurFilter._applyCanvas(e,t,r,i,y),this._lastBlurRadius=s}}_renderLQBlur(e,t,r,i=!1){const o=t.getDimensions(),n=!this._blurredRenderTarget.getDimensions().equals(o);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions());const s=!this._lastPosition.equals(this._options.position)||this._lastGradientRadius!==this._options.gradientRadius||n,a=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||n;s&&(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius),a&&(this._blurImage(t,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,r)}_renderMask(){const e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),r=new Fp(e.width,e.height),i=this._maskRenderTarget.getPixelRatio(),o=this._options.position.clone().multiply(r);let{radius:n,gradientRadius:s}=this._options;n*=e.height,s*=e.height;const a=t.createRadialGradient(o.x,o.y,0,o.x,o.y,(n+s)*i);a.addColorStop(0,"#FFFFFF"),a.addColorStop(n/(n+s),"#FFFFFF"),a.addColorStop(1,"#000000"),t.fillStyle=a,t.fillRect(0,0,r.x,r.y)}_applyMask(e,t){const r=t.getContext(),i=e.getCanvas(),o=e.getContext(),n=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),a=o.getImageData(0,0,i.width,i.height),l=a.data,c=n.getImageData(0,0,i.width,i.height).data,d=s.getImageData(0,0,i.width,i.height).data;let u;for(let p=0;p<i.width*i.height*4;p+=4)u=d[p]/255,l[p]=u*l[p]+(1-u)*c[p],l[p+1]=u*l[p+1]+(1-u)*c[p+1],l[p+2]=u*l[p+2]+(1-u)*c[p+2];r.putImageData(a,0,0)}dispose(){super.dispose(),this._blurFilter.dispose(),this._blurredRenderTarget.dispose(),this._maskRenderTarget.dispose()}}SV.prototype.availableOptions={blurRadius:{type:g.NUMBER,default:30,uniformType:$.FLOAT},radius:{type:g.NUMBER,default:50,uniformType:$.FLOAT},gradientRadius:{type:g.NUMBER,default:25,uniformType:$.FLOAT},position:{type:g.VECTOR2,default:new Fp(.5,.5),uniformType:$.FLOAT2},delta:{type:g.VECTOR2,default:new Fp(1,1),uniformType:$.FLOAT2},texSize:{type:g.VECTOR2,default:new Fp(100,100),uniformType:$.FLOAT2}};var Yx=SV;const{Vector2:Y2}=te;class Xx extends Je{constructor(...e){super(...e);this._lastBlurRadius=this._options.blurRadius,this._lastGradientRadius=this._options.gradientRadius;const t={blurQuality:{type:g.STRING}};this._horizontalFilter=new Yx({},t),this._verticalFilter=new Yx({},t),this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]),this._horizontalFilter.setDelta(new Y2(.5,.5)),this._verticalFilter.setDelta(new Y2(-.5,.5)),this._filter=new Yx({},t)}rotate(e){const{position:t}=this._options;e===90?(t.flip(),t.x=1-t.x):e===-90&&(t.flip(),t.y=1-t.y),this.set({position:t})}flip(e){const{position:t}=this._options;switch(e){case"horizontal":t.x=1-t.x;break;case"vertical":t.y=1-t.y;break}this.set({position:t})}transform(e){const t={},r=this.getPosition();t.position=e.applyToRelativePoint(r),["radius","blurRadius","gradientRadius"].forEach(i=>{const o=this.getOption(i);t[i]=e.applyToRelativeSize(o)}),this.set(t,!1)}_renderWebGL(e){return this._renderBlur(e)}_renderCanvas(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}_renderBlur(e){const t=e.getDimensions(),r=t.min(),{position:i,blurRadius:o,radius:n,gradientRadius:s}=this._options,a={blurRadius:o*r,radius:n*r,gradientRadius:s*r,position:i.clone().multiply(t),texSize:t,blurQuality:"high"};return this._horizontalFilter.set(a),this._verticalFilter.set(a),this._renderTexture.render(this._container),Promise.resolve()}_renderLQCanvasBlur(e){const{blurRadius:t,radius:r,gradientRadius:i,position:o}=this._options,n=e.getDimensions();return this._filter.set({blurRadius:t,radius:r,gradientRadius:i,position:o,texSize:n,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),Promise.resolve()}dispose(){super.dispose(),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}hasChanges(){return!0}}Xx.identifier="radial-focus";Xx.prototype.availableOptions={position:{type:g.VECTOR2,default:new Y2(.5,.5)},radius:{type:g.NUMBER,default:.25},gradientRadius:{type:g.NUMBER,default:.125},blurRadius:{type:g.NUMBER,default:.025},highQualityCanvasBlur:{type:g.BOOLEAN,default:!1}};Te.Operations.RadialFocusOperation=Xx;var CV=Xx,TV=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform sampler2D u_filterImage;
uniform sampler2D u_maskImage;

void main() {
  vec4 color0 = texture2D(u_image, v_texCoord);
  vec4 color1 = texture2D(u_filterImage, v_texCoord);
  vec4 mask = texture2D(u_maskImage, v_texCoord);
  gl_FragColor = mix(color0, color1, mask);
}
`;class kV extends U.Filter{constructor(){super();this._fragmentSource=TV}_applyCanvas(e,t,r,i=!1){const o=t.getCanvas(),n=t.getContext(),s=r.getContext(),{maskCanvas:a,filterCanvas:l}=this._options,c=a.getContext("2d"),d=l.getContext("2d"),u=c.getImageData(0,0,o.width,o.height).data,p=n.getImageData(0,0,o.width,o.height),h=p.data,b=d.getImageData(0,0,o.width,o.height).data;let y;for(let f=0;f<o.width*o.height*4;f+=4)y=u[f]/255,h[f]=y*b[f]+(1-y)*h[f],h[f+1]=y*b[f+1]+(1-y)*h[f+1],h[f+2]=y*b[f+2]+(1-y)*h[f+2];s.putImageData(p,0,0)}}kV.prototype.availableOptions={maskImage:{type:g.NUMBER,default:1,uniformType:$.INT},maskCanvas:{type:g.OBJECT,default:null},filterImage:{type:g.NUMBER,default:2,uniformType:$.INT},filterCanvas:{type:g.OBJECT,default:null}};var EV=kV;const{Vector2:Jx}=te;class AIe extends Re{constructor(e,t){super(t);this._isDisposed=!1,this._operation=e,this._dirtiness={},this.id=j.getUUID(),this._renderTextures={},this._identitySprite=new U.Sprite,this._sprite=new U.Sprite,this._hitTestSprite=new U.Sprite,this._renderers=[]}applyScale(e){}applyRotation(e){const t=this._operation.getInputDimensions();let r=this.getRotation()*180/Math.PI;r+=e,this.setRotation(r*Math.PI/180);const i=(e+360)%360,o=i*Math.PI/180,n=Math.cos(o),s=Math.sin(o),a=this._options.position.clone().subtract(.5).multiply(t),l=new Jx(a.x*n-a.y*s,a.x*s+a.y*n).divide(t.clone().flip());this.setPosition(new Jx(.5,.5).add(l))}applyFlip(e){const t=this.getPosition().clone();switch(e){case"horizontal":t.x=1-this._options.position.x;break;case"vertical":t.y=1-this._options.position.y;break}this.setPosition(t)}applyTransform(e){const t={};t.rotation=e.applyToRotation(this.getRotation()),t.position=e.applyToRelativePoint(this.getPosition()),this._options.dimensions&&(t.dimensions=e.applyToDimensions(this.getDimensions())),this.set(t,!1)}getDisplayObject(){return this._sprite}getHitTestDisplayObject(){return this._sprite}_getTexture(){throw new Error("Sprite#_getTexture is abstract and not implemented in child class.")}_prepareRenderTexture(e){if(this._renderTexture)this._renderTexture.clear();else{const t=this._getTexture();this._renderTextureContainer=new U.Container,this._renderTextureSprite=new U.Sprite(t),this._renderTextureContainer.addChild(this._renderTextureSprite),this._renderTexture=this._getRenderTexture(e.getRenderer(),t.getDimensions())}}_rendersToRenderTexture(e){return e.getOptions().smoothDownscaling&&e.getRenderer().isOfType(De.WEBGL)}_optionEquals(e,t){return e==="type"?!0:super._optionEquals(e,t)}update(e,t){if(this._isDisposed)return;this._rendersToRenderTexture(e)&&(this._prepareRenderTexture(e),this._renderToRenderTexture(e)),this._updateSprite(t)}_updateSprite(e){const t=[this._sprite,this._hitTestSprite];t.forEach(r=>{if(!r.getTexture())return;r.setAnchor(this._options.anchor),r.setPosition(this._options.position.clone().multiply(e)),typeof this._options.alpha!="undefined"&&r.setAlpha(this._options.alpha);let{dimensions:i}=this._options;i&&(i=i.clone().multiply(this._operation.getSDK().getTextureScale()),r.setWidth(i.x),r.setHeight(i.y)),r.updateTransform();const o=r.getTexture().getFrame(),n=new Jx(o.width,o.height);r.setPivot(this._options.pivot.clone().multiply(n)),r.setRotation(this._options.rotation),r.updateTransform()})}_renderToRenderTexture(e){const t=this._getTexture().getDimensions(),r=this._getRenderTexture(e.getRenderer(),t),i=t.clone();if(this._options.smoothDownscaling&&(i.x=j.nextHighestPOT(i.x),i.y=j.nextHighestPOT(i.y)),this._renderTexture.resizeTo(i),this._renderTexture.render(this._renderTextureContainer),this._options.smoothDownscaling){const o=i.clone().subtract(t.x,t.y).divide(i),n=r.getUVs().getUVs();n[0].x=n[3].x=0,n[1].x=n[2].x=1-o.x,n[0].y=n[1].y=0,n[2].y=n[3].y=1-o.y}this._sprite.setTexture(r)}isDirtyForRenderer(e){return e.id in this._dirtiness||(this._dirtiness[e.id]=!0),this._dirtiness[e.id]}setDirtyForRenderer(e,t){this._renderers[t.id]=t,this._dirtiness[t.id]=e}setDirty(e){for(const t in this._dirtiness)this.setDirtyForRenderer(e,this._renderers[t])}_getRenderTexture(e,t=new Jx(100,100)){return this._renderTextures[e.id]||(this._renderTextures[e.id]=new U.RenderTexture(e,t.x,t.y,1)),this._renderTextures[e.id]}dispose(){this._isDisposed=!0;for(const e in this._renderTextures)this._renderTextures[e].dispose()}canBeDuplicated(){return!0}canBeDeleted(){return!0}canMaskCanvas(){return!1}canAdjustPadding(){return!1}canBeTakenToFront(){return!0}canBeFlippedHorizontally(){return!0}}var Os=AIe;const{Vector2:RIe}=te;class _d extends Re{constructor(...e){super(...e);this._lastOptions={},this._lastInputDimensions=new RIe(0,0),this._brush=null}getBrushImage(e){if(this._brush&&this.optionsEqual(this._lastOptions)&&e.equals(this._lastInputDimensions))return this._brush;const{image:t,size:r}=this._options;t.width=t.height=Math.ceil(r*e.min());const i=j.createCanvas();i.width=t.width,i.height=t.height;const o=i.getContext("2d");o.drawImage(t,0,0,i.width,i.height);const n=this._tintImageData(o.getImageData(0,0,i.width,i.height),i.width,i.height);return o.putImageData(n,0,0),this._lastOptions=this.serializeOptions(["size","color"]),this._brush=i,this._lastInputDimensions=e.clone(),i}_tintImageData(e){const{color:t}=this._options;for(let r=0;r<e.data.length;r+=4)e.data[r]+=(t.r*255-e.data[r])*t.a,e.data[r+1]+=(t.g*255-e.data[r+1])*t.a,e.data[r+2]+=(t.b*255-e.data[r+2])*t.a;return e}clone(){const e=this.constructor;return new e(this._options)}}_d.prototype.availableOptions={identifier:{type:g.STRING},image:{type:g.IMAGE},size:{type:g.NUMBER,default:.05},color:{type:g.COLOR,default:V.RED}};class Pp extends _d{getBrushImage(e){if(this._brush&&this.optionsEqual(this._lastOptions)&&e.equals(this._lastInputDimensions))return this._brush;let{size:t,hardness:r,color:i}=this._options;const o=j.createCanvas();o.width=o.height=Math.ceil(t*e.min());const n=o.getContext("2d");if(i=i.clone(),i.a=1,o.width===1)n.fillStyle=i.toRGBA(),n.fillRect(0,0,1,1);else{const s=n.createRadialGradient(o.width/2,o.height/2,Math.min(o.width/2-1,o.width/2*r),o.width/2,o.height/2,o.width/2);s.addColorStop(0,i.toRGBA());const a=i.clone();a.a=0,s.addColorStop(1,a.toRGBA()),n.fillStyle=s,n.fillRect(0,0,o.width,o.height)}return this._lastOptions=this.serializeOptions(["size","color","hardness"]),this._brush=o,this._lastInputDimensions=e.clone(),o}}Pp.identifier="imgly_brush_radial";Pp.prototype.availableOptions=v(v({},_d.prototype.availableOptions),{hardness:{type:g.NUMBER,default:1}});const{Vector2:FIe,CubicBezierCurve:PIe}=te;class MIe{constructor(e,t,r=3){this._path=e,this._drawnCanvases=[],this._position=t,this._smooth=r}getBezierCurve(e,t,r,i){if(!t)return null;let o,n;i?(o=(i.x-t.x)/this._smooth,n=(i.y-t.y)/this._smooth):(o=(r.x-t.x)/this._smooth,n=(r.y-t.y)/this._smooth);let s,a;e?(s=(r.x-e.x)/this._smooth,a=(r.y-e.y)/this._smooth):(s=(r.x-t.x)/this._smooth,a=(r.y-t.y)/this._smooth);const l=t.clone().add(s,a),c=r.clone().subtract(o,n);return new PIe(t,l,c,r)}renderToCanvas(e,t,r,i,o,n=1){if(this._drawnCanvases.indexOf(t)!==-1)return;const s=new FIe(t.width,t.height),a=t.getContext("2d"),l=this._position.clone().multiply(s),c=i?i.getPosition().clone().multiply(s):null,d=r?r.getPosition().clone().multiply(s):null,u=o?o.getPosition().clone().multiply(s):null,p=l.clone().subtract(c).len(),h=e.width/10,b=this.getBezierCurve(d,c,l,u);let y;if(!b)y=[l];else{b.calculateSegments(20);const f=b.getLength();y=b.arcLengthApproxSample(Math.ceil(f/h))}for(let f=0;f<y.length;f++){const w=y[f];let T=e.width*.5/(h*2);T*=1-n,T=1/(1+T),a.globalAlpha=T,a.drawImage(e,w.x-e.width/2,w.y-e.height/2,e.width,e.height)}a.globalAlpha=1,this._drawnCanvases.push(t)}setPosition(e){this._position=e}getPosition(){return this._position.clone()}setDirty(){this._drawnCanvases=[]}}var DV=MIe;class IV extends Re{constructor(e,t,r){super(t);this._operation=e,this._canvas=r||j.createCanvas(),this._context=this._canvas.getContext("2d")}serializeOption(e,t=!1){return e==="controlPoints"?this._options.controlPoints.map(r=>{const i=r.getPosition();return t?i.toObject():i.clone()}):super.serializeOption(e,t)}_optionEquals(e,t){if(e==="controlPoints"){const{controlPoints:r}=this._options;for(let i=0,o=r.length;i<o;i++)if(!r[i].getPosition().equals(t[i]))return!1;return!0}return super._optionEquals(e,t)}render(e){const{controlPoints:t,size:r}=this._options;if(t.length<2)return;const i=this.getBrush(),o=i&&i.getHardness?i.getHardness():1;j.ensureCanvasDimensions(this._canvas,e),(!this._brush||this._lastBrushSize!==r||!e.equals(this._brushInputDimensions))&&(this._brushInputDimensions=e.clone(),this._lastBrushSize=r);let n,s,a,l;for(let c=0;c<t.length;c++)n=t[c-2],s=t[c-1],a=t[c],l=t[c+1],a.renderToCanvas(this._options.brush.getBrushImage(e),this._canvas,n,s,l,o)}_createBrush(e){let{size:t,hardness:r,color:i}=this._options;const o=j.createCanvas();o.width=o.height=Math.ceil(t*e.min());const n=o.getContext("2d");if(i=i.clone(),i.a=1,o.width===1)n.fillStyle=i.toRGBA(),n.fillRect(0,0,1,1);else{const s=n.createRadialGradient(o.width/2,o.height/2,Math.min(o.width/2-1,o.width/2*r),o.width/2,o.height/2,o.width/2);s.addColorStop(0,i.toRGBA());const a=i.clone();a.a=0,s.addColorStop(1,a.toRGBA()),n.fillStyle=s,n.fillRect(0,0,o.width,o.height)}return o}addControlPoint(e){const t=new DV(this,e);this._options.controlPoints.push(t),this.emit("update",this)}getCanvas(){return this._canvas}setCanvas(e){this._canvas=e,this._context=e.getContext("2d")}setDirty(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._options.controlPoints.forEach(e=>{e.setDirty()})}forEachControlPoint(e){this._options.controlPoints.forEach(e)}renderToCanvas(e){const t=e.getContext("2d");t.save(),t.globalAlpha=this._options.brush.getColor().a,t.drawImage(this._canvas,0,0),t.restore()}getCanvasDimensions(){return this._canvasDimensions}}IV.prototype.availableOptions={id:{type:g.STRING,default:()=>j.getUUID()},brush:{type:g.OBJECT,required:!0},controlPoints:{type:g.ARRAY,default:[]},closed:{type:g.BOOLEAN,default:!1}};var ag=IV;const{Vector2:Zx}=te;class Mp extends Os{constructor(...e){super(...e);this._persistedPaths=[],this._outputCanvasDirty=!0,this._outputCanvas=j.createCanvas(),this._outputContext=this._outputCanvas.getContext("2d"),this._persistCanvas=j.createCanvas(),this._persistContext=this._persistCanvas.getContext("2d"),this._nextCanvas=j.createCanvas(),this._texture=U.Texture.fromCanvas(this._outputCanvas),this._sprite.setTexture(this._texture),this._onPathUpdate=this._onPathUpdate.bind(this)}applyFlip(e){this._options.paths.forEach(t=>{t.forEachControlPoint(r=>{const i=r.getPosition().clone();switch(e){case"horizontal":i.x=1-i.x;break;case"vertical":i.y=1-i.y;break}r.setPosition(i)}),t.setDirty(!0)}),this._reset()}applyRotation(e){this._options.paths.forEach(t=>{t.forEachControlPoint(r=>{const i=r.getPosition().clone();e===90?(i.flip(),i.x=1-i.x):e===-90&&(i.flip(),i.y=1-i.y),r.setPosition(i)}),t.setDirty(!0)}),this._reset()}applyTransform(e){let t=null;this._options.paths.forEach(r=>{r.forEachControlPoint(o=>{o.setPosition(e.applyToRelativePoint(o.getPosition()))});const i=r.getBrush();i!==t&&(i.setSize(e.applyToRelativeSize(i.getSize())),t=i),r.setDirty(!0)}),this._reset()}clearCanvas(){if(!this._outputCanvas)return;this._outputCanvasDirty=!0;const{width:e,height:t}=this._outputCanvas;this._outputContext.clearRect(0,0,e,t)}clearPersistCanvas(){if(!this._persistCanvas)return;const{width:e,height:t}=this._persistCanvas;this._persistContext.clearRect(0,0,e,t)}serializeOptions(e,t=!1){const r=super.serializeOptions(e,t);return e||(r.type="brush"),r}serializeOption(e,t=!1){return e==="paths"?this._options.paths.map(r=>r.serializeOptions(void 0,t)):super.serializeOption(e,t)}createPath(e){const t=new ag(this._operation,{brush:e},this._nextCanvas);return t.on("update",this._onPathUpdate),this._options.paths.push(t),this.setDirty(!0),t}_onPathUpdate(){this._operation.setDirty(!0),this.setDirty(!0)}_onPathPersist(e){e.renderToCanvas(this._persistCanvas),this._nextCanvas=e.getCanvas();const t=this._nextCanvas.getContext("2d");t.clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height),this._persistedPaths.push(e)}_getTexture(){return this._texture}setDirtyForRenderer(e,t,r=!1){super.setDirtyForRenderer(e,t,r),e&&r&&(this._persistedPaths=[],this.clearPersistCanvas(),this._options.paths.forEach(i=>{i.setDirty(!0)}))}setDirty(e,t=!1){for(const r in this._dirtiness)this.setDirtyForRenderer(e,this._renderers[r],t)}render(e){const t=this._operation.getSDK().getRenderer();if(!this.isDirtyForRenderer(t))return;j.ensureCanvasDimensions(this._outputCanvas,e),j.ensureCanvasDimensions(this._persistCanvas,e),this._options.paths.forEach(r=>{r.render(e),r.getClosed()&&this._persistedPaths.indexOf(r)===-1&&this._onPathPersist(r)}),this.clearCanvas(),this._outputContext.drawImage(this._persistCanvas,0,0),this._options.paths.forEach(r=>{r.getClosed()||r.renderToCanvas(this._outputCanvas)}),this.setDirtyForRenderer(!1,t)}update(e,t){t&&(j.ensureCanvasDimensions(this._outputCanvas,t),j.ensureCanvasDimensions(this._persistCanvas,t),this._texture.getBaseTexture().update()),this.render(t);const r=e.getRenderer();r.isOfType(De.WEBGL)&&r.updateTexture(this._texture.getBaseTexture()),super.update(e,t)}_reset(){this._persistedPaths=[],this._operation&&this._operation.setDirty(!0),this.setDirty(!0),this.clearCanvas(),this.clearPersistCanvas()}getCanvas(){return this._outputCanvas}_createRadialBrush(){return new Pp}_getTempCanvas(){return this._nextCanvas}dispose(){super.dispose(),this._texture&&this._texture.getBaseTexture().dispose()}}Mp.prototype.availableOptions={id:{type:g.STRING,default:()=>j.getUUID()},position:{type:g.VECTOR2,default:new Zx(0,0)},scale:{type:g.VECTOR2,default:new Zx(1,1)},anchor:{type:g.VECTOR2,default:new Zx(0,0)},pivot:{type:g.VECTOR2,default:new Zx(0,0)},rotation:{type:g.NUMBER,default:0},paths:{type:g.ARRAY,default:[],setter(e){return e=e.map(t=>{if(t instanceof ag)return t;const{brush:r,closed:i}=t,o=new ag(this._operation,{brush:r,closed:i},this._nextCanvas);return t.controlPoints.forEach(n=>{o.addControlPoint(n)}),o}),this._reset(),e}}};Mp.type="brush";Mp.Brush=_d;Mp.Path=ag;Mp.Brushes={RadialBrush:Pp};var xd=Mp;const{Vector2:OV}=te;class Qx extends Je{constructor(...e){super(...e);const t=this._sdk.getRenderer();this._lastBlurRadius=null,this._blurredRenderTexture=new U.RenderTexture(t,100,100,1),this._maskRenderTexture=new U.RenderTexture(t,100,100,1),this._brushSprite=new xd(this),this._brushSpriteContainer=new U.Container;const r=this._brushSprite.getDisplayObject();if(this._brushSpriteContainer.addChild(r),this._outputSprite=new U.Sprite,this._outputContainer=new U.Container,this._outputContainer.addChild(this._outputSprite),this._maskFilter=new EV,t.isOfType(De.WEBGL)){this._horizontalFilter=new Li,this._verticalFilter=new Li,this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]),this._horizontalFilter.setDelta(new OV(1,1)),this._verticalFilter.setDelta(new OV(-1,1));let i=this._maskRenderTexture.getBaseTexture();i.setGLUnit(this._maskFilter.getMaskImage()),t.updateTexture(i,!1),i=this._blurredRenderTexture.getBaseTexture(),i.setGLUnit(this._maskFilter.getFilterImage()),t.updateTexture(i,!1)}else t.isOfType(De.CANVAS)&&(this._blurFilter=new Li,this._sprite.setFilters([this._blurFilter]),this._maskFilter.setMaskCanvas(this._maskRenderTexture.getRenderTarget().getCanvas()),this._maskFilter.setFilterCanvas(this._blurredRenderTexture.getRenderTarget().getCanvas()));this._outputSprite.setFilters([this._maskFilter])}flip(e){this._brushSprite.applyFlip(e),this.setDirty(!0,!0),this._lastBlurRadius=null}rotate(e){this._brushSprite.applyRotation(e),this.setDirty(!0,!0),this._lastBlurRadius=null}transform(e,t){this._brushSprite.applyTransform(e,t),this.setDirty(!0,!0),this._lastBlurRadius=null}_render(e){return this._renderBlur(e),this._renderMask(e),this._outputSprite.setTexture(e),this._renderTexture.render(this._outputContainer),Promise.resolve()}_renderMask(e){const t=e.getDimensions(),r=this._maskRenderTexture.getDimensions();r.equals(t)||this._maskRenderTexture.resizeTo(t),this._brushSprite.update(this._sdk,t),this._maskRenderTexture.clear(V.BLACK),this._maskRenderTexture.render(this._brushSpriteContainer);const i=this._sdk.getRenderer();i.isOfType(De.WEBGL)&&i.updateTexture(this._maskRenderTexture.getBaseTexture(),!1)}_renderBlur(e){const t=e.getDimensions(),r=this._blurredRenderTexture.getDimensions();r.equals(t)||this._blurredRenderTexture.resizeTo(t);const{blurRadius:i}=this._options;if(this._lastBlurRadius!==i||!r.equals(t)){const n=this._sdk.getRenderer();let s;if(n.isOfType(De.WEBGL)){const a=t.min();s={blurRadius:i*a,texSize:t},this._horizontalFilter.set(s),this._verticalFilter.set(s)}else n.isOfType(De.CANVAS)&&(s={blurRadius:i},this._blurFilter.set(s));this._blurredRenderTexture.render(this._container),this._lastBlurRadius=i}const o=this._sdk.getRenderer();o.isOfType(De.WEBGL)&&o.updateTexture(this._blurredRenderTexture.getBaseTexture(),!1)}getBrush(){return this._brushSprite}createPath(e,t=1){const r=new xd.Brushes.RadialBrush({size:e,hardness:t,color:V.WHITE}),i=this._brushSprite.createPath(r);return this._options.paths.push(i),this.setDirty(!0),i}setDirtyForRenderer(e,t,r){super.setDirtyForRenderer(e,t,r),this._brushSprite.setDirtyForRenderer(e,t,r)}dispose(){super.dispose();const e=this._sdk.getRenderer();e.isOfType(De.WEBGL)?(this._verticalFilter.dispose(),this._horizontalFilter.dispose()):this._blurFilter.dispose(),this._brushSprite.dispose(),this._maskFilter.dispose(),this._blurredRenderTexture.dispose(),this._maskRenderTexture.dispose()}hasChanges(){return!0}}Qx.identifier="selective-blur";Qx.prototype.availableOptions={blurRadius:{type:g.NUMBER,default:.05},paths:{type:g.ARRAY,default:[],setter(e){return this._brushSprite&&this._brushSprite.setPaths(e),e}}};Te.Operations.SelectiveBlurOperation=Qx;var AV=Qx;const{Vector2:wd,ColorMatrix:e0}=te;class X2 extends Os{constructor(...e){super(...e);const{image:t}=this._options,r=t.src||t.filePath||t.toDataUrl&&t.toDataURL();this._isSVG=r&&(!!r.match(/\w+\.svg(?=\?|$)/i)||r.match(/data:image\/svg/i)),this._isSVG&&(this._canvas=j.createCanvas(),this._context=this._canvas.getContext("2d"),this._options.smoothDownscaling=!1),t&&this._onImageUpdate(),this._tintFilter=new U.Filters.TintFilter,this._adjustmentsFilter=new wx,this._lastRenderedDimensions=wd.NULL,this._lastRenderedInputDimensions=wd.NULL,this._onOptionsChange=this._onOptionsChange.bind(this),this._options.adjustments.on("update",this._onOptionsChange)}applyScale(e){this.setDimensions(this.getDimensions().multiply(e))}serializeOptions(e,t=!1){const r=super.serializeOptions(e,t);return e||(r.type="sticker"),r}_rendersToRenderTexture(e){const t=this._options.smoothDownscaling&&!this._isSVG&&e.getRenderer().isOfType(De.WEBGL);return t||this._hasAdjustments()||this._options.tintMode!=="none"}_getTexture(){return this._inputTexture}update(e,t){const{dimensions:r,image:i}=this._options;r.equals(wd.NULL)&&r.set(i.width,i.height),this._sprite.setSmoothDownscaling(this._isSVG?!1:this.getSmoothDownscaling());const o=!this._lastRenderedInputDimensions.equals(t)||!this._lastRenderedDimensions.equals(r)||this._lastRenderedImage!==i;if(o&&this._isSVG&&e.getRenderer().isOfType(De.WEBGL)){i.width=Math.round(r.x),i.height=Math.round(r.y);const s=4096,a=i.width/i.height;i.width>s&&(i.width=s,i.height=Math.round(i.width/a)),i.height>s&&(i.height=s,i.width=Math.round(i.height*a)),this._canvas.width=i.width,this._canvas.height=i.height,this._context.clearRect(0,0,i.width,i.height),this._context.drawImage(i,0,0,i.width,i.height),this._inputTexture.getBaseTexture().update()}this._rendersToRenderTexture(e)&&this._prepareRenderTexture(e);const n=[];if(this._rendersToRenderTexture(e)){if(this._hasAdjustments()){n.push(this._adjustmentsFilter);const{adjustments:s}=this._options,a=new e0;a.multiply(e0.createBrightnessMatrix(s.getBrightness())),a.multiply(e0.createSaturationMatrix(s.getSaturation())),a.multiply(e0.createContrastMatrix(s.getContrast())),this._adjustmentsFilter.set({colorMatrix:a})}this._options.tintMode&&this._options.tintMode!=="none"&&(n.push(this._tintFilter),this._tintFilter.set({mode:U.Filters.TintFilter.MODES[this._options.tintMode.toUpperCase()],color:this._options.tintColor}),this._sprite.getTexture()&&this._sprite.getTexture()._baseTexture&&this._sprite.getTexture()._baseTexture.setDirty(!0)),this._renderTextureSprite.setFilters(n)}this._rendersToRenderTexture(e)?this._renderToRenderTexture(e):this._sprite.setTexture(this._inputTexture),this._updateSprite(t),this._applyFlip(),this._lastRenderedDimensions.copy(r),this._lastRenderedInputDimensions.copy(t),this._lastRenderedImage=i}_applyFlip(){const e=this._sprite.getScale(),{flipHorizontally:t,flipVertically:r}=this._options;(t&&e.x>0||!t&&e.x<0)&&(e.x*=-1),(r&&e.y>0||!r&&e.y<0)&&(e.y*=-1),this._sprite.setScale(e)}applyFlip(e){super.applyFlip(e);const t={rotation:this._options.rotation},r=t.rotation/Math.PI*180,i=r*-1;t.rotation=i*Math.PI/180;switch(e){case"horizontal":t.flipHorizontally=!this._options.flipHorizontally,this.set(t);break;case"vertical":t.flipVertically=!this._options.flipVertically,this.set(t);break}}_hasAdjustments(){const{adjustments:e}=this._options;return e.getBrightness()!==0||e.getSaturation()!==1||e.getContrast()!==1}_onImageUpdate(){let e=this._options.image;const t=this._operation.getSDK().getRenderer();this._isSVG&&t.isOfType(De.WEBGL)&&(e=this._canvas),this._inputTexture&&(this._inputTexture.dispose(),this._inputTexture=null),this._inputTexture=U.Texture.fromImage(e),this._identitySprite.setTexture(this._inputTexture),this._sprite.setTexture(this._inputTexture),this._renderTexture&&(this._renderTextureSprite.setTexture(this._inputTexture),this._renderTexture.resizeTo(this._inputTexture.getDimensions())),this.setDirty(!0)}scalesUniformly(){return this._options.resizeMode==="keepAspect"}setOption(e,t,r=!0){super.setOption(e,t,r),e==="image"&&this._identitySprite&&this._onImageUpdate()}_onOptionsChange(){const e=this._dirtiness;for(const t in e)e[t]=!0}dispose(){super.dispose(),this._inputTexture&&(this._inputTexture.dispose(),this._inputTexture=null),this._tintFilter.dispose(),this._adjustmentsFilter.dispose(),this._options.adjustments.off("updated",this._onOptionsChange)}}X2.prototype.availableOptions={id:{type:g.STRING,default:()=>j.getUUID()},identifier:{type:g.STRING,default:""},image:{type:g.IMAGE,required:!0},position:{type:g.VECTOR2,default:wd.NULL},dimensions:{type:g.VECTOR2,default:wd.NULL},anchor:{type:g.VECTOR2,default:new wd(0,0)},pivot:{type:g.VECTOR2,default:new wd(.5,.5)},rotation:{type:g.NUMBER,default:0},flipHorizontally:{type:g.BOOLEAN,default:!1},flipVertically:{type:g.BOOLEAN,default:!1},smoothDownscaling:{type:g.BOOLEAN,default:!1},tintColor:{type:g.COLOR,default:V.WHITE},tintMode:{type:g.STRING,default:"none",available:["none","solid","colorized"]},resizeMode:{type:g.STRING,default:"keepAspect",available:["keepAspect","unrestricted"]},alpha:{type:g.NUMBER,default:1},adjustments:{type:g.CONFIGURABLE,structure:{brightness:{type:g.NUMBER,default:0},saturation:{type:g.NUMBER,default:1},contrast:{type:g.NUMBER,default:1}}}};X2.type="sticker";var t0=X2;class Be{constructor(e){this._seed=e===void 0?Be.TimeSeed():e}seed(e){this._seed=e===void 0?Be.TimeSeed():e}next(){let e=this._seed|0;const t=e/Be.SEED_DIVIDER|0,r=e%Be.SEED_DIVIDER|0;return e=Be.SEED_LOW_MULTIPLY*r-Be.SEED_HIGH_MULTIPLY*t,e<=0&&(e+=Be.MAX),e===-1&&(e=Be.MAX-1),this._seed=e,e}nextInRange(e,t){return t===void 0&&(t=e,e=0),e+this.next()%(t-e+1)}nextBool(e=1,t=1){return this.nextInRange(e+t-1)>=e}static TimeSeed(){return Date.now()}pickNext(e){return Array.isArray(e)?e[this.next()%e.length]:null}}re(Be,"MAX",2147483647),re(Be,"SEED_DIVIDER",127773),re(Be,"SEED_LOW_MULTIPLY",16807),re(Be,"SEED_HIGH_MULTIPLY",2836);const{Rectangle:BIe}=te;class $t{constructor(e=0,t=0){this.width=e,this.height=t}set(e,t){this.width=e,this.height=t}aspect(){return this.width/this.height}rectangle(e,t){return new BIe(e,t,this.width,this.height)}clone(){return new $t(this.width,this.height)}scale(e,t){return t===void 0&&(t=e),this.width*=e,this.height*=t,this}copy(e){return this.width=e.width,this.height=e.height,this}fitInWidthWithOther(e,t=new $t){return this.copy($t.fitTwoInWidth(e,this,t)[0]),this}static fitTwoInWidth(e,t,r){const i=t.width*r.height+t.height*r.width,o=r.height*e/i,n=t.width*o,s=t.height*o;return[new $t(n,s),new $t(e-n,s)]}}const qV=_(r0());class GV extends Re{loadImages(e){return se(this,null,function*(){return qV.default(e,t=>se(this,null,function*(){return this.addImage(t.path,t.fullPath,t.image)}))})}addImage(e,t,r,i="anonymous"){const o=this.getImages();return r?(o[e]={fullPath:t,image:r},Promise.resolve({fullPath:t,image:r})):new Promise((n,s)=>{r=new Bi,r.onload=()=>{o[e]={fullPath:t,image:r},n({fullPath:t,image:r})},r.crossOrigin=j.getCrossOriginValue(i),r.onerror=s,r.src=t})}getImage(e){const t=this.getImages(),r=t[e];return r?r.image:null}getVariation(e){return this.getFonts()[e]}addFont(e,t){const r=this.getFonts();return r[e]=t,t}}GV.prototype.availableOptions={images:{type:g.OBJECT,default:{}},fonts:{type:g.OBJECT,default:{}}};const lt=new GV,WIe=(e,t,r,i)=>{const o=r*(i*4)+t*4,n={r:e[o],g:e[o+1],b:e[o+2],a:e[o+3]};return n},HIe=e=>e.a<=254,WV=(e,t,r)=>{let i=!0;for(let o=0;o<r;o++){const n=WIe(e,o,t,r);if(!HIe(n)){i=!1;break}}return i},VIe=(e,t,r,i,o=!1)=>{let n=0;for(let s=i+1;s<r;s++)if(!WV(e,s,t))n=s-i+1;else if(o)break;return n},KIe=(e,t,r,i,o=!1)=>{let n=0;for(let s=i-1;s>=0;s--)if(!WV(e,s,t))n=i-s;else if(o)break;return n},$Ie=(e,t,r,i,o)=>{e.beginPath(),e.moveTo(t,r),e.lineTo(i,o),e.stroke()},YIe=(e,t,r,i,o="red")=>{e.save(),e.strokeStyle=o,$Ie(e,r,t,i,t),e.restore()},XIe=(e,t,r,i,o,n="blue")=>{e.save(),e.strokeStyle=n,e.strokeRect(t,r,i,o),e.restore()};class Ui extends Re{constructor(e){super(e);const t=lt.getVariation(this.getFontIdentifier());t||ie.warn(`TextDesignFont: Unable to find font '${this._fontIdentifier}'`),this.set({fontVariation:t}),this._metrics=null,this._canvas=j.createCanvas(),this._context=this._canvas.getContext("2d"),this._isDirty=!0}_onOptionsChange(){this._isDirty=!0}setOption(e,t,r=!0,i=!1){super.setOption(e,t,r,i),e==="fontIdentifier"&&!i&&this.updateFontVariation()}updateFontVariation(){const e=lt.getVariation(this.getFontIdentifier());return e||ie.warn(`TextDesignFont: Unable to find font '${this._fontIdentifier}'`),this.setFontVariation(e),e}setOptions(e={}){this._options=v(v({},this._options),e),this._isDirty=!0}_applyTextOptions(e=this._context,t={}){const{fontSize:r,fontVariation:i,lineHeight:o,textColor:n,alignment:s}=v(v({},this._options),t),{fontStyle:a,fontWeight:l,fontFamily:c}=i.serializeOptions();e.font=`${a} ${l} ${r}px / ${o} ${c}`,e.fillStyle=n,e.textBaseline="alphabetic",e.textAlign=s||"left"}getTextMetrics(){return(!this._metrics||this._isDirty)&&this._calculateTextMetrics(),v({},this._metrics)}getSizeValue(){return(!this._metrics||this._isDirty)&&this._calculateTextMetrics(),new $t(this._metrics.width,this._metrics.height)}fitWidth(e){const t=this.getFontVariation();if(!t){ie.warn("TextDesignFont#fitText: missing font variation");return}this._applyTextOptions(this._context,{fontSize:50});const r=this._context.measureText(this.getText()).width,i=e/r,o=Math.floor(i*50);return this.setFontSize(o),this._calculateTextMetrics(),this.getTextMetrics()}fitHeight(e){const t=this.getFontVariation();if(!t){ie.warn("TextDesignFont#fitText: missing font variation");return}const r=this._calculateTextMetrics({fontSize:50}).height,i=e/r,o=Math.floor(i*50);return this.setFontSize(o),this._calculateTextMetrics(),this.getTextMetrics()}_calculateTextMetrics(e={}){const t=this._canvas,r=this._context,i=v(v({},this._options),e),o=this.getText();this._applyTextOptions(r,i);const n=Math.ceil(r.measureText(o).width),s=Math.floor(n+i.fontSize*2),a=Math.floor(i.fontSize*3);t.width=s,t.height=a;const l=Math.floor(i.fontSize),c=Math.floor(a*(3/5));this._applyTextOptions(r,i),r.fillText(o,l,c);const d=r.getImageData(0,0,t.width,t.height).data,u=KIe(d,s,a,c,this._options.excludeAccents),p=VIe(d,s,a,c,this._options.excludeAccents),h=n,b=u+p;return this._metrics={width:h,height:b,ascender:u,descender:p},this._isDirty=!1,v({},this._metrics)}draw(e=this._context,t=0,r=0,i,o=!1){e.save(),(!this._metrics||this._isDirty)&&this._calculateTextMetrics(),this._applyTextOptions(e,i),e.fillText(this.getText(),t,r+this._metrics.ascender),o&&(XIe(e,t,r,this._metrics.width,this._metrics.height),YIe(e,r+this._metrics.ascender,t,t+this._metrics.width)),e.restore()}}Ui.prototype.availableOptions={text:{type:g.STRING,default:""},fontIdentifier:{type:g.STRING,default:"imgly_font_open_sans_bold"},fontVariation:{type:g.OBJECT,default:null},lineHeight:{type:g.NUMBER,default:1},fontSize:{type:g.NUMBER,default:22},textColor:{type:g.STRING,default:"black"},strokeStyle:{type:g.STRING,default:"black"},outlineWidth:{type:g.NUMBER,default:0},textBaseline:{type:g.STRING,default:"alphabetic"},excludeAccents:{type:g.BOOLEAN,default:!1}};class ji extends Re{}ji.prototype.availableOptions={text:{type:g.STRING,default:""},frame:{type:g.OBJECT,default:null},font:{type:g.OBJECT,default:null}};class Mn extends Re{}Mn.prototype.availableOptions={tintColor:{type:g.COLOR,default:V.BLACK},textColor:{type:g.COLOR,default:V.BLACK},alignment:{type:g.STRING,default:"left",available:["left","center","right"]},lineSpacing:{type:g.NUMBER,default:1},fontIdentifier:{type:g.STRING,default:"imgly_font_open_sans_bold"}};const{Rectangle:JIe}=te;class go extends Re{constructor(e){super(e);this.setSize(new $t(this.getWidth(),0)),this.serverImageSmoothingFix=!1}_getFrame(){const e=this.getSize();return new JIe(0,0,e.width,e.height)}_getTextFrame(){return this._getFrame()}_getTextFrameForElement(e){return e.getFrame().clone()}_calculateLayoutElements(){ie.warn("TextDesignRow is an abstract class.")}_getLayoutElements(){return this._options.elements.length<=0&&this.layout(),this.getElements()}_fontSize(e){return ie.warn("TextDesignRow#_fontSize not implemented. @TODO: Is it necessary?"),0}layout(){return this.setElements(this._calculateLayoutElements()),this}textFrame(e,t){return e.getFrame().clone()}willRender(e){}didRender(e){}render(e){e.save(),this._getLayoutElements().forEach(t=>{const{text:r,frame:i,font:o}=t.serializeOptions(),n=this.getAttributes();o.draw(e,i.x,i.y,{textColor:n.getTextColor().toRGBA(),alignment:n.getAlignment()})}),e.restore()}}go.prototype.availableOptions={words:{type:g.OBJECT,default:null},width:{type:g.NUMBER,default:100},attributes:{type:g.CONFIGURABLE,default:new Mn},shearingAngle:{type:g.NUMBER,default:0},elements:{type:g.ARRAY,default:[]},size:{type:g.OBJECT,default:null}};const{Rectangle:ZIe}=te;class bo extends go{_calculateLayoutElements(){if(this.getWords().size()<=0)return[];const{orientation:e,width:t,size:r,relativeRowOffset:i,attributes:o}=this.serializeOptions(),{fontIdentifier:n}=o,s=this.getWords().joined(3),a=e===bo.Orientations.Left?[s[0],s[1],s[2]]:[s[1],s[2],s[0]],l=j.Array.range(0,2).map(Y=>new Ui({text:a[Y],fontIdentifier:n,fontSize:60})),c=l.map(Y=>Y.getSizeValue()),d=c[0].width>c[1].width?0:1,u=(d+1)%2;l[u].fitWidth(c[d].width),c[u]=l[u].getSizeValue();const p=(c[u].height+c[d].height)/(1-i),h=new Ui({text:a[2],fontIdentifier:n});h.fitHeight(p);const b=h.getSizeValue().width,y=c[d].width,f=t/(b+y),w=f*b,T=f*y,C=f*p,F=i*C;r.set(t,C);const k=j.Array.range(0,3).map(Y=>new Ui({text:a[Y],fontIdentifier:n}));k[0].fitWidth(T),k[1].fitWidth(T),k[2].fitWidth(w);const E=e===bo.Orientations.Left?0:w,W=e===bo.Orientations.Left?T:0,K=[E,E,W],D=[0,k[0].getSizeValue().height+F,0],B=k.map((Y,de)=>new ZIe(K[de],D[de],Y.getSizeValue().width,Y.getSizeValue().height));return k.map((Y,de)=>new ji({text:a[de],font:k[de],frame:B[de]}))}}re(bo,"Orientations",{Right:"RIGHT",Left:"LEFT"});bo.prototype.availableOptions=v(v({},go.prototype.availableOptions),{orientation:{type:g.STRING,default:bo.Orientations.Left,available:[bo.Orientations.Right,bo.Orientations.Left]},relativeRowOffset:{type:g.NUMBER,default:.05}});const{Rectangle:QIe}=te;class Le{constructor(e=0,t=0,r=0,i=0){this.top=e,this.left=t,this.bottom=r,this.right=i}multiply(e){this.top*=e,this.left*=e,this.bottom*=e,this.right*=e}toObject(){return v({},this)}equals(e,t=0){return Math.abs(e.top-this.top)<=t&&Math.abs(e.left-this.left)<=t&&Math.abs(e.bottom-this.bottom)<=t&&Math.abs(e.right-this.right)<=t}scale(e=1,t){return t===void 0&&(t=e),this.top*=t,this.bottom*=t,this.left*=e,this.right*=e,this}clone(){return new Le(this.top,this.left,this.bottom,this.right)}applyToRectangle(e){return new QIe(e.x+this.left,e.y+this.top,e.width-this.left-this.right,e.height-this.top-this.bottom)}static get ZERO(){return new Le(0,0,0,0)}}class Yt extends go{_calculateLayoutElements(){const{attributes:e,imageInsets:t,size:r,width:i}=this.serializeOptions(),o=this.getWords().joined(1)[0]||"",{fontIdentifier:n}=e,s=new Ui({text:o,fontIdentifier:n});s.fitWidth(this._getTextFrame().width);const a=s.getTextMetrics().height+t.top+t.bottom;r.height=a;const l=this._getTextFrame(),c=new ji({text:o,frame:l,font:s});return[c]}}Yt.prototype.availableOptions=v(v({},go.prototype.availableOptions),{imageInsets:{type:g.OBJECT,default:new Le}});const{Rectangle:qa,Vector2:ti}=te,Z2=(e,t,r,i)=>{e.drawImage(t,r.x,r.y,r.width,r.height,i.x,i.y,i.width,i.height)},Xo=(e,t,r,i="source-over",o=!1)=>{e.save(),e.fillStyle=r.toRGBA(),e.globalCompositeOperation=i,e.fillRect(t.x,t.y,t.width,t.height),o&&(e.strokeStyle=r.toRGBA(),e.strokeWith=1,e.strokeRect(t.x,t.y,t.width,t.height)),e.restore()},i0=(e,t,r,i,o="source-over",n=!1)=>{e.save(),e.fillStyle=i.toRGBA(),e.globalCompositeOperation=o,r=Math.min(Math.max(r,0),Math.min(t.height,t.width)*.5);const s=t.x,a=t.x+t.width,l=t.y,c=t.y+t.height;e.beginPath(),e.moveTo(s+r,l),e.arcTo(a,l,a,c,r),e.arcTo(a,c,s,c,r),e.arcTo(s,c,s,l,r),e.arcTo(s,l,a,l,r),e.closePath(),e.fill(),n&&e.stroke(),e.restore()},Bp=(e,t,r,i=4)=>{e.save(),e.strokeStyle=r.toRGBA(),e.lineWidth=i,e.strokeRect(t.x,t.y,t.width,t.height),e.restore()},Q2=(e,t,r,i="source-over")=>{e.save();const o=t.height/2,n=t.y+o;let s=t.x+o;const a=t.x+t.width;for(e.fillStyle=r.toRGBA(),e.globalCompositeOperation=i;s<a;)e.beginPath(),e.arc(s,n,o,0,2*Math.PI),e.fill(),s+=o*4;e.restore()},HV=(e,t)=>{const r=t.applyToRectangle(e),{x:i,y:o,width:n,height:s}=e,a=[qa.FromDiagonalPoints(new ti(0,0),new ti(r.x,r.y)),qa.FromDiagonalPoints(new ti(0,r.y+r.height),new ti(r.x,s)),qa.FromDiagonalPoints(new ti(r.x+r.width,r.y+r.height),new ti(n,s)),qa.FromDiagonalPoints(new ti(r.x+r.width,0),new ti(n,r.y))].map(c=>c.translate(i,o)),l=[qa.FromDiagonalPoints(new ti(r.x,0),new ti(r.x+r.width,r.y)),qa.FromDiagonalPoints(new ti(0,r.y),new ti(r.x,r.y+r.height)),qa.FromDiagonalPoints(new ti(r.x,r.y+r.height),new ti(r.x+r.width,s)),qa.FromDiagonalPoints(new ti(r.x+r.width,r.y),new ti(n,r.y+r.height))].map(c=>c.translate(i,o));return{corners:a,bars:l,center:r}},VV=(e,t,r,i)=>{const o=t.naturalWidth||t.width,n=t.naturalHeight||t.height,s=HV(new qa(0,0,o,n),i),a=HV(r,i);Z2(e,t,s.center,a.center),j.Array.zip(s.corners,a.corners).forEach(([l,c])=>Z2(e,t,l,c)),j.Array.zip(s.bars,a.bars).forEach(([l,c])=>Z2(e,t,l,c))},Ga=(e,t,r,i,o="source-atop")=>{if(e.save(),i&&(e.globalAlpha=i.a),e.drawImage(t,r.x,r.y,r.width,r.height),i&&(e.globalAlpha=1),i){const n=i.clone();n.a=1,Xo(e,r,n,o)}e.restore()};class sc extends Yt{_getTextColor(){return this.getAutoAdjustTextColor()&&!this.getIsMasked()?this.getBackgroundColor().equals(V.WHITE)?V.BLACK:V.WHITE:this.getAttributes().getTextColor().clone()}_getTextFrame(){return this.getImageInsets().applyToRectangle(this._getFrame())}_getTextFrameForElement(e){const t=super._getTextFrameForElement(e),r=this.getImageInsets();return(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&(t.y-=r.top),t}willRender(e){const t=this.getAttributes();t.setTextColor(this._getTextColor());const r=this.getImage();if(r){const i=this.getCapInsets(),o=this._getFrame();i&&!i.equals(Le.ZERO)?VV(e,r,o,i):e.drawImage(r,o.x,o.y,o.width,o.height),Xo(e,o,this.getBackgroundColor(),"source-atop",!0)}(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&r&&(e.save(),e.globalCompositeOperation="destination-out")}didRender(e){super.didRender(e),(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&e.restore()}}sc.prototype.availableOptions=v(v({},Yt.prototype.availableOptions),{image:{type:g.IMAGE,default:null},capInsets:{type:g.OBJECT,default:new Le},backgroundColor:{type:g.COLOR,default:V.WHITE},autoAdjustTextColor:{type:g.BOOLEAN,default:!0},isMasked:{type:g.BOOLEAN,default:!0},isUsedInInvertedLayout:{type:g.BOOLEAN,default:!1}});class Bn extends Re{insetsForWidth(e){return this.getRelativeInsets().clone().scale(e)}static get Small(){return new Bn({imagePath:"text-design/images/imgly_text_design_asset_banderole_small.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new Le(.05,.2,.05,.2)})}static get Rectangle(){return new Bn({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new Le(.05,.05,.05,.05),needsImageSmoothingFix:!0})}static get Celebrate1(){return new Bn({imagePath:"text-design/images/imgly_text_design_asset_celebrate_01.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new Le(.05,.2,.05,.2)})}static get Celebrate2(){return new Bn({imagePath:"text-design/images/imgly_text_design_asset_celebrate_02.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new Le(.05,.2,.05,.2)})}}Bn.prototype.availableOptions={image:{type:g.IMAGE,default:null},imagePath:{type:g.STRING,default:null},relativeInsets:{type:g.OBJECT,default:new Le},fontIdentifier:{type:g.STRING,default:"imgly_font_open_sans_bold"},needsImageSmoothingFix:{type:g.BOOLEAN,default:!1}};class eE extends Re{getSize(){const e=this.getRows(),t=this.getWidth(),r=e.length-1;let i=e.reduce((n,s)=>n+s.getSize().height,0);i+=(r+1)*this.getRelativeLineSpacing()*t;const o=this.getRelativeInsets().clone().scale(t);return i+=o.top+o.bottom,new $t(t,i)}}eE.prototype.availableOptions={text:{type:g.STRING,default:""},lines:{type:g.ARRAY,default:[]},relativeInsets:{type:g.OBJECT,default:new Le},relativeLineSpacing:{type:g.NUMBER,default:0},rows:{type:g.OBJECT,default:[]},background:{type:g.OBJECT,default:null},width:{type:g.NUMBER,default:0}};class yi{constructor(e){this.words=[],e&&this.splitIntoWords(e)}splitIntoWords(e){return this.words=e.match(/\S+/g)||[],[...this.words]}get(){return[...this.words]}getWord(e){return this.words[e]}set(e){return this.words=[...e],this}slice(e,t){return yi.fromWords(this.words.slice(e,t))}getLowerCase(){return this.words.map(e=>e.toLowerCase())}getUpperCase(){return this.words.map(e=>e.toUpperCase())}size(){return this.words.length}countNumberOfCharacters(){return this.words.reduce((e,t)=>e+t.length,0)}joined(e){const t=this.size(),r=Math.floor(t/e),i=t%e;let o=0,n=0;return j.Array.range(0,e).map(s=>{o=n;const a=r+(s<i?1:0);return n=Math.min(o+a,t),j.Array.range(o,n).reduce((l,c)=>l+(c===o?"":" ")+this.words[c],"")})}static fromWords(e){const t=new yi;return t.words=[...e],t}}const eOe=10,tOe=4,rOe=.4;class Ar extends Re{constructor(e){super(e);this._relativeInsets=new Le,this._background=null,this._fontRandomizer=new Be(0),this._lineNumberRandomizer=new Be(0),this._wordsPerLineRandomizer=new Be(0),this._seedPool=[this._fontRandomizer,this._lineNumberRandomizer,this._wordsPerLineRandomizer]}seed(e){this._seedPool.forEach(t=>t.seed(e))}getImagePaths(){return[]}onImagesLoaded(){}getMaximumNumberOfTries(){return eOe}getMinLineCountOfRandom(){return tOe}getRandomAdditionalLinePercentage(){return rOe}_fontForRow(e,t){return this._fontRandomizer.pickNext(this.getFontIdentifiers())}_modifiedText(e){return e.replace(`
`," ").replace("	"," ")}_minimumNumberOfLines(e){return Math.ceil(Math.sqrt(e.size()))}_maximumNumberOfLines(e){return e.size()}_calculatedNumberOfLines(e){let t=this._minimumNumberOfLines(e);if(e.size()>=this.getMinLineCountOfRandom()){const r=Math.floor(Math.max(1,t*this.getRandomAdditionalLinePercentage()));t+=this._lineNumberRandomizer.nextInRange(0,r)}return Math.min(t,this._maximumNumberOfLines(e))}_randomizedNumberOfWordsPerLine(e,t){if(e>t)return ie.warn("TextDesign#_randomizedNumberOfWordsPerLine: Invalid number of lines"),t;const r=j.Array.repeat(1,e);return j.Array.range(e,t).forEach(i=>{const o=this._wordsPerLineRandomizer.nextInRange(0,e-1);r[o]+=1}),r}_textLines(e){const t=new yi(e),r=this._calculatedNumberOfLines(t),i=this._randomizedNumberOfWordsPerLine(r,t.size());return i.reduce((o,n)=>({index:o.index+n,lines:[...o.lines,t.slice(o.index,Math.min(o.index+n,t.size()))]}),{index:0,lines:[]}).lines}_validTextLines(e){let t=this._textLines(e),r=0;do if(r=j.Array.findIndex(t,i=>i.countNumberOfCharacters()<3),r>=0){const i=t[r-1],o=t[r+1],n=i?i.countNumberOfCharacters():Number.MAX_SAFE_INTEGER,s=o?o.countNumberOfCharacters():Number.MAX_SAFE_INTEGER;n<s&&i?(i.words=[...i.words,...t[r].words],t=[...t.slice(0,r),...t.slice(r+1)]):o&&(o.words=[...t[r].words,...o.words],t=[...t.slice(0,r),...t.slice(r+1)])}while(r>-1&&t.length>1);return t}_modifiedLines(e){return e}_getBackground(){return this._background}generateLayoutData(e,t){const r=this._modifiedText(e),i=this._modifiedLines(this._validTextLines(r)),o=t*(1-this._relativeInsets.left-this._relativeInsets.right),n=this._layoutRows(i,o);return new eE({text:r,relativeInsets:this._relativeInsets.clone(),relativeLineSpacing:this.getRelativeLineSpacing(),background:this._background||this._getBackground(),lines:i,rows:n,width:t})}_layoutRows(e,t){return e.map((r,i)=>this._randomLayoutRow(r,i,t,new Mn({fontIdentifier:this._fontForRow(i,r)})).layout())}_randomLayoutRow(e,t,r,i){return new Yt({words:e,width:r,attributes:i})}}re(Ar,"defaultFontIdentifiers",[]),re(Ar,"identifier","textdesign");Ar.prototype.availableOptions={fontIdentifiers:{type:g.ARRAY,default:[]},relativeLineSpacing:{type:g.NUMBER,default:0}};class Wr extends Ar{constructor(...e){super(...e);re(this,"getImagePaths",()=>{const e=this.getBanderoles();return e&&e.map(t=>t.getImagePath())||[]});re(this,"onImagesLoaded",()=>{const e=this.getBanderoles();e&&e.forEach(t=>{const r=lt.getImage(t.getImagePath());if(!r){ie.warn(`TextDesignBlocks#onImagesLoaded: Image not found '${t.getImagePath()}'`);return}t.setImage(r)})});this._rowTypeLessThan3WordsRandomizer=new Be(0),this._rowTypeMoreThan3WordsRandomizer=new Be(0),this._banderolesRandomizer=new Be(0),this._seedPool=[...this._seedPool,this._rowTypeLessThan3WordsRandomizer,this._rowTypeMoreThan3WordsRandomizer,this._banderolesRandomizer]}_modifiedText(e){return super._modifiedText(e).toUpperCase()}generateLayoutData(e,t){return this._options.hasMaskedText=!1,super.generateLayoutData(e,t)}_randomLayoutRow(e,t,r,i){if(e.size()<3){const n=this._rowTypeLessThan3WordsRandomizer.nextInRange(0,2)===0;return this._layoutRow(e,r,i,n)}const o=this._rowTypeMoreThan3WordsRandomizer.nextInRange(0,3);switch(o){case 0:return new bo({words:e,width:r,attributes:i,orientation:bo.Orientations.Left});case 1:return new bo({words:e,width:r,attributes:i,orientation:bo.Orientations.Right});case 2:return this._layoutRow(e,r,i,!0);case 3:return new Yt({words:e,width:r,attributes:i});default:throw new Error(`TextDesignBlocks#_randomLayoutRow: Invalid randomValue generated: ${o}.`)}}_layoutRow(e,t,r,i){if(this.getHasMaskedText()&&(i=!1),i){this.setHasMaskedText(!0);const o=this._banderolesRandomizer.pickNext(this.getBanderoles()),n=new sc({words:e,width:t,attributes:new Mn({alignment:"left",fontIdentifier:o.getFontIdentifier()}),image:o.getImage(),imageInsets:o.insetsForWidth(t),capInsets:null,backgroundColor:V.WHITE});return o.getNeedsImageSmoothingFix()&&(n.serverImageSmoothingFix=!0),n}return new Yt({words:e,width:t,attributes:r})}}re(Wr,"defaultFontIdentifiers",["imgly_font_campton_bold"]),re(Wr,"identifier","imgly_text_design_blocks"),re(Wr,"defaultBanderoles",[Bn.Rectangle,Bn.Small]);Wr.prototype.availableOptions=v(v({},Ar.prototype.availableOptions),{fontIdentifiers:{type:g.ARRAY,default:Wr.defaultFontIdentifiers},relativeLineSpacing:{type:g.NUMBER,default:.025/3},hasMaskedText:{type:g.BOOLEAN,default:!1},banderoles:{type:g.ARRAY,default:Wr.defaultBanderoles}});class Lp extends Wr{constructor(...e){super(...e);this._exclusiveFont=null}generateLayoutData(e,t){return this._exclusiveFont=this._fontRandomizer.pickNext(this.getFontIdentifiers()),super.generateLayoutData(e,t)}_fontForRow(e,t){return this._exclusiveFont||super._fontForRow(e,t)}_layoutRow(e,t,r,i){return new Yt({words:e,width:t,attributes:r})}}re(Lp,"defaultFontIdentifiers",["imgly_font_ostrich_sans_heavy","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_black"]),re(Lp,"identifier","imgly_text_design_blocks_condensed");Lp.prototype.availableOptions=v(v({},Wr.prototype.availableOptions),{fontIdentifiers:{type:g.ARRAY,default:Lp.defaultFontIdentifiers}});const{Rectangle:lg}=te;class gr extends go{constructor(...e){super(...e);this.setSize(new $t(this.getWidth(),this.getHeight()))}_calculateLayoutElements(){return[new ji({frame:this._getTextFrame()})]}render(e){const t=this._getFrame(),r=this.getType(),i=this.getAttributes(),o=i.getTextColor(),n=t.height/3;let s=new lg(t.x,t.y,t.width,n),a=new lg(t.x,t.y+n*2,t.width,n);switch(r){case gr.FormType.Rect:Xo(e,t,o);break;case gr.FormType.DoubleRect:Xo(e,s,o),Xo(e,a,o);break;case gr.FormType.DoubleRectFirstPunctuated:Q2(e,s,o),Xo(e,a,o);break;case gr.FormType.DoubleRectSecondPunctuated:Xo(e,s,o),Q2(e,a,o);break;case gr.FormType.LongLine:{const l=t.height/2,c=new lg(t.x,t.y,t.width,l);i0(e,c,c.height*.5,o);break}case gr.FormType.LongAndShortLine:{const l=t.height*.2,c=l*.75;s=new lg(t.x,t.y+l,t.width,l);const d=t.x+t.width*.25,u=t.y+t.height-c;a=new lg(d,u,t.width*.5,c),i0(e,s,s.height*.5,o),i0(e,a,a.height*.5,o);break}default:break}}}re(gr,"FormType",{Rect:"RECT",DoubleRect:"DOUBLE_RECT",DoubleRectFirstPunctuated:"DOUBLE_RECT_FIRST_PUNCTUATED",DoubleRectSecondPunctuated:"DOUBLE_RECT_SECOND_PUNCTUATED",LongLine:"LONG_LINE",LongAndShortLine:"LONG_AND_SHORT_LINE"});gr.prototype.availableOptions=v(v({},go.prototype.availableOptions),{height:{type:g.NUMBER,default:100},type:{type:g.STRING,default:gr.FormType.Rect,available:j.values(gr.FormType)}});class Wa extends Wr{_layoutRow(e,t,r,i){return new Yt({words:e,width:t,attributes:r})}_layoutRows(e,t){const r=super._layoutRows(e,t),i=.032*t,o=.08*t,n=new gr({width:t,height:i,type:gr.FormType.LongLine,shearingAngle:0}).layout(),s=new gr({width:t,height:o,type:gr.FormType.LongAndShortLine,shearingAngle:0}).layout();return[n,...r,s]}}re(Wa,"defaultFontIdentifiers",["imgly_font_sue_ellen_francisco"]),re(Wa,"identifier","imgly_text_design_blocks_light");Wa.prototype.availableOptions=v(v({},Wr.prototype.availableOptions),{fontIdentifiers:{type:g.ARRAY,default:Wa.defaultFontIdentifiers}});class zp extends Wa{_layoutRows(e,t){return e.map((r,i)=>this._randomLayoutRow(r,i,t,new Mn({fontIdentifier:this._fontForRow(i,r)})).layout())}_layoutRow(e,t,r,i){return new Yt({words:e,width:t,attributes:r})}}re(zp,"defaultFontIdentifiers",["imgly_font_sue_ellen_francisco"]),re(zp,"identifier","imgly_text_design_blocks_light-v3_1_0");zp.prototype.availableOptions=v(v({},Wa.prototype.availableOptions),{fontIdentifiers:{type:g.ARRAY,default:zp.defaultFontIdentifiers}});const{Rectangle:iOe}=te;class Ln extends Yt{getImageSize(){const e=this.getLeftImage(),t=this.getRightImage(),r=this.getWords(),i=this.getAttributes(),o=i.getFontIdentifier(),n=e?new $t(e.width,e.height):new $t,s=r.joined(1)[0];if(!s)return n;const a=new Ui({text:s,fontIdentifier:o,fontSize:50}),l=a.getSizeValue(),c=t?2:1;n.scale(c,1);const d=n.clone().fitInWidthWithOther(this._getFrame().width,l);return d.scale(1/c,1),d}_getTextFrame(){const e=super._getTextFrame().clone(),t=this.getImageSize(),r=this.getRightImage(),i=this.getImagePosition();return r?(e.x+=t.width,e.width-=2*t.width):i===Ln.ImagePosition.Left&&(e.x+=t.width),e}_calculateLayoutElements(){const e=super._calculateLayoutElements(),t=this._getFrame(),r=this.getRightImage(),i=this.getImageSize(),o=this.getImagePosition(),n=this._getTextFrame(),s=this.getAttributes(),a=s.getFontIdentifier(),l=new Ui({text:"stickerClock",fontIdentifier:a});l.fitWidth(this._getTextFrame().width);const c=new iOe().set(t.x,t.y,i.width,i.height);if(!r&&o===Ln.ImagePosition.Right&&(c.x+=n.width),e.push(new ji({text:"stickerClock",frame:c,font:l})),r){const d=e[0];if(d){const u=c.clone();u.translate(d.getFrame().width+u.width,0),e.push(new ji({text:"stickerClock",frame:u,font:l}))}}return e}render(e){const t=this._getLayoutElements(),r=this.getAttributes(),i=r.getTextColor(),o=this.getLeftImage(),n=this.getRightImage(),s=t[0],a=t[1],{font:l}=s.serializeOptions(),c=this._getTextFrameForElement(s);if(l.draw(e,c.x,c.y,{textColor:r.getTextColor().toRGBA(),alignment:r.getAlignment()}),o){const d=a.getFrame();e.drawImage(o,d.x,d.y,d.width,d.height),Xo(e,d,i,"source-atop")}if(t.length>2){const d=t[2],u=d.getFrame().clone();e.drawImage(n,u.x,u.y,u.width,u.height),Xo(e,u,i,"source-atop")}}}re(Ln,"ImagePosition",{Left:"LEFT",right:"RIGHT"});Ln.prototype.availableOptions=v(v({},Yt.prototype.availableOptions),{leftImage:{type:g.IMAGE,default:null},rightImage:{type:g.IMAGE,default:null},imagePosition:{type:g.STRING,default:Ln.ImagePosition.Left,available:[Ln.ImagePosition.Left,Ln.ImagePosition.Right]}});class vi extends Wr{_fontForRow(e,t){const r=this.getFontIdentifiers();return r[e%r.length]}_minimumNumberOfLines(e){return Math.max(Math.floor(super._minimumNumberOfLines(e)*.7),1)}_maximumNumberOfLines(e){return Math.max(Math.floor(e.countNumberOfCharacters()/5),1)}_randomLayoutRow(e,t,r,i){return this._createSingleRow(vi.RowType.Single,e,r,i)}_createSingleRow(e,t,r,i){const o=i.getFontIdentifier(),n=o==="imgly_font_amberlight"||o==="imgly_font_handycheera_regular"?new yi().set(t.getLowerCase()):t;switch(e){case vi.RowType.Single:return new Yt({words:n,width:r,attributes:i});case vi.RowType.SingleImage:return new Ln({words:n,width:r,attributes:i});default:return ie.warn(`TextDesignCelebrate#_createSingleRow: Invalid row type '${e}'`),null}}}re(vi,"defaultFontIdentifiers",["imgly_font_handycheera_regular","imgly_font_rasa_regular"]),re(vi,"defaultBanderoles",[Bn.Celebrate1,Bn.Celebrate2]),re(vi,"identifier","imgly_text_design_celebrate"),re(vi,"RowType",{Single:"SINGLE",SingleImage:"SINGLE_IMAGE"});vi.prototype.availableOptions=v(v({},Wr.prototype.availableOptions),{relativeLineSpacing:{type:g.NUMBER,default:.01875},fontIdentifiers:{type:g.ARRAY,default:vi.defaultFontIdentifiers},banderoles:{type:g.ARRAY,default:vi.defaultBanderoles}});class Rr extends go{constructor(...e){super(...e);this.setSize(new $t(this.getWidth(),this.getHeight()))}_getImageFrame(){const e=this._getTextFrame().clone(),t=this.getImage();if(this.getDrawingModeAspectFit()&&t){const r=Math.min(e.width/t.width,e.height/t.height),i=t.width*r,o=t.height*r;e.x+=(e.width-i)/2,e.y+=(e.height-o)/2,e.width=i,e.height=o}return e}_calculateLayoutElements(){return[new ji({text:"",frame:this._getImageFrame(),font:new Ui})]}render(e){const t=this.getImage(),r=this._getImageFrame(),i=this.getAttributes(),o=i.getTextColor();Ga(e,t,r,o)}}re(Rr,"RowImages",{decorative1:"text-design/images/imgly_text_design_asset_decorative_01.png",decorative2:"text-design/images/imgly_text_design_asset_decorative_02.png",decorative3:"text-design/images/imgly_text_design_asset_decorative_05.png",decorative4:"text-design/images/imgly_text_design_asset_decorative_06.png",celebrate1:"text-design/images/imgly_text_design_asset_celebrate_03.png",celebrate2:"text-design/images/imgly_text_design_asset_celebrate_04.png",celebrate3:"text-design/images/imgly_text_design_asset_celebrate_05.png"});Rr.prototype.availableOptions=v(v({},go.prototype.availableOptions),{words:{type:g.OBJECT,default:new yi},height:{type:g.NUMBER,default:0},image:{type:g.IMAGE,default:null},imagePath:{type:g.STRING,default:Rr.RowImages.decorative1},drawingModeAspectFit:{type:g.BOOLEAN,default:!1},attributes:{type:g.CONFIGURABLE,default:new Mn}});class Np extends vi{constructor(...e){super(...e);re(this,"getImagePaths",()=>{const e=this.getBanderoles();return[...e&&e.map(t=>t.getImagePath())||[],...this._celebrateTypes]});re(this,"onImagesLoaded",()=>{const e=this.getBanderoles();e&&e.forEach(t=>{const r=lt.getImage(t.getImagePath());if(!r){ie.warn(`TextDesignBlocks#onImagesLoaded: Image not found '${t.getImagePath()}'`);return}t.setImage(r)})});this._celebrateTypes=[Rr.RowImages.celebrate1,Rr.RowImages.celebrate2,Rr.RowImages.celebrate3],this._exclusiveFont=null,this._typeRandomizer=new Be(0),this._useMaskedRandomizer=new Be(0),this._seedPool.push(this._typeRandomizer),this._seedPool.push(this._useMaskedRandomizer)}_fontForRow(e,t){const r=this.getFontIdentifiers();return r[e%(r.length-1)]}_layoutRows(e,t){const r=this._typeRandomizer.pickNext(this._celebrateTypes),i=lt.getImage(r);i||ie.warn(`TextDesignCelebrateSimple#_layoutRows: Image not fount '${r}'`);const o=new Rr({width:t,height:t*.5,drawingModeAspectFit:!0,image:i}).layout(),n=super._layoutRows(e,t);return[o,...n]}_randomLayoutRow(e,t,r,i){const o=e.countNumberOfCharacters(),n=13,s=4;o<s&&i.setFontIdentifier("imgly_font_rasa_regular");const a=this._useMaskedRandomizer.nextBool(2,1);return o<n&&a&&!this.getHasMaskedText()?this._layoutRow(e,r,i,!0):super._randomLayoutRow(e,t,r,i)}}re(Np,"identifier","imgly_text_design_celebrate_simple"),re(Np,"defaultFontIdentifiers",["imgly_font_amberlight","imgly_font_rasa_regular","imgly_font_rasa_500"]);Np.prototype.availableOptions=v(v({},vi.prototype.availableOptions),{fontIdentifiers:{type:g.ARRAY,default:Np.defaultFontIdentifiers}});class Up extends Re{render(e,t,r,i,o){ie.warn("TextDesignBackground#render: Abstract class")}}Up.prototype.availableOptions={};const{Rectangle:o0}=te;class Ha extends Up{getImagePaths(){const{topImagePath:e,bottomImagePath:t,leftImagePath:r,rightImagePath:i}=this._options;return[e,t,r,i].filter(o=>o!=="")}render(e,t,r,i,o){const n=r.clone().scale(t.width),s=t.rectangle(0,0),a=lt.getImage(this.getTopImagePath()),l=lt.getImage(this.getLeftImagePath()),c=lt.getImage(this.getRightImagePath()),d=lt.getImage(this.getBottomImagePath());if(a){const u=a.width/a.height,p=n.top*this.getTopImageFillRate(),h=p*u,b=s.width/2,y=b-h/2,f=new o0(y,0,h,p);Ga(e,a,f,i)}if(d){const u=d.width/d.height,p=n.bottom*this.getBottomImageFillRate(),h=p*u,b=s.width/2,y=b-h/2,f=new o0(y,s.height-p,h,p);Ga(e,d,f,i)}if(l){const u=l.width/l.height,p=n.left*this.getLeftImageFillRate(),h=p/u,b=s.height/2,y=b-h/2,f=new o0(0,y,p,h);Ga(e,l,f,i)}if(c){const u=c.width/c.height,p=n.right*this.getRightImageFillRate(),h=p/u,b=s.height/2,y=b-h/2,f=new o0(s.width-p,y,p,h);Ga(e,c,f,i)}}}Ha.prototype.availableOptions={topImagePath:{type:g.STRING,default:""},leftImagePath:{type:g.STRING,default:""},bottomImagePath:{type:g.STRING,default:""},rightImagePath:{type:g.STRING,default:""},topImageFillRate:{type:g.NUMBER,default:1},leftImageFillRate:{type:g.NUMBER,default:1},bottomImageFillRate:{type:g.NUMBER,default:1},rightImageFillRate:{type:g.NUMBER,default:1}};Ha.Backgrounds=[new Ha({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_3.png",topImageFillRate:.8,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.8}),new Ha({leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_2.png",leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6}),new Ha({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_2.png",topImageFillRate:.6,bottomImageFillRate:.6}),new Ha({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_2.png",topImageFillRate:.1,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6})];class Va extends Ar{constructor(...e){super(...e);this._relativeInsets=new Le(.1,.1,.1,.1),this._alreadyContainsARowWithScriptFont=!1,this._backgroundsRandomizer=new Be(0),this._seedPool.push(this._backgroundsRandomizer)}getImagePaths(){return j.Array.flatten(Ha.Backgrounds.map(e=>e.getImagePaths()))}_getBackground(){return this._backgroundsRandomizer.pickNext(Ha.Backgrounds)}generateLayoutData(e,t){return this._alreadyContainsARowWithScriptFont=!1,this._background=this._getBackground(),super.generateLayoutData(e,t)}_modifiedText(e){return super._modifiedText(e).toUpperCase()}_fontForRow(e,t){let r=super._fontForRow(e,t);return r==="imgly_font_petit_formal_script"&&(this._alreadyContainsARowWithScriptFont&&(r="imgly_font_bungee_inline"),this._alreadyContainsARowWithScriptFont=!0),r}_randomLayoutRow(e,t,r,i){const o=i.getFontIdentifier()==="imgly_font_petit_formal_script";return new Yt({words:o?new yi().set(e.getLowerCase()):e,width:r,attributes:i})}}re(Va,"identifier","imgly_text_design_equal_width"),re(Va,"defaultFontIdentifiers",["imgly_font_ultra","imgly_font_bungee_inline","imgly_font_petit_formal_script"]);Va.prototype.availableOptions=v(v({},Ar.prototype.availableOptions),{fontIdentifiers:{type:g.ARRAY,default:Va.defaultFontIdentifiers},relativeLineSpacing:{type:g.NUMBER,default:.025}});class jp extends Va{constructor(...e){super(...e);this._relativeInsets=new Le}_getBackground(){return null}}re(jp,"defaultFontIdentifiers",["imgly_font_ultra"]),re(jp,"identifier","imgly_text_design_equal_width_fat");jp.prototype.availableOptions=v(v({},Va.prototype.availableOptions),{fontIdentifiers:{type:g.ARRAY,default:jp.defaultFontIdentifiers}});class Fe extends Re{insetsForWidth(e){const t=this.getRelativeInsets().clone();return t.scale(e)}}Fe.prototype.availableOptions={imagePath:{type:g.STRING,default:""},minimumHeightRatio:{type:g.NUMBER,default:0},sizeToFitContent:{type:g.BOOLEAN,default:!0},capInsets:{type:g.OBJECT,default:new Le},relativeInsets:{type:g.OBJECT,default:new Le}};Fe.Box=new Fe({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",relativeInsets:new Le(.1,.1,.1,.1)});Fe.Badge1=new Fe({imagePath:"text-design/images/imgly_text_design_asset_badge1.png",relativeInsets:new Le(.3,.18,.2,.18)});Fe.Badge2=new Fe({imagePath:"text-design/images/imgly_text_design_asset_badge2.png",relativeInsets:new Le(.3,.18,.2,.18)});Fe.Badge3=new Fe({imagePath:"text-design/images/imgly_text_design_asset_badge3.png",relativeInsets:new Le(.3,.18,.2,.18)});Fe.Badge4=new Fe({imagePath:"text-design/images/imgly_text_design_asset_badge4.png",relativeInsets:new Le(.3,.18,.2,.18)});Fe.SpeechBubble1=new Fe({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small2.png",relativeInsets:new Le(.04,.07,.12,.07),capInsets:new Le(19*3,57*3,41*3,17*3)});Fe.SpeechBubble2=new Fe({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble3.png",relativeInsets:new Le(.04,.07,.12,.07),capInsets:new Le(2*3,35*3,29*3,5*3)});Fe.SpeechBubble3=new Fe({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small.png",relativeInsets:new Le(.165664675,.2,.165664675,.2),minimumHeightRatio:.7});Fe.SpeechBubble4=new Fe({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble4.png",relativeInsets:new Le(.124800224,.2,.291200523,.2),minimumHeightRatio:.7});Fe.SpeechBubble5=new Fe({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble5.png",relativeInsets:new Le(.114892823,.27,.15984926,.27)});Fe.Watercolor1=new Fe({imagePath:"text-design/images/imgly_text_design_asset_watercolor_01.png",minimumHeightRatio:.7,relativeInsets:new Le(.2,.25,.2,.25)});Fe.Watercolor2=new Fe({imagePath:"text-design/images/imgly_text_design_asset_watercolor_02.png",minimumHeightRatio:.7,relativeInsets:new Le(.08,.25,.3,.25)});Fe.Watercolor3=new Fe({imagePath:"text-design/images/imgly_text_design_asset_watercolor_03.png",minimumHeightRatio:.7,relativeInsets:new Le(.1,.2,.15,.2)});class oOe{constructor(e){this._context=e,this._lastFontStyle={}}getLines(){let e=[],t=[];const r=this._lines.length;for(let i=0;i<r;i++){const o=this._lines[i],n=this._buildWords(o),s=n.length;for(let a=0;a<s;a++){const l=n[a],c=t.concat(l).join("").replace(/\s+$/i,""),d=this._getWidth(c);if(d>this._maxWidth){t.length>0&&(e.push(t.join("")),t=[l]);const u=l.replace(/\s+$/i,"");if(this._getWidth(u)>this._maxWidth){const p=this._splitWord(l);e=e.concat(p.lines),p.rest&&(t=[p.rest])}}else t.push(l)}e.push(t.join("")),t=[]}return e.map(i=>this._trimLine(i,this._context.textAlign))}_trimLine(e,t){return e}_buildWords(e){const t=[];let r="";const i=e.length;for(let o=0;o<i;o++){const n=e[o];r+=n,(n===" "||n==="-"||o===i-1)&&(t.push(r),r="")}return t}_splitWord(e){const t={lines:[],rest:null},r=e.length;let i=[];for(let o=0;o<r;o++){const n=e[o];this._getWidth(i.concat(n).join(""))>this._maxWidth?(i.length>0&&t.lines.push(i.join("")),i=[n]):i.push(n),o===r-1&&i.length>0&&(t.rest=i.join(""))}return t}_fontStyleChanged(){return this._context.font!==this._lastFontStyle?(this._lastFontStyle=this._context.font,!0):!1}_getWidth(e){return this._context.measureText(e).width}setText(e){this._text=e,this._lines=e.split(`
`)}setMaxWidth(e){this._maxWidth=e}}var n0=oOe;const{Vector2:tE}=te;class nOe{constructor(e,t){this._text=e,this._operation=t,this._textOptions={},this.rotation=0,this._createCanvas(),this._createTexture()}_createCanvas(){this._canvas=j.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new n0(this._context),this._finalCanvas=j.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d")}_createTexture(){this._texture=U.Texture.fromCanvas(this._canvas),this._finalTexture=U.Texture.fromCanvas(this._finalCanvas)}_applyTextOptions(e,t){t.font=`${this._text.getFontStyle()} ${this._text.getFontWeight()} ${e.fontSize}px "${this._text.getFontFamily()}"`,this._text.getTextMetrics()?t.textBaseline="alphabetic":t.textBaseline="top",t.textAlign=this._text.getAlignment(),t.fillStyle=this._text.getColor().toRGBA(),t.strokeStyle=this._text.getOutlineColor().toRGBA();const r=this._text.getOutlineWidth();r>0&&(t.lineWidth=r)}_buildOutputLines(e){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(e),this._textSplitter.getLines().map(t=>t.replace(/\s+$/i,""))}_renderTextLine(e,t,r){const i=this._text.getAlignment(),o=new tE(0,t);switch(i){case"left":o.x=r;break;case"center":o.x=this._canvas.width/2;break;case"right":o.x=this._canvas.width-r;break}this._context.save(),this._context.translate(o.x,o.y),this._context.fillText(e,0,0),this._context.restore();const n=this._text.getOutlineWidth();n>0&&(this._context.miterLimit=2,this._context.strokeText(e,o.x,o.y))}update(e,t){const r=this.calculateFontStyles(e,t);if(r){const{dimensions:i,lines:o}=this._calculateText(e,r,t);this._renderText(e,i,o,r,t),this._updateFinalTexture()}}_updateFinalTexture(){const{width:e,height:t}=this._canvas,{rotation:r}=this,i=Math.cos(r),o=Math.sin(r),n=new tE(Math.abs(e*i)+Math.abs(t*o),Math.abs(e*o)+Math.abs(t*i));this._finalCanvas.width=n.x,this._finalCanvas.height=n.y,this._finalContext.save(),this._finalContext.translate(this._finalCanvas.width/2,this._finalCanvas.height/2),this._finalContext.rotate(r),this._finalContext.drawImage(this._canvas,-e/2,-t/2),this._finalContext.restore()}_renderText(e,t,r,i,o){this._canvas.width=t.x,this._canvas.height=t.y,this._text.getMaxHeight()&&(this._canvas.height=Math.min(this._text.getMaxHeight()*o.y,this._canvas.height)),this._context=this._canvas.getContext("2d"),this._context.fillStyle=this._text.getBackgroundColor().toRGBA(),this._context.fillRect(0,0,t.x,t.y),this._applyTextOptions(i,this._context);const n=this._padding(o),s=this._text.getTextMetrics(),a=this._text.getFontSize()*o.y,l=1/s.unitsPerEm*a,c=s.ascender*l;for(let d=0;d<r.length;d++){const u=r[d];this._renderTextLine(u,i.topPadding+i.lineHeight*d+n+c,n)}}calculateFontStyles(e,t){const r=this._text.getFontFamily(),i=this._text.getFontSize()*t.y,o=this._text.getAbsoluteTextHeight(t),n=o*this._text.getLineHeight(),s=o*(this._text.getLineHeight()-1)/2,a={fontFamily:r,fontSize:i,lineHeight:n,topPadding:s};return(this._textOptions.fontFamily!==r||this._textOptions.fontSize!==i||this._textOptions.lineHeight!==n)&&(this._textOptions=a),a}_calculateText(e,t,r){const i=this._text.getMaxWidth()*r.x;this._applyTextOptions(t,this._context);const o=new tE;let n=this._text.getText().split(`
`);typeof i!="undefined"&&(o.x=i,n=this._buildOutputLines(i));for(let l=0;l<n.length;l++){const c=n[l];o.x=Math.max(o.x,this._context.measureText(c).width)}const{lineHeight:s}=t;o.y=n.length*s;const a=this._padding(r);return o.y+=a*2,o.x+=a*2,{dimensions:o,lines:n}}_padding(e){const t=this._text.getAbsoluteTextHeight(e),r=.2;return t*r}getTexture(){return this._texture}getFinalTexture(){return this._finalTexture}getDimensions(e,t){const r=this.calculateFontStyles(e,t),{dimensions:i}=this._calculateText(e,r,t);return i}dispose(){this._measurementElement&&document.body.removeChild(this._measurementElement),this._texture&&(this._texture.dispose(),this._texture=null),this._finalTexture&&(this._finalTexture.dispose(),this._finalTexture=null)}}var KV=nOe;const{Vector2:$V}=te;class s0 extends Re{constructor(e){super(e);this._textOptions={},this._createCanvas()}_createCanvas(){this._canvas=j.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new n0(this._context),this._finalCanvas=j.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d"),this.updateFontVariation()}setOption(e,t,r=!0,i=!1){super.setOption(e,t,r,i),e==="fontIdentifier"&&!i&&this.updateFontVariation()}updateFontVariation(){const e=lt.getVariation(this.getFontIdentifier());return e||ie.warn(`TextDesignFont: Unable to find font '${this._fontIdentifier}'`),this.setFontVariation(e),e}_applyTextOptions(e={},t=this._context){const{fontSize:r,fontVariation:i,lineHeight:o,textColor:n,alignment:s}=v(v({},this._options),e),{fontStyle:a,fontWeight:l,fontFamily:c}=i.serializeOptions();t.font=`${a} ${l} ${r}px "${c}"`,t.fillStyle=n,t.textBaseline="top",t.textAlign=s||"left"}_buildOutputLines(e){return this._textSplitter.setText(this.getText()),this._textSplitter.setMaxWidth(e),this._textSplitter.getLines()}_renderTextLine(e,t){const r=this.getAlignment(),i=new $V(0,t);switch(r){case"center":i.x=this._canvas.width/2;break;case"right":i.x=this._canvas.width;break}this._context.fillText(e,i.x,i.y)}update(){const e=this.calculateFontStyles();if(e){const{dimensions:t,lines:r}=this._calculateText(e);this._dimensions=t,this._renderText(t,r,e)}}draw(e,t=0,r=0){this.update(),e.drawImage(this._canvas,t,r,this._dimensions.x,this._dimensions.y)}_renderText(e,t,r){this._canvas.width=e.x,this._canvas.height=e.y,this._context=this._canvas.getContext("2d"),this._applyTextOptions(r,this._context);for(let i=0;i<t.length;i++){const o=t[i];this._renderTextLine(o,r.topPadding+r.lineHeight*i)}}getFontFamily(){const e=this.getFontVariation();return e.getFontFamily()}calculateFontStyles(){const e=this.getFontFamily(),t=this.getFontSize(),r=this.getAbsoluteTextHeight(),i=r*this.getLineHeight(),o=r*(this.getLineHeight()-1)/2,n={fontFamily:e,fontSize:t,textHeight:r,lineHeight:i,topPadding:o};return this._textOptions=v({},n),n}getTextMetrics(){const e=this.getFontVariation();return e.getTextMetrics()}getAbsoluteTextHeight(){const e=this.getFontSize(),t=this.getTextMetrics();if(t){const r=1/t.unitsPerEm*e,i=t.ascender*r,o=t.descender*r;return i+Math.abs(o)}return e*this.getLineHeight()*1.1}_calculateText(e){this._applyTextOptions(e,this._context);const t=new $V;let r=this.getText().split(`
`),i;if(typeof i!="undefined")t.x=i,r=this._buildOutputLines(i);else for(let n=0;n<r.length;n++){const s=r[n];t.x=Math.max(t.x,this._context.measureText(s).width)}const{lineHeight:o}=e;return t.y=r.length*o,{dimensions:t,lines:r}}getDimensions(){const e=this.calculateFontStyles(),{dimensions:t}=this._calculateText(e);return t}fitMaxHeight(){this.update();const e=this.getDimensions(),t=this.getText().split(`
`),r=this.getMaxHeight()/e.y}fitMaxWidth(){const e=this.getDimensions().x,t=this.getMaxWidth()/e;this.setFontSize(this.getFontSize()*t),this._textOptions.fontSize=this.getFontSize()}fitInFrame(e){this.setMaxWidth(e.width),this.setMaxHeight(e.height),this.fitMaxWidth(),this.fitMaxHeight()}getSize(){const e=this.getDimensions();return new $t(e.x,e.y)}}s0.prototype.availableOptions={text:{type:g.STRING,default:""},fontIdentifier:{type:g.STRING,default:"imgly_font_open_sans_bold"},fontVariation:{type:g.OBJECT,default:null},lineHeight:{type:g.NUMBER,default:1},fontSize:{type:g.NUMBER,default:22},textColor:{type:g.STRING,default:"black"},strokeStyle:{type:g.STRING,default:"black"},outlineWidth:{type:g.NUMBER,default:0},textBaseline:{type:g.STRING,default:"alphabetic"},excludeAccents:{type:g.BOOLEAN,default:!0},maxWidth:{type:g.NUMBER,default:100},maxHeight:{type:g.NUMBER,default:0},alignment:{type:g.STRING,default:"left",available:["left","center","right"]}};class Sd extends sc{_calculateLayoutElements(){const e=this.getWords(),t=this._getTextFrame(),r=this.getAttributes(),i=r.getFontIdentifier(),o=this.getImageInsets(),n=new Ui({text:e.getWord(0),fontIdentifier:i});n.fitWidth(t.width);const s=new ji({text:e.getWord(0),frame:t,font:n});s.setFrame(this._getTextFrameForElement(s));const a=this.getSize();return(this.getSizeToFitContent()||a.height<=1)&&(a.height=o.top+s.getFrame().height+o.bottom),a.height=Math.max(a.height,this.getMinimumHeight()),[s]}_getTextFrameForElement(e){const t=this.getWords(),r=t.getWord(0),i=this.getAttributes(),o=i.getFontIdentifier(),n=this.getImageInsets(),s=this.getImageInsets().applyToRectangle(this._getFrame()).scale(this.getTextScaleFactor()),a=new s0({text:r,fontIdentifier:o,alignment:i.getAlignment(),lineHeight:1});a.fitInFrame(s);const l=a.getSize();s.height=l.height;let c=l.height*this.getRowScaleFactor();this.getSizeToFitContent()&&(c+=n.top+n.bottom);const d=this._getFrame(),u=i.getAlignment();if(this.getCenteredVertically())s.y=d.height/2-c/2+n.top;else switch(u){case"left":s.y=d.height-c-n.bottom;break;case"center":s.y=d.height/2-c/2+c*this.getCenterOffset(),s.x=(d.width-s.width)/2;break;case"right":s.x=d.width-s.width-n.right;break;default:break}return s}render(e){e.save(),this._getLayoutElements().forEach(t=>{let{text:r,frame:i}=t.serializeOptions();const o=this.getAttributes(),n=o.getFontIdentifier(),s=new s0({text:r,fontIdentifier:n,alignment:o.getAlignment(),lineHeight:1,textColor:o.getTextColor().toRGBA()});i=this._getTextFrameForElement(t),s.fitInFrame(i),s.draw(e,i.x,i.y)}),e.restore()}}Sd.prototype.availableOptions=v(v({},sc.prototype.availableOptions),{centerOffset:{type:g.NUMBER,default:0},sizeToFitContent:{type:g.BOOLEAN,default:!1},textScaleFactor:{type:g.NUMBER,default:.95},rowScaleFactor:{type:g.NUMBER,default:1},minimumHeight:{type:g.NUMBER,default:0},centeredVertically:{type:g.BOOLEAN,default:!1}});class Rt extends Ar{constructor(...e){super(...e);this._rowType=Fe.Box,this._alignmentRandomizer=new Be(0),this._isMaskedRandomizer=new Be(0),this._seedPool.push(this._alignmentRandomizer),this._seedPool.push(this._isMaskedRandomizer)}getImagePaths(){return[Fe.Box.getImagePath()]}_modifiedText(e){return super._modifiedText(e).toLowerCase()}_modifiedLines(e){const t=new yi;return t.set([e.reduce((r,i)=>`${r}${r===""?"":`
`}${i.joined(1)[0]}`,"")]),[t]}_layoutRows(e,t){const r=super._layoutRows(e,t),i=r[0];if(i&&this.getSquareLayout()){const o=i.getSize();o.height=o.width}return r}getAlignment(){return this._alignmentRandomizer.pickNext(this.constructor.ValidAlignments||Rt.ValidAlignments)}_randomLayoutRow(e,t,r,i){const o=this.getAlignment(),n=this._rowType,s=lt.getImage(n.getImagePath());i.setAlignment(o);const a=new Sd({words:e,width:r,attributes:i,image:s,imageInsets:n.insetsForWidth(r),capInsets:n.getCapInsets(),backgroundColor:V.WHITE,centerOffset:0,textScaleFactor:.7,isMasked:this._isMaskedRandomizer.nextBool()});this._rowType===Fe.Box&&(a.serverImageSmoothingFix=!0);const l=a.getSize();return this.getSquareLayout()?l.height=l.width:l.height=Math.max(l.height,l.width*n.getMinimumHeightRatio()),a}}re(Rt,"defaultFontIdentifiers",["imgly_font_galano_grotesque_bold"]),re(Rt,"Alignment",{Left:"left",Center:"center",Right:"right"}),re(Rt,"ValidAlignments",[Rt.Alignment.Left,Rt.Alignment.Center,Rt.Alignment.Right]),re(Rt,"identifier","imgly_text_design_masked");Rt.prototype.availableOptions=v(v({},Ar.prototype.availableOptions),{fontIdentifiers:{type:g.ARRAY,default:Rt.defaultFontIdentifiers},squareLayout:{type:g.BOOLEAN,default:!0}});class Cd extends Rt{constructor(...e){super(...e);this._possibleRowTypes=[Fe.Badge1,Fe.Badge2,Fe.Badge3,Fe.Badge4],this._rowTypesRandomizer=new Be(0),this._isMaskedRandomizer=new Be(0),this._seedPool.push(this._rowTypesRandomizer),this._seedPool.push(this._isMaskedRandomizer)}getImagePaths(){return this._possibleRowTypes.map(e=>e.getImagePath())}_randomLayoutRow(e,t,r,i){this._rowType=this._rowTypesRandomizer.pickNext(this._possibleRowTypes),i.setLineSpacing(.9);const o=super._randomLayoutRow(e,t,r,i);return o.set({textScaleFactor:.9}),o}}re(Cd,"defaultFontIdentifiers",["imgly_font_campton_bold"]),re(Cd,"identifier","imgly_text_design_masked_badge"),re(Cd,"ValidAlignments",[Rt.Alignment.Center]);Cd.prototype.availableOptions=v(v({},Rt.prototype.availableOptions),{fontIdentifiers:{type:g.ARRAY,default:Cd.defaultFontIdentifiers}});class Jo extends Rt{constructor(...e){super(...e);this._possibleRowTypes=[Fe.SpeechBubble1,Fe.SpeechBubble3],this._rowTypesRandomizer=new Be(0),this._isMaskedRandomizer=new Be(0),this._seedPool.push(this._rowTypesRandomizer),this._seedPool.push(this._isMaskedRandomizer)}getImagePaths(){return this._possibleRowTypes.map(e=>e.getImagePath())}_rowTypes(e){return this._possibleRowTypes}_randomLayoutRow(e,t,r,i){this._rowType=this._rowTypesRandomizer.pickNext(this._rowTypes(e)),i.setLineSpacing(.9);const o=super._randomLayoutRow(e,t,r,i);return o.set({textScaleFactor:1,minimumHeight:r*this._rowType.getMinimumHeightRatio(),sizeToFitContent:this._rowType.getSizeToFitContent(),centeredVertically:!0}),o}}re(Jo,"defaultFontIdentifiers",["imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_roboto_black","imgly_font_roboto_light"]),re(Jo,"identifier","imgly_text_design_masked_speech_bubble");Jo.prototype.availableOptions=v(v({},Rt.prototype.availableOptions),{fontIdentifiers:{type:g.ARRAY,default:Jo.defaultFontIdentifiers},squareLayout:{type:g.BOOLEAN,default:!1},alignment:{type:g.STRING,default:"left",available:Rt.ValidAlignments}});class qp extends Jo{constructor(...e){super(...e);this._possibleRowTypes=[Fe.SpeechBubble2,Fe.SpeechBubble4,Fe.SpeechBubble2,Fe.SpeechBubble4,Fe.SpeechBubble5],this._possibleRowTypesForMin15=this._possibleRowTypes.slice(0,2),this._possibleRowTypesForMax14=this._possibleRowTypes.slice(2)}_rowTypes(e){return e.countNumberOfCharacters()<15?this._possibleRowTypesForMax14:this._possibleRowTypesForMin15}}re(qp,"defaultFontIdentifiers",["imgly_font_permanent_marker"]),re(qp,"identifier","imgly_text_design_masked_speech_bubble_comic");qp.prototype.availableOptions=v(v({},Jo.prototype.availableOptions),{fontIdentifiers:{type:g.ARRAY,default:qp.defaultFontIdentifiers}});class Gp extends Rt{_modifiedText(e){return super._modifiedText(e).toUpperCase()}_randomLayoutRow(e,t,r,i){const o=this._alignmentRandomizer.pickNext(Rt.ValidAlignments);return i.setAlignment(o),new Sd({words:e,width:r,attributes:i,image:null,backgroundColor:V.WHITE,centerOffset:0,sizeToFitContent:!0,isMasked:!1,autoAdjustTextColor:!1})}}re(Gp,"defaultFontIdentifiers",["imgly_font_abril_fatface_regular"]),re(Gp,"identifier","imgly_text_design_multiline");Gp.prototype.availableOptions=v(v({},Rt.prototype.availableOptions),{fontIdentifiers:{type:g.ARRAY,default:Gp.defaultFontIdentifiers}});const{Rectangle:sOe}=te;class rE extends Re{getContentFrame(){const e=this.getFrame().clone(),t=e.width*.1;return e.insetBy(t,t)}intersects(e){return this.getFrame().intersects(e.getFrame())}}rE.prototype.availableOptions={frame:{type:g.OBJECT,default:new sOe}};const{Rectangle:YV}=te;class As extends Up{constructor(...e){super(...e);this._MAX_TRIES=1e3,this._PRECISION=1e3}render(e,t,r,i,o){const{imagePaths:n,relativeParticleSize:s}=this._options;if(n.length<=0)return;const a=t.width/t.height,l=new YV(Math.round(r.left*this._PRECISION),Math.round(r.top*this._PRECISION*a),this._PRECISION,this._PRECISION);l.width-=l.x+Math.round(r.right*this._PRECISION),l.height-=l.y+Math.round(r.bottom*this._PRECISION*a);const c=[];let d=0,u=0;for(;d<this.getParticleCount()&&u<this._MAX_TRIES;){const p=s/2,h=Math.round(p*this._PRECISION),b=Math.round(p*this._PRECISION*a),y=Math.floor(this._PRECISION)-h,f=Math.floor(this._PRECISION)-b,w=o.nextInRange(h,y),T=o.nextInRange(b,f),C=new YV(w-h,T-b,2*h,2*b);!C.intersects(l)&&!this.hasCollision(c,C)&&(c.push(new rE({frame:C})),d+=1),u+=1}for(let p=0;p<c.length;p++){const h=c[p],b=o.pickNext(n),y=lt.getImage(b),f=o.nextInRange(140,230)/255,w=t.width/this._PRECISION,T=t.height/this._PRECISION,C=h.getContentFrame();C.x*=w,C.y*=T,C.width*=w,C.height*=T;const F=i.clone();F.a=f,Ga(e,y,C,F,"source-atop")}}hasCollision(e,t){for(let r=0;r<e.length;r++)if(t.intersects(e[r].getFrame()))return!0;return!1}}As.prototype.availableOptions=v(v({},Up.prototype.availableOptions),{particleCount:{type:g.NUMBER,default:50},relativeParticleSize:{type:g.NUMBER,default:.08},imagePaths:{type:g.ARRAY,default:[]}});class cg extends As{}re(cg,"Images",["text-design/images/imgly_text_design_particle_brush_01.png","text-design/images/imgly_text_design_particle_brush_02.png","text-design/images/imgly_text_design_particle_brush_03.png","text-design/images/imgly_text_design_particle_brush_04.png","text-design/images/imgly_text_design_particle_brush_05.png","text-design/images/imgly_text_design_particle_brush_06.png","text-design/images/imgly_text_design_particle_brush_07.png","text-design/images/imgly_text_design_particle_brush_08.png","text-design/images/imgly_text_design_particle_brush_09.png","text-design/images/imgly_text_design_particle_brush_10.png"]);cg.prototype.availableOptions=v(v({},As.prototype.availableOptions),{imagePaths:{type:g.ARRAY,default:[...cg.Images]},relativeParticleSize:{type:g.NUMBER,default:.12}});class dg extends As{}re(dg,"Images",["text-design/images/imgly_text_design_particle_circle_01.png","text-design/images/imgly_text_design_particle_circle_02.png","text-design/images/imgly_text_design_particle_circle_03.png","text-design/images/imgly_text_design_particle_circle_04.png","text-design/images/imgly_text_design_particle_circle_05.png","text-design/images/imgly_text_design_particle_circle_06.png","text-design/images/imgly_text_design_particle_circle_07.png","text-design/images/imgly_text_design_particle_circle_08.png","text-design/images/imgly_text_design_particle_circle_09.png","text-design/images/imgly_text_design_particle_circle_10.png"]);dg.prototype.availableOptions=v(v({},As.prototype.availableOptions),{imagePaths:{type:g.ARRAY,default:[...dg.Images]},relativeParticleSize:{type:g.NUMBER,default:.12}});class ug extends As{}re(ug,"Images",["text-design/images/imgly_text_design_particle_triangle_01.png","text-design/images/imgly_text_design_particle_triangle_02.png","text-design/images/imgly_text_design_particle_triangle_03.png","text-design/images/imgly_text_design_particle_triangle_04.png","text-design/images/imgly_text_design_particle_triangle_05.png","text-design/images/imgly_text_design_particle_triangle_06.png","text-design/images/imgly_text_design_particle_triangle_07.png","text-design/images/imgly_text_design_particle_triangle_08.png","text-design/images/imgly_text_design_particle_triangle_09.png","text-design/images/imgly_text_design_particle_triangle_10.png"]);ug.prototype.availableOptions=v(v({},As.prototype.availableOptions),{imagePaths:{type:g.ARRAY,default:[...ug.Images]}});class or extends Ar{constructor(...e){super(...e);this._relativeInsets=new Le(0,0,0,0),this._INVALID_FONTS_IF_LESS_THEN_5_CHARS=["imgly_font_montserrat_light"],this._INVALID_FONTS_IF_LESS_THEN_4_CHARS=["imgly_font_montserrat_light","imgly_font_wolesbro"],this._lineCount=0,this._decorativeRowCreated=!1,this._useImageRowRandomizer=new Be(0),this._rowTypeRandomizer=new Be(0),this._lineDecorativeTypeRandomizer=new Be(0),this._seedPool.push(this._useImageRowRandomizer),this._seedPool.push(this._rowTypeRandomizer),this._seedPool.push(this._lineDecorativeTypeRandomizer)}getImagePaths(){return[...or.DecoratorImages,...or.RowImages]}_fontForRow(e,t){const r=t.countNumberOfCharacters();let i=this.getFontIdentifiers();return r<4?i=i.filter(o=>this._INVALID_FONTS_IF_LESS_THEN_4_CHARS.indexOf(o)<0):r<5&&(i=i.filter(o=>this._INVALID_FONTS_IF_LESS_THEN_5_CHARS.indexOf(o)<0)),i[e%i.length]}_modifiedText(e){return super._modifiedText(e).toUpperCase()}_modifiedLines(e){return this._lineCount=e.length,e}generateLayoutData(e,t){return this._decorativeRowCreated=!1,super.generateLayoutData(e,t)}_randomLayoutRow(e,t,r,i){const o=i.getFontIdentifier();let n=e;switch(o){case"imgly_font_wolesbro":n=new yi().set(e.getLowerCase());break;case"imgly_font_permanent_marker":n=new yi().set(e.getUpperCase());break;default:break}const s=this.getDecorativeRowsInTheMiddleOnly()&&(t===0||t===this._lineCount-1);if(this._useImageRowRandomizer.nextBool()||this._decorativeRowCreated||s)return new Yt({words:n,width:r,attributes:i});this._decorativeRowCreated=!0;const[a,l]=this._randomDecoratorImages();return new Ln({words:e,width:r,attributes:i,leftImage:a,rightImage:l})}_layoutRows(e,t){const r=super._layoutRows(e,t);if(!this.getDecorationsVisible())return r;const i=.0625*t,o=new Rr({width:t,height:i,image:lt.getImage(this._rowTypeRandomizer.pickNext(or.RowImages))}).layout(),n=new Rr({width:t,height:i,image:lt.getImage(this._rowTypeRandomizer.pickNext(or.RowImages))}).layout();return[o,...r,n]}_randomDecoratorImages(){return this._lineDecorativeTypeRandomizer.nextInRange(0,1)?or.DecoratorImages.slice(0,2).map(e=>lt.getImage(e)):or.DecoratorImages.slice(2).map(e=>lt.getImage(e))}}re(or,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"]),re(or,"identifier","imgly_text_design_sunshine"),re(or,"RowImages",[Rr.RowImages.decorative1,Rr.RowImages.decorative2,Rr.RowImages.decorative3,Rr.RowImages.decorative4]),re(or,"DecoratorImages",["text-design/images/imgly_text_design_asset_decorative_03.png","text-design/images/imgly_text_design_asset_decorative_04.png","text-design/images/imgly_text_design_asset_decorative_07.png","text-design/images/imgly_text_design_asset_decorative_08.png"]);or.prototype.availableOptions=v(v({},Ar.prototype.availableOptions),{fontIdentifiers:{type:g.ARRAY,default:or.defaultFontIdentifiers},relativeLineSpacing:{type:g.NUMBER,default:.025/3*4},decorationsVisible:{type:g.BOOLEAN,default:!0},decorativeRowsInTheMiddleOnly:{type:g.BOOLEAN,default:!1}});class qi extends or{constructor(...e){super(...e);this._relativeInsets=new Le(.3,.3,.3,.3),this._backgroundRandomizer=new Be(0),this._decoTypeRandomizer=new Be(0),this._seedPool.push(this._backgroundRandomizer),this._seedPool.push(this._decoTypeRandomizer)}getImagePaths(){return[...or.RowImages,...j.Array.flatten(qi.Backgrounds.map(e=>e.getImagePaths())),...qi.DecoratorImages]}_getBackground(){return this._backgroundRandomizer.pickNext(qi.Backgrounds)}_randomDecoratorImages(){switch(this._decoTypeRandomizer.nextInRange(0,2)){case 0:return qi.DecoratorImages.slice(0,2).map(e=>lt.getImage(e));case 1:case 2:return qi.DecoratorImages.slice(2).map(e=>lt.getImage(e));default:return ie.warn("TextDesignParticles#_randomDecoratorImages: Number generated not in valid range."),qi.DecoratorImages.slice(2).map(e=>lt.getImage(e))}}}re(qi,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"]),re(qi,"identifier","imgly_text_design_particles"),re(qi,"Backgrounds",[new cg,new dg,new ug]),re(qi,"DecoratorImages",["text-design/images/imgly_text_design_particle_holder_01.png","text-design/images/imgly_text_design_particle_holder_02.png","text-design/images/imgly_text_design_particle_holder_03.png","text-design/images/imgly_text_design_particle_holder_04.png"]);qi.prototype.availableOptions=v(v({},or.prototype.availableOptions),{fontIdentifiers:{type:g.ARRAY,default:qi.defaultFontIdentifiers},decorationsVisible:{type:g.BOOLEAN,default:!1},decorativeRowsInTheMiddleOnly:{type:g.BOOLEAN,default:!0}});class Wp extends Ar{constructor(...e){super(...e);this._relativeInsets=new Le(.1,0,0,0),this._rowTypeRandomizer=new Be(0),this._seedPool.push(this._rowTypeRandomizer)}_modifiedText(e){return super._modifiedText(e).toUpperCase()}_randomLayoutRow(e,t,r,i){const o=super._randomLayoutRow(e,t,r,i);return o.setShearingAngle(this.getShearingAngle()),o}_layoutRows(e,t){const r=super._layoutRows(e,t),i=j.values(gr.FormType),o=30,n=new gr({width:t,height:o,type:this._rowTypeRandomizer.pickNext(i),shearingAngle:this.getShearingAngle()}).layout(),s=new gr({width:t,height:o,type:this._rowTypeRandomizer.pickNext(i),shearingAngle:this.getShearingAngle()}).layout();return[n,...r,s]}}re(Wp,"defaultFontIdentifiers",["imgly_font_campton_bold"]),re(Wp,"identifier","imgly_text_design_rotated");Wp.prototype.availableOptions=v(v({},Ar.prototype.availableOptions),{fontIdentifiers:{type:g.ARRAY,default:Wp.defaultFontIdentifiers},relativeLineSpacing:{type:g.NUMBER,default:.025/3},shearingAngle:{type:g.NUMBER,default:-.1}});class iE extends or{constructor(...e){super(...e);this._relativeInsets=new Le(0,.3,0,.3)}_layoutRows(e,t){const r=super._layoutRows(e,t);if(!this.getDecorationsVisible())return r;const i=25,o=new Rr({width:t,height:i,image:lt.getImage(this._rowTypeRandomizer.pickNext(or.RowImages))}).layout(),n=new Rr({width:t,height:i,image:lt.getImage(this._rowTypeRandomizer.pickNext(or.RowImages))}).layout();return[o,...r,n]}}re(iE,"identifier","imgly_text_design_sunshine-v3_1_0");class Hp extends Jo{constructor(...e){super(...e);this._possibleRowTypes=[Fe.Watercolor1,Fe.Watercolor2,Fe.Watercolor3]}}re(Hp,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro"]),re(Hp,"identifier","imgly_text_design_watercolor");Hp.prototype.availableOptions=v(v({},Jo.prototype.availableOptions),{fontIdentifiers:{type:g.ARRAY,default:Hp.defaultFontIdentifiers},alignment:{type:g.STRING,default:Rt.Alignment.Center,available:Rt.ValidAlignments}});const{Rectangle:aOe}=te,a0=1e3;class XV{constructor(){this._layoutData=null,this._layout=null,this._text="",this._seed=0,this._debugMode=!1,this.randomizer=new Be}createLayout(e,t,r){this._layout=e,this._text=t,this._seed=r,e.seed(r),this._layoutData=e.generateLayoutData(t,a0)}calculateAspect(){return this._layoutData?this._layoutData.getSize().aspect():(ie.warn("TextDesignRenderer#calculateAspect: No layout data"),1)}draw(e,t,r,i){const o=this._layoutData;if(this._layoutData){const n=new $t(a0,a0/t.aspect()),s=t.width/a0,a=o.getRelativeInsets().clone().scale(n.width),l=o.getRelativeLineSpacing()*n.width;let c=a.top;e.save(),this.randomizer.seed(this._seed);const d=o.getBackground();d&&d.render(e,t,o.getRelativeInsets(),i?V.WHITE:r,this.randomizer),e.scale(s,s),o.getRows().forEach(u=>{e.save();const p=u.getAttributes();if(e.transform(1,u.getShearingAngle(),0,1,a.left,c),p.setTextColor(i?V.WHITE:r.clone()),p.setTintColor(i?V.WHITE:r.clone()),(u instanceof sc||u instanceof Sd)&&(u.setBackgroundColor(i?V.WHITE:r.clone()),u.setIsUsedInInvertedLayout(i)),this._debugMode&&(u._debugMode=!0),u.willRender(e),u.render(e),u.didRender(e),this._debugMode){const h=u._getFrame(),b=u._getTextFrame();Bp(e,h,V.GREEN),Bp(e,b,V.BLUE),u._getLayoutElements().forEach(y=>{const f=y.getFrame(),w=u._getTextFrameForElement(y);Bp(e,f,new V(1,1,0)),Bp(e,w,new V(0,1,1))})}c+=u.getSize().height+l,e.restore()}),this._debugMode&&Bp(e,new aOe(0,0,n.width,n.height),V.RED),e.restore()}}}const{Vector2:ac}=te;class pg extends Os{constructor(e,t){super(e,t);this._isDisposed=!1,this._renderer=new XV,this._canvas=j.createCanvas(),this._context=this._canvas.getContext("2d"),this._texture=U.Texture.fromCanvas(this._canvas),this._sprite.setTexture(this._texture),this._aspect=1,this._isLayoutDirty=!0,this.getSeed()<0&&this.setSeed(Be.TimeSeed())}seed(e){this.setSeed(e||Be.TimeSeed()),this._isLayoutDirty=!0}_updateLayout(){const e=this.getLayout();return e?(this._renderer.createLayout(e,this.getText(),this.getSeed()),this._aspect=this._renderer.calculateAspect(),this._isLayoutDirty=!1,!0):null}applyTransform(e){super.applyTransform(e);const t={};this._options.dimensions&&(t.width=e.applyToRelativeSize(this.getWidth())),this.set(t,!1)}applyFlip(e){super.applyFlip(e);let{rotation:t}=this._options;switch(e){case"horizontal":t+=(Math.PI-t)*2,this.setRotation(t);break;case"vertical":t+=(Math.PI/2-t)*2,this.setRotation(t);break}}update(e,t){const r=this._isLayoutDirty;if(this._isDisposed||r&&!this._updateLayout())return;const i=this.getWidth()*t.min()/e.getTextureScale(),o=i/this._aspect,n=new ac(i,o),s=new ac(Math.round(i*2),Math.round(o*2)).clamp(new ac(1,1),new ac(Infinity,Infinity)),a=e.getRenderer(),l=a.getMaxDimensions()||Infinity;s.x>l&&(s.x=l,s.y=Math.round(s.x/this._aspect)),s.y>l&&(s.y=l,s.x=Math.round(s.y*this._aspect));const c=j.ensureCanvasDimensions(this._canvas,s);(r||c)&&(this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._renderer.draw(this._context,new $t(s.x,s.y),this.getColor(),this.getInverted()),this.setDimensions(n),this._texture.getBaseTexture().update(),a.isOfType(De.WEBGL)&&a.updateTexture(this._texture.getBaseTexture())),super.update(e,t),this._applyFlip()}_applyFlip(){const e=this._sprite.getScale(),{flipHorizontally:t,flipVertically:r}=this._options;(t&&e.x>0||!t&&e.x<0)&&(e.x*=-1),(r&&e.y>0||!r&&e.y<0)&&(e.y*=-1),this._sprite.setScale(e)}_optionEquals(e,t){if(e==="layout"){const{layout:r}=this._options;return!r&&t||!t&&r||(!t.constructor||!r.constructor)?!1:!(r.constructor.identifier!==t.constructor.identifier)}return super._optionEquals(e,t)}serializeOptions(e,t=!1){if(e&&this.getPadding()<0){const i=e.indexOf("padding");i>-1&&e.splice(i,1)}const r=super.serializeOptions(e,t);return e||(r.type="textdesign"),r}_getTexture(){return this._texture}canBeFlippedHorizontally(){return!1}canBeDuplicated(){return!0}canMaskCanvas(){return!0}canAdjustPadding(){return!0}dispose(){this._isDisposed=!0,this._texture.dispose(),this._sprite.dispose()}}pg.Layouts={TextDesignBlocks:Wr,TextDesignBlocksCondensed:Lp,TextDesignBlocksLight:Wa,TextDesignCelebrate:vi,TextDesignCelebrateSimple:Np,TextDesignEqualWidth:Va,TextDesignEqualWidthFat:jp,TextDesignMasked:Rt,TextDesignMaskedBadge:Cd,TextDesignMaskedSpeechBubble:Jo,TextDesignMaskedSpeechBubbleComic:qp,TextDesignMultiline:Gp,TextDesignWatercolor:Hp,TextDesignSunshine:or,TextDesignParticles:qi,TextDesignRotated:Wp};pg.LegacyLayouts={TextDesignBlocksLightV310:zp,TextDesignSunshineV310:iE};pg.AssetManager=lt;pg.prototype.availableOptions={id:{type:g.STRING,default:()=>j.getUUID()},position:{type:g.VECTOR2,default:new ac(.5,.5)},dimensions:{type:g.VECTOR2,default:ac.NULL},anchor:{type:g.VECTOR2,default:new ac(0,0)},pivot:{type:g.VECTOR2,default:new ac(.5,.5)},rotation:{type:g.NUMBER,default:0},flipHorizontally:{type:g.BOOLEAN,default:!1},flipVertically:{type:g.BOOLEAN,default:!1},layout:{type:g.OBJECT,default:null,setter(e){return this._isLayoutDirty=!0,e}},text:{type:g.STRING,default:"",setter(e){return this._isLayoutDirty=!0,e}},color:{type:g.COLOR,default:V.BLACK,setter(e){return this._isLayoutDirty=!0,e}},padding:{type:g.NUMBER,default:.01,minValue:.01},width:{type:g.NUMBER,default:.8},inverted:{type:g.BOOLEAN,default:!1,setter(e){return this._isLayoutDirty=!0,e}},seed:{type:g.NUMBER,default:-1}};var l0=pg;const{Vector2:oE}=te;class nE extends Os{constructor(...e){super(...e);this._textRenderer=new KV(this,this._operation),this._textRenderer.rotation=this.getRotation(),this._sprite.setTexture(this._textRenderer.getFinalTexture()),this._hitTestSprite.setTexture(this._textRenderer.getTexture())}serializeOptions(e,t=!1){const r=super.serializeOptions(e,t);return e||(r.type="text"),r}getDOMStyle(e,t){const r=this.getFontSize()*t.y;return{fontWeight:this._options.fontWeight,fontSize:`${r}px`,fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:`${this.getAbsoluteTextHeight(t)*this.getLineHeight()}px`,color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}}getAbsoluteTextHeight(e){const t=this.getFontSize()*e.y,r=this.getTextMetrics();if(r){const i=1/r.unitsPerEm*t,o=r.ascender*i,n=r.descender*i;return o+Math.abs(n)}return t*this.getLineHeight()*1.1}getDimensions(e,t){return this._textRenderer.getDimensions(e,t)}applyFlip(e){super.applyFlip(e);let{rotation:t}=this._options;switch(e){case"horizontal":t+=(Math.PI-t)*2,this.setRotation(t);break;case"vertical":t+=(Math.PI/2-t)*2,this.setRotation(t);break}}applyTransform(e){super.applyTransform(e),this.set({fontSize:e.scaleSize(this.getFontSize(),"y"),maxWidth:e.scaleSize(this.getMaxWidth(),"x")},!1)}applyRotation(e){super.applyRotation(e);const t=(e+360)%360,r=this._operation.getInputDimensions();(t===90||t===270)&&(this.setMaxWidth(this.getMaxWidth()/r.x*r.y),this.setFontSize(this.getFontSize()/r.y*r.x))}setOption(e,t){const{flipHorizontally:r,flipVertically:i}=this._options;if(e==="rotation"){let o=t;r&&(o=Math.PI*2-o),i&&(o=Math.PI*2-o),this._options.rotation=o,this._textRenderer&&(this._textRenderer.rotation=o),this._rotation=o,this.emit("update");return}super.setOption(e,t)}getOption(e){return e==="rotation"?this._rotation:super.getOption(e)}getHitTestDisplayObject(){return this._hitTestSprite}update(e,t){if(this._sprite.setVisible(this._options.visible),!this._options.visible)return;this._textRenderer.update(e,t);const r=this._textRenderer.getFinalTexture(),i=r.getBaseTexture();i.update();const o=e.getRenderer();o.isOfType(De.WEBGL)&&o.updateTexture(r.getBaseTexture()),super.update(e,t),this._sprite.setRotation(0),this._textRenderer.getTexture().getBaseTexture().update(),this._hitTestSprite.setRotation(this._rotation),this._hitTestSprite.updateTransform(),this._applyFlip()}_applyFlip(){const e=this._sprite.getScale(),{flipHorizontally:t,flipVertically:r}=this._options;(t&&e.x>0||!t&&e.x<0)&&(e.x*=-1,this.setRotation(this._rotation)),(r&&e.y>0||!r&&e.y<0)&&(e.y*=-1,this.setRotation(this._rotation)),this._sprite.setScale(e)}_getTexture(){return this._textRenderer.getFinalTexture()}dispose(){super.dispose(),this._textRenderer.dispose(),this._hitTestSprite.dispose(),this._sprite.dispose()}canBeFlippedHorizontally(){return!1}canAdjustPadding(){return!1}}nE.prototype.availableOptions={id:{type:g.STRING,default:()=>j.getUUID()},fontSize:{type:g.NUMBER,default:.1},characterSpacing:{type:g.NUMBER,default:0},lineHeight:{type:g.NUMBER,default:1.1},fontIdentifier:{type:g.STRING},fontFamily:{type:g.STRING,default:"Times New Roman"},fontWeight:{type:g.ALL,default:"normal"},fontStyle:{type:g.STRING,default:"normal"},textMetrics:{type:g.OBJECT,default:null},outlineWidth:{type:g.NUMBER,default:0},outlineColor:{type:g.COLOR,default:V.BLACK},alignment:{type:g.STRING,default:"left",available:["left","center","right"]},verticalAlignment:{type:g.STRING,default:"top",available:["top","center","bottom"]},color:{type:g.COLOR,default:new V(1,0,0,1)},backgroundColor:{type:g.COLOR,default:V.TRANSPARENT},position:{type:g.VECTOR2,default:new oE(.5,.5)},anchor:{type:g.VECTOR2,default:new oE(0,0)},pivot:{type:g.VECTOR2,default:new oE(.5,.5)},rotation:{type:g.NUMBER,default:0},text:{type:g.STRING,required:!0},maxWidth:{type:g.NUMBER,default:.5},maxHeight:{type:g.NUMBER,default:0},visible:{type:g.BOOLEAN,default:!0},flipHorizontally:{type:g.BOOLEAN,default:!1},flipVertically:{type:g.BOOLEAN,default:!1}};nE.type="text";var c0=nE;const{Vector2:sE}=te;class lc extends Je{constructor(...e){super(...e);this.setSmoothDownscaling(this._sdk.getOptions().smoothDownscaling),this._onSpriteUpdate=this._onSpriteUpdate.bind(this),this._maskCanvas=j.createCanvas();const t=this._options.sprites.slice();t.forEach(r=>{this.removeSprite(r),this.addSprite(r)})}getSpritesOfType(e){return this._options.sprites.filter(t=>t instanceof e)}rotate(e){this._options.sprites.forEach(t=>{t.applyRotation(e)})}flip(e){this._options.sprites.forEach(t=>{t.applyFlip(e)})}_onSpriteUpdate(e,t){this.emit("update",this),this.setDirty(!0)}_applyRotation(e,t){this._options.sprites.forEach(r=>r.applyRotation(e,t))}transform(e){this._options.sprites.forEach(t=>t.applyTransform(e))}scale(e){this._options.sprites.forEach(t=>t.applyScale(e))}serializeOption(e,t=!1){return e==="sprites"?this._options.sprites.map(r=>r.serializeOptions(void 0,t)):super.serializeOption(e,t)}createSticker(e){return new t0(this,e)}createText(e){return new c0(this,e)}createBrush(e){return new xd(this,e)}createTextDesign(e){return new l0(this,e)}addSprite(e){this._options.sprites.push(e);const t=this.getSmoothDownscaling();e.setSmoothDownscaling&&e.setSmoothDownscaling(t),this._container.addChild(e.getDisplayObject()),this.setDirty(!0),e.on("update",this._onSpriteUpdate),this.emit("update",this,this._options.sprites)}removeSprite(e){const{sprites:t}=this._options,r=t.indexOf(e);return r!==-1?(e.off("update",this._onSpriteUpdate),this._container.removeChild(e.getDisplayObject()),t.splice(r,1),this.setDirty(!0),!0):!1}_getOrientatedStageSize(){const e=this._sdk.getSprite().getTexture().getFrame(),t=this._sdk.getOperationsStack().getByIdentifier("orientation");if(t){const i=t?t.getRotation():0,o=i===270||i===90;return o?new sE(e.height,e.width):new sE(e.width,e.height)}const r=this._sdk.getOperationsStack().getByIdentifier("output");return r?r.getOutputResolution():new sE(e.width,e.height)}_render(e){const t=this._container,{sprites:r}=this._options,i=e.getDimensions().clone().floor();let o=new U.Container;return o.addChild(this._sprite),Promise.all(r.map(n=>n.validateSettings())).then(()=>{r.forEach(n=>n.update(this._sdk,i))}).then(()=>{this._renderTexture.clear(),r.forEach(n=>{n.getInverted&&n.getInverted()?(this._renderTexture.render(o),this._renderTexture.render(this._renderMaskedSprite(n.getDisplayObject(),n.getColor?n.getColor():V.WHITE,n.getPadding?n.getPadding():-1)),o=new U.Container):o.addChild(n.getDisplayObject())}),this._renderTexture.render(o),t.addChild(this._sprite),r.forEach(n=>t.addChild(n.getDisplayObject()))})}_renderMaskedSprite(e,t,r){const i=this._maskCanvas,o=e.getWorldTransform(),n=this._getOrientatedStageSize();j.ensureCanvasDimensions(i,n);const s=i.getContext("2d");if(s.clearRect(0,0,i.width,i.height),s.save(),s.fillStyle=t.toRGBA(),r<0)s.fillRect(0,0,n.x,n.y);else{const c=Math.abs(e.getWidth()/e.getScale().x),d=Math.abs(e.getHeight()/e.getScale().y),u=c*r;s.transform(o.a,o.b,o.c,o.d,o.tx,o.ty),s.fillRect(-u,-u,c+u*2,d+u*2)}s.restore(),s.save(),s.globalCompositeOperation="destination-out",e._renderCanvas({getCurrentRenderTarget:()=>({getPixelRatio:()=>1}),beforeDraw:c=>{const d=e.getWidth(),u=e.getHeight(),p=e.getScale(),h=p.x<0,b=p.y<0;c.translate(d,u),c.scale(h?-1:1,b?-1:1),c.translate(-d,-u)},getContext:()=>s}),s.restore();const a=new U.Container,l=new U.Sprite(U.Texture.fromCanvas(i));return a.addChild(l),a}takeSpriteToFront(e){const{sprites:t}=this._options,r=t.indexOf(e);if(r===-1)return;j.moveArrayItem(t,r,t.length-1);const i=e.getDisplayObject();this._container.removeChild(i),this._container.addChild(i),this.setDirty(!0)}getSpritesAtPosition(e,t){const r=[];this._options.sprites.forEach(c=>c.update(this._sdk,t));const i=this._sdk.getSprite(),o=i.getWorldTransform().applyInverseToVector(e),{width:n,height:s}=i.getTexture().getFrame(),a=i.getAnchor().clone().multiply(-n,-s);o.subtract(a);const l=this._options.sprites.slice(0).reverse();for(let c=0,d=l.length;c<d;c++){const u=l[c];u.getHitTestDisplayObject().isAtPosition(o)&&r.push(u)}return r}setDirtyForRenderer(e,t,r){super.setDirtyForRenderer(e,t,r),this._options.sprites.forEach(i=>{i.setDirtyForRenderer(e,t,r)})}dispose(){super.dispose(),this._options.sprites.forEach(e=>{e.dispose()})}}lc.StickerSprite=t0;lc.TextSprite=c0;lc.BrushSprite=xd;lc.TextDesignSprite=l0;lc.identifier="sprite";lc.prototype.availableOptions={sprites:{type:g.ARRAY,default:[],setter(e,t){if(e=e.map((r,i)=>{if(r instanceof Os)return r;const o=v({},r);delete o.type;switch(r.type){case"text":return new c0(this,o);case"sticker":return new t0(this,o);case"brush":return new xd(this,o);case"textdesign":return new l0(this,o);default:return ie.error(this.constructor.name,`Invalid sprite type: ${r.type}`),null}}),!t){if(this._options.sprites){const r=this._options.sprites.slice();r.forEach(i=>{i.dispose(),this.removeSprite(i)})}e.forEach(r=>{this.addSprite(r)})}return e}},smoothDownscaling:{type:g.BOOLEAN,default:!1}};Te.Operations.SpriteOperation=lc;var JV=lc;const{Vector2:ZV}=te;class lOe{constructor(e,t){this._options=t,this._oldOptions={start:e.getStart().clone(),end:e.getEnd().clone(),rotation:e.getRotation(),textureScale:e.getTextureScale()},this._inputDimensions=e.getInputDimensions(!1),this._rotationDelta=t.rotation-e.getRotation(),this._deltaCos=Math.cos(this._rotationDelta),this._deltaSin=Math.sin(this._rotationDelta),this._oldAbsoluteSize=this._oldOptions.end.clone().subtract(this._oldOptions.start).multiply(this._inputDimensions),this._newAbsoluteSize=t.end.clone().subtract(t.start).multiply(this._inputDimensions),this._absoluteStartDiff=this._oldOptions.start.clone().subtract(t.start).multiply(this._inputDimensions),this._scaleRatio=e.calculateScale(t.rotation)/e.calculateScale(),this._sizeFactor=this._newAbsoluteSize.clone().divide(this._oldAbsoluteSize),this._textureScaleFactor=this._options.textureScale/e.getTextureScale()}applyToRelativePoint(e){const t=this._oldOptions.start,r=this._oldOptions.end,i=t.clone().add(r.clone().subtract(t).divide(2)),o=i.multiply(this._inputDimensions),n=e.clone().multiply(this._oldAbsoluteSize).subtract(this._oldAbsoluteSize.clone().divide(2)),s=o.clone().add(n),a=s.clone().subtract(this._inputDimensions.clone().divide(2)),l=new ZV(a.x*this._deltaCos-a.y*this._deltaSin,a.x*this._deltaSin+a.y*this._deltaCos),c=this._inputDimensions.clone().divide(2).add(l),d=this._options.start.clone().multiply(this._inputDimensions);return c.clone().subtract(d).divide(this._newAbsoluteSize)}applyToRelativeSize(e){return e*this._oldAbsoluteSize.min()/this._newAbsoluteSize.min()}applyToDimensions(e){return e=e.clone().multiply(this._scaleRatio),this._options.textureScale&&e.multiply(this._textureScaleFactor),e}scaleSize(e,t="y"){return e/this._sizeFactor[t]}applyToRotation(e){return(e+this._rotationDelta)%(Math.PI*2)}invert(){const e=this._options.start.clone(),t=this._options.end.clone(),r=this._inputDimensions,i=-this._rotationDelta,o=Math.cos(i),n=Math.sin(i),s=this._oldAbsoluteSize,a=this._newAbsoluteSize,l=e.clone().subtract(t).multiply(r),c=1/this._scaleRatio,d=new ZV(1/this._sizeFactor.x,1/this._sizeFactor.y),u=1/this._textureScaleFactor,p=this._oldOptions;return this._oldOptions=this._options,this._options=p,this._inputDimensions=r,this._rotationDelta=i,this._deltaCos=o,this._deltaSin=n,this._oldAbsoluteSize=a,this._newAbsoluteSize=s,this._absoluteStartDiff=l,this._scaleRatio=c,this._sizeFactor=d,this._textureScaleFactor=u,this}}var QV=lOe;const{Vector2:aE}=te;class hg extends Je{_render(e){this._sprite.setRotation(0);const t=e.getDimensions(),{start:r,end:i,rotation:o,textureScale:n}=this._options,s=i.clone().subtract(r),a=s.clone().divide(2),l=r.clone().add(a),c=this.calculateScale(),d=c*n,u=t.clone().multiply(d).multiply(a);return this._sprite.setAnchor(l),this._sprite.setRotation(o),this._sprite.setScale(d,d),this._sprite.setPosition(u),this._renderTexture.render(this._container),Promise.resolve()}calculateScale(e=this._options.rotation){const t=this.getInputDimensions(!1),r=new aE(Math.abs(t.x*Math.cos(e))+Math.abs(t.y*Math.sin(e)),Math.abs(t.x*Math.sin(e))+Math.abs(t.y*Math.cos(e))),i=t.clone().subtract(r.clone()).divide(2).abs();let o=1;return i.y>i.x?o=i.y*2/t.y+1:o=i.x*2/t.x+1,o}getNewDimensions(e){const{start:t,end:r,textureScale:i}=this._options,o=this.calculateScale(),n=e.clone().multiply(i*o).multiply(r.clone().subtract(t));return n.round()}flip(e){const{start:t,end:r}=this._options,i=t.clone();e==="horizontal"?(t.set(1-r.x,t.y),r.set(1-i.x,r.y)):e==="vertical"&&(t.set(t.x,1-r.y),r.set(r.x,1-i.y))}rotate(e){const{start:t,end:r}=this._options,i=(e+360)%360,o=Math.floor(i/90);for(let n=0;n<o;n++){const s=t.clone();t.set(1-r.y,s.x),r.set(1-s.y,r.x)}}_onBeforeExport(){this._wasEnabledBeforeExport=this.getEnabled(),this.setEnabled(!0)}_onAfterExport(){this.setEnabled(this._wasEnabledBeforeExport,!0)}}hg.identifier="transform";hg.prototype.availableOptions={start:{type:g.VECTOR2,default:new aE(0,0)},end:{type:g.VECTOR2,default:new aE(1,1)},textureScale:{type:g.NUMBER,default:1},rotation:{type:g.NUMBER,default:0}};hg.TransformChange=QV;Te.Operations.TransformOperation=hg;var eK=hg;const{Vector2:cOe}=te;class d0 extends Je{constructor(...e){super(...e);this._watermarkSprite=new U.Sprite,this._watermarkSprite.setAnchor(.5,.5),this._container.addChild(this._watermarkSprite)}_render(e){this._watermarkTexture||(this._watermarkTexture=U.Texture.fromImage(this._options.image),this._watermarkSprite.setTexture(this._watermarkTexture));const t=e.getDimensions(),{width:r,height:i}=this._options.image,o=j.resizeVectorToFit(new cOe(r,i),t);return this._watermarkSprite.setPosition(t.clone().divide(2)),this._watermarkSprite.setWidth(o.x),this._watermarkSprite.setHeight(o.y),this._renderTexture.render(this._container),Promise.resolve()}dispose(){super.dispose(),this._watermarkSprite.dispose()}}d0.identifier="watermark";d0.prototype.availableOptions={image:{type:g.OBJECT,required:!0}};Te.Operations.WatermarkOperation=d0;var tK=d0;const dOe=[dW,mW,oV,sV,uV,mV,bV,yV,xV,CV,AV,JV,eK,tK,vV,nV];Te.AllOperations=dOe;var rK=[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}}]},{fontFamily:"Aleo",variations:[{identifier:"imgly_font_aleo_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_aleo_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:805,descender:-195}}]},{fontFamily:"Amatic SC",variations:[{identifier:"imgly_font_amaticsc",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_amaticsc.woff",textMetrics:{unitsPerEm:1e3,ascender:1016,descender:-245}}]},{fontFamily:"Archivo",variations:[{identifier:"imgly_font_archivo_black",fontWeight:"normal",filePath:"fonts/imgly_font_archivo_black.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:878,descender:-210}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_bungee_inline.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Campton Book",variations:[{identifier:"imgly_font_campton_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_campton_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}}]},{fontFamily:"Carter",variations:[{identifier:"imgly_font_carter_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_carter_one.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2264,descender:-890}}]},{fontFamily:"Codystar",variations:[{identifier:"imgly_font_codystar",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_codystar.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:953,descender:-255}}]},{fontFamily:"Fira Sans",variations:[{identifier:"imgly_font_fira_sans_regular",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_fira_sans_regular.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:935,descender:-265}}]},{fontFamily:"Galano Grotesque",variations:[{identifier:"imgly_font_galano_grotesque_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_galano_grotesque_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Krona One",variations:[{identifier:"imgly_font_krona_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_krona_one.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2030,descender:-530}}]},{fontFamily:"Kumar One Outline",variations:[{identifier:"imgly_font_kumar_one_outline",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_kumar_one_outline.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1137,descender:-642}}]},{fontFamily:"Lobster",variations:[{identifier:"imgly_font_lobster",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_lobster.woff",textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-250}}]},{fontFamily:"Molle",variations:[{identifier:"imgly_font_molle",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_molle.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1852,descender:-701}}]},{fontFamily:"Monoton",variations:[{identifier:"imgly_font_monoton",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_monoton.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2366,descender:-822}}]},{fontFamily:"Nixie One",variations:[{identifier:"imgly_font_nixie_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_nixie_one.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:926,descender:-210}}]},{fontFamily:"Notable",variations:[{identifier:"imgly_font_notable",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_notable.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1143,descender:-157}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}}]},{fontFamily:"Oswald SemiBold",variations:[{identifier:"imgly_font_oswald_semi_bold",fontWeight:600,fontStyle:"normal",filePath:"fonts/imgly_font_oswald_semi_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1193,descender:-289}}]},{fontFamily:"Palanquin Dark SemiBold",variations:[{identifier:"imgly_font_palanquin_dark_semi_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_palanquin_dark_semi_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1320,descender:-491}}]},{fontFamily:"Poppins",variations:[{identifier:"imgly_font_poppins",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_poppins.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1050,descender:-350}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_permanent_marker.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}}]},{fontFamily:"Roboto Black",variations:[{identifier:"imgly_font_roboto_black_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_black_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Roboto Light",variations:[{identifier:"imgly_font_roboto_light_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_light_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Sancreek",variations:[{identifier:"imgly_font_sancreek",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_sancreek.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2104,descender:-738}}]},{fontFamily:"Stint Ultra Expanded",variations:[{identifier:"imgly_font_stint_ultra_expanded",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_stint_ultra_expanded.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-483}}]},{fontFamily:"Trashhand",variations:[{identifier:"imgly_font_trash_hand",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_trash_hand.woff",textMetrics:{unitsPerEm:1e3,ascender:759,descender:-304}}]},{fontFamily:"VT323",variations:[{identifier:"imgly_font_vt323",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_vt323.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Yeseva One",variations:[{identifier:"imgly_font_yeseva_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_yeseva_one.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:915,descender:-240}}]}],iK=[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}}]},{fontFamily:"Abril Fatface",variations:[{identifier:"imgly_font_abril_fatface_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_abril_fatface_regular.woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}}]},{fontFamily:"Amberlight",variations:[{identifier:"imgly_font_amberlight",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_amberlight.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_bungee_inline.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Campton Book",variations:[{identifier:"imgly_font_campton_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_campton_bold.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}}]},{fontFamily:"Galano Grotesque",variations:[{identifier:"imgly_font_galano_grotesque_bold",fontWeight:"bold",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_galano_grotesque_bold.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Handycheera",variations:[{identifier:"imgly_font_handycheera_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_handycheera_regular.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}}]},{fontFamily:"Montserrat Light",variations:[{identifier:"imgly_font_montserrat_light",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_montserrat_light.woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_heavy",fontWeight:900,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_heavy.woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_permanent_marker.woff",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}}]},{fontFamily:"Petit Formal Script",variations:[{identifier:"imgly_font_petit_formal_script",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_petit_formal_script.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}}]},{fontFamily:"Rasa",variations:[{identifier:"imgly_font_rasa_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_rasa_regular.woff",default:!0,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_500",fontWeight:500,fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_rasa_500.woff",default:!0,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}}]},{fontFamily:"Roboto Black",variations:[{identifier:"imgly_font_roboto_black",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_roboto_black.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_black_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_black_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Roboto Light",variations:[{identifier:"imgly_font_roboto_light",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_roboto_light.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_light_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Sue Ellen Francisco",variations:[{identifier:"imgly_font_sue_ellen_francisco",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_sue_ellen_francisco.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:1362,descender:-634}}]},{fontFamily:"Ultra",variations:[{identifier:"imgly_font_ultra",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_ultra.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}}]},{fontFamily:"Wolesbro",variations:[{identifier:"imgly_font_wolesbro",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_wolesbro.woff",textMetrics:{unitsPerEm:1e3,ascender:925,descender:-575}}]}],oK=[{identifier:"imgly_transforms_common",defaultName:"Common Ratios",ratios:[{identifier:"imgly_transform_common_custom",defaultName:"Custom",ratio:"*",selected:!0},{identifier:"imgly_transform_common_square",defaultName:"Square",ratio:1},{identifier:"imgly_transform_common_4-3",defaultName:"4:3",ratio:4/3},{identifier:"imgly_transform_common_16-9",defaultName:"16:9",ratio:16/9}]},{identifier:"imgly_transforms_facebook",defaultName:"Facebook",ratios:[{identifier:"imgly_transform_facebook_profile",defaultName:"Profile Pic",dimensions:{x:300,y:300},forceDimensions:!1,lockDimensions:!0},{identifier:"imgly_transform_facebook_ad",defaultName:"Ad",dimensions:{x:1200,y:627}},{identifier:"imgly_transform_facebook_post",defaultName:"Post",dimensions:{x:940,y:788}},{identifier:"imgly_transform_facebook_cover",defaultName:"Cover",dimensions:{x:851,y:315}}]}];const nK=[];typeof Te.Operations.SpriteOperation!="undefined"&&nK.push(Te.Operations.SpriteOperation.BrushSprite.Brushes.RadialBrush);var sK={TRANSFORM_RATIO_CATEGORIES:oK,FONTS:rK,TEXT_DESIGN_FONTS:iK,BRUSHES:nK};const uOe=v(v({},Sp),{LOAD:"load",SAVE:"save",EDITOR_RESIZE:"editor:resize",ZOOM:"editor:zoom",ZOOM_CHANGED:"editor:zoom_changed",HISTORY_REDO:"history:redo",HISTORY_BEFORE_REDO:"history:before-redo",TEXT_SCALED:"editor:text:scaled",TRANSFORM_RESIZE:"transform:resize",TRANSFORM_AFTER_EDIT:"transform:after-edit",ADDED_STICKER:"sticker:added-sticker",SPRITES_DESELECTED:"editor:sprite:deselected-all",CANVAS_FOCUS:"canvas:focus"});var aK=uOe,Ft={EVENTS:aK,DEFAULTS:sK};function pOe(){const{userAgent:e,appVersion:t}=navigator;return t.indexOf("MSIE")!==-1?t.match(/MSIE\s+?([0-9]+)/i)[1]:e.indexOf("Trident")!==-1?e.match(/rv:([0-9]+)/i)[1]:!1}var lK={getIEVersion:pOe};const hOe=Te.Utils,{Vector2:u0}=Te.Math,mOe={getInnerDimensionsForElement(e){const t=new u0(e.offsetWidth,e.offsetHeight),r=window.getComputedStyle(e,null);return t.x-=parseInt(r.getPropertyValue("padding-left"),10),t.x-=parseInt(r.getPropertyValue("padding-right"),10),t.y-=parseInt(r.getPropertyValue("padding-top"),10),t.y-=parseInt(r.getPropertyValue("padding-bottom"),10),t},getEventPosition(e){let t=e.clientX,r=e.clientY;if(e.type.indexOf("touch")!==-1){if(!e.touches.length)return;t=e.touches[0].clientX,r=e.touches[0].clientY}return new u0(t,r)},createTransparentPatternCanvas(){const e=document.createElement("canvas"),t=e.getContext("2d");return e.width=10,e.height=10,t.fillStyle="white",t.fillRect(0,0,e.width,e.height),t.fillStyle="#cccccc",t.fillRect(0,0,e.width/2,e.height/2),t.fillRect(e.width/2,e.height/2,e.width,e.height),e},supportsMSBlob(){const e=document.createElement("canvas");return typeof e.msToBlob!="undefined"},translate(e,t,r={}){let i=this.fetch(e,t);if(!i)return ie.info("Utils#translate",`Unable to translate \`${t}\``),null;for(const o in r)i=i.replace(`\${${o}}`,r[o]);return i},fetch(e,t,r){t=t.replace(/\[(\w+)]/g,".$1"),t=t.replace(/^\./,"");const i=t.split(".");for(let o=0;o<i.length;o++){const n=i[o];if(e=e[n],!e)break}return typeof e=="undefined"?!1:e},isMobile(){const e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))},select(e,t,r=null){r||(r=o=>o);const i=[];return t.forEach(o=>{e.forEach(n=>{const s=r(n);s===o&&i.push(n)})}),i},getJSONP(e){const t=new Fn(e);return t.load()},cloneCategories(e,t){return e.map(r=>(r=hOe.clone(r),r[t]=r[t].slice(0),r))},mergeCategories(e,t,r){e=this.cloneCategories(e,r);let i=null;return t.forEach(o=>{e.forEach(n=>{o.identifier===n.identifier&&(i=n)}),i?i[r]=i[r].concat(o[r]):e.push(o)}),e},wrapFiltersInCategories(e,t){return e.map(r=>{let i=r;return t in i||(i={identifier:`imgly_filters_wrapped-${r.identifier}`,displayFlat:!0,[t]:[r]}),i})},getStyleObject(e){const t=window.getComputedStyle(e),r={};for(const i in t){const o=t.getPropertyValue(i),n=i.replace(/-([a-z])/g,(s,a)=>a.toUpperCase());o!==""&&(r[n]=o)}return r},styleElement(e,t){for(const r in t)e.style[r]=t[r]},debounce(e,t,r){let i;return function(...o){const n=()=>{i=null,r||e.apply(this,o)},s=r&&!i;clearTimeout(i),i=setTimeout(n,t),s&&e.apply(this,o)}},getScrollbarWidth(){const e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);const t=e.offsetWidth;e.style.overflow="scroll";const r=document.createElement("div");r.style.width="100%",e.appendChild(r);const i=r.offsetWidth;return e.parentNode.removeChild(e),t-i},findIntegerFraction(e,t=100){let r=Number.MAX_VALUE,i=0,o=0,n=1,s=1;for(let a=0;a<t;a++){const l=n/s-e;if(l<0)n++;else if(l>0)s++;else return new u0(n,s);const c=Math.abs(n/s-e);c<r&&(r=c,i=n,o=s)}return new u0(i,o)},toFixed(e,t=2){const r=e.toFixed(t);return parseFloat(r)},capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)},flipObject(e){const t={};for(const r in e)t[e[r]]=r;return t},Browser:lK};var _i=mOe;const{Base64:p0}=Te,{Color:tt}=Te,{ColorMatrix:Dvt}=Te.Math,{EventEmitter:mg}=Te,{EXIF:Ivt}=Te,{OptionType:Ovt}=Te,{Promise:Avt}=Te,mt=Te.Utils,{RenderType:cc}=Te,{ImageFormat:lE}=Te,me=Te,{UniformType:Rvt}=Te,{Vector2:$e}=Te.Math,{Rectangle:Fvt}=Te.Math,{Range:Pvt}=Te.Math,Mvt=typeof window!="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):Jf();class Rs{constructor(e,t,r=!1){this._ui=e,this._options=t,this._categoriesById={},this._filtersByIdentifier={identity:me.Operations.FilterOperation.Filters.IdentityFilter},this._categories=_i.wrapFiltersInCategories(za.DEFAULTS.FILTERS.slice(0),Rs.CATEGORY_ITEMS_PROPERTY),this._customAssetsAllowed=r||e.getEditor().getSDK()._l.areCustomAssetsAllowed(),this._customAssetsAllowed&&this._options.categories&&(this._options.categories=_i.wrapFiltersInCategories(this._options.categories,Rs.CATEGORY_ITEMS_PROPERTY)),this._initCategories()}instantiateFilterWithIdentifier(e){const t={value:this._ui._options.crossOrigin,cors:!0},r=this.getFilterByIdentifier(e);if(!r)return Promise.reject(new Error(`Unknown filter with identifier \`${e}\`!`));if(!(r.prototype instanceof me.Operations.FilterOperation.Filter)){const{lutImage:i,resolution:o,horizontalTileCount:n,verticalTileCount:s}=r;let{lightColor:a,darkColor:l}=r;if(a&&l)return a=tt.fromHex(a),l=tt.fromHex(l),Promise.resolve(new me.Operations.FilterOperation.Filters.DuoToneFilter({lightColor:a,darkColor:l}));let c;this._ui.getPreloader&&(c=this._ui.getPreloader().getAsset(i));let d;return c?d=Promise.resolve(c):d=ho.loadImage(this._ui.getAssetPath(i),t),d.then(()=>ho.loadImage(this._ui.getAssetPath(i),t).then(u=>new me.Operations.FilterOperation.Filters.ThreeDLUTFilter({image:u,resolution:o,horizontalTileCount:n,verticalTileCount:s})))}return Promise.resolve(new r)}_initCategories(){if(this._customAssetsAllowed&&this._options.categories&&(this._options.replaceCategories?this._categories=_i.wrapFiltersInCategories(this._options.categories,Rs.CATEGORY_ITEMS_PROPERTY):this._categories=_i.mergeCategories(this._categories,this._options.categories,Rs.CATEGORY_ITEMS_PROPERTY)),this._customAssetsAllowed&&this._options.availableFilters){const t=[];this._categories.forEach(r=>{const i=r.filters.filter(o=>this._options.availableFilters.indexOf(o.identifier)!==-1);i.length>0&&t.push({identifier:r.identifier,defaultName:r.defaultName,filters:i})}),this._categories=t}const e={identifier:"all",defaultName:"All",visible:!1,filters:this._categories.length<=0?[]:this._categories.map(t=>t.filters).reduce((t,r)=>t.concat(r))};this._categories.unshift(e),this._categoriesById.all=e,this._categories.forEach(t=>{this._categoriesById[t.identifier]=t}),e.filters.forEach(t=>{this._filtersByIdentifier[t.identifier]=t})}getFiltersForCategory(e){if(!this._categoriesById[e])throw new Error(`Unknown filter category '${e}'`);return this._categoriesById[e].filters}getItemsByCategory(e){return this.getFiltersForCategory(e)}getFilterByIdentifier(e){return this._filtersByIdentifier[e]}getCategories(){return this._categories}getCategoryByIdentifier(e){return this._categoriesById[e]}}re(Rs,"CATEGORY_ITEMS_PROPERTY","filters");class h0 extends Re{}h0.prototype.availableOptions={fontFamily:{type:g.STRING,required:!0},variations:{type:g.ARRAY,required:!0}};const fOe={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"Semibold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular"};class Vp extends Re{getLabel(){let e=fOe[this._options.fontWeight];switch(this._options.fontStyle){case"italic":e+=" Italic";break}return e}}Vp.prototype.availableOptions={identifier:{type:g.STRING,required:!0},fontFamily:{type:g.STRING,required:!0},fontWeight:{type:g.ALL,default:400},fontStyle:{type:g.STRING,default:"normal"},textMetrics:{type:g.OBJECT,default:null},provider:{type:g.STRING,available:["google","file"]},filePath:{type:g.STRING},default:{type:g.BOOLEAN,default:!1},font:{type:g.OBJECT}};class xi{constructor(e,t){this._ui=e,this._options=t,this._fonts=[],this._variationsByIdentifier={},this._fontsByFontFamily={},this._initFonts()}_initFonts(){const{fonts:e,replaceFonts:t,availableVariations:r,isTextDesign:i}=this._options;let o=!0;o=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed(),e&&o&&e.forEach(({variations:a},l)=>{a&&a.forEach((c,d)=>{if(ha[c.identifier]){const u=kl(c.identifier,!0);e[l].variations[d].identifier=u;const{fontFamily:p}=Ft.DEFAULTS.FONTS.find(h=>h.variations.some(b=>b.identifier===u));e[l].fontFamily=p}})});let n=i?Ft.DEFAULTS.TEXT_DESIGN_FONTS:Ft.DEFAULTS.FONTS;o&&(t?n=e:n=n.concat(e||[]));let s;n=n.map(a=>{const{fontFamily:l}=a;let{variations:c}=a;if(o&&r&&(c=c.filter(u=>r.indexOf(u.identifier)!==-1)),c.length===0)return null;const d=new h0({fontFamily:l});return c=c.map(u=>{const p=new Vp(u);return p.setFontFamily(l),p.setFont(d),u.default&&!s&&(s=p),p.getTextMetrics()==null&&ie.warn(`Missing font metrics for ${p.getIdentifier()}. The SDK will fall back to basic font rendering, which may lead to layout issues. Please provide font metrics for your custom fonts. See https://docs.photoeditorsdk.com/guides/html5/ for more details.`),this._variationsByIdentifier[p.getIdentifier()]=p,p}),d.setVariations(c),this._fontsByFontFamily[l]=d,d}).filter(a=>a),s||([s]=n[0].getVariations()),this._defaultVariation=s,this._fonts=n}getFonts(){return this._fonts}getFontByFontFamily(e){return this._fontsByFontFamily[e]}getVariationByIdentifier(e){return this._variationsByIdentifier[kl(e)]}getVariationsByIdentifier(){return v({},this._variationsByIdentifier)}getDefaultVariation(){return this._defaultVariation}}class zn{constructor(e,t={}){this._ui=e,this._options=t,this._defaultLayouts=me.Operations.SpriteOperation.TextDesignSprite.Layouts,this._legacyLayouts=me.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts,this._layouts=[],this._init()}_init(){const{availableLayouts:e}=this._options,t=v(v({},this._defaultLayouts),this._legacyLayouts);this._layouts=Object.keys(t).map(r=>({identifier:t[r].identifier,layout:t[r]})),e&&(e.push(...Object.values(this._legacyLayouts).map(r=>r.identifier)),this._layouts=this._layouts.filter(r=>e.indexOf(r.identifier)>=0))}getLayoutByIdentifier(e){const t=mt.Array.find(this._layouts,r=>r.identifier===e);return t&&t.layout}getLayouts(){return[...this._layouts]}getDefaultLayout(){return this.getLayouts()[0]}}class Kp{static downloadDataURL(e,t="photoeditorsdk-export"){const r=this.createBlobURLFromDataURL(e),i=this.getExtensionFromDataURL(e),o=document.createElement("a");o.download=`${t}.${i}`,o.href=r,document.body.appendChild(o),o.click(),document.body.removeChild(o)}static downloadMSBlob(e,t="photoeditorsdk-export"){navigator.msSaveBlob&&navigator.msSaveBlob(e,`${t}.png`)}static getExtensionFromDataURL(e){const t=e.split(",")[0].split(":")[1].split(";")[0];return t.split("/").pop()}static createBlobURLFromDataURL(e){if(!window.Blob||!window.URL||!ArrayBuffer||!Uint8Array)return e;const t=p0.decode(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),o=new Uint8Array(i);for(let s=0;s<t.length;s++)o[s]=t[s];const n=new window.Blob([i],{type:r});return window.URL.createObjectURL(n)}}class cE{constructor(e,t,r){this._sdk=e,this._options=t,this._download=r}export(){const e=this._getRenderType();return this._sdk.export(e,this._options.format,this._options.quality).then(t=>(this._download&&this._downloadData(e,t),t))}_downloadData(e,t){switch(e){case cc.DATAURL:Kp.downloadDataURL(t,this._options.fileBasename);break;case cc.MSBLOB:Kp.downloadMSBlob(t,this._options.fileBasename);break}}_getRenderType(){const e=this._options;return e.type!==cc.IMAGE||!this._download?e.type:_i.supportsMSBlob()?cc.MSBLOB:cc.DATAURL}}class dE{constructor(e,t,r){this._editor=e,this._sdk=t,this._mediator=r,this._available=this._sdk.getOperations(),this._map={},this._stack=this._sdk.getOperationsStack(),this._preferredOrder=this._editor.getOptions().editor.operationsOrder,this._fixStack()}exists(e){return!!this._map[e]}add(e){const{identifier:t}=e.constructor;e.on("update",()=>{this._mediator.emit(Ft.EVENTS.OPERATION_UPDATED,e)});const r=this._preferredOrder.indexOf(t);if(r===-1)throw new Error(`EditorOperations#add: \`${t}\` does not appear in \`operationsOrder\``);this._stack.set(r,e),this._map[t]=e,this._mediator.emit(Ft.EVENTS.OPERATION_CREATED,e)}remove(e,t=!0){const r=typeof e=="object"?e.constructor.identifier:e,i=this._stack.getStack();e=this.get(r),delete this._map[r];const o=i.map(n=>n.constructor.identifier).indexOf(r);if(o!==-1){this._stack.removeAt(o);for(let n=o+1;n<i.length;n++){const s=i[n];if(!s)continue;s.setDirty(!0)}t&&this._mediator.emit(Ft.EVENTS.OPERATION_REMOVED,e)}}get(e){return this._map[e]}getOrCreate(e,t={}){if(this._map[e]){const o=this._map[e];return o.set(t,!1),o}const r=this._available[e],i=new r(this._sdk,t);return this.add(i),i}getStack(){return this._stack}reset(){this._map={}}_fixStack(){const e=this._stack.getStack().slice();this._stack.clear(),e.forEach(t=>{this.add(t)})}}class uE{constructor(e,t,r){this._image=e,this._maxPixels=t,this._maxDimensions=r}needsResize(){const e=new $e(this._image.width,this._image.height),t=e.x*e.y,r=t>this._maxPixels,i=this._maxDimensions!==null&&(e.x>this._maxDimensions||e.y>this._maxDimensions);return r||i}resize(){let e=null,t=null;const r=this._maxDimensions;return new Promise((i,o)=>{window.setTimeout(()=>{const n=new $e(this._image.width,this._image.height),s=n.clone();if(s.x*s.y>this._maxPixels&&(s.copy(this._getDimensionsByMaxPixels()),e="maxMegaPixels"),r!==null&&(s.x>r||s.y>r)){const a=Math.min(r/s.x,r/s.y);s.multiply(a),e="maxDimensions"}s.floor(),t=this._createResizedImageCanvas(s),i({canvas:t,dimensions:s,reason:e})},1e3)})}_createResizedImageCanvas(e,t=e){const r=this._image,i=document.createElement("canvas");i.width=e.x,i.height=e.y;const o=e.clone().subtract(t).divide(2),n=i.getContext("2d");return n.drawImage(r,0,0,r.width,r.height,o.x,o.y,t.x,t.y),i}_getDimensionsByMaxPixels(){const e=this._image,t=this._maxPixels,r=e.width/e.height,i=e.height/e.width;return new $e(Math.sqrt(t*r),Math.sqrt(t*i)).floor()}}const gOe=30,bOe="abcdefghijklmnopqrstuvwxzy";class m0{constructor(e){this._fontVariation=e||new Vp({fontFamily:"Times New Roman",fontWeight:"normal",fontStyle:"normal"}),this._createRuler()}_createRuler(){this._ruler=document.createElement("div"),this._ruler.innerText=bOe,document.body.appendChild(this._ruler),this._setRulerStyle()}_setRulerStyle(){this._ruler.style.cssText=`
      position: absolute;
      top: -9999px;
      left: -9999px;
      opacity: 0;
      display: inline-block;
      font: ${this._fontVariation.getFontStyle()} ${this._fontVariation.getFontWeight()} ${gOe}px ${this._fontVariation.getFontFamily()};
    `}setFontVariation(e){this._fontVariation=e,this._setRulerStyle()}getWidth(){return this._ruler?this._ruler.offsetWidth:-1}dispose(){this._ruler&&(this._ruler.parentNode.removeChild(this._ruler),this._ruler=null)}}const cK=typeof window!="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):Jf(),yOe=50,vOe=5e3;class pE{constructor(e){this._fontVariation=e,this._defaultFontRuler=new m0,this._customFontRuler=new m0(this._fontVariation)}observe(){const e=cK();return new Promise((t,r)=>{const i=window.setInterval(()=>{const o=this._defaultFontRuler.getWidth()!==this._customFontRuler.getWidth();if(o)return window.clearInterval(i),t();if(cK()-e>=vOe){const n=new Error(`Failed to load font ${this._fontVariation.getFontFamily()}.`);return n.font=this._fontVariation,r(n)}},yOe)})}dispose(){this._defaultFontRuler.dispose(),this._customFontRuler.dispose()}}class fg{constructor(e){this._ui=e,this._fonts=[],this._observers=[]}add(e){this._fonts.push(e)}load(){return this._fonts.length===0?Promise.resolve():(this._observers=[],this._fonts.forEach(e=>{this._observers.push(new pE(e))}),j.executePromises(this._observers.map(e=>e.observe())))}dispose(){this._observers.forEach(e=>e.dispose())}}class hE extends fg{load(){return Promise.resolve()}}const _Oe={italic:"i"};class mE extends fg{load(){return this._fonts.length&&this._addStylesheetTag(),super.load()}_addStylesheetTag(){const e=this._getFamiliesString(),t=document.createElement("link");t.rel="stylesheet",t.href=`https://fonts.googleapis.com/css?family=${e}`;const r=document.getElementsByTagName("head")[0];r.appendChild(t)}_getFamiliesString(){const e={};this._fonts.forEach(r=>{const i=r.getFontFamily(),o=r.getFontStyle(),n=r.getFontWeight();e[i]=e[i]||[],typeof n!="undefined"?e[i].push(`${n}${_Oe[o]||""}`):e[i].push(400)});const t=[];for(const r in e){const i=e[r],o=i.length?`:${i.join(",")}`:"",n=r.replace(" ","+")+o;t.push(n)}return t.join("|")}}class Td{constructor(e,t){this._ui=e,this._fonts=t,this._loadedFonts=[]}setFonts(e){this._fonts=e}needsToLoad(){for(let e=0;e<this._fonts.length;e++){let t;if(this._fonts[e].getVariations().forEach(r=>{t=t||r.getProvider()}),!t)continue;return!0}}fontLoaded(e){const t=e.getFontFamily();return this._loadedFonts.indexOf(t)!==-1}setFontLoaded(e){if(!this.fontLoaded(e)){const t=e.getFontFamily();this._loadedFonts.push(t)}}load(){const e=this._fonts,t={google:new mE(this._ui),file:new hE(this._ui)},r=()=>{for(const o in t){const n=t[o];n.dispose()}};e.filter(o=>!this.fontLoaded(o)).forEach(o=>{o.getVariations().forEach(n=>{const s=n.getProvider();if(!s)return;const a=t[s];a.add(n)})});const i=[];for(const o in t)i.push(t[o].load());return Promise.all(i).then(()=>{r(),e.forEach(o=>{this.setFontLoaded(o)})}).catch(o=>{throw r(),o})}}class fE{constructor(e,t){this._ui=e,this._options=t,this._brushes=[],this._brushesById={},this._addBrushes(Ft.DEFAULTS.BRUSHES);const{brushes:r,replaceBrushes:i,availableBrushes:o}=this._options;this._options.brushes&&this._addBrushes(r,i),o&&(this._brushes=this._brushes.filter(n=>o.indexOf(n.identifier)!==-1))}_addBrushes(e,t){t&&(this._brushes=[],this._brushesById={}),e.forEach(r=>{this._brushes.push(r),this._brushesById[r.identifier]=r})}getBrushByIdentifier(e){return this._brushesById[e]}getBrushes(){return this._brushes}getFirstBrush(){return this._brushes[0]}}class xOe{constructor(){this._assetsByGroupId={}}addAsset(e,t,r=!1){this._assetsByGroupId[e]?r?this._assetsByGroupId[e].unshift(t):this._assetsByGroupId[e].push(t):this._assetsByGroupId[e]=[t]}setAssets(e,t){this._assetsByGroupId[e]=t}getAssets(e){return this._assetsByGroupId[e]=this._assetsByGroupId[e]||[],this._assetsByGroupId[e]}}var dK=xOe;const gE="imgly_sticker_custom";class kd{constructor(e,t,r){this._ui=e,this._options=t,this._dynamicAssetsLibrary=r||this._ui.getEditor().getDynamicAssetsLibrary()||new dK,this._categoriesById={},this._categories=[],this._stickersById={},this._customStickerCanvas=j.createCanvas(),this.reload()}reload(){this._categoriesById={},this._categories=[],this._stickersById={};const e=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed();this._addCategories(za.DEFAULTS.STICKER_CATEGORIES);const{categories:t,replaceCategories:r}=this._options;if(e&&this._options.categories?this._addCategories(t,r):(this._updateCategoriesMap(),this._updateAllCategory()),e){const i=this._dynamicAssetsLibrary.getAssets("sticker");if(i.length>0){const o=this._createCustomStickerCategory(i);this._addCategories([o],!1,!0)}}}loadExternal(e){const t=new Fn(e);return t.load().then(r=>{this._addCategories(r.categories,this._options.replaceCategories)})}_addCategories(e,t=!1,r=!1){t?this._categories=e.slice(0):r?this._categories=this._mergeCategories(e,this._categories):this._categories=this._mergeCategories(this._categories,e),this._updateCategoriesMap(),this._updateAllCategory()}_mergeCategories(e,t){e=_i.cloneCategories(e,"stickers");for(const r of t){let i=!1;for(const o of e)if(r.identifier===o.identifier){for(const n of r.stickers){let s=!1;for(const a of o.stickers)if(n.identifier===a.identifier){Object.assign(a,n),s=!0;break}s||o.stickers.push(n)}i=!0;break}i||e.push(r)}return e}_updateCategoriesMap(){this._categoriesById={},this._categories.forEach(e=>{this._categoriesById[e.identifier]=e}),this._categories.forEach(e=>{e.stickers.forEach(t=>{this._stickersById[t.identifier]=t})}),typeof this._options.availableStickers!="undefined"&&this._options.availableStickers!==null&&(this._categories.forEach(e=>{e.identifier!==gE&&(e.stickers=e.stickers.filter(t=>this._options.availableStickers.indexOf(t.identifier)!==-1))}),this._categories=this._categories.filter(e=>e.stickers.length>0)),this._updateAllCategory()}_updateAllCategory(){this._allCategory={identifier:"all",defaultName:"All",stickers:this._categories.map(e=>e.stickers).reduce((e,t)=>e.concat(t),[])},this._categoriesById.all=this._allCategory}renderStickerThumbnailFromImage(e){const t=this._customStickerCanvas,r=t.getContext("2d");r.save();const i=62,o=i/e.width,n=o*e.height;t.width=i,t.height=i,r.clearRect(0,0,e.width,e.height),r.translate(0,.5*(t.height-n)),r.scale(o,o),r.drawImage(e,0,0);const s=t.toDataURL("image/png");return r.restore(),{data:s,width:i,height:n}}addCustomStickerFromImage(e,t,r="none"){const i=f=>{const w=this._ui.getEditor().getSDK(),T=w.getRenderer(),C=new $e(f.width,f.height),F=this._ui.getEditor().getMaxMegapixels()*1e6;let k=T.getMaxDimensions();const E=C.x*C.y>F,W=k!==null&&(C.x>k||C.y>k);if(E){const D=f.width/f.height,B=f.height/f.width;k=new $e(Math.sqrt(F*D),Math.sqrt(F*B)).floor().max()}const K=C.clone();return(E||W)&&(C.x/C.y>1?(K.x=k,K.y=k/C.x*C.y):(K.x=k/C.y*C.x,K.y=k)),K},o=(f,w)=>{const T=f.x/f.y;return T>1?new $e(w,w/T):new $e(w*T,w)},n=e.src.substring(0,14)==="data:image/svg",s=this._ui.getEditor().getSDK();e=s.correctExifOrientation(e);const a=o(new $e(e.width,e.height),2048),l=n?a:i(e),c=this._customStickerCanvas,d=c.getContext("2d");d.save();const u=this.renderStickerThumbnailFromImage(e);n?(e.width>e.height?(c.width=2048,c.height=2048/e.width*e.height):(c.height=2048,c.width=2048/e.height*e.width),e.width=c.width,e.height=c.height):(c.width=l.x,c.height=l.y,d.scale(l.x/e.width,l.y/e.height)),d.drawImage(e,0,0,e.width,e.height);const p=c.toDataURL();d.restore();const h={identifier:j.generateUUID(),defaultName:t||"",tintMode:r,images:{mediaThumb:{uris:[u.data],rawData:!0,width:u.width,height:u.height},mediaBase:{uris:n?[p,e.src]:[p],rawData:!0,isSVG:n,width:l.x,height:l.y}}},b=this._dynamicAssetsLibrary;b.addAsset("sticker",h,!0);const y=b.getAssets("sticker");if(y.length===1){const f=this._createCustomStickerCategory(y);this._addCategories([f],!1,!0)}else this.getCategory(gE).stickers=y,this._updateAllCategory();this._updateCategoriesMap()}_createCustomStickerCategory(e){return{identifier:gE,defaultName:"Custom",metaData:{backgroundImage:e[e.length-1].images.mediaBase.uris[0],rawData:!0},stickers:e}}getStickersForCategory(e){if(!this._categoriesById[e])throw new Error(`Unknown sticker category '${e}'`);return this._categoriesById[e].stickers}getStickerByIdentifier(e){return this._stickersById[e]}getCategories(e=!1){return e?[this._allCategory].concat(this._categories):this._categories}getCategory(e){return this._categoriesById[e]}static getURLForSticker(e,t="base"){const{images:r}=e,i=t==="base"&&r.mediaBase||r.mediaThumb,o=i.uris||[i.uri];if(!_i.Browser.getIEVersion()){const s=o.filter(a=>/\.svg$/i.test(a));return s.length?s[0]:o[0]}const n=o.filter(s=>!/\.svg$/i.test(s));return n.length?n[0]:o[0]}}const uK=_(r0());let bE;typeof me.Operations.SpriteOperation!="undefined"&&(bE=me.Operations.SpriteOperation.BrushSprite);class $p{constructor(e,t){this._editor=e,this._ui=this._editor.getUI(),this._data=t,this._filterManager=new Rs(this._ui,this._getOptions("filter")),this._stickerManager=new kd(this._ui,this._getOptions("sticker")),this._brushManager=new fE(this._ui,this._getOptions("brush")),this._fontManager=new xi(this._ui,this._getOptions("text"))}_getOptions(e){const{controls:t}=this._editor;let r={};t&&t.get(e)&&(r=t.get(e).defaultOptions);const i=this._editor.getOptions();return mt.deepDefaults({},i.editor.controlsOptions[e]||{},r)}deserialize(){return this._validateVersion().then(()=>this._deserializeInputImage()).then(()=>this._deserializeOperations())}_validateVersion(){return this._data.version!==this.constructor.version?Promise.reject(new Error(`Invalid version ${this._data.version}, expected ${this.constructor.version}`)):Promise.resolve()}_deserializeInputImage(){return new Promise((e,t)=>{const{data:r,type:i}=this._data.inputImage;if(r&&i){const o=new window.Image;o.addEventListener("load",()=>{this._editor.setImage(o),e()}),o.src=`data:${i};base64,${r}`}else e()})}_deserializeOperations(){return se(this,null,function*(){const{operations:e}=this._data;return uK.default(e,t=>se(this,null,function*(){return this._deserializeOperation(t)}))})}_deserializeOperation(e){switch(e.type){case"crop":return this._deserializeCropOperation(e);case"orientation":return this._deserializeOrientationOperation(e);case"filter":return this._deserializeFilterOperation(e);case"adjustments":return this._deserializeAdjustmentsOperation(e);case"sprite":return this._deserializeSpriteOperation(e);case"focus":return this._deserializeFocusOperation(e)}}_deserializeCropOperation(e){const{options:t}=e;let{rotation:r}=t;const i=$e.fromObject(t.start),o=$e.fromObject(t.end);r>Math.PI&&(r-=Math.PI*2);const n={start:i,end:o};typeof r!="undefined"&&(n.rotation=r);const s=this._editor.operations.getOrCreate("transform");return this._editor.broadcastTransform(s,n),s.set(n),Promise.resolve(s)}_deserializeOrientationOperation(e){const{options:t}=e,r=this._editor.operations.getOrCreate("orientation");return r?(r.set(t),Promise.resolve(r)):Promise.resolve()}_deserializeFilterOperation(e){const{options:t}=e;return this._filterManager.getFilterByIdentifier(t.name)?this._filterManager.instantiateFilterWithIdentifier(t.name).then(r=>{const i=this._editor.operations.getOrCreate("filter");return i.set({identifier:t.name,filter:r,intensity:t.intensity}),i}):(ie.warn("Deserializer",`Unknown filter \`${t.name}\``),Promise.resolve())}_deserializeAdjustmentsOperation(e){const{AdjustmentsOperation:t}=me.Operations,{options:r}=e,i=["brightness","saturation","contrast","exposure","shadows","highlights","clarity"],o={};return i.forEach(n=>{if(typeof r[n]=="undefined")return;const{minValue:s,midValue:a,maxValue:l}=t.prototype.availableOptions[n];let c=r[n];c=c<0?a+(a-s)*c:a+(l-a)*c,o[n]=c}),Promise.resolve(this._editor.operations.getOrCreate("adjustments",o))}_deserializeSpriteOperation(e){const{options:t}=e,r=this._editor.operations.getOrCreate("sprite");if(!r)return Promise.resolve();const i=t.sprites.map(o=>this._deserializeSprite(r,o)).filter(o=>o);return Promise.all(i).then(o=>(r.setSprites(o.filter(n=>n)),r))}_deserializeSprite(e,t){switch(t.type){case"sticker":return this._deserializeSticker(e,t);case"text":return this._deserializeText(e,t);case"brush":return this._deserializeBrush(e,t);case"textdesign":return this._deserializeTextDesign&&this._deserializeTextDesign(e,t)}}_deserializeSticker(e,t){const{SpriteOperation:r}=me.Operations,{options:i}=t,o=this._stickerManager.getStickerByIdentifier(i.name),n=this._stickerManager.getURLForSticker(o);return o?new Promise((s,a)=>{const l=new window.Image;l.addEventListener("load",()=>{const c=r.StickerSprite.prototype.availableOptions.adjustments.structure,{rotation:d,flipHorizontally:u,flipVertically:p}=i,h={identifier:i.name,image:l,position:$e.fromObject(i.position),dimensions:$e.fromObject(i.dimensions),rotation:d,flipHorizontally:u,flipVertically:p,adjustments:{}};typeof i.adjustments!="undefined"&&["brightness","contrast","saturation"].forEach(b=>{typeof i.adjustments[b]!="undefined"&&(h.adjustments[b]=i.adjustments[b]+c[b].default)}),s(e.createSticker(h))}),l.crossOrigin=this._editor.getCrossOrigin(),l.src=this._editor.getUI().getAssetPath(n)}):(ie.warn("Deserializer",`Unknown sticker '${i.name}'. Skipping sprite.`),Promise.resolve())}_deserializeText(e,t){const{options:r}=t,{fontSize:i,lineHeight:o,fontFamily:n,fontWeight:s,alignment:a,rotation:l,maxWidth:c,color:d,backgroundColor:u}=r,p=new Td(this._ui);let h=this._fontManager.getFontByFontFamily(n);return h||(h=this._fontManager.getDefaultFont()),p.setFonts([h]),p.load().then(()=>{const b=e.createText({fontSize:i,lineHeight:o,fontFamily:n,fontWeight:s,alignment:a,rotation:l,maxWidth:c,text:r.text,color:tt.fromArray(d),backgroundColor:tt.fromArray(u),position:$e.fromObject(r.position)});return b._edited=!0,b})}_deserializeBrush(e,t){const{options:r}=t,{paths:i}=r,o=e.createBrush();return i.forEach(n=>{this._deserializeBrushPath(o,n)}),Promise.resolve(o)}_deserializeBrushPath(e,t){const{points:r}=t,i=this._createBrushForPath(t),o=e.createPath(i);o.setClosed(!0),r.forEach(n=>{o.addControlPoint($e.fromObject(n))})}_createBrushForPath(e){const{color:t,size:r}=e,i=tt.fromArray(t),o={color:i,size:r},n=this._brushManager.getFirstBrush();if(n.prototype&&n.prototype instanceof bE){const l=n;return new l(o)}const s=v({},n);delete s.image;class a extends bE{}return a.identifier=n.identifier,new a(v(v({},s),o))}_deserializeFocusOperation(e){const{options:t}=e.options;switch(e.options.type){case"radial":{const{position:r,radius:i,gradientRadius:o,blurRadius:n}=t;return Promise.resolve(this._editor.operations.getOrCreate("radial-focus",{position:$e.fromObject(r),radius:i,gradientRadius:o,blurRadius:n}))}case"linear":{const{start:r,end:i,size:o,gradientSize:n,blurRadius:s}=t;return Promise.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:$e.fromObject(r),end:$e.fromObject(i),size:o,gradientSize:n,blurRadius:s}))}}}_getInputDimensionsForOperation(e){let t=!1,r=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach(i=>{if(i===e&&(t=!0),t)return;r=i.getNewDimensions(r)}),r}}$p.version="1.0.0";const Yp=Math.PI*2;class Xp{constructor(e){this._editor=e,this._serializeOperations=this._serializeOperations.bind(this)}serialize(e={}){this._options=v(v({},e),{image:!0});const t={version:this.constructor.version};return this._serializeInputImage(t).then(this._serializeOperations)}_serializeInputImage(e){const t=this._editor.getImage(),{width:r,height:i}=t;if(!this._options.image)return e.inputImage={width:r,height:i},Promise.resolve(e);const o=mt.createCanvas();o.width=t.width,o.height=t.height;const n=o.getContext("2d");n.drawImage(t,0,0);const s=o.toDataURL(lE.PNG);return e.inputImage={type:lE.PNG,data:s.replace(/^data:image\/(.*?);base64,/,""),width:r,height:i},Promise.resolve(e)}_serializeOperations(e){const t=[],r=this._editor.operations.getStack();return r.forEach(i=>{const o=this._serializeOperation(i,t);o&&t.push(o)}),e.operations=t.filter(i=>i),Promise.resolve(e)}_serializeOperation(e,t){switch(e.constructor.identifier){case"transform":return this._serializeTransformOperation(e);case"orientation":return this._serializeOrientationOperation(e);case"filter":return this._serializeFilterOperation(e);case"adjustments":return this._serializeAdjustmentsOperation(e);case"sprite":return this._serializeSpriteOperation(e,t);case"radial-focus":return this._serializeRadialFocusOperation(e);case"mirrored-focus":return this._serializeLinearFocusOperation(e);default:ie.warn(`Unable to serialize operation of type ${e.constructor.identifier}`)}}_serializeTransformOperation(e){const t=e.serializeOptions(["start","end","rotation"],!0);return t.rotation=(t.rotation+Yp)%Yp,{type:"crop",options:t}}_serializeOrientationOperation(e){return{type:"orientation",options:e.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}_serializeFilterOperation(e){return e.getIdentifier()==="identity"?null:{type:"filter",options:{intensity:e.getIntensity(),name:e.getIdentifier()}}}_serializeAdjustmentsOperation(e){const{availableOptions:t}=e,r=["brightness","saturation","contrast","exposure","shadows","highlights","clarity"],i={};return r.forEach(o=>{const n=t[o],s=e.getOption(o),{minValue:a,midValue:l,maxValue:c}=n;i[o]=s<=l?(s-a)/(l-a)-1:(s-l)/(c-l)}),{type:"adjustments",options:i}}_serializeSpriteOperation(e,t){const r=t.filter(n=>n.type==="sprite");let i,o=!0;if(r.length?(i=r.pop(),o=!1):i={type:"sprite",options:{sprites:[]}},e.getSprites().forEach(n=>{let s=null;n instanceof e.constructor.StickerSprite?s=this._serializeSticker(e,n):n instanceof e.constructor.TextSprite?s=this._serializeText(e,n):n instanceof e.constructor.BrushSprite?s=this._serializeBrush(e,n):n instanceof e.constructor.TextDesignSprite&&(s=this._serializeTextDesign&&this._serializeTextDesign(e,n)),s&&i.options.sprites.push(s)}),o)return i}_serializeSticker(e,t){const r=t.getAdjustments(),i=t.serializeOptions(["identifier","position","dimensions","flipVertically","flipHorizontally","rotation"],!0);i.name=i.identifier,delete i.identifier,i.rotation=(i.rotation+Yp)%Yp;const o=r.availableOptions;return i.adjustments={brightness:r.getBrightness()-o.brightness.default,saturation:r.getSaturation()-o.saturation.default,contrast:r.getContrast()-o.contrast.default},{type:"sticker",options:i}}_serializeText(e,t){const r=t.serializeOptions(["fontSize","lineHeight","fontFamily","fontWeight","alignment","color","backgroundColor","position","rotation","text","maxWidth"],!0);return r.rotation=(r.rotation+Yp)%Yp,{type:"text",options:r}}_serializeBrush(e,t){return{type:"brush",options:{paths:t.getPaths().map(r=>this._serializePath(r))}}}_serializePath(e){const t=e.getBrush().serializeOptions(["color","size"],!0);return t.points=e.getControlPoints().map(r=>r.getPosition().toObject()),t}_serializeRadialFocusOperation(e){return{type:"focus",options:{type:"radial",options:e.serializeOptions(["position","radius","gradientRadius","blurRadius"],!0)}}}_serializeLinearFocusOperation(e){return{type:"focus",options:{type:"linear",options:e.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}_getInputDimensionsForOperation(e){let t=!1,r=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach(i=>{if(i===e&&(t=!0),t)return;r=i.getNewDimensions(r)}),r}}Xp.version="1.0.0";class Jp extends $p{_deserializeOperation(e){return e.type==="selective-blur"?this._deserializeSelectiveBlurOperation(e):super._deserializeOperation(e)}_deserializeCropOperation(e){const{options:t}=e;let{rotation:r}=t;const i=$e.fromObject(t.start),o=$e.fromObject(t.end),n=t.dimensions?$e.fromObject(t.dimensions):null;if(o.x-i.x<=0||o.y-i.y<=0)throw new Error(`A crop should not result in negative or zero dimensions - start: ${i} - end: ${o}`);r>Math.PI&&(r-=Math.PI*2);const s={start:i,end:o};typeof r!="undefined"&&(s.rotation=r);const a=this._editor.operations.getOrCreate("transform");if(!a)return Promise.resolve();if(this._editor.broadcastTransform(a,s),a.set(s),n){const l=o.clone().subtract(i),c=a.getInputDimensions(!1).multiply(l);a.setTextureScale(n.x/c.x)}return Promise.resolve(a)}}Jp.version="1.0.1";const hK=Math.PI*2;class Zp extends Xp{_serializeTransformOperation(e){const t=e.serializeOptions(["start","end","rotation","textureScale"],!0);return t.rotation=(t.rotation+hK)%hK,t.textureScale!==1&&(t.dimensions=e.getNewDimensions(e.getInputDimensions(!1))),delete t.textureScale,{type:"crop",options:t}}}Zp.version="1.0.1";const{OptionType:Qp}=me;class f0 extends me.Configurable{constructor(e,t={}){super(t);this._loaded=!1,this._loading=!1,this._ui=e,this._frame=me.Utils.deepClone(this._options)}load(){if(this._loaded)return Promise.resolve();if(this._loading)return Promise.reject(new Error("Called Frame#load while it's already loading"));this._loading=!0;const{imageGroups:e}=this._frame,t=[];return["top","left","right","bottom"].forEach(r=>{if(!(r in e))return;const i=e[r];["start","mid","end"].forEach(o=>{if(!(o in i))return;t.push(this._loadPart(r,o))})}),Promise.all(t).then(()=>{this._loaded=!0,this._loading=!1}).catch(r=>{this._loaded=!1,this._loading=!1})}_loadPart(e,t){const{imageGroups:r}=this._frame,i=r[e][t];let o=i;return typeof i!="string"&&"image"in i&&(o=i.image),ho.load(this._ui.getAssetPath(o)).then(n=>(typeof i!="string"?this._frame.imageGroups[e][t].image=n:this._frame.imageGroups[e][t]=n,n))}getFrame(){return this._frame}}f0.prototype.availableOptions={identifier:{type:Qp.STRING,required:!0},defaultName:{type:Qp.STRING},thumbnail:{type:Qp.STRING},tintable:{type:Qp.BOOLEAN,default:!1},layoutMode:{type:Qp.STRING,default:"horizontal-inside",available:["horizontal-inside","vertical-inside"]},imageGroups:{type:Qp.OBJECT,required:!0}};class _E{constructor(e,t){this._ui=e,this._options=t,this._categoriesById={},this._categories=[],this._framesById={},this._addCategories(za.DEFAULTS.FRAME_CATEGORIES),this._customAssetsAllowed=e.getEditor().getSDK()._l.areCustomAssetsAllowed();const{categories:r,replaceCategories:i}=this._options;this._customAssetsAllowed&&this._options.categories?this._addCategories(r,i):this._updateAllCategory()}_addCategories(e,t=!1){t?this._categories=e.slice(0):this._categories=_i.mergeCategories(this._categories,e,"frames"),this._categoriesById={},this._categories.forEach(i=>{this._categoriesById[i.identifier]=i});const{availableFrames:r}=this._options;this._customAssetsAllowed&&r&&this._categories.forEach(i=>{i.frames=i.frames.filter(o=>r.indexOf(o.identifier)!==-1)}),this._categories.forEach(i=>{i.frames.forEach(o=>{this._framesById[o.identifier]=o})}),this._updateAllCategory()}_updateAllCategory(){this._allCategory={identifier:"all",defaultName:"All",frames:this._categories.map(e=>e.frames).reduce((e,t)=>e.concat(t),[])},this._categoriesById.all=this._allCategory}getFramesForCategory(e){if(!this._categoriesById[e])throw new Error(`Unknown frame category '${e}'`);return this._categoriesById[e].frames}getFrameByIdentifier(e){return this._framesById[e]}getCategories(){return this._categories}getCategory(e){return this._categoriesById[e]}}class xE{constructor(e,t){this._ui=e,this._options=t,this._overlays=za.DEFAULTS.OVERLAYS.slice(0),this._overlaysByIdentifier={};const r=e.getEditor().getSDK()._l.areCustomAssetsAllowed();r&&t.overlays&&(t.replaceOverlays?this._overlays=t.overlays:this._overlays=this._overlays.concat(t.overlays)),r&&t.availableOverlays&&(this._overlays=this._overlays.filter(i=>t.availableOverlays.indexOf(i.identifier)!==-1)),this._overlays.forEach(i=>{this._overlaysByIdentifier[i.identifier]=i})}getOverlays(){return this._overlays}getOverlayByIdentifier(e){return this._overlaysByIdentifier[e]}}const{OverlayFilter:Ka}=me.Engine.Filters;var eh={[Ka.BLEND_MODES.NORMAL]:"normal",[Ka.BLEND_MODES.OVERLAY]:"overlay",[Ka.BLEND_MODES.HARD_LIGHT]:"hard light",[Ka.BLEND_MODES.SOFT_LIGHT]:"soft light",[Ka.BLEND_MODES.MULTIPLY]:"multiply",[Ka.BLEND_MODES.DARKEN]:"darken",[Ka.BLEND_MODES.LIGHTEN]:"lighten",[Ka.BLEND_MODES.SCREEN]:"screen",[Ka.BLEND_MODES.COLOR_BURN]:"color burn"};const COe=mt.flipObject(eh);class th extends Jp{constructor(...e){super(...e);this._frameManager=new _E(this._ui,this._getOptions("frame"));const t=this._getOptions("overlay");t&&(this._overlayManager=new xE(this._ui,t))}_deserializeSprite(e,t){return t.type==="frame"?this._deserializeFrame(e,t):t.type==="overlay"?this._deserializeOverlay(e,t):super._deserializeSprite(e,t)}_deserializeOperation(e){return e.type==="transform"?this._deserializeTransformOperation(e):super._deserializeOperation(e)}_deserializeOrientationOperation(e){if(this._data.meta&&this._data.meta.platform!=="html5")return super._deserializeOrientationOperation(e);const{rotation:t,flipHorizontally:r,flipVertically:i}=e.options;let o=t===90&&!r&&!i;return o|=t===90&&r&&i,o|=t===270&&!r&&!i,o|=t===270&&r&&i,o&&(e.options.flipHorizontally=!e.options.flipHorizontally,e.options.flipVertically=!e.options.flipVertically),super._deserializeOrientationOperation(e)}_deserializeTransformOperation(e){return super._deserializeCropOperation(e).then(t=>{if(!t)return;const r=mt.Array.find(this._data.operations,i=>i.type==="orientation");if(r){const{options:i}=r;let{rotation:o,flipHorizontally:n,flipVertically:s}=i;(o===90||o===270)&&((!n&&s||n&&!s)&&(n=!n,s=!s)),t.rotate(i.rotation),n&&(t.flip("horizontal"),t.setRotation(t.getRotation()*-1)),s&&(t.flip("vertical"),t.setRotation(t.getRotation()*-1))}return t})}_deserializeFrame(e,t){const{identifier:r}=t.options,i=this._frameManager.getFrameByIdentifier(r);if(!i)return ie.warn("Deserializer",`Unknown frame \`${r}\`. Skipping frame.`),Promise.resolve();const o=new f0(this._ui,i);return o.load().then(()=>{this._editor.operations.getOrCreate("frame",{frame:o.getFrame()})})}_deserializeOverlay(e,t){const{blendMode:r,intensity:i,identifier:o}=t.options,n=this._overlayManager.getOverlayByIdentifier(o);if(!n)return ie.warn("Deserializer",`Unknown overlay \`${o}\`. Skipping overlay.`),Promise.resolve();const s=this._editor.getUI().getAssetPath(n.image);return ho.load(s).then(a=>{this._editor.operations.getOrCreate("overlay",{alpha:i,identifier:o,blendMode:parseInt(COe[r||n.blendMode],10),image:a})})}_createBrushForPath(e){const t=super._createBrushForPath(e);return typeof e.hardness!="undefined"&&t.hasOption("hardness")&&t.setHardness(e.hardness),t}_deserializeSticker(e,t){const{SpriteOperation:r}=me.Operations,{options:i}=t,o=this._stickerManager.getStickerByIdentifier(i.identifier),n=kd.getURLForSticker(o,"base");if(!o)return ie.warn("Deserializer",`Unknown sticker \`${i.identifier}\`. Skipping sprite.`),Promise.resolve();const s=e.getInputDimensions(!1);return new Promise((a,l)=>{const c=new window.Image;c.addEventListener("load",()=>{const d=r.StickerSprite.prototype.availableOptions.adjustments.structure,{rotation:u,flipHorizontally:p,flipVertically:h}=i,b={identifier:i.identifier,image:c,position:$e.fromObject(i.position),dimensions:$e.fromObject(i.dimensions).multiply(s.min()),rotation:u,flipHorizontally:p,flipVertically:h,adjustments:{}};typeof i.adjustments!="undefined"&&["brightness","contrast","saturation"].forEach(y=>{typeof i.adjustments[y]!="undefined"&&(b.adjustments[y]=i.adjustments[y]+d[y].default)}),typeof i.tintColor!="undefined"&&typeof o.tintMode!="undefined"&&(b.tintColor=tt.fromArray(i.tintColor),b.tintMode=o.tintMode),a(e.createSticker(b))}),c.crossOrigin=this._editor.getCrossOrigin(),c.src=this._editor.getUI().getAssetPath(n)})}_deserializeFilterOperation(e){const{options:t}=e;return this._filterManager.getFilterByIdentifier(t.identifier)?this._filterManager.instantiateFilterWithIdentifier(t.identifier).then(r=>{const i=this._editor.operations.getOrCreate("filter");return i?(i.set({identifier:t.identifier,filter:r,intensity:t.intensity}),i):void 0}):(ie.warn("Deserializer",`Unknown filter \`${t.identifier}\``),Promise.resolve())}_deserializeFocusOperation(e){const{options:t,type:r}=e.options;if(r!=="radial")return super._deserializeFocusOperation(e);const i=this._editor.getImage(),o=i.width/i.height,{start:n,end:s,gradientRadius:a,blurRadius:l}=t,c=$e.fromObject(s).subtract($e.fromObject(n)).multiply(o,1).len();return Promise.resolve(this._editor.operations.getOrCreate("radial-focus",{position:$e.fromObject(n),radius:c,gradientRadius:a,blurRadius:l}))}_deserializeText(e,t){const{options:r}=t,{fontSize:i,lineHeight:o,fontIdentifier:n,alignment:s,rotation:a,maxWidth:l,color:c,backgroundColor:d}=r,u=new Td(this._ui);let p=this._fontManager.getVariationByIdentifier(n);return p?u.setFonts([p.getFont()]):p=this._fontManager.getDefaultFont(),u.load().then(()=>{const h=e.getInputDimensions(!1),b=l*h.min()/h.x,y=e.createText({fontSize:i,lineHeight:o,fontFamily:p.getFontFamily(),fontWeight:p.getFontWeight(),fontIdentifier:p.getIdentifier(),alignment:s,rotation:a,maxWidth:b,text:r.text,color:tt.fromArray(c),backgroundColor:tt.fromArray(d),position:$e.fromObject(r.position)});return y._edited=!0,y})}}th.version="2.0.0";class rh extends Zp{_serializeSticker(e,t){const r=e.getInputDimensions(!1),i=super._serializeSticker(e,t);return t.getTintMode()!=="none"&&(i.options.tintColor=t.serializeOption("tintColor",!0)),i.options.dimensions=t.getDimensions().clone().divide(r.min()).toObject(),i.options.identifier=i.options.name,delete i.options.name,i}_serializePath(e){const t=super._serializePath(e),r=e.getBrush();return r.hasOption("hardness")&&(t.hardness=r.getOption("hardness")),t}_serializeOperation(e,t){return e.constructor.identifier==="frame"?(this._serializeFrameOperation(e,t),null):e.constructor.identifier==="overlay"?(this._serializeOverlayOperation(e,t),null):super._serializeOperation(e,t)}_serializeFrameOperation(e,t){const r=t.filter(o=>o.type==="sprite");let i;r.length?i=r.pop():(i={type:"sprite",options:{sprites:[]}},t.push(i)),i.options.sprites.push({type:"frame",options:this._getFrameOptions(e)})}_serializeOverlayOperation(e,t){if(!e.getIdentifier())return;const r=t.filter(o=>o.type==="sprite");let i;r.length?i=r.pop():(i={type:"sprite",options:{sprites:[]}},t.push(i)),i.options.sprites.push({type:"overlay",options:{identifier:e.getIdentifier(),intensity:e.getAlpha(),blendMode:eh[e.getBlendMode()]}})}_getFrameOptions(e){return{identifier:e.getFrame().identifier}}_serializeOrientationOperation(e){const t=super._serializeOrientationOperation(e);return(t.options.rotation===90||t.options.rotation===270)&&(t.options.flipHorizontally=!t.options.flipHorizontally,t.options.flipVertically=!t.options.flipVertically),t}_serializeTransformOperation(e){const{operations:t}=this._editor;if(t.exists("orientation")){e=e.clone();const i=t.get("orientation");e.rotate(-i.getRotation()),i.getFlipVertically()&&(e.flip("vertical"),e.setRotation(e.getRotation()*-1)),i.getFlipHorizontally()&&(e.flip("horizontal"),e.setRotation(e.getRotation()*-1))}const r=super._serializeTransformOperation(e);return r.type="transform",r}_serializeText(e,t){const r=super._serializeText(e,t),i=e.getInputDimensions(!1);return r.options.fontIdentifier=t.getFontIdentifier(),r.options.maxWidth=r.options.maxWidth*i.x/i.min(),delete r.options.fontFamily,r}_serializeFilterOperation(e){const t=super._serializeFilterOperation(e);return t?(t.options.identifier=t.options.name,delete t.options.name,t):null}_serializeRadialFocusOperation(e){const t=super._serializeRadialFocusOperation(e),r=t.options.options;return r.start=r.position,delete r.position,r.end={x:r.start.x+r.radius,y:r.start.y},delete r.radius,t}}rh.version="2.0.0";let SE;typeof me.Operations.SpriteOperation!="undefined"&&(SE=me.Operations.SpriteOperation.BrushSprite.Brush);class ih extends th{_deserializeSticker(e,t){const{SpriteOperation:r}=me.Operations,{options:i}=t,o=this._stickerManager.getStickerByIdentifier(i.identifier);if(!o)return ie.warn("Deserializer",`Unknown sticker \`${i.identifier}\`. Skipping sprite.`),Promise.resolve();const{mediaBase:n}=o.images,s=kd.getURLForSticker(o,"base"),a=n.rawData?n.uris[0]:this._editor.getUI().getAssetPath(s),l=e.getInputDimensions(!1);return ho.load(a).then(c=>{const d=r.StickerSprite.prototype.availableOptions.adjustments.structure,{rotation:u,flipHorizontally:p,flipVertically:h}=i,b={identifier:i.identifier,image:c,position:$e.fromObject(i.position),dimensions:$e.fromObject(i.dimensions).multiply(l.min()),rotation:u||0,flipHorizontally:p,flipVertically:h,resizeMode:o.resizeMode||"keepAspect",adjustments:{}};return typeof i.adjustments!="undefined"&&["brightness","contrast","saturation"].forEach(y=>{typeof i.adjustments[y]!="undefined"&&(b.adjustments[y]=i.adjustments[y]+d[y].default)}),typeof i.tintMode!="undefined"&&typeof i.tintColor!="undefined"?(b.tintColor=tt.fromArray(i.tintColor.rgba),b.tintMode=i.tintMode):typeof i.tintColor!="undefined"&&typeof o.tintMode!="undefined"&&(b.tintColor=tt.fromArray(i.tintColor.rgba),b.tintMode=o.tintMode),typeof i.alpha!="undefined"&&(b.alpha=i.alpha),e.createSticker(b)})}_deserializeTransformOperation(e){return super._deserializeTransformOperation(e).then(t=>t?(t._ratio=null,t):void 0)}_deserializeInputImage(){let{data:e,type:t,uri:r}=this._data.image;return e&&t&&(r=`data:${t};base64,${e}`),r?ho.load(r).then(i=>{this._editor.setImage(i)}):Promise.resolve()}_deserializeAdjustmentsOperation(e){const{AdjustmentsOperation:t}=me.Operations;return super._deserializeAdjustmentsOperation(e).then(r=>{if(!r)return null;const{options:i}=e,o=["gamma","whites","blacks","temperature"],n={};return o.forEach(s=>{if(typeof i[s]=="undefined")return;const{minValue:a,midValue:l,maxValue:c}=t.prototype.availableOptions[s];let d=i[s];d=d<0?l+(l-a)*d:l+(c-l)*d,n[s]=d}),r.set(n),r})}_deserializeFocusOperation(e){const{options:t}=e.options;switch(e.options.type){case"radial":return super._deserializeFocusOperation(e);case"linear":{const{start:r,end:i,blurRadius:o}=t;return Promise.resolve(this._editor.operations.getOrCreate("linear-focus",{controlPoint1:$e.fromObject(r),controlPoint2:$e.fromObject(i),blurRadius:o}))}case"mirrored":{const{start:r,end:i,size:o,gradientSize:n,blurRadius:s}=t;return Promise.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:$e.fromObject(r),end:$e.fromObject(i),size:o,gradientSize:n,blurRadius:s}))}case"gaussian":{const{blurRadius:r}=t;return Promise.resolve(this._editor.operations.getOrCreate("blur",{blurRadius:r}))}}}_deserializeText(e,t){const{options:r}=t,{fontSize:i,lineHeight:o,fontIdentifier:n,alignment:s,rotation:a,maxWidth:l,color:c,backgroundColor:d}=r,u=this._ui.getFontLoader();let p=this._fontManager.getVariationByIdentifier(n);return p?u.setFonts([p.getFont()]):p=this._fontManager.getDefaultVariation(),u.load().then(()=>{const h=e.getInputDimensions(!1),b=l*h.min()/h.x,y=e.createText({fontSize:i,lineHeight:o,fontFamily:p.getFontFamily(),fontWeight:p.getFontWeight(),fontIdentifier:p.getIdentifier(),textMetrics:p.getTextMetrics(),alignment:s,rotation:a,maxWidth:b,text:r.text,color:tt.fromArray(c.rgba),backgroundColor:tt.fromArray(d.rgba),position:$e.fromObject(r.position)});return y._edited=!0,y})}_createBrushForPath(e){const{identifier:t,color:r,size:i,hardness:o}=e.brush,n=tt.fromArray(r.rgba),s={color:n,size:i};typeof o!="undefined"&&(s.hardness=o);let a=this._brushManager.getBrushByIdentifier(t);if(a||(a=this._brushManager.getFirstBrush()),a.prototype&&a.prototype instanceof SE){const d=a;return new d(s)}const l=v({},a);delete l.image;class c extends SE{}return c.identifier=a.identifier,new c(v(v({},l),s))}_deserializeFrame(e,t){return super._deserializeFrame(e,t).then(()=>{const r=this._editor.operations.get("frame"),{size:i,alpha:o,tintColor:n}=t.options,s={};typeof i!="undefined"&&(s.scale=i),typeof o!="undefined"&&(s.alpha=o),typeof n!="undefined"&&(s.tintColor=tt.fromArray(n.rgba)),r.set(s)})}_deserializeTextDesign(e,t){const{options:r}=t,{position:i,rotation:o,flipHorizontally:n,flipVertically:s,text:a,color:l,width:c,seed:d,inverted:u}=r;let{identifier:p}=r;p===me.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?p=me.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:p===me.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(p=me.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);const h=new zn(this._ui,this._getOptions("textdesign")),b=new xi(this._ui,{fonts:Ft.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),{AssetManager:y}=e.constructor.TextDesignSprite,f=this._ui.getFontLoader(),w=h.getLayoutByIdentifier(p),T=new w;return f.setFonts(b.getFonts()),y.setFonts(v(v({},y.getFonts()),b.getVariationsByIdentifier())),f.load().then(()=>{const C=T.getImagePaths().map(F=>({path:F,fullPath:this._ui.getAssetPath(F),image:null}));return y.loadImages(C).then(()=>(T.onImagesLoaded(),e.createTextDesign({position:i,rotation:o,flipHorizontally:n,flipVertically:s,text:a,color:tt.fromArray(l.rgba),width:c,seed:d,inverted:u,layout:T})))})}}ih.version="3.0.0";class oh extends Re{}oh.prototype.availableOptions={identifier:{type:g.STRING,required:!0},defaultName:{type:g.STRING,required:!0},ratio:{type:g.ALL,required:!1,default:null},selected:{type:g.BOOLEAN,required:!1},dimensions:{type:g.VECTOR2,required:!1},lockDimensions:{type:g.BOOLEAN,required:!1,default:null},forceDimensions:{type:g.BOOLEAN,required:!1,default:null}};class nh extends rh{serialize(e={}){return super.serialize(e).then(t=>(t.meta={platform:"html5",version:this._editor.getSDK().version,createdAt:mt.ISODateString(new Date)},t.image=t.inputImage,delete t.inputImage,t))}_serializeSticker(e,t){const r=super._serializeSticker(e,t);return r.options.alpha=t.getAlpha(),r.options.tintColor&&(r.options.tintColor={rgba:r.options.tintColor}),r}_serializeText(e,t){const r=super._serializeText(e,t);return r.options.color={rgba:r.options.color},r.options.backgroundColor={rgba:r.options.backgroundColor},r.options.flipHorizontally=!1,r.options.flipVertically=!1,delete r.options.fontWeight,r}_serializePath(e){const t=super._serializePath(e);delete t.hardness,delete t.size,delete t.color;const r=e.getBrush();t.brush=r.serializeOptions(["identifier","size","color"],!0),typeof t.brush.identifier=="undefined"&&delete t.brush.identifier,t.brush.color={rgba:t.brush.color};const i=r.getOption("hardness");return i!=="undefined"&&(t.brush.hardness=i),t}_serializeFrameOperation(e,t){super._serializeFrameOperation(e,t);const r=t.filter(o=>o.type==="sprite");let i;if(r.length){i=r.pop();const o=i.options.sprites.filter(a=>a.type==="frame")[0],n=e.getTintColor();n.equals(new tt(1,1,1,0))||(o.options.tintColor={rgba:e.serializeOption("tintColor",!0)});const s=e.serializeOptions(["scale","alpha"],!0);o.options=v(v({},o.options),s),o.options.size=o.options.scale,delete o.options.scale}}_serializeTransformOperation(e){const t=super._serializeTransformOperation(e);if(e._ratio){let r;e._ratio instanceof oh?r=e._ratio.getIdentifier():r=e._ratio.identifier,t.options.meta={identifier:r}}return delete t.options.scale,t}_serializeAdjustmentsOperation(e){const t=super._serializeAdjustmentsOperation(e),r=["gamma","whites","blacks","temperature"],{availableOptions:i}=e,o={};return r.forEach(n=>{const s=i[n],a=e.getOption(n),{minValue:l,midValue:c,maxValue:d}=s;o[n]=a<=c?(a-l)/(c-l)-1:(a-c)/(d-c)}),t.options=v(v({},t.options),o),t}_serializeOperation(e,t){switch(e.constructor.identifier){case"mirrored-focus":return this._serializeMirroredFocusOperation(e);case"linear-focus":return this._serializeLinearFocusOperation(e);case"blur":return this._serializeBlurOperation(e);default:return super._serializeOperation(e,t)}}_serializeMirroredFocusOperation(e){return{type:"focus",options:{type:"mirrored",options:e.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}_serializeLinearFocusOperation(e){const t=e.serializeOptions(["controlPoint1","controlPoint2","blurRadius"],!0);return t.start=t.controlPoint1,delete t.controlPoint1,t.end=t.controlPoint2,delete t.controlPoint2,{type:"focus",options:{type:"linear",options:t}}}_serializeBlurOperation(e){return{type:"focus",options:{type:"gaussian",options:e.serializeOptions(["blurRadius"],!0)}}}}nh.version="3.0.0";class sh extends ih{_deserializeTextDesign(e,t){const{options:r}=t,{position:i,rotation:o,flipHorizontally:n,flipVertically:s,text:a,color:l,width:c,seed:d,inverted:u}=r;let{identifier:p}=r;p===me.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?p=me.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:p===me.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(p=me.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);const h=new zn(this._ui,this._getOptions("textdesign")),b=new xi(this._ui,{fonts:Ft.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),{AssetManager:y}=e.constructor.TextDesignSprite,f=this._ui.getFontLoader(),w=h.getLayoutByIdentifier(p),T=new w;return f.setFonts(b.getFonts()),y.setFonts(v(v({},y.getFonts()),b.getVariationsByIdentifier())),f.load().then(()=>{const C=T.getImagePaths().map(F=>({path:F,fullPath:this._ui.getAssetPath(F),image:null}));return y.loadImages(C).then(()=>(T.onImagesLoaded(),e.createTextDesign({position:i,rotation:o,flipHorizontally:n,flipVertically:s,text:a,color:tt.fromArray(l.rgba),width:c,seed:d,inverted:u,layout:T})))})}}sh.version="3.1.0";class ah extends nh{_serializeTextDesign(e,t){const r=t.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted"],!0);r.color={rgba:r.color};const i=t.getLayout();return i&&(r.identifier=i.constructor.identifier),{type:"textdesign",options:r}}}ah.version="3.1.0";class lh extends sh{_deserializeTextDesign(e,t){const{options:r}=t,{position:i,rotation:o,flipHorizontally:n,flipVertically:s,text:a,color:l,width:c,seed:d,inverted:u}=r;let{identifier:p}=r;p===me.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?p=me.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:p===me.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(p=me.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);const h="padding"in r?r.padding/c:-1,b=new zn(this._ui,this._getOptions("textdesign")),y=new xi(this._ui,{fonts:Ft.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),{AssetManager:f}=e.constructor.TextDesignSprite,w=this._ui.getFontLoader(),T=b.getLayoutByIdentifier(p),C=new T;return w.setFonts(y.getFonts()),f.setFonts(v(v({},f.getFonts()),y.getVariationsByIdentifier())),w.load().then(()=>{const F=C.getImagePaths().map(k=>({path:k,fullPath:this._ui.getAssetPath(k),image:null}));return f.loadImages(F).then(()=>(C.onImagesLoaded(),e.createTextDesign({position:i,rotation:o,flipHorizontally:n,flipVertically:s,text:a,color:tt.fromArray(l.rgba),width:c,seed:d,inverted:u,layout:C,padding:h})))})}}lh.version="3.2.0";class ch extends ah{_serializeTextDesign(e,t){const r=t.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted","padding"],!0);r.color={rgba:r.color};const i=t.getLayout();return i&&(r.identifier=i.constructor.identifier),r.padding*=r.width,{type:"textdesign",options:r}}}ch.version="3.2.0";class dh extends lh{_deserializeOperation(e){return super._deserializeOperation(e)}_deserializeOrientationOperation(e){const{options:t}=e,r=this._editor.operations.getOrCreate("orientation");return r?(r.set(t),Promise.resolve(r)):Promise.resolve()}}dh.version="3.4.0";class uh extends ch{_serializeOperation(e,t){switch(e.constructor.identifier){case"artfilter":return this._serializeStyle(e);default:return super._serializeOperation(e,t)}}_serializeOrientationOperation(e){return{type:"orientation",options:e.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}_serializeStyle(e){const{identifier:t,intensity:r,blendMode:i}=e.getOptions(),{tileEdgeLength:o,overlappingFactor:n}=e.getStyleTransferModel().getOptions();return{type:"artFilter",options:{identifier:t,intensity:r,blendMode:eh[i],tileEdgeLength:o,overlappingFactor:n}}}}uh.version="3.4.0";class ph extends dh{_deserializeTextDesign(e,t){const{options:r}=t,{position:i,rotation:o,flipHorizontally:n,flipVertically:s,text:a,color:l,width:c,seed:d,inverted:u,identifier:p}=r,h="padding"in r?r.padding/c:-1,b=new zn(this._ui,this._getOptions("textdesign")),y=new xi(this._ui,{fonts:Ft.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),{AssetManager:f}=e.constructor.TextDesignSprite,w=this._ui.getFontLoader(),T=b.getLayoutByIdentifier(p),C=new T;return w.setFonts(y.getFonts()),f.setFonts(v(v({},f.getFonts()),y.getVariationsByIdentifier())),w.load().then(()=>{const F=C.getImagePaths().map(k=>({path:k,fullPath:this._ui.getAssetPath(k),image:null}));return f.loadImages(F).then(()=>(C.onImagesLoaded(),e.createTextDesign({position:i,rotation:o,flipHorizontally:n,flipVertically:s,text:a,color:tt.fromArray(l.rgba),width:c,seed:d,inverted:u,layout:C,padding:h})))})}}ph.version="3.5.0";class hh extends uh{}hh.version="3.5.0";class mh extends ph{_deserializeAdjustmentsOperation(e){const{AdjustmentsOperation:t}=me.Operations;return super._deserializeAdjustmentsOperation(e).then(r=>{if(!r)return null;const{options:i}=e,o="sharpness",n={};if(typeof i[o]=="undefined")return;const{minValue:s,midValue:a,maxValue:l}=t.prototype.availableOptions[o];let c=i[o];return c=c<0?a+(a-s)*c:a+(l-a)*c,n[o]=c,r.set(n),r})}}mh.version="3.6.0";class fh extends hh{_serializeAdjustmentsOperation(e){const t=super._serializeAdjustmentsOperation(e),r="sharpness",{availableOptions:i}=e,o={},n=i[r],s=e.getOption(r),{minValue:a,midValue:l,maxValue:c}=n;return o[r]=s<=l?(s-a)/(l-a)-1:(s-l)/(c-l),t.options=v(v({},t.options),o),t}}fh.version="3.6.0";class gh extends mh{deserialize(){return this._validateVersion().then(()=>this._deserializeAssetLibrary()).then(()=>this._deserializeInputImage()).then(()=>this._deserializeOperations())}_deserializeAssetLibrary(){return new Promise((e,t)=>{const r=this._data;if(!r.assetLibrary){e();return}const{assets:i}=r.assetLibrary,o=[];for(const n in i)o.push(this._deserializeCustomAssets(n,i[n]));return Promise.all(o).then(()=>{e()}).catch(n=>{console.error(n),t(n)})})}_deserializeCustomAssets(e,t){switch(e){case"stickers":return this._deserializeCustomStickerAssets(t);default:return Promise.reject(new Error(`Unknown asset type: ${e}`))}}_deserializeCustomStickerAssets(e){let t="none";const r=this._editor.getOptions().editor;r&&r.controlsOptions&&r.controlsOptions.sticker&&(t=r.controlsOptions.sticker.customStickerTintMode||"none");const i=e.map(o=>new Promise((n,s)=>{const{identifier:a,raster:l}=o,c=o.svg!==void 0;let d=`data:${l.type};base64,${l.data}`,u=new Bi;u.onload=()=>{const p=this._editor.getSDK();u=p.correctExifOrientation(u),u.toDataURL&&(d=u.toDataURL());let h={data:"",width:1,height:1};h=this._stickerManager.renderStickerThumbnailFromImage(u);const b={identifier:a,defaultName:o.name||"",tintMode:t,images:{mediaBase:{uris:[d],rawData:!0,isSVG:c,width:u.width,height:u.height},mediaThumb:{uris:[h.data],rawData:!0,width:h.width,height:h.height}}};if(c){const y=`data:image/svg+xml;base64,${o.svg.data}`;b.images.mediaBase.uris.push(y)}n(b)},u.onerror=()=>{s(new Error(`Invalid base64 data: ${d}`))},u.src=d}));return Promise.all(i).then(o=>{const n=this._editor.getDynamicAssetsLibrary();n.setAssets("sticker",o),this._stickerManager.reload()})}}gh.version="3.7.0";class bh extends fh{serialize(e={}){return super.serialize(e).then(t=>this._serializeAssetLibrary(t).then(r=>r))}_serializeAssetLibrary(e){if(!this._editor.getDynamicAssetsLibrary)return Promise.resolve(e);const t=this._editor.getDynamicAssetsLibrary(),r=this._serializeCustomStickerAssets(e,t);return r.length===0||(e.assetLibrary={assets:{stickers:r}}),Promise.resolve(e)}_serializeCustomStickerAssets(e,t){const r=t.getAssets("sticker");if(r.length===0)return[];const i=e.operations.filter(s=>s.type==="sprite").flatMap(s=>s.options.sprites).filter(s=>s.type==="sticker").map(s=>s.options.identifier),o={};i.forEach(s=>{o[s]=!0});const n=r.filter(s=>o[s.identifier]);return n.map(s=>{const{identifier:a,defaultName:l,images:c}=s,d=c.mediaBase.uris[0],{isSVG:u}=c.mediaBase,p=/^data:(image\/(jpeg|png));base64,(.*)$/g,h=p.exec(d),b=h[1],y=h[3],f={identifier:a,name:l,raster:{type:b,data:y}};return l&&(f.name=l),u&&(f.svg={data:c.mediaBase.uris[1].replace(/^data:image\/svg\+xml;base64,/g,"")}),f})}}bh.version="3.7.0";class yh extends gh{}yh.version="3.8.0";class vh extends bh{_serializeSticker(e,t){const r=super._serializeSticker(e,t);return r.options.tintMode=t.getTintMode(),r}}vh.version="3.8.0";class g0 extends yh{_deserializeTransformOperation(e){return super._deserializeCropOperation(e).then(t=>{if(!t)return;const r=mt.Array.find(this._data.operations,i=>i.type==="orientation");if(r){const{options:i}=r;t.rotate(i.rotation),i.flipHorizontally&&(t.flip("horizontal"),t.setRotation(t.getRotation()*-1)),i.flipVertically&&(t.flip("vertical"),t.setRotation(t.getRotation()*-1))}return t._ratio=null,t})}_deserializeText(e,t){const{options:r}=t,{fontSize:i,lineHeight:o,fontIdentifier:n,alignment:s,rotation:a,maxWidth:l,color:c,backgroundColor:d}=r,u=this._ui.getFontLoader();let p=this._fontManager.getVariationByIdentifier(n);return p?u.setFonts([p.getFont()]):p=this._fontManager.getDefaultVariation(),u.load().then(()=>{const h=e.getInputDimensions(!1),b=h.min(),y=h.x,f=h.y,w=l*b/y,T=i*b/f,C=e.createText({fontSize:T,lineHeight:o,fontFamily:p.getFontFamily(),fontWeight:p.getFontWeight(),fontIdentifier:p.getIdentifier(),textMetrics:p.getTextMetrics(),alignment:s,rotation:a,maxWidth:w,text:r.text,color:tt.fromArray(c.rgba),backgroundColor:tt.fromArray(d.rgba),position:$e.fromObject(r.position)});return C._edited=!0,C})}}g0.version="3.9.0";const CK=Math.PI*2;class b0 extends vh{_serializeTransformOperation(e){const{operations:t}=this._editor;if(t.exists("orientation")){e=e.clone();const o=t.get("orientation");o.getFlipVertically()&&(e.flip("vertical"),e.setRotation(e.getRotation()*-1)),o.getFlipHorizontally()&&(e.flip("horizontal"),e.setRotation(e.getRotation()*-1)),e.rotate(-o.getRotation())}const r=e.serializeOptions(["start","end","rotation","textureScale"],!0);r.rotation=(r.rotation+CK)%CK,r.textureScale!==1&&(r.dimensions=e.getNewDimensions(e.getInputDimensions(!1))),delete r.textureScale;const i={type:"transform",options:r};if(e._ratio){let o;e._ratio instanceof oh?o=e._ratio.getIdentifier():o=e._ratio.identifier,i.options.meta={identifier:o}}return delete i.options.scale,i}_serializeText(e,t){const r=e.getInputDimensions(!1),i=super._serializeText(e,t);return i.options.fontSize=i.options.fontSize*r.y/r.min(),i}}b0.version="3.9.0";class MOe extends mg{constructor(e,t,r,i=!1){super();this._ui=e,this._options=t,this._mediator=r,this._shallow=i,i||(this._initSDK(),this.operations=new dE(this,this._sdk,this._mediator))}_initFonts(){const e=mt.defaults(this._options.editor.controlsOptions.text,{additionalFonts:[],replaceFonts:!1,availableVariations:null});this._fontManager=new xi(this._ui,e);const t=this._fontManager.getFonts(),r=this._ui.getFontLoader();r.setFonts(t),r.load()}setImage(e=this._options.editor.image,t=!0){t&&this.reset();let r=null;r=this._sdk.parseExif(e),this._setImage(e,r),this._initWatermark()}_initWatermark(){this._options.editor.watermarkImage&&(this._watermarkOperation=this.operations.getOrCreate("watermark",{image:this._options.editor.watermarkImage}))}_initSDK(){const{logLevel:e,displayWelcomeMessage:t,debug:r,license:i,crossOrigin:o}=this._options,{smoothDownscaling:n,smoothUpscaling:s,preferredRenderer:a,pixelRatio:l,transparent:c,clearColor:d}=this._options.editor;let u;Array.isArray(d)?u=tt.fromArray(d):typeof d=="string"?u=tt.fromHex(d):d instanceof tt&&(u=d.clone());const p={logLevel:e,debug:r,displayWelcomeMessage:t,pixelRatio:l,smoothDownscaling:n,smoothUpscaling:s,transparent:c,crossOrigin:o,clearColor:u,license:i};this._sdk=new me(a,p)}getMaxMegapixels(){const{maxMegaPixels:e}=this._options.editor;return e}getCrossOrigin(){return mt.getCrossOriginValue(this._options.crossOrigin||"anonymous")}getOutputDimensions(e=!1){return this._sdk.getOutputDimensions(e)}getOutputTextureDimensions(e=!1){return this._sdk.getOutputTextureDimensions(e)}getFinalDimensions(e=!1){return this._sdk.getFinalDimensions(e)}_setImage(e=this._options.editor.image,t=null){this._sdk.setAllOperationsToDirty(),this._options.editor.image=e,this._sdk.setImage(e,t)}_ensureImageIsResized(){const e=this._sdk.getImage(),t=this._sdk.getRenderer(),r=this.getMaxMegapixels(),i=r?r*1e6:null,o=t.getMaxDimensions(),n=new uE(e,i,o);return!this._resizedImage&&n.needsResize()?n.resize().then(({canvas:s,dimensions:a,reason:l})=>(this._resizedImage=s,this._sdk.setImage(s),s)):Promise.resolve(e)}export(e=!1){return this._watermarkOperation&&this._watermarkOperation.setEnabled(!1),this._sdk.setAllOperationsToDirty(),this._ensureImageIsResized().then(t=>{const r=this._options.editor.export,i=new cE(this._sdk,r,e);return i.export().then(o=>(this.emit("export",o),this._mediator.emit(Ft.EVENTS.EXPORT,o,this),this._watermarkOperation&&(this._watermarkOperation.setEnabled(!0),this._sdk.render()),this._sdk.setAllOperationsToDirty(),o))})}broadcastTransform(e,t){const r=new me.Operations.TransformOperation.TransformChange(e,t),i=["sprite","selective-blur","radial-focus","mirrored-focus","linear-focus","blur"];i.forEach(o=>{const n=this.operations.get(o);if(!n)return;n.transform(r)})}broadcastFlip(e){const t=["mirrored-focus","radial-focus","linear-focus","sprite","selective-blur"];t.forEach(r=>{const i=this.operations.get(r);if(!i)return;i.flip(e)})}broadcastRotate(e){const t=["transform","mirrored-focus","linear-focus","radial-focus","sprite","selective-blur"];t.forEach(r=>{const i=this.operations.get(r);if(!i)return;i.rotate(e)})}_initSerializers(){this._serializers={"1.0.0":pK().default,"1.0.1":mK().default,"2.0.0":fK().default,"3.0.0":gK().default,"3.1.0":bK().default,"3.2.0":yK().default,"3.4.0":vK().default,"3.5.0":_K().default,"3.6.0":xK().default,"3.7.0":wK().default,"3.8.0":SK().default,"3.9.0":TK().default}}serialize(e={},t="3.9.0"){const r=this._serializers[t];if(!r)return Promise.reject(new Error(`No serializer for version ${t} found.`));const i=new r(this);return i.serialize(e)}deserialize(e){const t=this._serializers[e.version];if(!t)return Promise.reject(new Error(`No serializer for version ${e.version} found.`));const r=new t(this);return r.deserialize(e)}save(e=!1,t=!1){const r=this._options.editor.save;return this.serialize({image:t}).then(i=>{const o=JSON.stringify(i,null,2);if(e){const n=`data:text/json;charset=utf-8;base64,${window.encodeURI(window.btoa(o))}`;Kp.downloadDataURL(n,r.fileBasename)}return o})}reset(){this._sdk.reset(),this.operations.reset()}dispose(){this.stop(),this._sdk.dispose()}getRenderer(){return this._sdk.getRenderer()}getSDK(){return this._sdk}getInputDimensions(){return this._sdk.getInputDimensions()}getImage(){return this._sdk.getImage()}getOptions(){return this._options}getUI(){return this._ui}getMediator(){return this._mediator}}var kK=MOe;const _h=e=>mt.byteArrayToString(p0.decode(e));class dc extends mg{constructor(e={}){super();this._mediator=new mg,this._fontLoader=new Td(this),this._options=e,this._initOptions(),this._initEvents(),this._disposed=!1,this._isReady=!1,this._editor=new kK(this,this._options,this._mediator),this._options.editor.image&&this._editor.setImage(this._options.editor.image),this._mediator.once(Ft.EVENTS.EDITOR_READY,()=>{this._isReady=!0}),ie.setLevel(this._options.logLevel),this._v()}export(...e){return this._editor.export(...e)}serialize(...e){return this._editor.serialize(...e)}deserialize(e){return this._editor.deserialize(e)}getEditor(){return this._editor}isReady(){return this._isReady}onReady(e){this._isReady?e():this._mediator.once(Ft.EVENTS.EDITOR_READY,e)}createFilter(e){const t=new Rs(this,this._getOptions("filter"));return t.instantiateFilterWithIdentifier(e)}getTextDesignLayoutByID(e){const t=new zn(this,this._getOptions("textDesign"));return new(t.getLayoutByIdentifier(e))}getTextDesignAssetManager(){return me.Operations.SpriteOperation.TextDesignSprite.AssetManager}getTextDesignFontManager(){const e=new xi(this,{fonts:Ft.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0,isTextDesign:!0});return e}_getOptions(e){const t=this.getEditor(),{controls:r}=t;let i={};r&&r.get(e)&&(i=r.get(e).defaultOptions);const o=t.getOptions();return mt.deepDefaults({},o.editor.controlsOptions[e]||{},i)}_initOptions(){if(this._options=mt.defaults(this._options,{language:"en",logLevel:"warn",crossOrigin:"anonymous",editor:{},assets:{},responsive:!1,preloader:!0,autoRun:!0}),this._options.editor=mt.defaults(this._options.editor||{},{enableZoom:!0,enableDrag:!0,enableExport:!0,enableKeyboardControls:!0,enablePositionSnapping:!0,enableRotationSnapping:!0,enableSave:!1,enableLoad:!1,pixelRatio:typeof window!="undefined"&&window.devicePixelRatio||1,preferredRenderer:"webgl",transparent:!0,clearColor:[0,0,0,0],displayResizeMessage:!0,maxMegaPixels:{},displayCloseButton:!1,undoMode:"global",defaultControl:"filter",forceCrop:!1,snappingOptions:{},tools:["transform","filter","adjustments","focus","text","textdesign","sticker","brush","frame","overlay","library","artfilter"],controlsOrder:[["library"],["artfilter","transform","filter","adjustments","focus"],["text","textdesign","sticker","brush","frame","overlay"]],operationsOrder:["exif-orientation","artfilter","orientation","transform","filter","adjustments","radial-focus","mirrored-focus","linear-focus","blur","selective-blur","overlay","sprite","frame","watermark"],controlsOptions:{focus:{highQualityCanvasBlur:!1}}}),this._options.editor.snappingOptions=mt.defaults(this._options.editor.snappingOptions,{position:{},rotation:{}}),this._options.editor.snappingOptions.position=mt.defaults(this._options.editor.snappingOptions.position,{padding:{},threshold:20}),this._options.editor.snappingOptions.position.padding=mt.defaults(this._options.editor.snappingOptions.position.padding,{left:.1,right:.1,top:.1,bottom:.1}),this._options.editor.snappingOptions.rotation=mt.defaults(this._options.editor.snappingOptions.rotation,{angles:[0,45,90,135,180,225,270,315],threshold:20}),this._options.editor.controlsOptions.focus=mt.defaults(this._options.editor.controlsOptions.focus,{highQualityCanvasBlur:!1}),this._options.editor.maxMegaPixels=mt.defaults(this._options.editor.maxMegaPixels,{mobile:5,desktop:10}),this._options.editor.export=mt.defaults(this._options.editor.export||{},{format:"image/png",type:cc.IMAGE,download:!0,fileBasename:"photoeditorsdk-export",quality:.8}),this._options.editor.save=mt.defaults(this._options.editor.save||{},{format:"text/json",download:!0,fileBasename:"photoeditorsdk-save"}),this._options.extensions=mt.defaults(this._options.extensions||{},{languages:{},operations:[],controls:[]}),this._options.assets=mt.defaults(this._options.assets||{},{baseUrl:"assets",resolver:null}),!(this._options.editor.image instanceof window.Image)){const e=new window.Image;this._options.editor.image&&(e.src=this._options.editor.image,this._options.editor.image=e)}}_v(){return this[_h("X29wdGlvbnM=")][_h("bGljZW5zZQ==")]?!0:(ie.error(_h("TGljZW5zaW5n"),_h("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbg==")),ie.error(_h("TGljZW5zaW5n"),_h("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)}_initEvents(){this._mediator.pipeEvents(this)}_disposeEvents(){this._mediator.unpipeEvents(this)}setImage(e){this._editor.setImage(e)}getAssetPath(e,t=!1,r=!1){let{baseUrl:i,resolver:o}=this._options.assets,n=`${i}/${e}`;o=o||(c=>c),e.match(/(ftp|http|https):\/\//)&&(n=e);const s=e.replace(/assets\//,"").split("/"),a=s[0];let l={};switch(a){case"art-filters":return l={identifier:s[1],type:s[2].split(".")[0]},o("art-filter",l);case"filters":return l={identifier:s[1].replace(/\.png$/g,"")},o("filter",l);case"fonts":return l={identifier:s[1].replace(/\.(woff|otf|ttf)$/g,"")},o("font",l);case"frames":return l={identifier:s[1],filename:s[2]},o("frame",l);case"overlays":return l={identifier:s[1].replace(/\.(png|jpg|jpeg)$/g,"")},o("overlay",l);case"stickers":{const c=s[3].endsWith(".svg"),d=s[3]==="thumbs";return l={category:s[1],identifier:(c?s[3]:s[4]).replace(/\.(png|svg)$/g,""),variant:c?"svg":d?"thumb":"base"},o("sticker",l)}case"text-design":return l={type:s[1]==="fonts"?"font":"image",identifier:s[2].replace(/\.(png|otf|ttf|woff2?)$/g,"")},o("text-design",l)}return typeof o!="undefined"&&o!==null&&(n=o(n)),n}getFontLoader(){return this._fontLoader}dispose(){if(this._disposed)throw new Error("This instance of PhotoEditorSDK is already disposed.");this._disposed=!0,this._disposeEvents()}render(e){return this.deserialize(e).then(()=>this.export())}}dc.prototype.identifier="engine-wrapper";dc.Constants=Ft;dc.Events=Ft.EVENTS;dc.Utils=_i;dc.JSONLoader=Fn;dc.SDK=me;const be={};Tt(be,{absoluteToRelativePoint:()=>GOe,absoluteToRelativeSize:()=>jOe,getBaseLocalToWorldMatrix:()=>y0,getLocalToParentMatrix:()=>DK,getLocalToWorldMatrix:()=>xh,getPointInWorldSpace:()=>ME,getRotationBetweenCoordinateSpaces:()=>WOe,getScalarInWorldSpace:()=>zOe,getSizeInOutputSpace:()=>NOe,getSizeInWorldSpace:()=>IK,pointFromSpaceToSpace:()=>gg,rectTransformToAffineTransform:()=>FE,relativeToAbsolutePoint:()=>qOe,relativeToAbsoluteSize:()=>UOe,scalarFromSpaceToSpace:()=>PE,sizeFromSpaceToSpace:()=>LOe});function EK(e){return e.x!==void 0}function FE(e){return Ae.fromTRS(e.position.x,e.position.y,e.rotation,e.scale.x,e.scale.y)}function BOe(e){return e.getBaseLocalToParentMatrix?e.getBaseLocalToParentMatrix():FE(e.getTransform())}function y0(e){const t=e.getParent(),r=BOe(e);if(t===void 0)return r;const i=y0(t);return Ae.multiply(i,r)}function DK(e){return e.getLocalToParentMatrix?e.getLocalToParentMatrix():FE(e.getTransform())}function xh(e){const t=e.getParent(),r=DK(e);if(t===void 0)return r;const i=xh(t);return Ae.multiply(i,r)}function gg(e,t,r,i=!1){const o=t.type==="output"&&i?y0(t):xh(t),n=r.type==="output"&&i?y0(r):xh(r),s=Ae.getInverted(n);return Ae.transformPoint(s,Ae.transformPoint(o,e))}function PE(e,t,r){const i=new O(e,0),o=new O(gg(i,t,r)),n=new O(gg(O.ZERO,t,r));return O.distance(n,o)}function LOe(e,t,r){const i=EK(e)?e.x:e.width,o=EK(e)?e.y:e.height,n=PE(i,t,r),s=PE(o,t,r);return{width:n,height:s}}function ME(e,t){const r=xh(t);return Ae.transformPoint(r,e)}function zOe(e,t){const r=new O(e,0),i=new O(ME(r,t)),o=new O(ME(O.ZERO,t));return O.distance(i,o)}function IK(e){const t=xh(e),r=e.getBounds(),i={x:r.width,y:0},o={x:0,y:r.height},n=new O(Ae.transformPoint(t,O.ZERO)),s=new O(Ae.transformPoint(t,i)),a=new O(Ae.transformPoint(t,o)),l=O.distance(n,s),c=O.distance(n,a);return{width:l,height:c}}function NOe(e,t){const r=IK(e),i=t.getTransform().scale,o={x:1/i.x,y:1/i.y},n={width:r.width*o.x,height:r.height*o.y};return n}function UOe(e,t){const r=t.getBounds();return{width:e.width*r.width,height:e.height*r.height}}function jOe(e,t){const r=t.getBounds();return{width:e.width/r.width,height:e.height/r.height}}function qOe(e,t,r=!0){const i=t.getBounds();return{x:e.x*i.width+(r?0:i.minX),y:e.y*i.height+(r?0:i.minY)}}function GOe(e,t,r=!0){const i=t.getBounds();return{x:(e.x-(r?0:i.minX))/i.width,y:(e.y-(r?0:i.minY))/i.height}}function WOe(e,t){const r={x:1,y:0},i=gg(r,e,t,!0),o=gg(O.ZERO,e,t,!0);return Math.atan2(i.y-o.y,i.x-o.x)}function v0(e){return typeof e!="string"&&!Array.isArray(e)&&e.a===void 0}function _0(e){return typeof e!="string"&&Array.isArray(e)&&e.length===3}function x0(e){return typeof e!="string"&&!Array.isArray(e)&&e.a!==void 0}function w0(e){return typeof e!="string"&&Array.isArray(e)&&e.length===4}function OK(e){return typeof e=="string"}var uc;(function(e){e.BEGAN_IMAGE_DOWNSCALING="beganImageDownscaling",e.IMAGE_DOWNSCALED="imageDownscaled"})(uc||(uc={}));class AK{constructor(e,t){this.engine=t;this.transform=Dt.IDENTITY;this.canvasPivot={x:0,y:0};this.previewQuality=1;this.canvas=e}get quality(){return this.previewQuality}setQuality(e){this.previewQuality=Math.min(Math.max(e,.01),1)}getTransform(){return this.transform}setTransform(e){this.transform=e}getPosition(){return this.transform.position}setPosition(e,t){let r;typeof e=="number"?r={x:e,y:t===void 0?e:t}:r=e;const{scale:i}=this.transform,{rotation:o}=this.transform;this.setTransform(new Dt(r,i,o))}getScale(){return this.transform.scale}setScale(e,t){let r;typeof e!="number"?r=e:r={x:e,y:t===void 0?e:t};const{position:i}=this.transform,{rotation:o}=this.transform;this.setTransform(new Dt(i,r,o))}getRotation(){return this.transform.rotation}setRotation(e){const{position:t}=this.transform,{scale:r}=this.transform;this.setTransform(new Dt(t,r,e))}getCanvasPivot(){return this.canvasPivot}setCanvasPivot(e,t){typeof e=="number"?this.canvasPivot={x:e,y:typeof t===void 0?e:t}:this.canvasPivot=e}getCanvasBounds(){const e=this.canvasPivot,{width:t,height:r}=this.canvas;return new lr(-e.x*t,-e.y*r,t,r)}}function S0(e){return e.getTransform!==void 0}function RK(e){return e.getContainer!==void 0}class FK extends so{constructor(e){super();this.config=e}getOutputDimensions(){const e=this.getOutputContainer();return e?e.getResolution():{width:0,height:0}}getSmallerOutputSide(){const e=this.getOutputContainer();if(!e)return 0;const t=e.getResolution();return Math.min(t.width,t.height)}convertPointFromPreviewIntoOutputSpace(e,t){const r=Ae.getInverted(be.rectTransformToAffineTransform(t));return Ae.transformPoint(r,e)}convertPointFromPreviewIntoWorldSpace(e,t,r){const i=Ae.getInverted(be.rectTransformToAffineTransform(t)),o=r?this.getOutputContainer().getBaseLocalToParentMatrix():this.getOutputContainer().getLocalToParentMatrix(),n=Ae.multiply(o,i);return Ae.transformPoint(n,e)}convertPointFromPreviewIntoFlippedPreviewSpace(e){const t=this.getOutputContainer().getFlipTransformMatrix();return Ae.transformPoint(t,e)}convertPointFromWorldIntoPreviewSpace(e,t){const r=be.rectTransformToAffineTransform(t),i=Ae.getInverted(this.getOutputContainer().getLocalToParentMatrix()),o=Ae.multiply(r,i);return Ae.transformPoint(o,e)}convertPointFromOutputIntoPreviewSpace(e,t){const r=be.rectTransformToAffineTransform(t);return Ae.transformPoint(r,e)}getContainersAtPreviewPoint(e,t){const r=new Array,i=this.convertPointFromPreviewIntoWorldSpace(e,t),o=this.getRootContainers();for(const n of o)this.accumulateContainersAtWorldPointInHierarchy(i,n,r);return r}isPreviewPointInContainer(e,t,r){const i=this.convertPointFromPreviewIntoWorldSpace(e,r);return this.isWorldPointInContainer(i,t)}isWorldPointInContainer(e,t){const r=be.getLocalToWorldMatrix(t),i=Ae.getInverted(r),o=Ae.transformPoint(i,e);return lr.contains(t.getBounds(),o)}accumulateContainersAtWorldPointInHierarchy(e,t,r){this.isWorldPointInContainer(e,t)&&r.push(t);const i=t.getChildren();for(const o of i)S0(o)&&this.accumulateContainersAtWorldPointInHierarchy(e,o,r)}}class Fr{constructor(e){this.engine=e;this.id=wn()}getID(){return this.id}getContainer(){return this.engine.getRootContainers()[0]}getIndexInParent(){const{rootOperations:e}=this.engine;for(let t=0;t<e.length;t+=1)if(e[t].getID()===this.id)return t;return-1}setIndexInParent(e){this.engine.moveIndex(this,e)}isValid(){return this.getIndexInParent()!==-1}}class PK extends Fr{constructor(e,t,r){super(t);this.operation=r;this.type="adjustments";this.setProperties(e)}getProperties(){const e=this.operation.getOptions(),t=e.gamma-1;return{brightness:e.brightness||0,saturation:e.saturation||0,contrast:e.contrast||0,gamma:(t<0?2*t:t)||0,clarity:e.clarity||0,exposure:e.exposure||0,shadows:e.shadows*.5||0,highlights:e.highlights||0,whites:e.whites||0,blacks:e.blacks||0,temperature:e.temperature||0,sharpness:e.sharpness||0}}setProperties(e){e.gamma!==void 0&&(e.gamma=1+(e.gamma<0?.5*e.gamma:e.gamma)),e.shadows&&(e.shadows=e.shadows*2),this.operation.set(e)}getOperation(){return this.operation}getTypeIdentifier(){return"adjustments"}}const Gi=e=>{if(x0(e))return new me.Color(e.r,e.g,e.b,e.a);if(w0(e))return new me.Color(e[0],e[1],e[2],e[3]);if(v0(e))return new me.Color(e.r,e.g,e.b,1);if(_0(e))return new me.Color(e[0],e[1],e[2],1);if(OK(e)){const[t,r,i]=e.match(/[0-9A-fa-f]{1,2}/g);return new me.Color(parseInt(t,16)/255,parseInt(r,16)/255,parseInt(i,16)/255,1)}throw new Error("Invalid color type")};class pt{get x(){return this._x}get y(){return this._y}constructor(e=0,t=0){this._x=e,this._y=t}set(e,t){return this._x=e,this._y=t,this}clone(){return new pt(this._x,this._y)}copy(e){return this._x=e.x,this._y=e.y,this}clamped(e=this,t=this){let r=typeof e=="number"?{x:e,y:e}:e,i=typeof t=="number"?{x:t,y:t}:t;return this._x=Math.max(r.x,this._x),this._y=Math.max(r.y,this._y),this._x=Math.min(i.x,this._x),this._y=Math.min(i.y,this._y),this}divide(e,t){return typeof e=="number"||e===null?(this._x/=e,this._y/=typeof t=="undefined"?e:t):(this._x/=e.x,this._y/=e.y),this}subtract(e,t){return typeof e=="number"||e===null?(this._x-=e,this._y-=typeof t=="undefined"?e:t):(this._x-=e.x,this._y-=e.y),this}multiply(e,t){return typeof e=="number"||e===null?(this._x*=e,this._y*=typeof t=="undefined"?e:t):(this._x*=e.x,this._y*=e.y),this}add(e,t){return typeof e=="number"||e===null?(this._x+=e,this._y+=typeof t=="undefined"?e:t):(this._x+=e.x,this._y+=e.y),this}dot(e,t){return typeof e=="number"||e===null?this._x*e+this._y*(typeof t=="undefined"?e:t):this._x*e.x+this._y*e.y}equals(e,t){return typeof e=="number"||e===null?e===this._x&&t===this._y:e.x===this._x&&e.y===this._y}flip(){let e=this._x;return this._x=this._y,this._y=e,this}round(){return this._x=Math.round(this._x),this._y=Math.round(this._y),this}ceil(){return this._x=Math.ceil(this._x),this._y=Math.ceil(this._y),this}floor(){return this._x=this._x|0,this._y=this._y|0,this}abs(){return this._x=Math.abs(this._x),this._y=Math.abs(this._y),this}len(){return Math.sqrt(this._x*this._x+this._y*this._y)}min(){return Math.min(this._x,this._y)}max(){return Math.max(this._x,this._y)}toObject(){return{x:this._x,y:this._y}}toString(){return`Vector2({ x: ${this._x}, y: ${this._y} })`}roundDecimal(e){return this._x=parseFloat(this._x.toFixed(e)),this._y=parseFloat(this._y.toFixed(e)),this}asArray(e=!1){return e?[this._y,this._x]:[this._x,this._y]}static fromObject(e){return new pt(e.x,e.y)}static fromSize(e){return new pt(e.width,e.height)}static get NULL(){return new pt(0,0)}}class Zo{constructor(e){this.engine=e;this.id=wn(),this.transform=Dt.IDENTITY,this.bounds=lr.ZERO}getID(){return this.id}getParent(){const e=this.engine.getRootContainers();return e.length===0||this.id===e[0].id?void 0:e[0]}getIndexInParent(){const{rootOperations:e}=this.engine;for(let t=0;t<e.length;t+=1)if(e[t].getID()===this.id)return t;return-1}setIndexInParent(e){this.engine.moveIndex(this,e)}getChildren(){const e=this.engine.getRootContainers();return e.length>0&&(this.id===e[0].id||this.id===this.engine.getOutputContainer().id)?this.engine.rootOperations:[]}getBounds(){return this.bounds}setPivotOnSelfAndSprite(e,t,r){typeof t=="number"?(this.setPivotInternal(t,r),e.setPivot(new pt(t,r))):(this.setPivotInternal(t),e.setPivot(pt.fromObject(t)))}setPivot(e,t){this.setPivotInternal(e,t)}getPivot(){const e=this.getBounds();return{x:-e.minX/e.width,y:-e.minY/e.height}}getTransform(){return this.transform}setTransform(e){this.transform=e}updateTransform(){this.setTransform(this.transform)}getPosition(){return this.transform.position}setPosition(e,t){let r;typeof e=="number"?r={x:e,y:t===void 0?e:t}:r=e;const{scale:i}=this.transform,{rotation:o}=this.transform;this.setTransform(new Dt(r,i,o))}getScale(){return this.transform.scale}setScale(e,t){let r;typeof e!="number"?r=e:r={x:e,y:t===void 0?e:t};const{position:i,rotation:o}=this.transform;this.setTransform(new Dt(i,r,o))}getRotation(){return this.transform.rotation}setRotation(e){const{position:t,scale:r}=this.transform;this.setTransform(new Dt(t,r,e))}getSizeInWorldSpace(){return be.getSizeInWorldSpace(this)}getSizeInOutputSpace(){return be.getSizeInOutputSpace(this,this.engine.getOutputContainer())}setSizeInWorldSpace(e){const t=this.getBounds();this.setScale(e.width/t.width,e.height/t.height)}setSizeInOutputSpace(e){const t=this.engine.getOutputContainer().getScale();this.setSizeInWorldSpace({width:e.width/t.x,height:e.height/t.y})}isValid(){return this.getIndexInParent()!==-1}setPivotInternal(e,t){const r=this.getBounds();typeof e=="number"?this.setBoundsFromSize(r.width,r.height,{x:e,y:t}):this.setBoundsFromSize(r.width,r.height,e)}setBoundsFromSize(e,t,r=this.getPivot()){this.bounds=new lr(-r.x*e,-r.y*t,e,t)}}class MK extends Zo{constructor(e,t){super(t);this.type="drawing";this.drawing=e,this.operation=t.createSpriteOperation(),this.sprite=this.operation.createBrush({}),this.operation.addSprite(this.sprite),this.radialBrush=this.sprite._createRadialBrush();const r=t.getRootContainers()[0],i=r.getBounds();this.bounds=new lr(0,0,i.width,i.height),this.setTransform(Dt.IDENTITY),this.operation.setDirty(!0),this.setData(e)}beginStroke(e){if(this.currentStroke)throw new Error("A brush stroke has already been started but not finished.");if(e.id!=="imgly_brush_radial")throw new Error("This adapter does not support any brush faces other than the radial img.ly brush.");this.currentBrush=e,this.currentStroke={brush:e,path:{controlPoints:[]}},this.radialBrush.setColor(Gi(e.color)),this.radialBrush.setHardness(e.hardness),this.radialBrush.setSize(e.size),this.currentPath=this.sprite.createPath(this.radialBrush.clone())}addPointToCurrentStroke(e,t=!0){if(!this.currentStroke||!this.currentBrush||!this.currentPath)throw new Error('A brush stroke has to first be started with a call to "beginStroke(brush:Brush)"');if(this.currentStroke.path.controlPoints.length){const a=this.currentStroke.path.controlPoints,l=a[a.length-1],c=this.currentBrush.size/10,d=Math.sqrt(e.x-l.x**2+(e.y-l.y**2));if(d<c)return}const r=this.engine.getOutputContainer(),i=this.engine.getRootContainers()[0],o=be.pointFromSpaceToSpace(e,i,r,!0),n=be.absoluteToRelativePoint(o,r,!1),s=r.getBounds();this.currentPath.addControlPoint(pt.fromObject(n)),this.currentStroke.path.controlPoints.push(e),t&&this.sprite.render(pt.fromObject({x:s.width,y:s.height}))}endStroke(){if(!this.currentStroke||!this.currentPath||!this.currentBrush)return;this.currentStroke.path.controlPoints.length&&this.drawing.strokes.push(this.currentStroke),this.currentStroke=void 0,this.currentBrush=void 0,this.currentPath.setClosed(!0);const e=this.engine.getOutputContainer().getBounds();this.sprite.render(pt.fromObject({x:e.width,y:e.height})),this.currentPath=void 0}setData(e){this.drawing=v(v({},this.drawing),e),this.drawing.strokes&&(this.drawing.strokes=[]),this.sprite.clearPersistCanvas(),this.sprite.clearCanvas(),this.sprite.setPaths([]),this.drawStrokes(e.strokes)}getData(){return this.drawing}updateData(){this.setData(this.getData())}getOperation(){return this.operation}drawStrokes(e){e.forEach(t=>{this.beginStroke(t.brush),t.path.controlPoints.forEach(r=>{this.addPointToCurrentStroke(r,!0)}),this.endStroke()})}}class BK extends Fr{constructor(e,t,r,i){super(i);this.filterOperation=t;this.type="duotone-filter";t.set({intensity:r.colorIntensity}),t.set({filter:e}),i.pesdk.setAllOperationsToDirty()}getProperties(){const e=this.filterOperation.getOptions();return{colorIntensity:e.intensity}}setProperties(e){const t=this.filterOperation.getOptions();let r=t.intensity;e.colorIntensity!==void 0&&(r=Math.min(Math.max(e.colorIntensity,0),1)),this.filterOperation.set({intensity:r})}getOperation(){return this.filterOperation}getTypeIdentifier(){return"filter"}}class LK{constructor(e,t){this.engine=t;this.loaded=!1;this.loading=!1;this.asset=v({},e)}load(){return se(this,null,function*(){if(this.loaded)return Promise.resolve();if(this.loading)return Promise.reject(new Error("Called Frame#load while it's already loading"));this.loading=!0;const{imageGroups:e}=this.asset,t=[];return["top","left","right","bottom"].forEach(r=>{if(!e[r])return;const i=e[r];["start","mid","end"].forEach(o=>{if(!(o in i))return;t.push(this.loadPart(r,o))})}),Promise.all(t).then(()=>{this.loaded=!0,this.loading=!1}).catch(()=>{this.loaded=!1,this.loading=!1})})}getFrame(){return v(v({},this.asset),{defaultName:this.asset.name,thumbnail:this.asset.thumbnailURI})}getIdentifier(){return this.asset.identifier}getDefaultName(){return this.asset.name}getThumbnail(){return this.asset.thumbnailURI}getTintable(){return this.asset.tintable||!1}getLayoutMode(){return this.asset.layoutMode}getImageGroups(){return this.asset.imageGroups}loadPart(e,t){return se(this,null,function*(){return new Promise((r,i)=>{const{imageGroups:o}=this.asset,n=o[e][t];let s=n;typeof n!="string"&&"image"in n&&(s=n.image);const a=new Image;a.addEventListener("load",()=>{typeof n!="string"?this.asset.imageGroups[e][t].image=a:this.asset.imageGroups[e][t]=a,r(a)}),a.addEventListener("error",()=>{i(new Error(`Failed to load image at ${a.src}`))}),a.crossOrigin=this.engine.configuration.crossOrigin||"anonymus",a.src=this.engine.assetProvider.getAssetSource("frame",s)})})}}class zK extends Fr{constructor(e,t,r){super(r);this.frameOperation=e;this.type="frame";this.setProperties(t),r.pesdk.setAllOperationsToDirty()}setProperties(e){if(this.props=v(v({},this.props),e),typeof e.opacity=="number"&&this.frameOperation.set({alpha:e.opacity}),e.tintColor&&this.frameOperation.set({tintColor:Gi(e.tintColor)}),e.width){const t=this.engine.getOutputContainer().getBounds(),r=Math.min(t.width,t.height),i=e.width/r;this.frameOperation.set({scale:i})}this.frameOperation.setDirty(!0)}getProperties(){return this.props}getOperation(){return this.frameOperation}getTypeIdentifier(){return"frame"}}class NK extends Fr{constructor(e,t,r){super(t);this.blurOperation=r;this.type="gaussian-blur";this.setProperties(e)}getProperties(){const e=this.engine.getOutputContainer(),t=e.getBounds(),r=Math.min(t.size.width,t.size.height),i=be.scalarFromSpaceToSpace(this.blurOperation.getOptions().blurRadius*r,e,this.getContainer());return{blurRadius:i}}setProperties(e){if(e.blurRadius!==void 0){const t=this.engine.pesdk.getOutputDimensions(),r=Math.min(t.x,t.y),i=this.getContainer(),o=this.engine.getOutputContainer(),n=be.scalarFromSpaceToSpace(e.blurRadius,i,o),s=n/r;this.blurOperation.set({blurRadius:s})}}getOperation(){return this.blurOperation}getTypeIdentifier(){return"blur"}}class BE extends Zo{constructor(e,t){super(t);this.data=e;this.type="image";const r=t.configuration.downscaleOptions;if(!r)this.downscaleOptions={maxDimensions:{width:t.maxTextureDimension,height:t.maxTextureDimension}};else{const{maxDimensions:o}=r;this.downscaleOptions={maxMegaPixels:r.maxMegaPixels,maxDimensions:{width:Math.min(t.maxTextureDimension,o?o.width:Number.MAX_VALUE),height:Math.min(t.maxTextureDimension,o?o.height:Number.MAX_VALUE)}}}this.setData(e);const{image:i}=this.data;this.bounds=new lr(O.ZERO,{width:i.width,height:i.height})}setData(e){if(this.data=v(v({},this.data),e),e.image){let{image:t}=e,r;if(t instanceof HTMLImageElement&&(r=this.engine.pesdk.parseExif(t),r)){const o=r.getTags();if(o&&o.Orientation){const n=o.Orientation!==1&&o.Orientation!==2,s=[2,4,5,7].indexOf(o.Orientation)!==-1;if(n||s){if(Ht()||Mo()||!CSS.supports("image-orientation","from-image")){const a=this.engine.pesdk.createOperation("exif-orientation",{},!1);a.setTags(o),t=a.applyTo(t)}r.setOrientation(1),o.Orientation=1}}}const i=new g_(t,this.downscaleOptions);i.on(ma.IMAGE_DOWNSCALED,({width:o,height:n})=>{this.engine.emit(uc.IMAGE_DOWNSCALED,{width:o,height:n})}),i.on(ma.BEGAN_IMAGE_DOWNSCALING,()=>{this.engine.emit(uc.BEGAN_IMAGE_DOWNSCALING)}),t=i.downscaleIfNecessary(),this.data.image=t,this.engine.pesdk.setImage(t,r),this.setBoundsFromSize(t.width,t.height)}}getData(){return this.data}setPivot(e,t){throw new Error("This container does not support modifying the pivot")}getOperation(){throw new Error("This container has no associated operation")}}class UK extends Fr{constructor(e,t,r){super(t);this.props=e;this.blurOperation=r;this.type="linear-blur";this.setProperties(e)}getProperties(){return this.props}setProperties(e){this.props=v(v({},this.props),e);const t=this.blurOperation.getOptions(),r=this.engine.getOutputContainer(),i=r.getBounds(),o=this.getContainer(),n=r.getBaseLocalToParentMatrix(),s=be.getBaseLocalToWorldMatrix(o),a=Ae.multiply(Ae.getInverted(n),s),l=Math.min(i.size.width,i.size.height);if(e.blurRadius!==void 0){const c=be.scalarFromSpaceToSpace(e.blurRadius,o,r);t.blurRadius=c/l}if(e.start!==void 0){const c=Ae.transformPoint(a,e.start),d=be.absoluteToRelativePoint(c,r,!1);t.controlPoint1=d}if(e.end!==void 0){const c=Ae.transformPoint(a,e.end),d=be.absoluteToRelativePoint(c,r,!1);t.controlPoint2=d}this.blurOperation.set(t)}updateProperties(){const e=this.getProperties();this.setProperties(e)}getOperation(){return this.blurOperation}getTypeIdentifier(){return"linear-focus"}}class jK extends Fr{constructor(e,t,r,i){super(i);this.filter=e;this.filterOperation=t;this.props=r;this.type="lut-filter";t.set({intensity:r.intensity}),t.set({filter:e}),i.pesdk.setAllOperationsToDirty()}getProperties(){const e=this.filterOperation.getOptions();return{intensity:e.intensity,lutImage:this.props.lutImage,horizontalTileCount:this.props.horizontalTileCount,verticalTileCount:this.props.verticalTileCount}}setProperties(e){const t=this.filterOperation.getOptions(),r=typeof e.intensity=="number"?e.intensity:t.intensity;this.filterOperation.set({intensity:r})}getOperation(){return this.filterOperation}getTypeIdentifier(){return"filter"}}class qK extends Fr{constructor(e,t,r){super(t);this.props=e;this.blurOperation=r;this.type="mirrored-blur";this.setProperties(e)}getProperties(){return this.props}setProperties(e){this.props=v(v({},this.props),e);const t=this.blurOperation.getOptions(),r=this.engine.getOutputContainer(),i=r.getBounds(),o=this.getContainer(),n=r.getBaseLocalToParentMatrix(),s=be.getBaseLocalToWorldMatrix(o),a=Ae.multiply(Ae.getInverted(n),s),l=Math.min(i.size.width,i.size.height);if(e.blurRadius!==void 0){const c=be.scalarFromSpaceToSpace(e.blurRadius,o,r);t.blurRadius=c/l}if(e.gradientSize!==void 0){const c=be.scalarFromSpaceToSpace(e.gradientSize,o,r),d=c/l;t.gradientSize=d}if(e.clearAreaWidth!==void 0){const c=be.scalarFromSpaceToSpace(e.clearAreaWidth,o,r),d=c/l;t.size=d*.5}if(e.mirrorAxisOrigin!==void 0){const c=Ae.transformPoint(a,e.mirrorAxisOrigin),d=be.absoluteToRelativePoint(c,r,!1);t.start=d}if(e.mirrorAxisDirection!==void 0){const c=Ae.transformPoint(a,e.mirrorAxisDirection),d=be.absoluteToRelativePoint(c,r,!1);t.end=d}this.blurOperation.set(t)}updateProperties(){const e=this.getProperties();this.setProperties(e)}getOperation(){return this.blurOperation}getTypeIdentifier(){return"mirrored-focus"}}class LE extends Zo{constructor(e,t,r,i){super(i);this.settings=e;this.operation=t;this.flipOperation=r;this.type="output";this.flipTransform=Ae.IDENTITY;this.blockTransformUpdate=!1;this.transformUpdateWhileBlock=!1;this.bounds=new lr({x:0,y:0},this.settings.resolution),this.setData(e)}pauseChildrenUpdates(){this.transformUpdateWhileBlock=!1,this.blockTransformUpdate=!0}resumeChildrenUpdates(){this.blockTransformUpdate=!1,this.transformUpdateWhileBlock&&this.updateChildrenContainers()}setData(e){if(this.settings=v(v({},this.settings),e),e.resolution&&(this.setBoundsFromSize(e.resolution.width,e.resolution.height),this.setTransform(this.transform),this.operation.set({outputResolution:new pt(e.resolution.width,e.resolution.height)})),e.flipHorizontally!==void 0){const t=e.flipHorizontally;this.updateFlipTransform(),this.flipOperation.set({flipHorizontally:t})}if(e.flipVertically!==void 0){const t=e.flipVertically;this.updateFlipTransform(),this.flipOperation.set({flipVertically:t})}this.operation.setDirty(!0),this.flipOperation.setDirty(!0)}getData(){return this.settings}setResolution(e){this.setData({resolution:e})}getResolution(){return this.getData().resolution}setTransform(e){if(this.transform.rotation!==e.rotation||this.transform.position!==e.position||this.transform.scale!==e.scale){this.transform=e;const t=this.flipTransform;this.flipTransform=Ae.IDENTITY;const r=this.engine.getRootContainers()[0],i=be.pointFromSpaceToSpace({x:0,y:0},r,this),o=-e.rotation,n=pt.fromObject(i).clone().subtract(pt.fromObject(this.getBounds().origin));this.operation.set({pivot:new pt(0,0),position:n,scale:new pt(1/e.scale.x,1/e.scale.y),rotation:o}),this.flipTransform=t,this.operation.setDirty(!0),this.updateChildrenContainers()}}rotate90(e=!1){const t=e?-Math.PI*.5:Math.PI*.5,r=this.getResolution(),i=this.getPivot(),o=this.getBounds(),n={x:o.midX,y:o.midY},s=be.getPointInWorldSpace(n,this);this.setPivot(.5,.5),this.setPosition(s),this.setRotation(this.getRotation()-t);const a={width:r.height,height:r.width};this.setResolution(a);const l={x:-a.width*(.5-i.x),y:-a.height*(.5-i.y)},c=be.getPointInWorldSpace(l,this);this.setPivot(i),this.setPosition(c),this.updateChildrenContainers()}setPivot(e,t){super.setPivotInternal(e,t),this.setTransform(this.transform)}getTransform(){return this.transform}getBaseLocalToParentMatrix(){return be.rectTransformToAffineTransform(this.getTransform())}getLocalToParentMatrix(){const e=be.rectTransformToAffineTransform(this.getTransform());return Ae.multiply(e,this.flipTransform)}getFlipTransformMatrix(){return this.flipTransform}isValid(){return!0}getOperation(){return this.operation}updateFlipTransform(){const{flipHorizontally:e,flipVertically:t}=this.settings;if(!e&&!t)this.flipTransform=Ae.IDENTITY;else{const r=this.getPivot(),i=this.getBounds(),o=e?-1:1,n=e?-2*(r.x-.5)*i.width:0,s=t?-1:1,a=t?-2*(r.y-.5)*i.height:0;this.flipTransform=new Ae(o,0,0,s,n,a)}}updateChildrenContainers(){if(this.blockTransformUpdate){this.transformUpdateWhileBlock=!0;return}this.engine.rootOperations.forEach(e=>{S0(e)?(e.updateTransform(),"updateData"in e&&e.updateData()):"updateProperties"in e&&e.updateProperties()})}}class zE extends Fr{constructor(e,t,r){super(r);this.overlayOperation=e;this.type="overlay";const i=t.blendMode||r.mapBlendMode(e.getBlendMode());e.set({blendMode:r.reverseMapBlendMode(i)}),e.set({image:t.image}),r.pesdk.setAllOperationsToDirty()}getProperties(){const e=this.overlayOperation.getOptions();return{image:e.image,blendMode:this.engine.mapBlendMode(e.blendMode),opacity:e.alpha}}setProperties(e){const t=this.overlayOperation.getOptions();typeof e.opacity=="number"&&(t.alpha=e.opacity),e.blendMode!==void 0&&(t.blendMode=this.engine.reverseMapBlendMode(e.blendMode)),this.overlayOperation.set(t),this.overlayOperation.setDirty(!0)}getOperation(){return this.overlayOperation}getTypeIdentifier(){return"overlay"}setFlipHorizontally(e){this.overlayOperation.setFlipHorizontally(e)}setFlipVertically(e){this.overlayOperation.setFlipVertically(e)}getFlipHorizontally(){return this.overlayOperation.getFlipHorizontally()}getFlipVertically(){return this.overlayOperation.getFlipVertically()}}class GK extends Fr{constructor(e,t,r){super(t);this.props=e;this.blurOperation=r;this.type="radial-blur";this.setProperties(e)}getProperties(){return this.props}setProperties(e){this.props=v(v({},this.props),e);const t=this.blurOperation.getOptions(),r=this.engine.getOutputContainer(),i=r.getBounds(),o=this.getContainer(),n=r.getBaseLocalToParentMatrix(),s=be.getBaseLocalToWorldMatrix(o),a=Ae.multiply(Ae.getInverted(n),s),l=Math.min(i.size.width,i.size.height);if(e.blurRadius!==void 0){const c=be.scalarFromSpaceToSpace(e.blurRadius,o,r);t.blurRadius=c/l}if(e.center!==void 0){const c=Ae.transformPoint(a,e.center),d=be.absoluteToRelativePoint(c,r,!1);t.position=d}if(e.radius!==void 0){const c=be.scalarFromSpaceToSpace(e.radius,o,r),d=c/l;t.radius=d}if(e.gradientSize!==void 0){const c=be.scalarFromSpaceToSpace(e.gradientSize,o,r),d=c/l;t.gradientRadius=d}this.blurOperation.set(t)}updateProperties(){const e=this.getProperties();this.setProperties(e)}getOperation(){return this.blurOperation}getTypeIdentifier(){return"radial-focus"}}class NE extends Zo{constructor(e,t){super(t);this.data=e;this.type="sticker";let r=e.image;const i=this.engine.pesdk.parseExif(e.image);if(i){const n=i.getTags();if(n&&n.Orientation){const s=n.Orientation!==1&&n.Orientation!==2,a=[2,4,5,7].indexOf(n.Orientation)!==-1;if(s||a){const l=this.engine.pesdk.createOperation("exif-orientation",{},!1);l.setTags(n),r=l.applyTo(e.image),i.setOrientation(1),n.Orientation=1}}}const o=new g_(r,{maxMegaPixels:{desktop:10,mobile:5}});r=o.downscaleImageIfNecessary(),this.operation=t.createSpriteOperation(),this.sprite=this.operation.createSticker({identifier:"",image:r,position:new pt(0,0),dimensions:new pt(1,1),rotation:0,smoothDownscaling:!1}),this.operation.addSprite(this.sprite),this.bounds=new lr({x:0,y:0},{width:r.width,height:r.height}),this.setTransform(Dt.IDENTITY),this.sprite.setPivot(new pt(0,0)),this.operation.setDirty(!0),this.setData(e)}setData(e){this.data=v(v({},this.data),e),e.id&&(this.id=e.id),Bo(e.opacity)&&e.opacity>=0&&this.sprite.setAlpha(e.opacity),e.tintColor&&this.sprite.setTintColor(Gi(e.tintColor)),e.tintMode&&this.sprite.setTintMode(e.tintMode),this.operation.setDirty(!0)}getData(){return this.data}updateData(){this.setData(this.getData())}setTransform(e){super.setTransform(e);const t=this.engine.getOutputContainer(),r=this.getParent(),i={width:this.bounds.width*e.scale.x,height:this.bounds.height*e.scale.y},o=be.sizeFromSpaceToSpace(i,r,t);this.sprite.setDimensions(pt.fromSize(o));const n=be.pointFromSpaceToSpace(e.position,r,t,!0),s=be.absoluteToRelativePoint(n,t,!1);this.sprite.setPosition(new pt(s.x,s.y));const a=be.getRotationBetweenCoordinateSpaces(r,t),l=e.rotation+a;this.sprite.setRotation(l),this.operation.setDirty(!0)}setPivot(e,t){this.setPivotOnSelfAndSprite(this.sprite,e,t)}getOperation(){return this.operation}setFlipHorizontally(e){this.sprite.setFlipHorizontally(e)}setFlipVertically(e){this.sprite.setFlipVertically(e)}getFlipHorizontally(){return this.sprite.getFlipHorizontally()}getFlipVertically(){return this.sprite.getFlipVertically()}}const wh=e=>2*Math.PI-e,HOe=e=>-e,bg=({rotation:e,flipHorizontally:t,flipVertically:r})=>{let i=e;return t&&(i=wh(i)),r&&(i=HOe(i)),i};function VOe(e,t){if(t){const r=1/t.unitsPerEm*e,i=t.ascender*r,o=t.descender*r;return i+Math.abs(o)}return e*1.1}class WK{constructor(e){this.context=e;this.sourceLines=[];this.maxWidth=100}static buildWords(e){const t=[];let r="";const i=e.length;for(let o=0;o<i;o+=1){const n=e[o];r+=n,(n===" "||n==="-"||o===i-1)&&(t.push(r),r="")}return t}getLines(){let e=[],t=[];const r=this.sourceLines.length;for(let i=0;i<r;i+=1){const o=this.sourceLines[i],n=WK.buildWords(o),s=n.length;for(let a=0;a<s;a+=1){const l=n[a],c=t.concat(l).join("").replace(/\s+$/i,""),d=this.getWidth(c);if(d>this.maxWidth){t.length>0&&(e.push(t.join("")),t=[l]);const u=l.replace(/\s+$/i,"");if(this.getWidth(u)>this.maxWidth){const p=this.splitWord(l);e=e.concat(p.lines),p.rest&&(t=[p.rest])}}else t.push(l)}e.push(t.join("")),t=[]}return e}splitWord(e){const t={lines:[],rest:null},r=e.length;let i=[];for(let o=0;o<r;o+=1){const n=e[o];this.getWidth(i.concat(n).join(""))>this.maxWidth?(i.length>0&&t.lines.push(i.join("")),i=[n]):i.push(n),o===r-1&&i.length>0&&(t.rest=i.join(""))}return t}getWidth(e){return this.context.measureText(e).width}setText(e){this.sourceLines=e.split(`
`)}setMaxWidth(e){this.maxWidth=e}}function Ed(e,t,r,i,o,n,s){e.font=`${r.fontStyle||"normal"} ${r.fontWeight||"normal"} ${i}px "${r.fontFamily}"`;const a=new WK(e);a.setText(t),a.setMaxWidth(n);const l=a.getLines().map(p=>p.replace(/\s+$/i,"")),c=VOe(i,s),d=c*o,u=c/5;return{width:n+u*2,height:l.length*d+u*2}}class Dd extends Zo{constructor(e,t){super(t);this.text=e;this.type="text";if(!Dd.measureContext){const a=document.createElement("canvas");Dd.measureContext=a.getContext("2d")}this.operation=t.createSpriteOperation();const r=this.engine.getOutputContainer(),i=this.getParent(),o=r.getBounds();this.sprite=this.operation.createText({text:e.text,position:new pt(0,0),rotation:0,fontSize:be.scalarFromSpaceToSpace(e.fontSize/o.height,i,r),lineHeight:e.lineHeight,fontIdentifier:e.fontIdentifier,alignment:e.alignment,color:Gi(e.textColor),backgroundColor:Gi(e.backgroundColor),maxWidth:be.scalarFromSpaceToSpace(e.width/o.width,i,r)});const n=t.assetProvider.getFontManager().getFontWithId(e.fontIdentifier);this.sprite.setFontFamily(n.fontFamily),this.sprite.setFontWeight(n.fontWeight||"normal"),this.sprite.setFontStyle(n.fontStyle||"normal"),this.sprite.setFontIdentifier(n.identifier),this.sprite.setTextMetrics(n.textMetrics),this.sprite.setPivot(new pt(0,0)),this.operation.addSprite(this.sprite);const s=Ed(Dd.measureContext,e.text,n,e.fontSize,e.lineHeight,e.width,n.textMetrics);this.bounds=new lr(0,0,s.width,s.height),this.setTransform(Dt.IDENTITY),this.operation.setDirty(!0)}setData(e){this.text=v(v({},this.text),e);const t=this.engine.assetProvider.getFontManager().getFontWithId(e.fontIdentifier||this.text.fontIdentifier);if(e.fontIdentifier&&(this.sprite.setFontFamily(t.fontFamily),this.sprite.setFontWeight(t.fontWeight||"normal"),this.sprite.setFontStyle(t.fontStyle||"normal"),this.sprite.setFontIdentifier(t.identifier),this.sprite.setTextMetrics(t.textMetrics)),e.id&&(this.id=e.id),e.text&&this.sprite.setText(e.text),e.fontSize){const i=this.engine.getOutputContainer(),o=this.getParent(),n=be.scalarFromSpaceToSpace(e.fontSize,o,i),s=i.getBounds();this.sprite.setFontSize(n/s.height)}if(e.alignment&&this.sprite.setAlignment(e.alignment),e.lineHeight&&this.sprite.setLineHeight(e.lineHeight),e.textColor&&this.sprite.setColor(Gi(e.textColor)),e.backgroundColor&&this.sprite.setBackgroundColor(Gi(e.backgroundColor)),e.width){const i=this.engine.getOutputContainer(),o=this.getParent(),n=be.scalarFromSpaceToSpace(e.width,o,i),s=i.getBounds();this.sprite.setMaxWidth(n/s.width)}const r=Ed(Dd.measureContext,this.text.text,t,this.text.fontSize,this.text.lineHeight,this.text.width,t.textMetrics);this.setBoundsFromSize(r.width,r.height),this.operation.setDirty(!0)}getData(){return this.text}updateData(){this.setData(this.getData())}setTransform(e){super.setTransform(e);const t=this.engine.getOutputContainer(),r=this.getParent(),i=be.pointFromSpaceToSpace(e.position,r,t,!0),o=be.absoluteToRelativePoint(i,t,!1);this.sprite.setPosition(new pt(o.x,o.y));const n=be.getRotationBetweenCoordinateSpaces(r,t);this.sprite.setRotation(e.rotation+n),this.operation.setDirty(!0)}setPivot(e,t){this.setPivotOnSelfAndSprite(this.sprite,e,t)}getOperation(){return this.operation}setFlipHorizontally(e){this.sprite.setRotation(this.getFlippedRotation({flipHorizontally:e})),this.sprite.setFlipHorizontally(e)}setFlipVertically(e){this.sprite.setRotation(this.getFlippedRotation({flipVertically:e})),this.sprite.setFlipVertically(e)}getFlipHorizontally(){return this.sprite.getFlipHorizontally()}getFlipVertically(){return this.sprite.getFlipVertically()}getFlippedRotation({flipVertically:e,flipHorizontally:t}){const r=e||this.getFlipVertically(),i=t||this.getFlipHorizontally();let o=this.getRotation();return(r||i)&&(o=wh(o)),o}}const UE=1e3;class yg extends Zo{constructor(e,t,r){super(r);this.textDesign=e;this.layout=t;this.type="text-design";this.currentLayoutSize=void 0;this.layoutID=t.identifier,this.operation=r.createSpriteOperation();const i=this.engine.getOutputContainer(),o=this.getParent(),n=i.getBounds(),s=Math.min(n.width,n.height);t.seed(e.seed),this.bounds=this.calculateBounds(this.textDesign,this.layout);const a=e.width;this.sprite=this.operation.createTextDesign({text:e.text,layout:t,inverted:e.inverted,color:Gi(e.color),width:be.scalarFromSpaceToSpace(e.width/s,o,i),padding:e.padding/a,seed:e.seed}),this.updatePivot(),this.operation.addSprite(this.sprite),this.setTransform(Dt.IDENTITY),this.operation.setDirty(!0)}static stringify(e){return JSON.stringify(e,yg.serializer())}static serializer(){const e=[],t=[],r=(i,o)=>e[0]===o?"[Circular ~]":`[Circular ~.${t.slice(0,e.indexOf(o)).join(".")}]`;return function(o,n){const s=this;if(e.length>0){const a=e.indexOf(s);~a?(e.splice(a+1),t.splice(a,Infinity,o)):(e.push(s),t.push(o)),~e.indexOf(n)&&(n=r.call(s,o,n))}else e.push(n);return n}}calculateBounds(e,t,r=!0){const i=e.inverted&&r?Math.max(0,2*e.padding):0,o=e.width/UE;if(this.currentLayoutSize===void 0){t.seed(e.seed);const n=t.generateLayoutData(e.text,UE);this.currentLayoutData=n,this.currentLayoutSize=n.getSize()}return new lr(0,0,this.currentLayoutSize.width*o+i,this.currentLayoutSize.height*o+i)}findNextUniqueSeed(e,t,r){let i=r;const o=this.currentLayoutData?yg.stringify(this.currentLayoutData.getRows()):"";let n;for(let s=0;s<20&&(t.seed(i),n=t.generateLayoutData(e.text,UE),o===yg.stringify(n.getRows()));s+=1)i+=1;return t.seed(i),this.currentLayoutData=n,i}setData(e){if(this.textDesign=v(v({},this.textDesign),e),e.id&&(this.id=e.id),e.padding!==void 0){const t=this.textDesign.width;this.sprite.setPadding(e.padding/t)}else e.width&&(this.textDesign.padding=this.sprite.getPadding()*this.textDesign.width);if(e.seed!==void 0&&(e.seed<0&&(e.seed=this.findNextUniqueSeed(this.textDesign,this.layout,Date.now()),this.textDesign.seed=e.seed),this.currentLayoutSize=void 0,this.layout.seed(e.seed),this.sprite.setSeed(e.seed),this.sprite.setLayout(this.layout)),e.color&&this.sprite.setColor(Gi(e.color)),e.inverted!==void 0&&this.sprite.setInverted(e.inverted),e.text&&(this.currentLayoutSize=void 0,this.sprite.setText(e.text)),e.width){const t=this.engine.getOutputContainer(),r=this.getParent(),i=t.getBounds(),o=Math.min(i.width,i.height),n=be.scalarFromSpaceToSpace(e.width/o,r,t);this.sprite.setWidth(n)}if(e.padding!==void 0||e.seed!==void 0||e.inverted!==void 0||e.text||e.width){const t=this.calculateBounds(this.textDesign,this.layout);this.setBoundsFromSize(t.width,t.height),this.updatePivot()}this.operation.setDirty(!0)}getData(){return this.textDesign}updateData(){this.setData(this.getData())}setTransform(e){super.setTransform(e);const t=this.engine.getOutputContainer(),r=this.getParent();if(e.scale.x!==1||e.scale.y!==1)throw new Error("This engine doesn't support scaling TextDesign containers! You can change the bounds using the width property of the TextDesign data.");const i=be.pointFromSpaceToSpace(e.position,r,t,!0),o=be.absoluteToRelativePoint(i,t,!1);this.sprite.setPosition(new pt(o.x,o.y));const n=be.getRotationBetweenCoordinateSpaces(r,t);this.sprite.setRotation(e.rotation+n),this.operation.setDirty(!0)}setPivot(e,t){typeof e=="number"?super.setPivot(e,t):super.setPivot(e),this.updatePivot()}getOperation(){return this.operation}getLayoutID(){return this.layoutID}setFlipHorizontally(e){this.sprite.setFlipHorizontally(e)}setFlipVertically(e){this.sprite.setFlipVertically(e)}getFlipHorizontally(){return this.sprite.getFlipHorizontally()}getFlipVertically(){return this.sprite.getFlipVertically()}updatePivot(){const e=this.textDesign.inverted?Math.max(0,this.textDesign.padding):0,t=new O(this.bounds.width-2*e,this.bounds.height-2*e),r=this.getPivot(),i=new O(r.x*this.bounds.width,r.y*this.bounds.height),o=new O(e,e),n=i.subtract(o),s=n.divide(t);this.sprite.setPivot(new pt(s.x,s.y))}}const{BLEND_MODES:br}=me.Operations.OverlayOperation,C0="imgly_font_open_sans_bold";class vg extends FK{constructor(e){super(e);this.previews=Array();this.rootOperationStack=[];this.deferredRenderQueue=[];this.operationStackOffset=1;this.enforceOperationOrder=()=>{this.refreshFlipIndex(),this.refreshFrameIndex()};if(this.assetProvider=e.assetProvider||new v_,this.wrapper=new dc({license:e.license,crossOrigin:e.crossOrigin,assets:{resolver:(t,r)=>this.resolveAssetForSDK(t,r)},editor:{preferredRenderer:e.preferredRenderer,pixelRatio:1}}),this.editor=this.wrapper.getEditor(),this.sdk=this.editor.getSDK(),this.sdk.setRenderMode("adapter"),this.tempCanvas=document.createElement("canvas"),this.sdk.setCanvas(this.tempCanvas),e.preferredRenderer==="webgl"){const t=document.createElement("canvas"),r=t.getContext("webgl")||t.getContext("experimental-webgl");this.maxTextureDimension=r.getParameter(r.MAX_TEXTURE_SIZE)}else this.maxTextureDimension=Infinity}get configuration(){return this.config}get pesdk(){return this.sdk}get rootOperations(){return this.rootOperationStack}dispose(){this.pesdk.dispose(),this.wrapper.dispose()}render(e){return new Promise(t=>{const r=()=>new Promise(i=>{const{canvas:o}=e,n=e.getTransform(),s=this.outputContainer.getPivot(),a=e.getCanvasBounds(),l=e.quality,{tempCanvas:c}=this;this.sdk.setTextureQuality(l);const d=this.sdk.getOutputDimensions();return c.width=d.x,c.height=d.y,this.sdk.getRenderer().resizeTo(new pt(c.width,c.height)),this.sdk.render(!0).then(()=>{const u=o.getContext("2d");u.clearRect(0,0,o.width,o.height),u.save(),u.translate(-a.minX,-a.minY),u.translate(n.position.x,n.position.y),u.rotate(n.rotation),u.scale(n.scale.x,n.scale.y),u.translate(-s.x*c.width,-s.y*c.height),u.scale(1/e.quality,1/e.quality),u.drawImage(c,0,0),u.restore(),t(),this.deferredRenderQueue.shift(),this.deferredRenderQueue.length?(this.sdk.setAllOperationsToDirty(),Promise.resolve(this.deferredRenderQueue[0]().then(i))):i()})});this.deferredRenderQueue.push(r),this.deferredRenderQueue.length===1&&r()})}createPreview(e){const t=new AK(e,this);return this.previews.push(t),t}export(){return se(this,arguments,function*(e=Dr.IMAGE,t=ar.PNG,r=1){return new Promise(i=>{const o=()=>new Promise(n=>this.sdk.export(this.mapToRenderType(e),this.mapToImageFormat(t),r).then(s=>{i(s),this.deferredRenderQueue.shift(),this.deferredRenderQueue.length?Promise.resolve(this.deferredRenderQueue[0]().then(n)):n()}));this.deferredRenderQueue.push(o),this.deferredRenderQueue.length===1&&o()})})}getRootContainers(){return[this.rootContainer]}getOutputContainer(){return this.outputContainer}findContainerByID(e){return e===this.rootContainer.getID()?this.rootContainer:this.rootOperationStack.find(t=>t.getID()===e)}findEffectByID(e){return this.rootOperationStack.find(t=>t.getID()===e)}addImage(e,t,r){if(this.rootContainer)throw new Error("A background image already exists - did you mean to use addSticker?");const i=new BE(e,this);if(this.rootContainer=i,!this.outputContainer){const{width:o,height:n}=i.getBounds(),s={resolution:{width:o,height:n},flipHorizontally:!1,flipVertically:!1},a=this.sdk.createOperation("output",{},!1),l=this.sdk.createOperation("flip",{},!1);this.insertIntoOperationsStack(a,this.operationStackOffset-1),this.insertIntoOperationsStack(l,this.operationStackOffset),this.outputContainer=new LE(s,a,l,this)}return i}addSticker(e,t,r){if(!t)throw new Error("This engine does not support adding stickers as root elements.");this.ensureContainerIsRoot(t);const i=new NE(e,this);return this.addToStackAtIndex(i,r),i}addStickerFromAssets(e,t,r){if(!t)throw new Error("This engine does not support adding stickers as root elements.");return this.ensureContainerIsRoot(t),new Promise((i,o)=>{const n=new Image;n.onload=()=>{const s={image:n,opacity:1},a=new NE(s,this);this.addToStackAtIndex(a,r),i(a)},n.onerror=s=>{o(s)},n.crossOrigin=this.config.crossOrigin||null,n.src=this.assetProvider.getAssetSource("sticker",e)})}addText(e,t,r){if(!t)throw new Error("This engine does not support adding text as root elements.");const i=this.assetProvider.getFontManager();if(!i.isFontLoaded(e.fontIdentifier||C0))throw new Error("Adding text synchronously only works if the required font is already loded! Consider using the asynchronous addTextWithFontLoading function instead!");this.ensureContainerIsRoot(t);const o=v({text:"",fontIdentifier:C0,fontSize:20,lineHeight:1,alignment:"center",textColor:[1,1,1],backgroundColor:[0,0,0,0],width:100},e),n=new Dd(o,this);return this.addToStackAtIndex(n,r),n}addTextWithFontLoading(e,t,r){if(!t)throw new Error("This engine does not support adding text as root elements.");const i=this.assetProvider.getFontManager(),o=e.fontIdentifier||C0;return new Promise((n,s)=>{i.loadFontWithIdentifier(o).then(()=>{this.ensureContainerIsRoot(t);const a=v({text:"",fontIdentifier:C0,fontSize:20,lineHeight:1,alignment:"center",textColor:[1,1,1],backgroundColor:[0,0,0,0],width:100},e),l=new Dd(a,this);this.addToStackAtIndex(l,r),n(l)}).catch(s)})}addTextDesignAsync(e="imgly_text_design_blocks",t,r,i){return se(this,null,function*(){if(!r)throw new Error("This engine does not support adding TextDesign as a root element.");const o=v({seed:Date.now(),padding:0,text:"",color:[0,0,0],inverted:!1,width:100},t),n=this.wrapper.getTextDesignLayoutByID(e);if(!n)throw new Error(`The layout could not be loaded for the given id: ${e}`);const s=n.getImagePaths().map(p=>{const h=p.split("/").pop()||"";return{path:p,fullPath:this.assetProvider.getAssetSource("textdesign",h)}}),a=this.wrapper.getTextDesignAssetManager(),l=this.wrapper.getTextDesignFontManager(),c=l.getVariationsByIdentifier();a.setFonts(c),yield a.loadImages(s),n.onImagesLoaded();const d=Object.keys(c),u=this.assetProvider.getFontManager();return u.loadFontsWithIdentifiers(d).then(()=>{this.ensureContainerIsRoot(r);const p=new yg(o,n,this);return this.addToStackAtIndex(p,i),Promise.resolve(p)})})}addDrawing(e,t,r){if(!t)throw new Error("This engine does not support DrawingContainers as root elements.");this.ensureContainerIsRoot(t);const i=new MK(e,this);return this.addToStackAtIndex(i,r),i}addGaussianBlur(e,t,r){this.ensureContainerIsRoot(t);const i=new NK(e,this,this.sdk.createOperation("blur",{},!1));return this.addToStackAtIndex(i,r),i}addRadialBlur(e,t,r){this.ensureContainerIsRoot(t);const i=new GK(e,this,this.sdk.createOperation("radial-focus",{},!1));return this.addToStackAtIndex(i,r),i}addMirroredBlur(e,t,r){this.ensureContainerIsRoot(t);const i=new qK(e,this,this.sdk.createOperation("mirrored-focus",{},!1));return this.addToStackAtIndex(i,r),i}addLinearBlur(e,t,r){this.ensureContainerIsRoot(t);const i=new UK(e,this,this.sdk.createOperation("linear-focus",{},!1));return this.addToStackAtIndex(i,r),i}addDuoToneFilter(e,t,r){throw new Error("Not supported! Use addDuoToneFilterFromAssets instead")}addDuoToneFilterFromAssets(e,t,r){this.ensureContainerIsRoot(t);const i=this.sdk.getOperationsStack(),o=i.getByIdentifier("filter");if(o&&o.getIdentifier()!==e)throw new Error("This engine doesn't support multiple types of filter operations at once!");const n=o||this.sdk.createOperation("filter",{},!1);return new Promise((s,a)=>{try{const l=this.assetProvider.getDuotoneFilterAsset(e),c={colorIntensity:l.defaultIntensity||0},d=new me.Operations.FilterOperation.Filters.DuoToneFilter({intensity:c.colorIntensity,lightColor:me.Color.fromHex(l.lightColor),darkColor:me.Color.fromHex(l.darkColor)}),u=new BK(d,n,c,this);this.addToStackAtIndex(u,r),s(u)}catch(l){l&&a(l)}})}addLUTFilter(e,t,r){throw new Error("Not supported! Use addLUTFilterFromAssets instead")}addLUTFilterFromAssets(e,t,r){this.ensureContainerIsRoot(t);const i=this.sdk.getOperationsStack(),o=i.getByIdentifier("filter");if(o&&o.getIdentifier()!==e)throw new Error("This engine doesn't support multiple types filter operations at once!");const n=o||this.sdk.createOperation("filter",{},!1);return this.getLutFilterImage(e).then(s=>{const a=this.assetProvider.getLUTFilterAsset(e),l={horizontalTileCount:a.horizontalTileCount||5,verticalTileCount:a.verticalTileCount||5,intensity:a.defaultIntensity||1},c=new me.Operations.FilterOperation.Filters.ThreeDLUTFilter(v(v({},l),{image:s})),d=v(v({},l),{lutImage:new Image}),u=new jK(c,n,d,this);return this.addToStackAtIndex(u,r),u})}getLutFilterImage(e){return new Promise((t,r)=>{const i=new Image;i.addEventListener("load",()=>{t(i)}),i.addEventListener("error",o=>{r(o)}),i.crossOrigin=this.config.crossOrigin||null,i.src=this.assetProvider.getAssetSource("filter",e)})}addAdjustments(e,t,r){this.ensureContainerIsRoot(t);const i=new PK(e,this,this.sdk.createOperation("adjustments",{},!1));return this.addToStackAtIndex(i,r),i}addOverlay(e,t,r){this.ensureContainerIsRoot(t);const i=new zE(this.sdk.createOperation("overlay",{},!1),e,this);return this.addToStackAtIndex(i,r),i}addOverlayFromAssets(e,t,r){return this.ensureContainerIsRoot(t),new Promise((i,o)=>{const n=this.sdk.getOperationsStack(),s=n.getByIdentifier("overlay");s&&s.getIdentifier()!==e&&n.remove(s);const a=s||this.sdk.createOperation("overlay",{},!1),l=new Image;l.onload=()=>{const c={image:l,opacity:1,blendMode:Oe.NORMAL},d=new zE(a,c,this);this.addToStackAtIndex(d,r),i(d)},l.onerror=c=>{o(c)},l.crossOrigin=this.config.crossOrigin||null,l.src=this.assetProvider.getAssetSource("overlay",e)})}addFrame(e,t,r){throw new Error("Not supported!")}addFrameFromAssets(e,t,r){return se(this,null,function*(){this.ensureContainerIsRoot(t);const i=this.assetProvider.getFrameAsset(e);if(!i)throw new Error(`The requested asset does not exist! ${e}`);const o=new LK(i,this);yield o.load();const n=this.getOutputContainer().getBounds(),s=Math.min(n.width,n.height),a=this.sdk.createOperation("frame",{},!1);a.setFrame(o.getFrame());const l={opacity:1,tintColor:[1,1,1],tintable:!1,width:Math.max(1,.1*s),imageGroups:o.getFrame().imageGroups},c=new zK(a,l,this);return this.addToStackAtIndex(c,r),Promise.resolve(c)})}removeEffect(e){if(!e.isValid())return;const t=e,r=t.getOperation();this.sdk.removeOperation(r),this.sdk.setAllOperationsToDirty(),this.rootOperationStack.splice(e.getIndexInParent(),1)}removeContainer(e){if(!e.isValid()||e.type==="output")return;const t=e,r=t.getOperation();this.sdk.removeOperation(r),this.sdk.setAllOperationsToDirty(),this.rootOperationStack.splice(e.getIndexInParent(),1)}refreshOutputIndex(){const e=this.sdk.getOperationsStack().getIndexByIdentifier("output");this.moveInOperationsStack(e,this.operationStackOffset-1)}refreshFlipIndex(){const e=this.sdk.getOperationsStack().getIndexByIdentifier("flip"),t=this.sdk.getOperationsStack().getStack().length-1;e!==t&&this.moveInOperationsStack(e,t)}refreshFrameIndex(){const e=this.sdk.getOperationsStack().getIndexByIdentifier("frame"),t=this.sdk.getOperationsStack().getStack().length-1;e!==-1&&e!==t&&this.moveInOperationsStack(e,t)}mapToRenderType(e){switch(e){case Dr.IMAGE:return me.RenderType.IMAGE;case Dr.DATA_URL:return me.RenderType.DATAURL;case Dr.BLOB:return me.RenderType.BLOB;case Dr.MSBLOB:return me.RenderType.MSBLOB;default:return me.RenderType.IMAGE}}mapToImageFormat(e){switch(e){case ar.PNG:return me.ImageFormat.PNG;case ar.JPEG:return me.ImageFormat.JPEG;default:return null}}mapBlendMode(e){switch(e){case br.NORMAL:return Oe.NORMAL;case br.OVERLAY:return Oe.OVERLAY;case br.HARD_LIGHT:return Oe.HARD_LIGHT;case br.SOFT_LIGHT:return Oe.SOFT_LIGHT;case br.MULTIPLY:return Oe.MULTIPLY;case br.DARKEN:return Oe.DARKEN;case br.LIGHTEN:return Oe.LIGHTEN;case br.SCREEN:return Oe.SCREEN;case br.COLOR_BURN:return Oe.COLOR_BURN;default:return Oe.NORMAL}}reverseMapBlendMode(e){switch(e){case Oe.NORMAL:return br.NORMAL;case Oe.OVERLAY:return br.OVERLAY;case Oe.HARD_LIGHT:return br.HARD_LIGHT;case Oe.SOFT_LIGHT:return br.SOFT_LIGHT;case Oe.MULTIPLY:return br.MULTIPLY;case Oe.DARKEN:return br.DARKEN;case Oe.LIGHTEN:return br.LIGHTEN;case Oe.SCREEN:return br.SCREEN;case Oe.COLOR_BURN:return br.COLOR_BURN;default:return br.NORMAL}}createSpriteOperation(){return this.sdk.createOperation("sprite",{},!1)}moveIndex(e,t){const r=this.getSiblingIndex(e);if(r===-1)throw new Error("The item to be moved is not part of any stack.");this.moveInStack(this.rootOperationStack,r,t);const i=this.operationStackOffset;this.moveInOperationsStack(r+i,t+i),this.enforceOperationOrder()}ensureContainerIsRoot(e){const t=e.getID();if(t!==this.rootContainer.getID())throw new Error("This engine doesn't support adding this effect/container to anything other than the root image container")}addToStackAtIndex(e,t){if(t&&t<0)throw new Error(`The given index may not be negative: ${t}`);t===void 0?this.rootOperationStack.push(e):this.rootOperationStack.splice(t,0,e);const r=this.rootOperationStack.length-1;let i=t!==void 0?t:r;i+=this.operationStackOffset,RK(e)?this.insertIntoOperationsStack(e.getOperation(),i):this.insertIntoOperationsStack(e.getOperation(),i),this.sdk.setAllOperationsToDirty()}insertIntoOperationsStack(e,t){const r=this.sdk.getOperationsStack().getStack(),i=r.length,o=Math.max(Math.min(t,i),0);for(let n=i-1;n>=o;n-=1){const s=r[n];r[n+1]=s}r[o]=e,this.sdk.setAllOperationsToDirty(),this.enforceOperationOrder()}moveInStack(e,t,r){const i=e.length,o=Math.max(Math.min(t,i-1),0),n=Math.max(Math.min(r,i-1),0);if(o===n)return;const s=e[o];if(o<n)for(let a=o+1;a<=n;a+=1)e[a-1]=e[a];else for(let a=o-1;a>=n;a-=1)e[a+1]=e[a];e[n]=s}moveInOperationsStack(e,t){const r=this.sdk.getOperationsStack().getStack(),i=r.length,o=Math.min(Math.max(0,e),i-1),n=Math.min(Math.max(0,t),i-1);if(o===n)return;const s=r[o];if(o<n)for(let a=o+1;a<=n;a+=1)r[a-1]=r[a];else for(let a=o-1;a>=n;a-=1)r[a+1]=r[a];r[n]=s,this.sdk.getOperationsStack().setAllToDirty()}getSiblingIndex(e){return e.getIndexInParent()}resolveAssetForSDK(e,t){t=t;switch(e){case"filter":return this.assetProvider.getAssetSource("filter",t.identifier);case"overlay":return this.assetProvider.getAssetSource("overlay",t.identifier);case"font":return this.assetProvider.getAssetSource("font",t.identifier)}return""}}class jE{constructor(e){this.isEmpty=!1;this.isValid=!1;this.isWhiteLabel=()=>this.isValid&&this.licenseChecker.isWhiteLabel();this.areCustomAssetsAllowed=()=>this.isEmpty||this.isValid&&this.licenseChecker.areCustomAssetsAllowed();e&&e.length!==0?(this.licenseChecker=new me.LicenseChecker(e),this.isValid=this.licenseChecker.validate()):e===""&&(this.isEmpty=!0)}isToolAllowed(e){return this.licenseChecker&&this.isValid?this.licenseChecker.isToolAllowed(e):!0}}const qE=e=>{let t=Number(e).toString(16);return t.length<2&&(t=`0${t}`),t},HK=(e,t,r)=>{const i=qE(e*255),o=qE(t*255),n=qE(r*255);return`#${i}${o}${n}`},$a=e=>{if(w0(e)){const[t,r,i,o]=e;return`rgba(${t*255}, ${r*255}, ${i*255}, ${o})`}if(x0(e)){const{r:t,g:r,b:i,a:o}=e;return`rgba(${t*255}, ${r*255}, ${i*255}, ${o})`}if(_0(e)){const[t,r,i]=e;return HK(t,r,i)}if(v0(e)){const{r:t,g:r,b:i}=e;return HK(t,r,i)}return e},Nn=e=>e.map(t=>({identifier:t.name,color:t.color,colorString:$a(t.color)})),Wi={black:[0/255,0/255,0/255,1],white:[255/255,255/255,255/255,1],gray:[191/255,191/255,191/255,1],blue:[102/255,134/255,255/255,1],skyBlue:[102/255,204/255,255/255,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[255/255,247/255,99/255,1]},GE={transparent:[0/255,0/255,0/255,0],black:[0/255,0/255,0/255,1],white:[255/255,255/255,255/255,1],blue:[102/255,134/255,255/255,1],skyBlue:[102/255,204/255,255/255,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[255/255,247/255,99/255,1]};const T0=[S.LIBRARY,[S.TRANSFORM,S.FILTER,S.ADJUSTMENT],[S.FOCUS,S.FRAME,S.OVERLAY],[S.TEXT,S.TEXT_DESIGN,S.STICKER,S.BRUSH]],Sh={license:"",order:"default",language:"en",theme:"dark",layout:"advanced",mainCanvasActions:[_e.UNDO,_e.REDO,_e.EXPORT,_e.CLOSE],displayResizeWarning:!1,displayCloseWarning:!0,displayCanvasRendererWarning:!0,displayToolControlBarTitle:!0,engine:{crossOrigin:"anonymous",downscaleOptions:{maxMegaPixels:{desktop:10,mobile:5}},preferredRenderer:p9()?"webgl":"canvas"},enableZoom:!0,forceCrop:!1,assetBaseUrl:"assets/",defaultTool:S.FILTER,tools:T0,snapping:new Wv,filter:new $v,focus:new Xv,adjustment:new Kv,library:new Zv,overlay:new Qv,sticker:new e_,text:new t_,textdesign:new n_,frame:new Jv,brush:new o_,transform:new s_,export:{image:{exportType:Dr.IMAGE,format:ar.PNG,quality:.9,enableDownload:!0},filename:"photoeditorsdk-export"},custom:{}};const k0={[Ue.BRIGHTNESS]:0,[Ue.SATURATION]:0,[Ue.CONTRAST]:0,[Ue.GAMMA]:0,[Ue.CLARITY]:0,[Ue.EXPOSURE]:0,[Ue.SHADOWS]:0,[Ue.HIGHLIGHTS]:0,[Ue.WHITES]:0,[Ue.BLACKS]:0,[Ue.TEMPERATURE]:0,[Ue.SHARPNESS]:0};const rt=_(Ge()),Un=_(Ge()),Ch=_(Ge());class _g{constructor(){this.snapshots=[];this.observeIndex=Ch.observable.box(-1)}addSnapshot(e){this.index===this.snapshots.length-1?this.snapshots=this.snapshots.concat(JSON.stringify(e)):this.snapshots=[...this.snapshots.slice(0,this.index+1),JSON.stringify(e)],this.observeIndex.set(this.snapshots.length-1)}getCurrentState(){return this.snapshots[this.index]}reset(){this.snapshots=[],this.observeIndex.set(-1)}undo(){return this.canUndo?(this.observeIndex.set(this.index-1),JSON.parse(this.getCurrentState())):null}redo(){return this.canRedo?(this.observeIndex.set(this.index+1),JSON.parse(this.getCurrentState())):null}discardSnapshotsfromIndex(e){e>0&&e<this.snapshots.length-1&&(this.snapshots=this.snapshots.slice(0,e),this.observeIndex.set(this.snapshots.length-1))}get index(){return this.observeIndex.get()}get canUndo(){return this.index>0}get canRedo(){return this.snapshots.length-1>this.index}}m([Ch.computed],_g.prototype,"index",1),m([Ch.computed],_g.prototype,"canUndo",1),m([Ch.computed],_g.prototype,"canRedo",1);var Ie;(function(e){e.ADD="add",e.EDIT="edit",e.DELETE="delete"})(Ie||(Ie={}));class Th{constructor(e){this.localTransformStartIndex=null;this.awaitHistoryChange=!1;this.isDirtySinceSave=!1;this.undo=()=>se(this,null,function*(){if(!this.awaitHistoryChange){this.awaitHistoryChange=!0;const e=this.appHistoryManager.undo();yield this.applyState(e),this.awaitHistoryChange=!1,this.canUndo||(this.isDirtySinceSave=!1)}});this.redo=()=>se(this,null,function*(){if(!this.awaitHistoryChange){this.awaitHistoryChange=!0;const e=this.appHistoryManager.redo();yield this.applyState(e),this.awaitHistoryChange=!1}});this.editor=e,this.appHistoryManager=new _g}get canUndo(){return this.appHistoryManager.canUndo}get canRedo(){return this.appHistoryManager.canRedo}getHistoryState(){const e=Un.toJS(this.editor.adjustmentsToolStore.state),t=Un.toJS(this.editor.filterToolStore.state),r=this.editor.focusToolStore.getFocusStateForHistory(),i=Un.toJS(this.editor.overlayToolStore.state),o=Un.toJS(this.editor.frameToolStore.state),n=this.editor.brushToolStore.strokes||{strokes:[]},s=this.editor.spriteStore.getSpriteHistoryState(),a=this.editor.transformToolStore.serializableState;return{[S.ADJUSTMENT]:e,[S.FILTER]:t,[S.FOCUS]:r,[S.OVERLAY]:i,[S.FRAME]:o,[S.BRUSH]:n,sprite:s,[S.TRANSFORM]:a}}addInitialSnapshot(){const e=this.getHistoryState();this.appHistoryManager.addSnapshot({state:e,type:Ie.ADD,description:"Initial State"})}addSnapshot(e=this.getHistoryState(),t,r){e&&((e.sprite||e.transform)&&(e=v(v({},this.getHistoryState()),e)),this.appHistoryManager.addSnapshot({state:e,type:t,description:r}),this.editor.configStore.events.onHistoryChange(),this.isDirtySinceSave||(this.isDirtySinceSave=!0))}saveTransformLocalSnapshotIndex(){this.localTransformStartIndex===null&&(this.localTransformStartIndex=this.appHistoryManager.snapshots.length)}removeTransformLocalSnapshots(){this.localTransformStartIndex!==null&&(this.appHistoryManager.discardSnapshotsfromIndex(this.localTransformStartIndex-1),this.localTransformStartIndex=null)}applyState(t){return se(this,arguments,function*({state:e}){try{if(e){const r=Object.keys(e);for(const i of r)switch(i){case S.FILTER:yield this.editor.filterToolStore.updateStateFromHistory(e[i]);break;case S.ADJUSTMENT:yield this.editor.adjustmentsToolStore.updateStateFromHistory(e[i]);break;case S.OVERLAY:yield this.editor.overlayToolStore.updateStateFromHistory(e[i]);break;case S.FRAME:yield this.editor.frameToolStore.updateStateFromHistory(e[i]);break;case S.FOCUS:yield this.editor.focusToolStore.updateStateFromHistory(e[i],this.editor.canvasStore.sizeVector);break;case S.BRUSH:yield this.editor.brushToolStore.updateStateFromHistory(e[i]);break;case"sprite":yield this.editor.spriteStore.updateStateFromHistory(e[i]);break;case"localTransform":yield this.editor.transformToolStore.updateLocalStateFromHistory(e.localTransform);break;case S.TRANSFORM:this.editor.outputContainer.pauseChildrenUpdates(),this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(e[i],!1),this.editor.transformToolStore.onLeave(),this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.onLeave(),this.editor.outputContainer.resumeChildrenUpdates(),yield this.editor.wait();break}yield this.editor.renderPromise()}}catch(r){console.error(r),this.editor.modalStore.showActionModal({type:dt.ERROR,identifier:"unexpectedError",error:r,handleConfirm:()=>{window.location.reload()}})}})}isDirty(){return this.appHistoryManager.snapshots.length>1}reset(){this.appHistoryManager.reset(),this.isDirtySinceSave=!1}}m([Un.action],Th.prototype,"undo",2),m([Un.action],Th.prototype,"redo",2),m([Un.computed],Th.prototype,"canUndo",1),m([Un.computed],Th.prototype,"canRedo",1);class mr{constructor(e,t){this.assets=[];this.entityMapper=e=>"items"in e?this.categoryMapper(e):this.itemMapper(e);this.categoryMapper=e=>e?v(v({},e),{thumbnailURI:this.getCategoryURI(e),name:this.config.locale[e.identifier]||e.name,items:e.items.map(this.itemMapper)}):null;this.itemMapper=e=>v(v({},e),{thumbnailURI:this.getItemURI(e),name:this.config.locale[e.identifier]||("name"in e?e.name:"")});this.getCategoryURI=e=>e.thumbnailURI&&(Tl(e.thumbnailURI)||e.thumbnailURI.substr(0,10)==="data:image")?e.thumbnailURI:this.config.getAssetPath(e[this.config.categoryKey]||"");this.getItemURI=e=>"thumbnailURI"in e&&(Tl(e.thumbnailURI)||e.thumbnailURI.substr(0,10)==="data:image")?e.thumbnailURI:this.config.getAssetPath(e[this.config.itemKey]||"");this.config=t,this.assets=e.map(this.entityMapper).filter(Boolean)}static isCategory(e){return Object.prototype.hasOwnProperty.call(e,"items")}get categories(){return this.assets.reduce((e,t)=>mr.isCategory(t)?[...e,t]:void 0,[]).filter(Boolean)}get items(){return this.assets.reduce((e,t)=>mr.isCategory(t)?[...e,...t.items]:[...e,t],[]).filter(Boolean)}}const Id=_(Ge());class pc{constructor(e,t){this.from=e,this.to=t}contains(e){return this.from<=e&&e<=this.to}clamp(e){return Math.min(Math.max(this.from,e),this.to)}}const KOe=new pc(-1,1);class xg{constructor(e){this.editAdjustments=({type:e,value:t})=>{const r=KOe.clamp(t);this.state[e]=r};this.reset=()=>{Id.runInAction(()=>{this.indexInContainer===-1&&(Object.keys(k0).forEach(e=>{this.state[e]=k0[e]}),this.orderHelper.removeIndex(S.ADJUSTMENT))})};this.setAdjustmentEffect=e=>{const t=this.orderHelper.addIndex(S.ADJUSTMENT);return this.effect?this.effect.setProperties(e):this.effect=this.engineMediator.engine.addAdjustments(e,this.engineMediator.image.container,t),this.effect.getProperties()};this.removeAdjustmentEffect=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.indexInContainer===-1&&(this.effect=void 0))};this.engineMediator=e,this.state=k0}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}get orderHelper(){return this.engineMediator.orderHelper}}m([Id.observable],xg.prototype,"state",2),m([Id.action],xg.prototype,"editAdjustments",2),m([Id.action],xg.prototype,"reset",2);class ft{constructor(e){this.dirty=rt.observable.box(!1);this.editAdjustments=({type:e,value:t})=>{this.pureSetAdjustment({type:e,value:t}),this.editor.render()};this.toolSnapshot=()=>{this.dirty.set(!0),this.addSnapshot(Ie.EDIT,S.ADJUSTMENT)};this.addSnapshot=(e,t)=>{this.editor.addSnapshot(void 0,e,t)};this.toggleOptionSelection=e=>{this.selectedOption=e};this.pureSetAdjustment=({type:e,value:t})=>{const r=this.adjustmentsStore.setAdjustmentEffect({[e]:t});this.adjustmentsStore.editAdjustments({type:e,value:r[e]})};this.pureReset=()=>{this.dirty.set(!1),this.adjustmentsStore.removeAdjustmentEffect(),this.adjustmentsStore.reset(),this.selectedOption=""};this.reset=()=>{this.pureReset(),this.addSnapshot(Ie.DELETE,this.locale.controls.buttonReset),this.editor.render()};this.updateStateFromHistory=e=>{rt.runInAction(()=>{Object.keys(e).forEach(t=>{this.pureSetAdjustment({type:t,value:e[t]})})})};this.updateStateFromSerialization=e=>{this.updateStateFromHistory(e)};this.editor=e,this.adjustmentsStore=new xg(this.editor.engineMediator),this.selectedOption="";const t=this.editor.assetProvider.getAssets("adjustment");this.entityManager=new mr(t,v(v({},this.config),{categoryKey:"",itemKey:"thumbnailURI",locale:v(v({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("adjustment")}))}get selectedAdjustmentType(){return this.selectedOption}get isDirty(){return this.dirty.get()}get state(){return this.adjustmentsStore.state}get selectedOptionLabel(){const e=this.items.find(t=>t?t.identifier===this.selectedOption:!1);return e?e.name:""}get brightness(){return this.state.brightness}get saturation(){return this.state.saturation}get contrast(){return this.state.contrast}get gamma(){return this.state.gamma}get clarity(){return this.state.clarity}get exposure(){return this.state.exposure}get shadows(){return this.state.shadows}get highlights(){return this.state.highlights}get whites(){return this.state.whites}get blacks(){return this.state.blacks}get temperature(){return this.state.temperature}get sharpness(){return this.state.sharpness}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config[S.ADJUSTMENT]}get locale(){return this.editor.configStore.locale[S.ADJUSTMENT]}}m([rt.observable],ft.prototype,"selectedOption",2),m([rt.observable],ft.prototype,"dirty",2),m([rt.action],ft.prototype,"editAdjustments",2),m([rt.action],ft.prototype,"toggleOptionSelection",2),m([rt.action],ft.prototype,"pureSetAdjustment",2),m([rt.action],ft.prototype,"pureReset",2),m([rt.action],ft.prototype,"reset",2),m([rt.action],ft.prototype,"updateStateFromHistory",2),m([rt.action],ft.prototype,"updateStateFromSerialization",2),m([rt.computed],ft.prototype,"selectedAdjustmentType",1),m([rt.computed],ft.prototype,"isDirty",1),m([rt.computed],ft.prototype,"state",1),m([rt.computed],ft.prototype,"selectedOptionLabel",1),m([rt.computed],ft.prototype,"brightness",1),m([rt.computed],ft.prototype,"saturation",1),m([rt.computed],ft.prototype,"contrast",1),m([rt.computed],ft.prototype,"gamma",1),m([rt.computed],ft.prototype,"clarity",1),m([rt.computed],ft.prototype,"exposure",1),m([rt.computed],ft.prototype,"shadows",1),m([rt.computed],ft.prototype,"highlights",1),m([rt.computed],ft.prototype,"whites",1),m([rt.computed],ft.prototype,"blacks",1),m([rt.computed],ft.prototype,"temperature",1),m([rt.computed],ft.prototype,"sharpness",1),m([rt.computed],ft.prototype,"categories",1),m([rt.computed],ft.prototype,"items",1),m([rt.computed],ft.prototype,"config",1),m([rt.computed],ft.prototype,"locale",1);const nr=_(Ge()),Od=_(Ge()),E0={identifier:"identity",intensity:1,isDuotone:!1},$Oe=new pc(0,1);class Ad{constructor(e){this.changeIdentifier=e=>{this.state.identifier=e};this.changeIfDuotone=e=>{this.state.isDuotone=e};this.changeIntensity=e=>{const t=$Oe.clamp(e);this.state.intensity=t};this.reset=()=>{this.indexInContainer===-1&&(this.state.identifier=E0.identifier,this.state.intensity=E0.intensity,this.removeIndex())};this.setFilterEffect=({identifier:e,intensity:t,isDuotone:r})=>{const i=this.state;this.changeIdentifier(e),this.changeIntensity(t),this.changeIfDuotone(r),this.removeFilterEffect();const o=this.engineMediator.orderHelper.addIndex(S.FILTER);return r?new Promise((n,s)=>{this.engineMediator.engine.addDuoToneFilterFromAssets(e,this.engineMediator.image.container,o).then(a=>{this.effect=a,this.effect.setProperties({colorIntensity:t}),n()}).catch(a=>{this.fallbackOnError(i),s(a)})}):new Promise((n,s)=>{this.engineMediator.engine.addLUTFilterFromAssets(e,this.engineMediator.image.container,o).then(a=>{this.effect=a,this.effect.setProperties({intensity:t}),n()}).catch(a=>{this.fallbackOnError(i),s(a)})})};this.removeFilterEffect=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.indexInContainer===-1&&(this.effect=void 0))};this.setEffectProperties=({intensity:e})=>this.effect?(this.state.isDuotone?this.effect.setProperties({colorIntensity:e}):this.effect.setProperties({intensity:e}),this.effect.getProperties()):null;this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex(S.FILTER)};this.fallbackOnError=e=>{this.changeIdentifier(e.identifier),this.changeIntensity(e.intensity),e.identifier==="identity"&&this.removeIndex()};this.engineMediator=e,this.state=E0}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}}m([Od.observable],Ad.prototype,"state",2),m([Od.action],Ad.prototype,"changeIdentifier",2),m([Od.action],Ad.prototype,"changeIfDuotone",2),m([Od.action],Ad.prototype,"changeIntensity",2),m([Od.action],Ad.prototype,"reset",2);const WE="identity";class cr{constructor(e){this.selectFilter=(e,t=1)=>se(this,null,function*(){e!==this.identifier&&(yield this.filterStore.setFilterEffect({identifier:e,intensity:t,isDuotone:this.isOptionDuoTone(e)}),this.editor.render(),this.addSnapshot(Ie.ADD,S.FILTER))});this.changeIntensity=e=>{const t=this.isOptionDuoTone(this.identifier),r=this.filterStore.setEffectProperties({intensity:e});if(r){const i=t?r.colorIntensity:r.intensity;this.filterStore.changeIntensity(i),this.editor.render()}};this.setImageAndGetPreviews=()=>se(this,null,function*(){const{image:e}=this.editor.activeStore.state;yield this.editor.previewThumbnails.addImageToContainer(e),yield this.getAllFilterPreview()});this.getAllFilterPreview=()=>se(this,null,function*(){const e=this.entityManager.items.map(o=>({identifier:o.identifier,isDuotone:this.isOptionDuoTone(o.identifier)})),t=yield this.editor.previewThumbnails.getAllFilterPreviewThumbnails(e);yield this.editor.wait();const{config:r}=this,i=this.editor.configStore.assetProvider.getAssets("filter").map(o=>v(v({},o),{items:o.items.map(n=>v(v({},n),{thumbnailURI:t[n.identifier]}))}));this.entityManager=new mr(i,v(v({},r),{categoryKey:"thumbnailURI",itemKey:"thumbnailURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")}))});this.toolSnapshot=()=>{this.addSnapshot(Ie.EDIT,this.locale.controls.sliderIntensity)};this.addSnapshot=(e,t)=>{this.editor.addSnapshot(void 0,e,t)};this.pureReset=()=>{this.selectedCategory=WE,this.filterStore.removeFilterEffect(),this.filterStore.reset()};this.reset=()=>{this.pureReset(),this.addSnapshot(Ie.DELETE,this.locale.controls.buttonReset),this.editor.render()};this.toggleCategorySelection=e=>{this.selectedCategory=this.selectedCategory===e?WE:e};this.updateStateFromSerialization=({identifier:e,intensity:t})=>{const r=this.doesFilterAssetExist(e);if(r){const i=ed(r);return this.filterStore.setFilterEffect({identifier:e,intensity:t,isDuotone:i})}return new Promise((i,o)=>{o(new Error(`Filter Asset ${e} doesn't exist`))})};this.updateStateFromHistory=e=>se(this,null,function*(){return e.identifier==="identity"?(this.pureReset(),new Promise(t=>{t()})):this.filterStore.setFilterEffect(e)});this.doesFilterAssetExist=e=>this.entityManager.items.find(t=>e===t.identifier);this.isOptionDuoTone=e=>{const t=this.doesFilterAssetExist(e);return t?ed(t):!1};this.editor=e,this.selectedCategory=WE,this.filterStore=new Ad(this.editor.engineMediator);const{config:t}=this,r=this.editor.configStore.assetProvider.getAssets("filter");this.entityManager=new mr(r,v(v({},t),{categoryKey:"thumbnailURI",itemKey:"thumbnailURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")}))}get state(){return this.filterStore.state}get identifier(){return this.state.identifier}get intensity(){return this.state.intensity}get isDuotone(){return this.state.isDuotone}get selectedCategoryIdentifier(){return this.selectedCategory}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config[S.FILTER]}get locale(){return this.editor.configStore.locale[S.FILTER]}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}}m([nr.observable],cr.prototype,"selectedCategory",2),m([nr.observable],cr.prototype,"entityManager",2),m([nr.action],cr.prototype,"selectFilter",2),m([nr.action],cr.prototype,"changeIntensity",2),m([nr.action],cr.prototype,"pureReset",2),m([nr.action],cr.prototype,"reset",2),m([nr.action],cr.prototype,"toggleCategorySelection",2),m([nr.action],cr.prototype,"updateStateFromSerialization",2),m([nr.action],cr.prototype,"updateStateFromHistory",2),m([nr.computed],cr.prototype,"state",1),m([nr.computed],cr.prototype,"identifier",1),m([nr.computed],cr.prototype,"intensity",1),m([nr.computed],cr.prototype,"isDuotone",1),m([nr.computed],cr.prototype,"selectedCategoryIdentifier",1),m([nr.computed],cr.prototype,"isOptionSelected",1),m([nr.computed],cr.prototype,"config",1),m([nr.computed],cr.prototype,"locale",1),m([nr.computed],cr.prototype,"categories",1),m([nr.computed],cr.prototype,"items",1);const qe=_(Ge()),ri=_(Ge());function HE(e){const t=e&&typeof e=="object";return t&&Object.prototype.toString.call(e)!=="[object RegExp]"&&Object.prototype.toString.call(e)!=="[object Date]"}function YOe(e){return Array.isArray(e)?[]:{}}function KE(e,t){const r=t&&t.clone===!0;return r&&HE(e)?VE(YOe(e),e,t):e}function XOe(e,t,r){const i={};return HE(e)&&Object.keys(e).forEach(o=>{i[o]=KE(e[o],r)}),Object.keys(t).forEach(o=>{const n=HE(t[o])&&e[o];i[o]=n?VE(e[o],t[o],r):KE(t[o],r)}),i}function VE(e,t,r){const i=Array.isArray(t);return i?Array.isArray(e)?t:KE(t,r):XOe(e,t,r)}function yo(e,t=null){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((r,i)=>VE(r,i,t))}class VK extends so{onExport(e){this.emit(fe.EXPORT,e)}onClose(){this.emit(fe.CLOSE)}onHistoryChange(){this.emit(fe.HISTORY_CHANGE)}onEditorReady(){this.emit(fe.EDITOR_READY)}onErrorImageLoading(e){this.emit(fe.ERROR_IMAGE_LOADING,e)}onImageLoaded(){this.emit(fe.IMAGE_LOAD)}onStickerUploadedAdd(e){this.emit(fe.STICKER_UPLOAD_ADD,e)}onToolChanged(e){this.emit(fe.TOOL_ENTER,e)}}const $E={common:{error:"Fehler",warning:"Warnung",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Farbe",sliderOpacity:"Farbe Transparenz"}}},mainCanvasActions:{buttonExport:"Bild Exportieren",buttonUndo:"R\xFCckg\xE4ngig machen",buttonRedo:"Wiederholen",buttonClose:"Schlie\xDFen"},infoModals:{exporting:{heading:"Exportieren...",body:"Einen Moment bitte..."},saving:{heading:"Speichere...",body:"Einen Moment bitte..."},loading:{heading:"Lade...",body:"Einen Moment bitte..."},resizing:{heading:"Bild wird bearbeitet...",body:"Einen Moment bitte..."},loadingFonts:{heading:"Lade Schriftarten...",body:"Einen Moment bitte..."},stickerLoading:{heading:"Lade Sticker...",body:"Einen Moment bitte..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Laden des Bildes fehlgeschlagen. Dies kann verschiedene Gr\xFCnde haben, beispielsweise kann die Datei defekt sein oder der Dateityp wird nicht unterst\xFCtzt",buttonYes:"Neu Laden"},rendering:{headingDelimiter:":",body:"Beim Rendern des Bildes ist ein Fehler aufgetreten",buttonYes:"Neu Laden"},fontLoading:{headingDelimiter:":",heading:"Laden von Schriftarten ist fehlgeschlagen",body:"Die folgenden Schriftarten konnten nicht geladen werden: ${error}",buttonNo:"Schlie\xDFen"},webcamUnavailable:{headingDelimiter:":",body:"Webcam-Bild kann nicht dargestellt werden. (Fehler: ${error})",buttonYes:"Schlie\xDFen"},stickerLoading:{headingDelimiter:":",body:"Laden des Stickers fehlgeschlagen.",buttonNo:"Schlie\xDFen"},unexpectedError:{headingDelimiter:":",body:"Ein unerwarteter Fehler ist aufgetreten, ${error}",buttonYes:"Neu Laden"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Bild verkleinert",body:"Ihr Bild \xFCbersteigt die maximale Gr\xF6sse von ${megapixels} megapixels und wurde auf ${width}x${height} Pixel verkleinert",buttonYes:"Weiter"},discardChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xC4nderungen verwerfen wollen?",buttonYes:"\xC4nderungen verwerfen",buttonNo:"\xC4nderungen beibehalten"},unsavedChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xC4nderungen verwerfen wollen?",buttonYes:"Beenden ohne zu speichern",buttonNo:"Schlie\xDFen"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Ihre Daten wurden von einem veralteten Format geladen und k\xF6nnten anders aussehen",buttonYes:"\xC4nderungen anwenden",buttonNo:"Abbrechen"},unsupportedWebGLRenderer:{body:"Es wurde ein Problem im Browser festgestellt, welches zu langen Ladezeiten f\xFChren kann. Bitte probieren sie einen anderen Browser.",buttonYes:"Weiter"}},library:{title:"Bibliothek",controls:{buttonUpload:"Bild Hochladen",buttonWebcamOpen:"Webcam \xD6ffnen",buttonWebcamClose:"Webcam Schlie\xDFen",placeholderSearch:"Bibliothek durchsuchen",noResults:"Keine Ergebnisse"}},filter:{title:"Filter",controls:{buttonReset:"Zur\xFCcksetzen",sliderIntensity:"Filter Intensit\xE4t"},categories:{[Et.DuoTone]:"DuoTone",[Et.BW]:"B & W",[Et.Vintage]:"Vintage",[Et.Smooth]:"Smooth",[Et.Cold]:"Cold",[Et.Warm]:"Warm",[Et.Legacy]:"Legacy"},items:{[I.Inferno]:"Inferno",[I.Chestnut]:"Chestnut",[I.Fixie]:"Fixie",[I.Fridge]:"Fridge",[I.Sunny70s]:"Sunny 70s",[I.FlatBlack]:"Flat Black",[I.Mellow]:"Mellow",[I.HardStuff]:"Hard Stuff",[I.Oldtimer]:"Oldtimer",[I.AD1920]:"1920 A.D.",[I.Ancient]:"Ancient",[I.Kalmen]:"Kalmen",[I.Joran]:"Joran",[I.Polaroid]:"Polaroid",[I.Zephyr]:"Zephyr",[I.Levante]:"Levante",[I.Greyed]:"Greyed",[I.Classic]:"Classic",[I.Colorful]:"Colorful",[I.Snappy]:"Snappy",[I.Candy]:"Candy",[I.Creamy]:"Creamy",[I.LowFire]:"Low Fire",[I.Colla]:"Colla",[I.Sunrise]:"Sunrise",[I.Moss]:"Moss",[I.Food]:"Food",[I.Glam]:"Glam",[I.Gobblin]:"Gobblin",[I.HighCarb]:"High Carb",[I.Hicon]:"Hicon",[I.K1]:"K1",[I.K6]:"K6",[I.Pebble]:"Pebble",[I.Keen]:"Keen",[I.Lemon]:"Lemon",[I.Litho]:"Litho",[I.Lomo]:"Lomo",[I.Lomo100]:"Lomo 100",[I.Lucid]:"Lucid",[I.Neat]:"Neat",[I.Pumpkin]:"Pumpkin",[I.Solanus]:"Solanus",[I.Pale]:"Pale",[I.Pitched]:"Pitched",[I.Weathered]:"Weathered",[I.GreenGap]:"Green Gap",[I.PolaSX]:"Pola SX",[I.Pro400]:"Pro 400",[I.Quozi]:"Quozi",[I.Sepia]:"Sepia",[I.Settled]:"Settled",[I.Seventies]:"Seventies",[I.Soft]:"Soft",[I.Steel]:"Steel",[I.Summer]:"Summer",[I.Golden]:"Golden",[I.Tender]:"Tender",[I.Twilight]:"Twilight",[I.Softy]:"Softy",[I.Dusty]:"Dusty",[I.Desert]:"Desert",[I.Peach]:"Peach",[I.Clash]:"Clash",[I.Plum]:"Plum",[I.Breezy]:"Breezy",[I.DeepBlue]:"Deep Blue",[I.Frog]:"Frog",[I.Sunset]:"Sunset"}},adjustment:{title:"Korrekturen",controls:{buttonReset:"Zur\xFCcksetzen"},categories:{basics:"Grundlagen",refinements:"Feinheiten"},items:{brightness:"Helligkeit",saturation:"S\xE4ttigung",contrast:"Kontrast",gamma:"Gamma",sharpness:"Sch\xE4rfe",clarity:"Klarheit",exposure:"Belichtung",shadows:"Schatten",highlights:"Lichter",whites:"Wei\xDF",blacks:"Schwarz",temperature:"Temperatur"}},focus:{title:"Weichzeichnen",controls:{buttonReset:"Zur\xFCcksetzen",sliderIntensity:"Focus Intensit\xE4t"},items:{radial:"Kreisf\xF6rmig",mirrored:"Gespiegelt",linear:"Linear",gaussian:"Gau\xDFsch"},history:{focusPosition:"Focus Position",focusSize:"Focus Gr\xF6\xDFe"}},overlay:{title:"Overlays",controls:{buttonReset:"Zur\xFCcksetzen",sliderOpacity:"Overlay Transparenz",carouselBlendMode:"Overlay Mischmodus",blendModeNormal:"Normal",blendModeOverlay:"\xDCberblenden",blendModeHardLight:"Hartes Licht",blendModeSoftLight:"Weiches Licht",blendModeMultiply:"Multiplizieren",blendModeDarken:"Abdunkeln",blendModeLighten:"Aufhellen",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Transparenz",tabBlendMode:"Mischmodus"},items:{[Ce.Bokeh]:"Bokeh",[Ce.Chop]:"Chop",[Ce.Clouds]:"Clouds",[Ce.Golden]:"Golden",[Ce.Grain]:"Grain",[Ce.Hearts]:"Hearts",[Ce.LightLeak1]:"Light Leak 1",[Ce.LightLeak2]:"Light Leak 2",[Ce.Metal]:"Metal",[Ce.Mosaic]:"Mosaic",[Ce.Painting]:"Painting",[Ce.Paper]:"Paper",[Ce.Rain]:"Rain",[Ce.Vintage]:"Vintage",[Ce.Wall1]:"Wall",[Ce.Wall2]:"Wall 2",[Ce.Wood]:"Wood"}},sticker:{title:"Sticker",controls:{buttonUpload:"Sticker Hochladen",sliderOpacity:"Sticker Transparenz",selectColor:"Stickerfarbe",tabColor:"Farbe",tabOpacity:"Transparenz"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren",buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"Neuer Text",dropdownFontFamily:"Schriftart",textFontSize:"Schriftgr\xF6\xDFe",selectAlignment:"Ausrichtung",selectFontColor:"Schriftfarbe",selectBackgroundColor:"Hintergrundfarbe",sliderLineSpacing:"Zeilenabstand",tabColor:"Farbe",tabBgColor:"Hintergrund",tabAlignment:"Ausrichtung",tabLineHeight:"Zeilenh\xF6he",tabFontSize:"Schriftgr\xF6\xDFe"},canvasControls:{placeholderText:"Etwas aufschreiben",buttonSave:"Fertig",buttonClose:"Abbrechen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"Neues Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Textfarbe",tabColor:"Farbe",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Etwas aufschreiben mit Style",buttonSave:"Done",buttonClose:"Schlie\xDFen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonInvert:"Invertieren",buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Rahmen",controls:{buttonReset:"Zur\xFCcksetzen",sliderOpacity:"Rahmen Transparenz",sliderSize:"Rahmen Dicke",selectColor:"Rahmen Farbe",tabColor:"Farbe",tabOpacity:"Transparenz",tabSize:"Dicke"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Malen",controls:{buttonReset:"Zur\xFCcksetzen",sliderSize:"Dicke",sliderHardness:"H\xE4rte",selectColor:"Farbe",tabSize:"Dicke",tabHardness:"H\xE4rte",tabColor:"Farbe"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Zuschneiden",controls:{buttonReset:"Zur\xFCcksetzen",checkboxKeepResolution:"Fixiere Aufl\xF6sung",inputCropSize:"Bildgr\xF6\xDFe",inputHeight:"h",inputWidth:"b",tabFlipAndRotate:"Spiegeln & Drehen",tabResolution:"Aufl\xF6sung",tabCropSize:"Bildgr\xF6\xDFe"},categories:{imgly_transforms_common:"Standard",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Frei",imgly_transform_common_square:"Quadratisch",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Titel",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln",buttonRotateClockwise:"Drehe im Uhrzeigersinn",buttonRotateAntiClockwise:"Drehe gegen Uhrzeigersinn"}}},Rd={common:{error:"Error",warning:"Warning",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Color",sliderOpacity:"Color Opacity"}}},mainCanvasActions:{buttonExport:"Export Image",buttonUndo:"Undo",buttonRedo:"Redo",buttonClose:"Close"},infoModals:{exporting:{heading:"Exporting...",body:"Just a few seconds..."},saving:{heading:"Saving...",body:"Just a few seconds..."},loading:{heading:"Loading...",body:"Just a few seconds..."},resizing:{heading:"Resizing...",body:"Just a few seconds..."},loadingFonts:{heading:"Loading Fonts...",body:"Just a few seconds..."},stickerLoading:{heading:"Loading Sticker...",body:"Just a few seconds..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Failed to load image. This can have multiple reasons, e.g. the file is corrupted or the file type is not supported",buttonYes:"Reload"},rendering:{headingDelimiter:":",body:"An error has occurred while rendering the image",buttonYes:"Reload"},fontLoading:{headingDelimiter:":",heading:"Failed to load font",body:"The following fonts could not be loaded: ${error}",buttonNo:"Close"},webcamUnavailable:{headingDelimiter:":",body:"Unable to display webcam image (Error: ${error})",buttonYes:"Close"},stickerLoading:{headingDelimiter:":",body:"Unable to load the sticker",buttonNo:"Close"},unexpectedError:{headingDelimiter:":",body:"An unexpected error has occured ${error}",buttonYes:"Reload"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Image resized",body:"Your image exceeds the maximum size of ${megapixels} megapixels and has been resized to ${width}x${height} pixels",buttonYes:"Continue"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Your data was restored from a legacy data format and might look different",buttonYes:"Apply changes",buttonNo:"Cancel"},discardChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to discard the changes?",buttonYes:"Discard changes",buttonNo:"Keep Changes"},unsavedChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to exit?",buttonYes:"Exit without saving",buttonNo:"Cancel"},unsupportedWebGLRenderer:{body:"A problem has been detected in the browser that could cause long loading times. Please try a different browser.",buttonYes:"Continue"}},library:{title:"Library",controls:{buttonUpload:"Upload Image",buttonWebcamOpen:"Open Webcam",buttonWebcamClose:"Close Webcam",placeholderSearch:"Search Library",noResults:"No Results"}},filter:{title:"Filters",controls:{buttonReset:"Remove Filter",sliderIntensity:"Filter Intensity"},categories:{[Et.DuoTone]:"DuoTone",[Et.BW]:"B & W",[Et.Vintage]:"Vintage",[Et.Smooth]:"Smooth",[Et.Cold]:"Cold",[Et.Warm]:"Warm",[Et.Legacy]:"Legacy"},items:{[I.Inferno]:"Inferno",[I.Chestnut]:"Chestnut",[I.Fixie]:"Fixie",[I.Fridge]:"Fridge",[I.Sunny70s]:"Sunny 70s",[I.FlatBlack]:"Flat Black",[I.Mellow]:"Mellow",[I.HardStuff]:"Hard Stuff",[I.Oldtimer]:"Oldtimer",[I.AD1920]:"1920 A.D.",[I.Ancient]:"Ancient",[I.Kalmen]:"Kalmen",[I.Joran]:"Joran",[I.Polaroid]:"Polaroid",[I.Zephyr]:"Zephyr",[I.Levante]:"Levante",[I.Greyed]:"Greyed",[I.Classic]:"Classic",[I.Colorful]:"Colorful",[I.Snappy]:"Snappy",[I.Candy]:"Candy",[I.Creamy]:"Creamy",[I.LowFire]:"Low Fire",[I.Colla]:"Colla",[I.Sunrise]:"Sunrise",[I.Moss]:"Moss",[I.Food]:"Food",[I.Glam]:"Glam",[I.Gobblin]:"Gobblin",[I.HighCarb]:"High Carb",[I.Hicon]:"Hicon",[I.K1]:"K1",[I.K6]:"K6",[I.Pebble]:"Pebble",[I.Keen]:"Keen",[I.Lemon]:"Lemon",[I.Litho]:"Litho",[I.Lomo]:"Lomo",[I.Lomo100]:"Lomo 100",[I.Lucid]:"Lucid",[I.Neat]:"Neat",[I.Pumpkin]:"Pumpkin",[I.Solanus]:"Solanus",[I.Pale]:"Pale",[I.Pitched]:"Pitched",[I.Weathered]:"Weathered",[I.GreenGap]:"Green Gap",[I.PolaSX]:"Pola SX",[I.Pro400]:"Pro 400",[I.Quozi]:"Quozi",[I.Sepia]:"Sepia",[I.Settled]:"Settled",[I.Seventies]:"Seventies",[I.Soft]:"Soft",[I.Steel]:"Steel",[I.Summer]:"Summer",[I.Golden]:"Golden",[I.Tender]:"Tender",[I.Twilight]:"Twilight",[I.Softy]:"Softy",[I.Dusty]:"Dusty",[I.Desert]:"Desert",[I.Peach]:"Peach",[I.Clash]:"Clash",[I.Plum]:"Plum",[I.Breezy]:"Breezy",[I.DeepBlue]:"Deep Blue",[I.Frog]:"Frog",[I.Sunset]:"Sunset"}},adjustment:{title:"Adjust",controls:{buttonReset:"Reset Adjustment"},categories:{basics:"Basic",refinements:"Refinements"},items:{brightness:"Brightness",saturation:"Saturation",contrast:"Contrast",gamma:"Gamma",sharpness:"Sharpness",clarity:"Clarity",exposure:"Exposure",shadows:"Shadows",highlights:"Highlights",whites:"Whites",blacks:"Blacks",temperature:"Temperature"}},focus:{title:"Focus",controls:{buttonReset:"Remove Focus",sliderIntensity:"Focus Intensity"},items:{radial:"Radial",mirrored:"Mirrored",linear:"Linear",gaussian:"Gaussian"},history:{focusPosition:"Focus Position",focusSize:"Focus Size"}},overlay:{title:"Overlays",controls:{buttonReset:"Remove Overlay",sliderOpacity:"Overlay Opacity",carouselBlendMode:"Overlay Blend mode",blendModeNormal:"Normal",blendModeOverlay:"Overlay",blendModeHardLight:"Hard Light",blendModeSoftLight:"Soft Light",blendModeMultiply:"Multiply",blendModeDarken:"Darken",blendModeLighten:"Lighten",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Opacity",tabBlendMode:"Blend Mode"},items:{[Ce.Bokeh]:"Bokeh",[Ce.Chop]:"Chop",[Ce.Clouds]:"Clouds",[Ce.Golden]:"Golden",[Ce.Grain]:"Grain",[Ce.Hearts]:"Hearts",[Ce.LightLeak1]:"Light Leak 1",[Ce.LightLeak2]:"Light Leak 2",[Ce.Metal]:"Metal",[Ce.Mosaic]:"Mosaic",[Ce.Painting]:"Painting",[Ce.Paper]:"Paper",[Ce.Rain]:"Rain",[Ce.Vintage]:"Vintage",[Ce.Wall1]:"Wall",[Ce.Wall2]:"Wall 2",[Ce.Wood]:"Wood"}},sticker:{title:"Stickers",controls:{buttonUpload:"Upload Sticker",sliderOpacity:"Sticker Opacity",selectColor:"Sticker Color",tabColor:"Color",tabOpacity:"Opacity"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate",buttonFlipHorizontal:"Flip",buttonFlipVertical:"Flip"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"New Text",dropdownFontFamily:"Font Family",textFontSize:"Font Size",selectAlignment:"Alignment",selectFontColor:"Font Color",selectBackgroundColor:"Background Color",sliderLineSpacing:"Line Spacing",tabColor:"Color",tabBgColor:"Bg Color",tabAlignment:"Alignment",tabLineHeight:"Line Height",tabFontSize:"Font Size"},canvasControls:{placeholderText:"Write Something",buttonSave:"Done",buttonClose:"Cancel",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"New Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Text Color",tabColor:"Color",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Write Something With Style",buttonSave:"Done",buttonClose:"Schlie\xDFen",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonInvert:"Invert",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Frames",controls:{buttonReset:"Remove Frame",sliderOpacity:"Frame Opacity",sliderSize:"Frame Size",selectColor:"Frame Color",tabColor:"Color",tabOpacity:"Opacity",tabSize:"Size"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Brush",controls:{buttonReset:"Remove Brush",sliderSize:"Brush Size",sliderHardness:"Brush Hardness",selectColor:"Brush Color",tabSize:"Size",tabHardness:"Hardness",tabColor:"Color"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Transform",controls:{buttonReset:"Reset to default",checkboxKeepResolution:"Keep Resolution",inputCropSize:"Crop Size",inputHeight:"h",inputWidth:"w",tabFlipAndRotate:"Flip & Rotate",tabResolution:"Resolution",tabCropSize:"Crop Size"},categories:{imgly_transforms_common:"Common",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Custom",imgly_transform_common_square:"Square",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Title",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Flip Horizontal",buttonFlipVertical:"Flip Vertical",buttonRotateClockwise:"Rotate Clockwise",buttonRotateAntiClockwise:"Rotate Counterclockwise"}}};const KK=e=>e==="de"?$E:Rd,$K=(e,t)=>t&&t[e]?yo([KK(e),t[e]]):KK(e)||Rd;const JOe={headline1:{size:16,letterSpacing:1.5,case:"uppercase"},headline2:{size:14,letterSpacing:.8,case:"uppercase"},body:{size:13,letterSpacing:0,case:"none"},label:{size:13,letterSpacing:0,case:"capitalize"},basicUICardLabel:{size:12,letterSpacing:0,case:"capitalize"},button1:{size:12,letterSpacing:1.2,case:"uppercase"},button2:{size:14,letterSpacing:0,case:"capitalize"},basicUITabLabel:{size:14,letterSpacing:.8,case:"uppercase"}},ZOe={toast:2,controlsBar:5,buttonGroup:5,toolControlBar:6,toolbar:7,label:10,disable:11,canvas:{knob:4,bar:5,controls:5,snappingGuide:1,crop:{grid:2,dragImage:3,backdrop:4},webcam:{backdrop:7}},input:{list:6},button:{float:5},dialog:{base:100,backdrop:1,container:2},colorItem:{overlay:2,background:1,tiledBackground:0}},D0=()=>{const e=8,t=230,r=3*e,i=t-2*r,o=(i-2*e)/3,n=(i-e)/2;return{advancedUIToolbar:{width:55,itemHeight:48,seperatorHeight:20,marginBottom:0},advancedUIToolControlBar:{width:t,padding:`${2*e}px ${r}px`,marginBottom:0},advancedCard:{small:{height:o,width:o},medium:{height:n,width:n},large:{height:86,width:i}},advancedSpacer:8,basicCanvasOffset:40+76-88,basicUIToolbar:{openHeight:88,closeHeight:40},basicToolControlBar:{itemsBarHeight:72,controlsBarHeight:80,maxHeight:72+40+4,maxWidth:300},basicCard:{medium:{height:56,width:90},large:{height:60,width:110}},basicSpacer:8,mainCanvasActionBar:{height:50},crop:{minSize:50},canvas:{marginTop:0,transform:{minSliderWidth:435,minValueWidth:235,minFlipWidth:160}},canvasControls:{sprite:{controlOffset:16,rotateHandle:{height:16},minSize:30,controlPadding:16},knob:{size:16,touchable:{desktop:24}},corner:{size:14,touchable:{desktop:24,mobile:48},borderWidth:4},width:{size:14}},buttons:{float:{size:56}},colorItem:{size:20},color:{colorPicker:{width:214,height:370,saturationSlider:{height:150},thumb:{size:14},arrow:{width:36}}},fontSystem:JOe,zIndex:ZOe}},QOe=({primary:e="#365afc",background:t="#0B0B0B",foreground:r="#FFFFFF"}={primary:"#365afc",background:"#0B0B0B",foreground:"#FFFFFF"})=>{const i="rgba(255, 255, 255, 0.90)",o="rgba(255, 255, 255, 0.60)",n="rgba(255, 255, 255, 0.38)",s="#424242",a="#333333",l="#242424",c="#171717",d="#0B0B0B",u="rgba(255, 255, 255, 0.08)",p="rgba(0, 0, 0, 0.3)",h="rgba(89, 121, 252, 0.20)",b="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",provider:"google"},background:t,foreground:r,primary:e,warning:"#ffba5c",error:"#c2393a",success:"#39c26c",focusOutlineColor:"rgba(255, 255, 255, 0.12)",scrollbar:{handleColor:"rgba(255, 255, 255, 0.2)"},button:{outlinedBorderColor:a,activeForeground:e,containedPrimaryBackground:e,containedPrimaryForeground:i,outlinedPrimaryBackground:l,outlinedPrimaryForeground:i,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:o,textPrimaryForeground:e,textSecondaryForeground:o,outlinedInactiveOverlayColor:p,textInactiveOpacity:"0.5",hoverOverlayColor:u},checkbox:{background:a,foreground:r,activeForeground:r,activeBackground:e,inactiveOpacity:b,hoverOpacity:"0.8"},modal:{background:l,bodyForeground:i,headerForeground:o,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:a,foreground:i,activeBorderColor:e,activeOverlayColor:h,labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:i,inactiveOverlayColor:p,hoverOverlayColor:u},tabTitle:{foreground:o,background:"transparent",activeBackground:"transparent",activeBorderColor:e,activeForeground:i},dropdown:{background:"transparent",foreground:i,hoverBorderColor:o,borderColor:a,caretColor:n,listBackground:a,listBorderColor:a,listItemHoverBackground:s,listForeground:o,listShadow:`0 12px 17px 2px rgba(0,0,0,0.14),
        0 5px 22px 4px rgba(0,0,0,0.12),
        0 7px 8px -4px rgba(0,0,0,0.20)`,inactiveOpacity:b},textInput:{foreground:i,hoverBorderColor:"rgba(255, 255, 255, 0.40)",background:"transparent",borderColor:a,inactiveOpacity:b},slider:{trackColor:"rgba(255, 255, 255, 0.4)",activeTrackColor:e,thumbBackground:c,thumbBorderColor:e,inactiveOpacity:b,hoverOpacity:"0.7"},selectColor:{activeBorderColor:e,inactiveOpacity:b},toolbar:{foreground:i,background:l,activeBackground:"transparent",activeForeground:e,borderColor:"transparent"},tooltip:{background:s,foreground:i},toolControlBar:{background:"rgba(23, 23, 23, 0.9)",borderColor:"transparent",shadow:"none",separatorColor:a,titleForeground:o,inputLabelForeground:o,inputLabelInactiveOpacity:b},mainCanvasActionBar:{background:"linear-gradient(0deg, transparent 0%,  rgba(0, 0, 0, 0.6) 98%)",foreground:i,borderColor:"none"},canvasActionBar:{background:s,foreground:i,separatorColor:n},canvas:{background:d,controlsOutline:"rgba(255, 255, 255, 0.5)",controlsColor:"#ffffff",cropBackdrop:"rgba(0, 0, 0, 0.5)"},colorPicker:{listBackground:a,listShadow:`0 12px 17px 2px rgba(0,0,0,0.14),
        0 5px 22px 4px rgba(0,0,0,0.12),
        0 7px 8px -4px rgba(0,0,0,0.20)`,controlsColor:"#ffffff",inputBorderColor:s},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:r,background:d},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#424242",highlight:"#565656",shadow:"#333333"}}}};var I0=QOe;const eAe=({primary:e="#1e47fb",background:t="#FBFBFB",foreground:r="#000000"}={primary:"#1e47fb",background:"#FBFBFB",foreground:"#000000"})=>{const i="rgba(0, 0, 0, 0.90)",o="rgba(0, 0, 0, 0.60)",n="rgba(0, 0, 0, 0.38)",s="#CCCCCC",a="#D4D4D4",l="#E6E6E6",c="#EEEEEE",d="#FBFBFB",u="rgba(125, 125, 125, 0.12)",p="rgba(30, 71, 251, 0.2)",h="rgba(0, 0, 0, 0.3)",b="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",provider:"google"},background:t,foreground:r,primary:e,warning:"#ffb045",error:"#c01a1b",success:"#17c658",focusOutlineColor:"rgba(125, 125, 125, 0.12)",scrollbar:{handleColor:"rgba(0, 0, 0, 0.2)"},button:{outlinedBorderColor:a,activeForeground:e,containedPrimaryBackground:e,containedPrimaryForeground:"rgba(255, 255, 255, 0.9)",outlinedPrimaryBackground:l,outlinedPrimaryForeground:i,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:o,textPrimaryForeground:e,textSecondaryForeground:o,outlinedInactiveOverlayColor:h,textInactiveOpacity:"0.5",hoverOverlayColor:u},checkbox:{background:a,foreground:r,activeForeground:r,activeBackground:e,inactiveOpacity:b,hoverOpacity:"0.8"},modal:{background:l,bodyForeground:i,headerForeground:o,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:a,foreground:i,activeBorderColor:e,activeOverlayColor:p,labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:"rgba(255, 255, 255, 0.87)",inactiveOverlayColor:h,hoverOverlayColor:u},tabTitle:{foreground:o,background:"transparent",activeBackground:"transparent",activeBorderColor:e,activeForeground:i},dropdown:{background:"transparent",foreground:i,hoverBorderColor:o,borderColor:a,listBackground:a,caretColor:n,listForeground:o,listBorderColor:a,listItemHoverBackground:s,listShadow:`0 8px 10px 1px rgba(0,0,0,0.14),
        0 3px 14px 2px rgba(0,0,0,0.12),
        0 5px 5px -3px rgba(0,0,0,0.20)`,inactiveOpacity:b},textInput:{foreground:i,hoverBorderColor:i,background:"transparent",borderColor:a,inactiveOpacity:b},slider:{trackColor:s,activeTrackColor:e,thumbBackground:c,thumbBorderColor:e,inactiveOpacity:b,hoverOpacity:"0.7"},selectColor:{activeBorderColor:e,inactiveOpacity:b},toolbar:{foreground:i,background:a,activeBackground:"transparent",activeForeground:e,borderColor:"transparent"},tooltip:{background:s,foreground:i},toolControlBar:{background:"rgba(238, 238, 238, 0.9)",borderColor:c,shadow:"none",separatorColor:a,titleForeground:o,inputLabelForeground:o,inputLabelInactiveOpacity:b},mainCanvasActionBar:{background:"transparent",foreground:i,borderColor:"none"},canvasActionBar:{background:s,foreground:i,separatorColor:n},canvas:{background:d,controlsOutline:"rgba(255, 255, 255, 0.6)",controlsColor:"#ffffff",cropBackdrop:"rgba(255, 255, 255, 0.3)"},colorPicker:{listBackground:a,listShadow:`0 8px 10px 1px rgba(0,0,0,0.14),
        0 3px 14px 2px rgba(0,0,0,0.12),
        0 5px 5px -3px rgba(0,0,0,0.20)`,controlsColor:"#ffffff",inputBorderColor:s},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:r,background:d},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#B8B8B8",highlight:"#E6E6E6",shadow:"#D4D4D4"}}}};var YE=eAe;const wg=I0(),XE=D0(),vo=v(v({},wg),{measurements:XE}),tAe=e=>e==="light"?YE:I0,YK=(e,t)=>{const r=tAe(e);if(t&&t[e]){const{primary:i,background:o,foreground:n}=t[e],s={primary:i,background:o,foreground:n},a=Object.keys(s).reduce((l,c)=>s[c]?v(v({},l),{[c]:s[c]}):l,{});return yo([r(a),t[e]])}return r()||wg};const rAe=["canvas","advancedUIToolbar","advancedUIToolControlBar","basicUIToolbar","mainCanvasActionBar","colorItem","fontSystem"],XK=e=>{const t=D0();if(e){const r={};return Object.keys(e).forEach(i=>{rAe.indexOf(i)!==-1&&(r[i]=e[i])}),yo([t,r])}return t};const iAe={config:Sh,locale:Rd,theme:wg,measurements:XE};class Qo{constructor(){this.checkDefaultToolAvailability=(e,t)=>t.indexOf(e)!==-1;this.state=ri.observable(iAe),this.events=new VK,this.licenseChecker=null}saveConfig(e){e.mainCanvasActions&&e.mainCanvasActions.length!==4&&(e.mainCanvasActions.length=4);const t=yo([Sh,e]),r=t;this.licenseChecker=new jE(r.license),this.licenseChecker.areCustomAssetsAllowed()||(r.sticker.enableCustomUpload=!1);const i=$K(r.language,r.custom.languages),o=YK(r.theme,r.custom.themes),n=XK(r.custom.measurements),{provider:s}=r.library,a=[];r.adjustment.categories=r.adjustment.categories.reduce((u,p)=>(u.push(v(v({},p),{items:p.items.filter(h=>Vv[h.identifier]?!0:(a.push(h.identifier),!1))})),u),[]),a.length!==0&&console.error(`The following identifier are incorrect for the adjustment tool: ${a.join(", ")}`),delete r.language,delete r.custom.languages,delete r.custom.themes,delete r.library.provider;let l=r.tools.reduce((u,p)=>typeof p=="object"?[...u,...p]:[...u,p],[]);l.length||(console.error("Empty list input for tools"),l=T0.reduce((u,p)=>typeof p=="object"?[...u,...p]:[...u,p],[])),l=l.filter(u=>this.licenseChecker.isToolAllowed(u));const c=this.checkDefaultToolAvailability(r.defaultTool,l);c||(this.licenseChecker.isToolAllowed(r.defaultTool)&&console.warn(`Configured default tool ${r.defaultTool} is not a part of configured list of tools: [${l.join(" ")}]`),[r.defaultTool]=l),r.tools=l,this.state.config=r,this.state.locale=i,this.state.theme=o,this.state.measurements=n;const d=this.buildCustomAssetsConfig();return this.assetProvider=new v_(d,this.licenseChecker.areCustomAssetsAllowed()),this.loadThemeFont(),s}get config(){return this.state.config}get locale(){return this.state.locale}get theme(){return this.state.theme}get measurements(){return this.state.measurements}get tools(){return this.config.tools.reduce((e,t)=>typeof t=="string"?[...e,t]:[...e,"",...t],[])}get defaultTool(){return this.config.defaultTool}get isOrderDefault(){return this.config.order==="default"}get isLayoutAdvanced(){return this.config.layout==="advanced"}get displayCloseButton(){return this.config.mainCanvasActions.indexOf(_e.CLOSE)!==-1}loadThemeFont(){const{typography:e}=this.theme;e.skipLoading||this.assetProvider.getFontManager().injectFonts([e])}buildCustomAssetsConfig(){const e=this.tools,t=ri.toJS(this.state.config),r=this.state.config.assetBaseUrl,{theme:i}=this.state,o=e.indexOf(S.FILTER)!==-1?t[S.FILTER]:void 0,n=e.indexOf(S.FOCUS)!==-1?t[S.FOCUS]:void 0,s=e.indexOf(S.ADJUSTMENT)!==-1?t[S.ADJUSTMENT]:void 0,a=e.indexOf(S.STICKER)!==-1?t[S.STICKER]:void 0,l=e.indexOf(S.FRAME)!==-1?t[S.FRAME]:void 0,c=e.indexOf(S.OVERLAY)!==-1?t[S.OVERLAY]:void 0,d=e.indexOf(S.TRANSFORM)!==-1?t[S.TRANSFORM]:void 0,u=e.indexOf(S.TEXT)!==-1?t[S.TEXT]:void 0,p=e.indexOf(S.TEXT_DESIGN)!==-1?t[S.TEXT_DESIGN]:void 0;return{basePath:r,theme:i,filter:o,focus:n,sticker:a,frame:l,overlay:c,transform:d,text:u,adjustment:s,textdesign:p}}}m([ri.action],Qo.prototype,"saveConfig",1),m([ri.computed],Qo.prototype,"config",1),m([ri.computed],Qo.prototype,"locale",1),m([ri.computed],Qo.prototype,"theme",1),m([ri.computed],Qo.prototype,"measurements",1),m([ri.computed],Qo.prototype,"tools",1),m([ri.computed],Qo.prototype,"defaultTool",1),m([ri.computed],Qo.prototype,"isOrderDefault",1),m([ri.computed],Qo.prototype,"isLayoutAdvanced",1),m([ri.computed],Qo.prototype,"displayCloseButton",1);class JK{constructor(e){this.editor=e}setBackgroundImage(e){this.container?this.container.setData({image:e,originalImage:e}):this.container=this.engine.addImage({image:e,originalImage:e,blendMode:Oe.NORMAL,opacity:1})}getchildren(){return this.container.getChildren()}addImageToContainer(){return new Promise((e,t)=>{const{image:r}=this.editor.activeStore;if(m9(r))this.setBackgroundImage(r),e();else{const i=this.editor.libraryStore.getRawUrl(r);this.getImageElement(i).then(o=>{this.setBackgroundImage(o),e()}).catch(o=>{t({identifier:"imageLoading",message:o.message})})}})}getImageElement(e){return new Promise((t,r)=>{const i=new Image;i.addEventListener("load",()=>{t(i)}),i.addEventListener("error",o=>{r(o)}),i.crossOrigin=this.editor.configStore.config.engine.crossOrigin,i.src=e})}getImgageContainerId(){return this.container?this.container.getID():""}get engine(){return this.editor.engine}}class ZK{constructor(e){this.applyNewImageTransform=()=>{const{size:e,width:t,height:r}=this.editor.engineMediator.image.container.getBounds(),i=this.container;i.setTransform(Dt.IDENTITY),i.setResolution(e),i.setPivot(.5,.5),i.setPosition({x:t/2,y:r/2})};this.editor=e}get engine(){return this.editor.engine}get container(){return this.engine.getOutputContainer()}}const rn=_(Ge()),Eh=_(Ge()),en=_(Ge()),oAe=(e,t)=>new Promise((r,i)=>{const o=new XMLHttpRequest;o.onload=()=>{const n=new FileReader;n.onloadend=()=>{typeof n.result=="string"&&n.result.substr(0,10)==="data:image"?r(n.result):i(new Error(`The image could not be loaded from ${e}`))},n.onerror=s=>{i(s)},n.readAsDataURL(o.response)},o.open("GET",e),o.responseType="blob",o.withCredentials=t==="use-credentials",o.send()}),QK=(e,t)=>new Promise((r,i)=>{const o=new Image;o.onload=()=>{r(o)},o.onerror=()=>{i(new Error(`Failed to load image with src:${e}`))},o.crossOrigin=t,o.src=e}),nAe=(e,t)=>new Promise((r,i)=>{oAe(e,t).then(o=>{const n=new Image;n.addEventListener("load",()=>{r(n)}),n.src=o}).catch(()=>{QK(e,t).then(o=>r(o)).catch(o=>{i(o)})})}),JE=i=>se(void 0,[i],function*({url:e,image:t,crossOrigin:r="anonymous"}){try{return t&&t.src&&t.src.substr(0,5)==="data:"||t&&t.src&&t.src.includes(".svg")?t:typeof e=="string"&&e.substr(0,5)==="data:"||typeof e=="string"&&e.includes(".svg")?QK(e,r):nAe(e||t.src,r)}catch(o){throw new Error(o)}}),sAe={tool:null,isWebcam:!1,image:""};class Fs{constructor(e){this.setImage=e=>se(this,null,function*(){const{crossOrigin:t}=this.editor.configStore.config.engine;typeof e=="string"&&(this.state.image=yield JE({url:Tl(e)?e:this.editor.assetProvider.getPath(e),crossOrigin:t})),e instanceof HTMLImageElement&&(this.state.image=yield JE({image:e,crossOrigin:t})),this.isWebcam&&(this.state.isWebcam=!1)});this.newImage=e=>{this.editor.init(e)};this.editor=e,this.state=en.observable(sAe)}selectTool(e){const{licenseChecker:t}=this.editor.configStore;if(this.state.tool!==e&&(t==null?void 0:t.isToolAllowed(e))){this.editor.onToolChange(this.state.tool,e),this.state.tool=e,this.editor.configStore.events.onToolChanged(e);switch(e){case S.TEXT:this.editor.spriteStore.textToolStore.addOrselect();break;case S.TEXT_DESIGN:this.editor.spriteStore.textDesignToolStore.addOrselect();break;case S.BRUSH:{this.editor.brushToolStore.initSize();break}case S.TRANSFORM:this.editor.transformToolStore.applyDefaultCrop();break;default:break}}}selectWebcam(e){this.state.isWebcam=e}get webcamLabel(){return this.editor.libraryStore.locale.controls.buttonWebcamClose}get tool(){return this.state.tool}get isWebcam(){return this.state.isWebcam}get image(){return this.state.image}}m([en.action],Fs.prototype,"selectTool",1),m([en.action],Fs.prototype,"selectWebcam",1),m([en.action],Fs.prototype,"setImage",2),m([en.action],Fs.prototype,"newImage",2),m([en.computed],Fs.prototype,"webcamLabel",1),m([en.computed],Fs.prototype,"tool",1),m([en.computed],Fs.prototype,"isWebcam",1),m([en.computed],Fs.prototype,"image",1);const Hi=_(Ge()),ZE={height:150,width:150};class _o{constructor(e){this.canvasClickDisabled=Hi.observable.box(!1);this.editor=e,this.state=Hi.observable(_o.initialState)}setCanvasElement(e){this.canvas=e,this.editor.engineMediator.preview.createPreview(e),this.updateCanvasDimensions(),this.editor.init(this.editor.configStore.config.image)}updateCanvasDimensions(){const e=qt.devicePixelRatio;this.canvas.width=this.canvasSize.width*e,this.canvas.height=this.canvasSize.height*e,this.canvas.style.width=`${this.canvasSize.width}px`,this.canvas.style.height=`${this.canvasSize.height}px`}saveDimensions({height:e,width:t,render:r}){const i=this.editor.configStore.isLayoutAdvanced?0:this.editor.configStore.measurements.basicCanvasOffset;e-i>ZE.height&&t>ZE.width&&(this.state.canvasSize.height=e-i,this.state.canvasSize.width=t,r&&this.editor.resize())}disableCanvasClick(){this.canvasClickDisabled.set(!0)}enableCanvasClick(){this.canvasClickDisabled.set(!1)}get isCanvasClickable(){return!this.canvasClickDisabled.get()}get canvasSize(){return this.state.canvasSize}get sizeVector(){return O.fromSize(this.state.canvasSize)}get sizeVectorMagnitude(){return this.sizeVector.magnitude}getContainersAtPreviewPoint(e){const t=this.editor.engine.getContainersAtPreviewPoint(e,this.editor.engineMediator.preview.previewTransformWithoutDpr).map(r=>r.getID()).filter(r=>r!==this.editor.engineMediator.image.getImgageContainerId());this.editor.spriteStore.onCanvasClick(t)}}_o.initialState={canvasSize:ZE},m([Hi.action],_o.prototype,"setCanvasElement",1),m([Hi.action],_o.prototype,"updateCanvasDimensions",1),m([Hi.action],_o.prototype,"saveDimensions",1),m([Hi.action],_o.prototype,"disableCanvasClick",1),m([Hi.action],_o.prototype,"enableCanvasClick",1),m([Hi.computed],_o.prototype,"isCanvasClickable",1),m([Hi.computed],_o.prototype,"canvasSize",1),m([Hi.computed],_o.prototype,"sizeVector",1),m([Hi.computed],_o.prototype,"sizeVectorMagnitude",1);const xo=_(Ge()),aAe={type:null,identifier:null,isVisible:!1,error:""};class jn{constructor(e){this.showActionModal=({type:e,identifier:t,error:r,handleConfirm:i,handleDismiss:o})=>{this.resetHandlers(),this.state.isVisible=!0,this.state.identifier=t,this.state.type=e,this.state.error=r||"",this.handleConfirm=i,this.handleDismiss=o};this.hideModal=()=>{this.state.isVisible=!1,this.state.type=null,this.state.error="",this.state.identifier=null,this.resetHandlers()};this.resetHandlers=()=>{this.handleConfirm=null,this.handleDismiss=null};this.configStore=e.configStore,this.state=xo.observable(aAe)}showInfoModal(e){this.resetHandlers(),this.state.isVisible=!0,this.state.type=dt.INFO,this.state.identifier=e,this.state.error=""}showTextEditModal(){this.resetHandlers(),this.state.isVisible=!0,this.state.type=dt.TEXT_EDIT,this.state.identifier="inputText",this.state.error=""}get modalProps(){const{isVisible:e}=this.state,t=this.getModalLocale();if(t){const{bodyLabel:r,headerLabel:i,buttonYes:o,buttonNo:n}=t;return{headerLabel:i,bodyLabel:r,confirmLabel:o,dismissLabel:n,isVisible:e,handleClose:this.hideModal,handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss}}return{isVisible:!1}}get isVisible(){return this.state.isVisible}get type(){return this.state.type}get identifier(){return this.state.identifier}get positionOffset(){const{isLayoutAdvanced:e,measurements:{basicCanvasOffset:t,advancedUIToolControlBar:r,advancedUIToolbar:i},isOrderDefault:o}=this.configStore,n=(r.width+i.width)*(o?1:-1),s=t;return e?{x:n/2,y:0}:{x:0,y:-s}}getModalLocale(){const{identifier:e,error:t,type:r}=this.state,{locale:i}=this.configStore;if(!r||!e||r===dt.TEXT_EDIT)return null;if(r&&e&&i[`${r}Modals`]&&i[`${r}Modals`][e]){const o=i[`${r}Modals`][e];let{body:n}=o;n&&typeof t=="object"?Object.keys(t).forEach(a=>{n=n.replace(`\${${a}}`,t[a])}):n&&(n=n.replace("${error}",t));let s=o.heading;if(r===dt.ERROR||r===dt.WARNING){const a={error:i.common.error,warning:i.common.warning},l=r==="error"?a.error:a.warning;s=`${l}${o.headingDelimiter||""} ${o.header||""}`}return{bodyLabel:n,headerLabel:s,buttonYes:o.buttonYes,buttonNo:o.buttonNo}}return null}}m([xo.action],jn.prototype,"showActionModal",2),m([xo.action],jn.prototype,"showInfoModal",1),m([xo.action],jn.prototype,"showTextEditModal",1),m([xo.action],jn.prototype,"hideModal",2),m([xo.computed],jn.prototype,"modalProps",1),m([xo.computed],jn.prototype,"isVisible",1),m([xo.computed],jn.prototype,"type",1),m([xo.computed],jn.prototype,"identifier",1),m([xo.computed],jn.prototype,"positionOffset",1);const sr=_(Ge());class yr{constructor(e){this.defaultScale=1;this.SCALE_LEVELS=[8.33,12.5,16.66,25,33.33,50,66.66,100,125,150,200,300,400,500,600].map(e=>e/100);this.state={position:{x:0,y:0},scaleIndex:-1};this.offset={x:0,y:0};this.in=()=>{this.canZoomIn&&(this.state.scaleIndex+=1,this.scaleRender())};this.out=()=>{if(this.canZoomOut){this.state.scaleIndex-=1;const{canDragX:e,canDragY:t,maxOffsetX:r,maxOffsetY:i}=this.checkOffset({x:0,y:0});t||(this.offset.y=i),e||(this.offset.x=r),this.savePosition(),this.scaleRender()}};this.setOffset=e=>{const{canDragX:t,canDragY:r}=this.checkOffset(e);t&&(this.offset.x=e.x),r&&(this.offset.y=e.y),this.scaleRender()};this.editor=e}setInitialTransform(e=0){const{transform:t}=this.editor.engineMediator.preview;sr.runInAction(()=>{this.setDefaultScale(Math.abs(e||t.scale.x)),this.setPosition(t.position)})}resetScale(){this.state.scaleIndex=-1}resetPosition(){const{width:e,height:t}=this.editor.canvasStore.canvas;this.setPosition({x:e/2,y:t/2})}resetOffset(){this.offset={x:0,y:0}}setPosition(e){this.state.position.x=e.x,this.state.position.y=e.y}savePosition(){this.setPosition(this.getPositionWithOffset()),this.offset={x:0,y:0}}setDefaultScale(e){if(this.defaultScale!==1){const r=this.SCALE_LEVELS.findIndex(i=>i===this.defaultScale);r!==-1&&(this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,r),...this.SCALE_LEVELS.slice(r+1)])}const t=this.SCALE_LEVELS.findIndex((r,i)=>i===0?e<r:i===this.SCALE_LEVELS.length-1?r<e:this.SCALE_LEVELS[i-1]<e&&e<r);if(t!==-1)this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,t),e,...this.SCALE_LEVELS.slice(t)],t===this.state.scaleIndex&&this.resetScale(),this.state.scaleIndex=t,this.defaultScale=e;else{const r=this.SCALE_LEVELS.findIndex(i=>i===e);r===this.state.scaleIndex&&this.resetScale(),r!==-1&&(this.state.scaleIndex=r,this.defaultScale=e)}}setScaleToDefault(){this.state.scaleIndex=this.defaultIndex}checkOffset(e){const t=window.devicePixelRatio||1,{scaledSize:r}=this,{previewSize:i}=this,o=this.editor.engineMediator.preview.initialTransform.position,n=this.getPositionWithOffset(e),s=(r.width-i.width)*t/2,a=(r.height-i.height)*t/2,l=o.x-n.x,c=o.y-n.y,d=Math.abs(l),u=Math.abs(c),p=l>0,h=c>0,b=d-s,y=u-a;return{canDragX:b<0,canDragY:y<0,maxOffsetX:p?-b:b,maxOffsetY:h?-y:y}}calculateScale(e=0,t=this.previewSize,r=this.defaultScale){const{width:i,height:o}=t,n=new O({x:i,y:o}),s=new O(Math.abs(n.x*Math.cos(e))+Math.abs(n.y*Math.sin(e)),Math.abs(n.x*Math.sin(e))+Math.abs(n.y*Math.cos(e))),a=n.subtract(s).divide(2).multiply(r).abs;return a.y>a.x?a.y*2/n.y+r:a.x*2/n.x+r}get defaultIndex(){return this.SCALE_LEVELS.findIndex(e=>e===this.defaultScale)}getPositionWithOffset(e=this.offset){const{position:t}=this;return{x:t.x-e.x,y:t.y-e.y}}scaleRender(e=!1){const t=this.editor.scale.getPositionWithOffset(),r=e?this.defaultScale:this.scale,i={x:r,y:r};this.editor.engineMediator.preview.container.setScale(i),this.editor.engineMediator.preview.container.setPosition(t),this.editor.engineMediator.preview.savePreviewTransform({scale:i,position:t,rotation:0}),e||this.editor.render()}get scale(){const e=this.state.scaleIndex;return e!==-1?this.SCALE_LEVELS[e]:this.defaultScale}get zoomLevel(){const e=window.devicePixelRatio||1;return(this.scale/e*100).toFixed(1)}get canDrag(){return this.defaultScale<this.scale}get canZoomOut(){return this.state.scaleIndex>this.defaultIndex}get canZoomIn(){return this.SCALE_LEVELS.length-1>this.state.scaleIndex}get position(){return this.state.position}get scaledSize(){const e=this.state.scaleIndex,t=e!==-1?this.SCALE_LEVELS[e]:this.defaultScale,{previewSize:r}=this;return{width:r.width*t/this.defaultScale,height:r.height*t/this.defaultScale}}get previewSize(){return this.editor.getPreviewSize()}}m([sr.observable],yr.prototype,"state",2),m([sr.action],yr.prototype,"in",2),m([sr.action],yr.prototype,"out",2),m([sr.action],yr.prototype,"setInitialTransform",1),m([sr.action],yr.prototype,"resetScale",1),m([sr.action],yr.prototype,"resetPosition",1),m([sr.action],yr.prototype,"setPosition",1),m([sr.action],yr.prototype,"savePosition",1),m([sr.action],yr.prototype,"setDefaultScale",1),m([sr.action],yr.prototype,"setScaleToDefault",1),m([sr.computed],yr.prototype,"scale",1),m([sr.computed],yr.prototype,"zoomLevel",1),m([sr.computed],yr.prototype,"canDrag",1),m([sr.computed],yr.prototype,"canZoomOut",1),m([sr.computed],yr.prototype,"canZoomIn",1),m([sr.computed],yr.prototype,"position",1),m([sr.computed],yr.prototype,"scaledSize",1);const kh=_(Ge()),r$=/^data:image\/(.+?);base64,/,CAe=e=>r$.test(e),TAe=e=>e.match(/^data:([^;]+)/)[1],kAe=e=>e.replace(r$,"");var lAe="@photoeditorsdk/root",cAe="5.8.2",dAe="The most comprehensive photo editor SDK for HTML5",uAe="http://github.com/imgly/pesdk-html5",pAe="PhotoEditorSDK (img.ly GmbH) <contact@img.ly>",hAe="SEE LICENSE IN LICENSE.md",mAe=!0,fAe={},gAe={start:"yarn workspace @example/react start",build:"yarn sdk-script build","build:rollup":"yarn sdk-script build rollup","package:release":"cd dist/photoeditorsdk && npm publish","package:pre-release":"cd dist/photoeditorsdk && npm publish --tag next","lint:css":"stylelint './packages/**/*.tsx'","lint:ts":"eslint ./packages","lint:ts-engine":"eslint ./engine","lint:types":"tsc --noEmit -p tsconfig.json --skipLibCheck","lint:types-engine":"tsc --noEmit -p engine/tsconfig.json --skipLibCheck",lint:"run-p lint:*",test:"$(npm bin)/jest",e2e:"cypress open","e2e:server":"sdk-script ui -P 3000 -D build","e2e:ci":"CYPRESS_RETRIES=2 cypress run --browser chrome --headless",deploy:"yarn workspace examp run deploy:pages",docs:"rm -rf ./docs && typedoc",postinstall:"yarn sdk-script server:build"},bAe={"@elv1n/cypress-plugin-snapshots":"1.4.4","@types/jest":"^24.0.11","@types/pixelmatch":"^5.2.2","@types/pngjs":"^3.4.2","@types/react":"^16.8.13","@types/react-dom":"^16.8.4","@types/styled-components":"4.4.0","@typescript-eslint/eslint-plugin":"4.6.0","@typescript-eslint/parser":"4.6.0",autoprefixer:"^9.7.4","cross-env":"^7.0.2",cypress:"5.6.0",eslint:"7.10.0","eslint-config-airbnb":"18.2.0","eslint-config-prettier":"6.12.0","eslint-import-resolver-typescript":"^2.3.0","eslint-plugin-cypress":"^2.11.2","eslint-plugin-import":"2.22.1","eslint-plugin-jsx-a11y":"6.3.1","eslint-plugin-no-only-tests":"^2.4.0","eslint-plugin-prettier":"3.1.4","eslint-plugin-react":"7.21.3",husky:"4.3.0",jest:"24.9.0",jsdoc:"^3.6.3","lint-staged":"10.4.0","lodash.defaults":"^4.2.0","mobx-react-devtools":"^6.1.1","npm-run-all":"^4.1.5",prettier:"^2.0.5",react:"16.8.6","react-dom":"16.8.6","start-server-and-test":"1.11.5","styled-components":"4.4.1",stylelint:"^13.7.2","stylelint-config-recommended":"^3.0.0","stylelint-config-standard":"^20.0.0","stylelint-config-styled-components":"^0.1.1","stylelint-processor-styled-components":"^1.10.0","ts-jest":"24.3.0",typedoc:"^0.17.8",typescript:"3.8.3","utility-types":"^3.10.0"},yAe={"@juggle/resize-observer":"3.2.0","can-use-dom":"0.1.0","lodash.debounce":"4.0.8","lodash.memoize":"4.1.2","lodash.throttle":"4.1.1",mobx:"4.15.7","mobx-react":"6.3.1",photoeditorsdk:"1.0.0","react-app-polyfill":"1.0.6"},vAe={node:"10.x || 11.x || 12.x || 13.x || 14.x || 15.x"},_Ae={eslint:"7.10.0"},xAe=["examples/server","examples/material-ui","examples/react","packages/*","!packages/ui","packages/ui/*","!packages/ui/components","packages/ui/components/*","engine/*","test/*","scripts"],wAe={hooks:{"pre-commit":"lint-staged","pre-push":"true"}},e$={name:lAe,version:cAe,description:dAe,repository:uAe,author:pAe,license:hAe,private:mAe,bin:fAe,scripts:gAe,devDependencies:bAe,dependencies:yAe,devEngines:vAe,resolutions:_Ae,workspaces:xAe,husky:wAe};class Fd{constructor(e,t,r,i,o,n){this.mapImagePointToRelativeCropPoint=e=>{const t=be.pointFromSpaceToSpace(e,this.imageSpace,this.cropSpace,!1);return be.absoluteToRelativePoint(t,this.cropSpace,!1)};this.mapSizeToRelativeUnscaledCropSize=e=>e/Math.min(this.outputSize.height,this.outputSize.width);this.mapSizeToRelativeScaledCropSize=e=>e/Math.min(this.outputSize.height*this.outputScale.x,this.outputSize.width*this.outputScale.y);this.getPointInDirection=(e,t=0,r=3)=>{const i=Math.tan(t),o=Math.sqrt(i**2+1);return{x:e.x+r/o,y:e.y+r*i/o}};this.previewPosition=e,this.previewSize=t,this.outputSize=r,this.imageSize=i,this.imageSpace=o,this.cropSpace=n,this.outputScale=n.getScale()}static serializeFilters(e){return{type:"filter",options:{intensity:e.intensity,identifier:e.identifier}}}static serializeAdjustments(e){return{type:"adjustments",options:e}}static serializeOverlay(e){return{type:"overlay",options:{identifier:e.identifier,intensity:e.opacity,blendMode:e.blendMode.replace(/[A-Z]/g,t=>` ${t.toLowerCase()}`)}}}static serializeMetaData(){return{platform:"html5",version:e$.version,createdAt:new Date().toISOString()}}serialise(e,t,r){const i=Fd.serializeMetaData(),o={width:this.imageSize.width,height:this.imageSize.height};t&&(o.type=r,o.data=t);const n=[],s=[],{adjustment:a}=e;Object.keys(a).map(b=>a[b]).filter(Boolean).length&&n.push(Fd.serializeAdjustments(a));const{filter:l}=e;l.identifier!=="identity"&&n.push(Fd.serializeFilters(l));const{overlay:c}=e;if(c.identifier!=="identity"&&s.push(Fd.serializeOverlay(c)),e.transform){const{transform:b,orientation:y}=this.serializeTransform(e.transform),f=[b.options.start.x!==0,b.options.start.y!==0,b.options.end.x!==1,b.options.end.y!==1,b.options.rotation!==0],w=[y.options.rotation!==0,y.options.flipVertically!==!1,y.options.flipHorizontally!==!1];f.some(T=>T)&&n.push(b),w.some(T=>T)&&n.push(y)}const{frame:d}=e;d.identifier!=="identity"&&s.push(this.serialzeFrame(d));const{focus:u}=e;if(u.identifier!=="identity"&&n.push(this.serializeFocus(u)),e.sprite&&e.sprite.spriteIdList.forEach(b=>{const y=e.sprite.common[b];switch(y.tool){case"sticker":const f=e.sprite.sticker[b];s.push(this.serializeSticker(f,y,e.transform));break;case"text":const w=e.sprite.text[b];s.push(this.serializeText(w,y));break;case"textdesign":const T=e.sprite.textdesign[b];s.push(this.serializeTextDesign(T,y));break}}),e.brush.strokes.length&&s.push({type:"brush",options:{paths:e.brush.strokes.map(b=>({points:b.path.controlPoints.map(this.mapImagePointToRelativeCropPoint),brush:{color:{rgba:b.brush.color},size:b.brush.size,hardness:b.brush.hardness}}))}}),s.length){const b={type:"sprite",options:{sprites:s}};n.push(b)}const p=e.customStickers,h={assets:{stickers:p}};return{version:Fd.version,meta:i,image:o,operations:n,assetLibrary:h}}serialzeFrame(e){return{type:"frame",options:{identifier:e.identifier,alpha:e.opacity,tintColor:{rgba:e.color},size:this.mapSizeToRelativeUnscaledCropSize(e.width)}}}serializeFocus(e){const t=Math.sqrt(this.previewSize.width**2+this.previewSize.height**2);switch(e.identifier){case Pe.LINEAR:return{type:"focus",options:{type:"linear",options:{start:this.mapImagePointToRelativeCropPoint(e.linear.start),end:this.mapImagePointToRelativeCropPoint(e.linear.end),blurRadius:this.mapSizeToRelativeScaledCropSize(e.linear.blurRadius)}}};case Pe.RADIAL:return{type:"focus",options:{type:"radial",options:{start:this.mapImagePointToRelativeCropPoint(e.radial.center),end:this.mapImagePointToRelativeCropPoint(this.getPointInDirection(e.radial.center,0,e.radial.radius)),blurRadius:this.mapSizeToRelativeScaledCropSize(e.radial.blurRadius),gradientRadius:.1}}};case Pe.MIRRORED:const{mirrored:r}=e;return{type:"focus",options:{type:"mirrored",options:{start:this.mapImagePointToRelativeCropPoint(this.getPointInDirection(r.origin,r.rotation,t/2)),end:this.mapImagePointToRelativeCropPoint(this.getPointInDirection(r.origin,r.rotation,-t/2)),size:this.mapSizeToRelativeScaledCropSize(e.mirrored.size),blurRadius:this.mapSizeToRelativeScaledCropSize(e.mirrored.blurRadius),gradientSize:.1}}};default:return{type:"focus",options:{type:"gaussian",options:{blurRadius:this.mapSizeToRelativeScaledCropSize(e.gaussian.blurRadius)}}}}}serializeSticker(e,t,r){return{type:"sticker",options:{position:this.mapImagePointToRelativeCropPoint(t.position),dimensions:{x:this.mapSizeToRelativeScaledCropSize(t.size.width),y:this.mapSizeToRelativeScaledCropSize(t.size.height)},rotation:t.rotation,flipVertically:(t.flipVertically||!1)!==(r.flipVertically||!1),flipHorizontally:(t.flipHorizontally||!1)!==(r.flipHorizontally||!1),identifier:e.identifier,alpha:e.opacity,tintColor:{rgba:e.tintColor},tintMode:e.tintMode}}}serializeText(e,t){return{type:"text",options:{position:this.mapImagePointToRelativeCropPoint(t.position),rotation:t.rotation,flipVertically:!1,flipHorizontally:!1,fontIdentifier:e.identifier,fontSize:this.mapSizeToRelativeScaledCropSize(e.fontSize),maxWidth:this.mapSizeToRelativeScaledCropSize(e.width),text:e.text,lineHeight:e.lineHeight,color:{rgba:e.textColor},backgroundColor:{rgba:e.backgroundColor},alignment:e.alignment}}}serializeTextDesign(e,t){return{type:"textdesign",options:{position:this.mapImagePointToRelativeCropPoint(t.position),rotation:t.rotation,flipVertically:!1,flipHorizontally:!1,identifier:e.identifier,inverted:e.isInverted,text:e.text,seed:e.seed,width:this.mapSizeToRelativeScaledCropSize(e.width),padding:this.mapSizeToRelativeScaledCropSize(e.padding),color:{rgba:e.color}}}}serializeTransform(e){const{start:t,end:r}=e,i={type:"transform",options:{start:t,end:r,rotation:e.rotation,meta:{identifier:e.identifier}}},o={type:"orientation",options:{rotation:e.outputRotation,flipHorizontally:e.flipHorizontally,flipVertically:e.flipVertically}};return{transform:i,orientation:o}}}Fd.version="3.9.0";const t$=(e=ar.PNG)=>`data:${e};base64,`;class ii{constructor(e){this.spriteOrder=0;this.mapRelativeCropPointToImageSpace=e=>{const t=be.relativeToAbsolutePoint(e,this.cropSpace,!1);return be.pointFromSpaceToSpace(t,this.cropSpace,this.imageSpace,!1)};this.mapRelativeCropSizeToScaledImageSize=e=>e*Math.min(this.outputSize.height*this.outputScale.x,this.outputSize.width*this.outputScale.y);this.mapRelativeCropSizeToUnscaledImageSize=e=>e*Math.min(this.outputSize.height,this.outputSize.width);this.editor=e}static deserializeFilter(e){return{intensity:e.intensity,identifier:e.identifier}}static deserializeAdjustments(e){return v({},e)}static deserializeOverlay(e){return{identifier:e.identifier,opacity:e.intensity,blendMode:e.blendMode.replace(/([ _][a-z])/g,t=>t.toUpperCase().replace(" ","").replace("_",""))}}static initializeEmptyTransform(){return{outputRotation:0,flipHorizontally:!1,flipVertically:!1,start:{x:0,y:0},end:{x:1,y:1},rotation:0}}static deserialzeColor(e){return e&&e.rgba?e.rgba:[0,0,0,0]}static validateVersion(e){return ii.version===e}static checkIfPlatformHTML(e){return e==="html5"}static deserializeStickers(e){return{identifier:e.identifier,opacity:e.alpha||0,tintMode:e.tintMode||"none",tintColor:ii.deserialzeColor(e.tintColor)}}static checkIsSerialisationValid(e){if(typeof e!="string"&&ii.validateVersion(e.version))return!0;if(typeof e=="string")throw new Error("Invalid input of type string, please provide an object");return!1}static deserializeImage(e){const t={};return e.image&&(t.image={width:e.image.width,height:e.image.height,data:e.image.data?e.image.data.replace(t$(),""):""},t.image.data=t.image.data?t$()+t.image.data:""),t}deserializeTransformation(e){const t={},r=e.operations.find(n=>n.type==="orientation"),i=e.operations.find(n=>n.type==="transform"),[o]=this.editor.engine.getRootContainers();return this.previewPosition=this.editor.transformToolStore.defaultCropMaskPosition,this.previewSize=this.editor.transformToolStore.maxCropMaskSize,this.imageSpace=o,t.transform=ii.initializeEmptyTransform(),r!=null&&(t.transform.outputRotation=r.options.rotation,t.transform.flipHorizontally=r.options.flipHorizontally||!1,t.transform.flipVertically=r.options.flipVertically||!1),i&&(t.transform.start=i.options.start,t.transform.end=i.options.end,t.transform.rotation=i.options.rotation||0,t.transform.identifier=i.options.meta?i.options.meta.identifier:""),t}deserialize(e){var o,n;const t={};(e.meta?!ii.checkIfPlatformHTML(e.meta.platform):!1)&&console.warn("Read serialisation from another Platform");const r=this.editor.engineMediator.output.container.getResolution(),{size:i}=this.editor.engineMediator.image.container.getBounds();return this.outputSize=r,this.imageSize=i,this.cropSpace=this.editor.engine.getOutputContainer(),this.outputScale=this.cropSpace.getScale(),e.operations.forEach(s=>{switch(s.type){case"filter":t.filter=ii.deserializeFilter(s.options);break;case"adjustments":t.adjustment=ii.deserializeAdjustments(s.options);break;case"focus":t.focus=this.deserializeFocus(s.options);break;case"sprite":const{sprites:a}=s.options;a.forEach(l=>{switch(l.type){case"frame":t.frame=this.deserializeFrame(l.options);break;case"overlay":t.overlay=ii.deserializeOverlay(l.options);break;case"brush":t.brush?t.brush.strokes.push(...this.deserializeBrush(l.options).strokes):t.brush=this.deserializeBrush(l.options);break;case"sticker":case"text":case"textdesign":t.sprite||(t.sprite={spriteIdList:[],sticker:{},text:{},textdesign:{},common:{}});const c=wn();t.sprite.spriteIdList.push(c),t.sprite.common[c]={order:this.spriteOrder,position:this.mapRelativeCropPointToImageSpace(l.options.position),tool:S.STICKER,rotation:l.options.rotation||0,flipHorizontally:l.options.flipHorizontally,flipVertically:l.options.flipVertically},this.spriteOrder+=1,l.type===S.STICKER?(t.sprite.common[c].tool=S.STICKER,t.sprite.common[c].size={width:this.mapRelativeCropSizeToScaledImageSize(l.options.dimensions.x),height:this.mapRelativeCropSizeToScaledImageSize(l.options.dimensions.y)},t.sprite.sticker[c]=ii.deserializeStickers(l.options)):l.type===S.TEXT?(t.sprite.common[c].tool=S.TEXT,t.sprite.text[c]=this.deserializeTexts(l.options)):l.type===S.TEXT_DESIGN&&(t.sprite.common[c].tool=S.TEXT_DESIGN,t.sprite.textdesign[c]=this.deserializeTextDesign(l.options));break;default:break}});break;default:break}}),e.assetLibrary&&(t.customStickers=((n=(o=e.assetLibrary)==null?void 0:o.assets)==null?void 0:n.stickers)||[]),t}deserializeFrame(e){return{identifier:e.identifier,opacity:e.alpha,width:this.mapRelativeCropSizeToUnscaledImageSize(e.size),color:ii.deserialzeColor(e.tintColor)}}deserializeFocus(e){switch(e.type){case"linear":return{identifier:"linear",linear:this.deserializeLinearFocus(e.options)};case"gaussian":return{identifier:"gaussian",gaussian:this.deserializeGaussianFocus(e.options)};case"radial":return{identifier:"radial",radial:this.deserializeRadialFocus(e.options)};case"mirrored":return{identifier:"mirrored",mirrored:this.deserializeMirroredFocus(e.options)}}return}deserializeRadialFocus(e){return{center:this.mapRelativeCropPointToImageSpace(e.start),radius:new O(this.mapRelativeCropPointToImageSpace(e.start)).subtract(new O(this.mapRelativeCropPointToImageSpace(e.end))).magnitude,blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeLinearFocus(e){return{start:this.mapRelativeCropPointToImageSpace(e.start),end:this.mapRelativeCropPointToImageSpace(e.end),blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeGaussianFocus(e){return{blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeMirroredFocus(e){const t=new O(this.mapRelativeCropPointToImageSpace(e.start)).subtract(new O(this.mapRelativeCropPointToImageSpace(e.end)));return{origin:new O(this.mapRelativeCropPointToImageSpace(e.start)).add(new O(this.mapRelativeCropPointToImageSpace(e.end))).divide(2),rotation:Math.atan2(t.y,t.x),size:this.mapRelativeCropSizeToScaledImageSize(e.size),blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeTexts(e){return{identifier:kl(e.fontIdentifier),fontSize:this.mapRelativeCropSizeToScaledImageSize(e.fontSize),width:this.mapRelativeCropSizeToScaledImageSize(e.maxWidth),alignment:e.alignment,textColor:ii.deserialzeColor(e.color),backgroundColor:ii.deserialzeColor(e.backgroundColor),lineHeight:e.lineHeight,text:e.text}}deserializeTextDesign(e){return{identifier:e.identifier,width:this.mapRelativeCropSizeToScaledImageSize(e.width),padding:this.mapRelativeCropSizeToScaledImageSize(e.padding),color:ii.deserialzeColor(e.color),seed:e.seed,text:e.text,isInverted:e.inverted}}deserializeBrush(e){return{strokes:e.paths.map(t=>({path:{controlPoints:t.points.map(this.mapRelativeCropPointToImageSpace)},brush:{id:"imgly_brush_radial",color:ii.deserialzeColor(t.brush.color),size:t.brush.size,hardness:t.brush.hardness}}))}}}ii.version="3.9.0";class eD{constructor(e){this.applySerialization=(e,t,r,i)=>se(this,null,function*(){this.editor.resetToolStates();const o=this.editor.activeStore.tool===S.TRANSFORM;o||this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.reset(),o||this.editor.transformToolStore.onLeave();const n=new t(this.editor),s="Unexpected error occured",a=t.deserializeImage(e);if(a.image&&a.image.data){const c=a.image.data;yield this.editor.setImage(c),this.editor.scale.defaultScale=1,this.editor.scale.resetOffset(),this.editor.transformToolStore.reset(),this.editor.activeStore.setImage(c),yield this.editor.engineMediator.image.addImageToContainer(),this.editor.engineMediator.output.applyNewImageTransform(),this.editor.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.editor.transformToolStore.setCropDefaults(),this.editor.historyStore.addInitialSnapshot(),this.editor.transformToolStore.saveTransforms()}const l=n.deserializeTransformation(e);if(l){yield this.applyStateOnUI(l);const c=n.deserialize(e);c?(yield this.applyStateOnUI(c),yield this.editor.render(),this.editor.modalStore.identifier==="loading"&&this.editor.modalStore.hideModal(),r()):i(s)}else i(s)});this.editor=e}serialize({image:e}={image:!1}){const t=this.editor.activeStore.tool===S.TRANSFORM;return this.editor.modalStore.showInfoModal("saving"),new Promise((r,i)=>{Promise.resolve().then(()=>_(QE())).then(n=>se(this,[n],function*({Serializer:o}){try{t&&this.editor.transformToolStore.onLeave(),yield this.editor.wait(),this.editor.transformToolStore.applyDefaultCrop(!1);const{originalImage:s}=this.editor.imageContainer.getData(),a=this.editor.engineMediator.output.container.getResolution(),l={width:s.width,height:s.height},c=new o(this.editor.transformToolStore.defaultCropMaskPosition,this.editor.transformToolStore.maxCropMaskSize,a,l,this.editor.engine.getRootContainers()[0],this.editor.engine.getOutputContainer()),d={[S.ADJUSTMENT]:kh.toJS(this.editor.adjustmentsToolStore.state),[S.FILTER]:kh.toJS(this.editor.filterToolStore.state),[S.FOCUS]:kh.toJS(this.editor.focusToolStore.serializableState),[S.OVERLAY]:kh.toJS(this.editor.overlayToolStore.state),[S.FRAME]:kh.toJS(this.editor.frameToolStore.state),[S.BRUSH]:this.editor.brushToolStore.strokes||{strokes:[]}},{sprite:u,customStickers:p}=yield this.editor.spriteStore.serializableState();u.spriteIdList=u.spriteIdList.sort((y,f)=>{const w=u.common[y].order,T=u.common[f].order;return w-T}),d.sprite=u,d.customStickers=p,d.transform=this.editor.transformToolStore.serializableState;let h,b;if(e){const y=eD.getDataURL(s);b=TAe(y),h=kAe(y)}this.editor.modalStore.hideModal(),r(c.serialise(d,h,b)),t&&this.editor.transformToolStore.onEnter()}catch(s){this.editor.modalStore.hideModal(),i(s)}}))})}deserialize(e){return this.editor.modalStore.showInfoModal("loading"),new Promise((t,r)=>{try{Promise.resolve().then(()=>_(QE())).then(({Deserializer:i})=>{i.checkIsSerialisationValid(e)?this.applySerialization(e,i,t,r):(this.editor.modalStore.hideModal(),this.editor.modalStore.showActionModal({type:dt.WARNING,identifier:"unsupportedSerializationVersion",handleConfirm:()=>this.applySerialization(e,i,t,r)}))})}catch(i){this.editor.modalStore.identifier==="loading"&&this.editor.modalStore.hideModal(),r(i)}})}static getDataURL(e){if(e instanceof HTMLImageElement){const{src:i}=e;if(CAe(i))return i}if(e instanceof HTMLCanvasElement)return e.toDataURL(ar.PNG);const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");return r.drawImage(e,0,0),t.toDataURL(ar.PNG)}applyStateOnUI(e){return se(this,null,function*(){const t=this.editor.activeStore.tool===S.TRANSFORM;try{e.transform&&(t||this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(e.transform,!0),yield this.editor.wait(),t||(this.editor.transformToolStore.onLeave(),this.editor.transformToolStore.onEnter(),yield this.editor.wait(),this.editor.transformToolStore.onLeave())),e.filter&&(yield this.editor.filterToolStore.updateStateFromSerialization(e.filter)),e.adjustment&&this.editor.adjustmentsToolStore.updateStateFromSerialization(e.adjustment),e.focus&&(yield this.editor.focusToolStore.updateStateFromSerialization(e.focus)),e.overlay&&(yield this.editor.overlayToolStore.updateStateFromSerialization(e.overlay)),e.sprite&&(e.sprite.spriteIdList=e.sprite.spriteIdList.sort((r,i)=>{const o=e.sprite.common[r].order,n=e.sprite.common[i].order;return o-n}),yield this.editor.spriteStore.updateStateFromSerialization(e.sprite,e.customStickers)),e.brush&&this.editor.brushToolStore.updateStateFromHistory(e.brush),e.frame&&(yield this.editor.frameToolStore.updateStateFromSerialization(e.frame)),this.editor.outputContainer.updateChildrenContainers()}catch(r){console.error(r),this.editor.modalStore.showActionModal({type:dt.ERROR,identifier:"unexpectedError",error:r,handleConfirm:()=>{window.location.reload()}})}})}}const Ps={identifier:"identity",opacity:1,width:0,color:Wi.white};const Lt=_(Ge()),hc=_(Ge()),EAe=new pc(0,1);class mc{constructor(e){this.changeIdentifier=e=>{this.state.identifier=e};this.changeOpacity=e=>{const t=EAe.clamp(e);this.state.opacity=t};this.changeWidth=e=>{this.state.width=e};this.changeColor=e=>{this.state.color=e};this.reset=()=>{this.indexInContainer===-1&&(this.state.identifier=Ps.identifier,this.state.opacity=Ps.opacity,this.state.width=Ps.width,this.state.color=Ps.color,this.removeIndex())};this.removeFrameEffect=()=>{this.effect&&(this.engine.removeEffect(this.effect),this.effect=void 0)};this.setEffectProperties=e=>this.effect?(this.removeIndex(),this.effect.setProperties(e),this.effect.getProperties()):null;this.setFrameEffect=({identifier:e,width:t,opacity:r,color:i})=>{const o=v({},this.state);this.changeIdentifier(e),this.changeWidth(t),this.changeOpacity(r),this.changeColor(i),this.removeFrameEffect();const n=this.engineMediator.orderHelper.addSprite(e);return new Promise((s,a)=>{this.engine.addFrameFromAssets(e,this.engineMediator.image.container,n).then(l=>{this.effect=l,this.effect.setProperties({tintColor:i,opacity:r,width:t}),s()}).catch(l=>{this.changeIdentifier(o.identifier),this.changeOpacity(o.opacity),this.changeWidth(o.width),this.changeColor(o.color),o.identifier==="identity"&&this.removeIndex(),a(l)})})};this.removeIndex=()=>{this.engineMediator.orderHelper.removeSprite(this.state.identifier)};this.engineMediator=e,this.state=Ps}get engine(){return this.engineMediator.engine}get imageContainer(){return this.engineMediator.image.container}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}}m([hc.observable],mc.prototype,"state",2),m([hc.action],mc.prototype,"changeIdentifier",2),m([hc.action],mc.prototype,"changeOpacity",2),m([hc.action],mc.prototype,"changeWidth",2),m([hc.action],mc.prototype,"changeColor",2),m([hc.action],mc.prototype,"reset",2);class er{constructor(e){this.colorList=qt.defaultColors;this.selectFrame=e=>se(this,null,function*(){if(e!==this.identifier){const t=.1*this.editor.shortestOutputSide;yield this.frameStore.setFrameEffect({identifier:e,width:t,opacity:1,color:Ps.color}),this.editor.render(),this.addSnapshot(Ie.ADD,S.FRAME)}});this.changeOpacity=e=>{const t=this.frameStore.setEffectProperties({opacity:e});t&&(this.frameStore.changeOpacity(t.opacity),this.editor.render())};this.changeWidth=e=>{const t=this.frameStore.setEffectProperties({width:e});t&&(this.frameStore.changeWidth(t.width),this.editor.render())};this.changeColor=e=>{const t=this.frameStore.setEffectProperties({tintColor:e});t&&(this.frameStore.changeColor(t.tintColor),this.editor.render())};this.colorSnapshot=()=>{this.addSnapshot(Ie.EDIT,this.locale.controls.selectColor)};this.toolSnapshot=e=>{this.addSnapshot(Ie.EDIT,e)};this.addSnapshot=(e,t)=>{this.editor.addSnapshot(void 0,e,t)};this.pureReset=()=>{this.frameStore.removeFrameEffect(),this.frameStore.reset()};this.reset=()=>{this.pureReset(),this.addSnapshot(Ie.DELETE,this.locale.controls.buttonReset),this.editor.render()};this.updateStateFromHistory=e=>e.identifier==="identity"?(this.pureReset(),new Promise(t=>{t()})):this.frameStore.setFrameEffect(e);this.updateStateFromSerialization=e=>se(this,null,function*(){const t=this.entityManager.items.find(r=>r.identifier===e.identifier);return t?this.frameStore.setFrameEffect(e):new Promise((r,i)=>{i(new Error("Frame Asset doesn't exist"))})});this.editor=e,this.frameStore=new mc(this.editor.engineMediator);const t=this.editor.assetProvider.getAssets("frame"),{config:r}=this;this.entityManager=new mr(t,v(v({},r),{categoryKey:"",itemKey:"thumbnailURI",flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("frame")})),Ps.color=Lt.toJS(Sn(this.config,"defaultColor",Ps.color)),this.config.colors&&this.config.colors.length>0&&(this.colorList=Nn(Lt.toJS(this.config.colors)))}get state(){return this.frameStore.state}get identifier(){return this.state.identifier}get color(){return this.state.color}get size(){return this.state.width}get tintable(){const e=this.entityManager.items.find(t=>t.identifier===this.identifier);return e&&e.tintable||!1}get opacity(){return this.state.opacity}get minSize(){return this.editor.shortestOutputSide*.05}get maxSize(){return this.editor.shortestOutputSide*.3}get config(){return this.editor.configStore.config[S.FRAME]}get locale(){return this.editor.configStore.locale[S.FRAME]}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}get isOptionSelected(){return this.identifier!=="identity"}}m([Lt.action],er.prototype,"selectFrame",2),m([Lt.action],er.prototype,"changeOpacity",2),m([Lt.action],er.prototype,"changeWidth",2),m([Lt.action],er.prototype,"changeColor",2),m([Lt.action],er.prototype,"pureReset",2),m([Lt.action],er.prototype,"reset",2),m([Lt.action],er.prototype,"updateStateFromHistory",2),m([Lt.action],er.prototype,"updateStateFromSerialization",2),m([Lt.computed],er.prototype,"state",1),m([Lt.computed],er.prototype,"identifier",1),m([Lt.computed],er.prototype,"color",1),m([Lt.computed],er.prototype,"size",1),m([Lt.computed],er.prototype,"tintable",1),m([Lt.computed],er.prototype,"opacity",1),m([Lt.computed],er.prototype,"minSize",1),m([Lt.computed],er.prototype,"maxSize",1),m([Lt.computed],er.prototype,"config",1),m([Lt.computed],er.prototype,"locale",1),m([Lt.computed],er.prototype,"localeColor",1),m([Lt.computed],er.prototype,"items",1),m([Lt.computed],er.prototype,"isOptionSelected",1);const oi=_(Ge()),DAe={categories:[],query:""};class tn{constructor(e){this.initProvider=e=>{e&&(this.libraryProvider=new e)};this.fetchImages=(e="")=>se(this,null,function*(){if(this.libraryProvider){let t=null;try{const r=yield this.libraryProvider.getCategories(),i=yield this.libraryProvider.searchImages(e);t=r.map((o,n)=>{const s=i.filter(a=>a.category===o.name);return{identifier:o.name,name:o.name,thumbnailURI:o.coverImageUrl,items:s.map(a=>({name:a.title||`image${n}`,identifier:`${o.name}-${a.title}-${n}`,thumbnailURI:a.thumbUrl,rawUrl:a.rawUrl,authorName:a.authorName,authorAvatar:a.authorAvatar}))}}).filter(o=>o.items.length)}catch(r){console.log(r)}oi.runInAction(()=>{this.state.query=e,this.state.categories=t})}});this.toggleCategorySelection=e=>{this.selectedCategory=this.selectedCategory!==e?e:""};this.getRawUrl=e=>{const t=this.items.findIndex(r=>r.identifier===e);return t!==-1?this.items[t].rawUrl:e};this.configStore=e.configStore,this.state=oi.observable(DAe),this.selectedCategory=""}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.state.categories}get items(){return this.state.categories.map(e=>e.items).reduce((e,t)=>[...e,...t],[])}get query(){return this.state.query}get config(){return this.configStore.config[S.LIBRARY]}get locale(){return this.configStore.locale[S.LIBRARY]}}m([oi.observable],tn.prototype,"selectedCategory",2),m([oi.action],tn.prototype,"initProvider",2),m([oi.action],tn.prototype,"fetchImages",2),m([oi.action],tn.prototype,"toggleCategorySelection",2),m([oi.computed],tn.prototype,"selectedCategoryIdentifier",1),m([oi.computed],tn.prototype,"categories",1),m([oi.computed],tn.prototype,"items",1),m([oi.computed],tn.prototype,"query",1),m([oi.computed],tn.prototype,"config",1),m([oi.computed],tn.prototype,"locale",1);const vr=_(Ge()),fc=_(Ge()),Sg={identifier:"identity",opacity:1,blendMode:Oe.LIGHTEN},IAe=new pc(0,1);class gc{constructor(e,t){this.changeIdentifier=e=>{this.state.identifier=e};this.changeOpacity=e=>{const t=IAe.clamp(e);this.state.opacity=t};this.changeBlendMode=e=>{this.state.blendMode=e};this.reset=()=>{this.indexInContainer===-1&&(this.state.identifier=Sg.identifier,this.state.opacity=Sg.opacity,this.state.blendMode=Sg.blendMode,this.removeIndex())};this.correctOverlayFlip=()=>{const{flipHorizontally:e,flipVertically:t}=this.editor.outputContainer.getData();this.effect&&(this.effect.setFlipHorizontally(e),this.effect.setFlipVertically(t))};this.removeOverlayEffect=()=>{this.effect&&(this.removeIndex(),this.engineMediator.engine.removeEffect(this.effect),this.effect=void 0)};this.setEffectProperties=e=>this.effect?(this.effect.setProperties(e),this.effect.getProperties()):null;this.setOverlayEffect=({identifier:e,blendMode:t,opacity:r})=>{const i=v({},this.state);this.changeIdentifier(e),this.changeOpacity(r),this.changeBlendMode(t),this.removeOverlayEffect();const o=this.engineMediator.orderHelper.addIndex(S.OVERLAY);return new Promise((n,s)=>{this.engineMediator.engine.addOverlayFromAssets(e,this.engineMediator.image.container,o).then(a=>{this.effect=a,this.effect.setProperties({blendMode:t,opacity:r}),this.correctOverlayFlip(),n()}).catch(a=>{this.changeIdentifier(i.identifier),this.changeOpacity(i.opacity),this.changeBlendMode(i.blendMode),i.identifier==="identity"&&this.removeIndex(),s(a)})})};this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex(S.OVERLAY)};this.engineMediator=e,this.editor=t,this.state=Sg}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}}m([fc.observable],gc.prototype,"state",2),m([fc.action],gc.prototype,"changeIdentifier",2),m([fc.action],gc.prototype,"changeOpacity",2),m([fc.action],gc.prototype,"changeBlendMode",2),m([fc.action],gc.prototype,"reset",2),m([fc.action],gc.prototype,"correctOverlayFlip",2);class _r{constructor(e){this.selectOverlay=e=>se(this,null,function*(){if(e!==this.identifier){const t=this.defaultBlendModeForIdentifier(e);yield this.overlayStore.setOverlayEffect({identifier:e,opacity:1,blendMode:t}),this.addSnapshot(Ie.ADD,S.OVERLAY),this.editor.render()}});this.changeOpacity=e=>{const t=this.overlayStore.setEffectProperties({opacity:e});t&&(this.overlayStore.changeOpacity(t.opacity),this.editor.render())};this.toolSnapshot=()=>{this.addSnapshot(Ie.EDIT,this.locale.controls.sliderOpacity)};this.addSnapshot=(e,t)=>{this.editor.addSnapshot(void 0,e,t)};this.changeBlendMode=e=>{const t=this.overlayStore.setEffectProperties({blendMode:e});t&&(this.overlayStore.changeBlendMode(t.blendMode),this.addSnapshot(Ie.EDIT,this.locale.controls.carouselBlendMode),this.editor.render())};this.pureReset=()=>{this.overlayStore.removeOverlayEffect(),this.overlayStore.reset()};this.reset=()=>{this.pureReset(),this.addSnapshot(Ie.DELETE,this.locale.controls.buttonReset),this.editor.render()};this.updateStateFromSerialization=e=>se(this,null,function*(){const t=this.entityManager.items.find(r=>r.identifier===e.identifier);return t?this.overlayStore.setOverlayEffect(e):new Promise((r,i)=>{i(new Error(`Overlay Asset ${e.identifier} doesn't exist`))})});this.updateStateFromHistory=e=>se(this,null,function*(){return e.identifier==="identity"?(this.pureReset(),new Promise(t=>{t()})):this.overlayStore.setOverlayEffect(e)});this.correctOverlayFlip=()=>{this.overlayStore.correctOverlayFlip()};this.defaultBlendModeForIdentifier=e=>{const t=this.entityManager.items.findIndex(r=>r.identifier===e);return t!==-1?this.entityManager.items[t].defaultBlendMode:Oe.LIGHTEN};this.editor=e,this.overlayStore=new gc(this.editor.engineMediator,e);const t=this.editor.assetProvider.getAssets("overlay"),{config:r}=this;this.entityManager=new mr(t,v(v({},r),{categoryKey:"",itemKey:"thumbnailURI",flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("overlay")}))}get state(){return this.overlayStore.state}get identifier(){return this.overlayStore.state.identifier}get opacity(){return this.overlayStore.state.opacity}get blendMode(){return this.overlayStore.state.blendMode}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config[S.OVERLAY]}get locale(){return this.editor.configStore.locale[S.OVERLAY]}get items(){return this.entityManager.items}get allBlendModes(){const e=this.locale.controls;return Object.keys(Oe).map(t=>{const r=Oe[t],i=`blendMode${r.charAt(0).toUpperCase()}${r.slice(1)}`;return{identifier:r,value:e[i]}})}}m([vr.action],_r.prototype,"selectOverlay",2),m([vr.action],_r.prototype,"changeOpacity",2),m([vr.action],_r.prototype,"changeBlendMode",2),m([vr.action],_r.prototype,"pureReset",2),m([vr.action],_r.prototype,"reset",2),m([vr.action],_r.prototype,"updateStateFromSerialization",2),m([vr.action],_r.prototype,"updateStateFromHistory",2),m([vr.action],_r.prototype,"correctOverlayFlip",2),m([vr.computed],_r.prototype,"state",1),m([vr.computed],_r.prototype,"identifier",1),m([vr.computed],_r.prototype,"opacity",1),m([vr.computed],_r.prototype,"blendMode",1),m([vr.computed],_r.prototype,"isOptionSelected",1),m([vr.computed],_r.prototype,"config",1),m([vr.computed],_r.prototype,"locale",1),m([vr.computed],_r.prototype,"items",1),m([vr.computed],_r.prototype,"allBlendModes",1);const OAe=e=>{const t=atob(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),o=new Uint8Array(i);for(let n=0;n<t.length;n+=1)o[n]=t.charCodeAt(n);return new Blob([i],{type:r})};var tD=OAe;const O0=_(r0());class rD{static isImageElement(e){return e instanceof HTMLImageElement}constructor({license:e,assetProvider:t,crossOrigin:r}){this.crossOrigin=r,this.engine=new vg({license:e,crossOrigin:r,assetProvider:t,downscaleOptions:{maxDimensions:{width:100,height:100}}})}getAllFilterPreviewThumbnails(e){return new Promise((t,r)=>{const i=[],o=[];e.forEach(n=>{n.isDuotone?i.push(n.identifier):o.push(n.identifier)}),this.getAllDuotonePreview(i).then(n=>{this.getAllLutPreview(o).then(s=>{t(Object.assign(n,s))})}).catch(n=>{r(n)})})}getAllDuotonePreview(e){return se(this,null,function*(){const t={};if(!e.length)return t;const r=yield this.engine.addDuoToneFilterFromAssets(e[0],this.container);return yield O0.default(e,i=>se(this,null,function*(){const o=this.engine.assetProvider.getDuotoneFilterAsset(i),n=r.filterOperation.getFilter();n.set({intensity:.5,lightColor:me.Color.fromHex(o.lightColor),darkColor:me.Color.fromHex(o.darkColor)});const s=yield this.engine.export(Dr.DATA_URL,ar.PNG);t[i]=s}),{concurrency:1}),this.engine.removeEffect(r),t})}loadLutAssets(e){return se(this,null,function*(){const t={};return yield O0.default(e,r=>se(this,null,function*(){t[r]=yield this.engine.getLutFilterImage(r)})),t})}getAllLutPreview(e){return se(this,null,function*(){const t={};if(!e.length)return t;const r=yield this.loadLutAssets(e),i=yield this.engine.addLUTFilterFromAssets(e[0],this.container);return yield O0.default(e,o=>se(this,null,function*(){const n=this.engine.assetProvider.getLUTFilterAsset(o),s=i.filterOperation.getFilter(),a={horizontalTileCount:n.horizontalTileCount||5,verticalTileCount:n.verticalTileCount||5,image:r[o]};s.set(v(v({},a),{intensity:n.defaultIntensity||1})),i.setProperties({intensity:1}),s._lutPrimitive.set(a);const l=yield this.engine.export(Dr.DATA_URL,ar.PNG);t[o]=l}),{concurrency:1}),this.engine.removeEffect(i),t})}addImageToContainer(e){return new Promise((t,r)=>{let i;rD.isImageElement(e)?(i=e,this.setBackgroundImage(i),t()):this.getImageElement(e).then(o=>{i=o,this.setBackgroundImage(i),t()}).catch(o=>{r({identifier:"imageLoading",message:o.message})})})}getImageElement(e){return new Promise((t,r)=>{const i=new Image;i.addEventListener("load",()=>{t(i)}),i.addEventListener("error",o=>{r(o)}),i.crossOrigin=this.crossOrigin,i.src=e})}setBackgroundImage(e){this.container?this.container.setData({image:e}):this.container=this.engine.addImage({image:e,blendMode:Oe.NORMAL,opacity:1});const{size:t}=this.container.getBounds(),r=this.engine.getOutputContainer();r.setResolution(t)}}const xt=_(Ge()),Cg={size:0,color:Wi.white,hardness:0,maximumSize:.125,minimumSize:0,maximumHardness:1,minimumHardness:0};class Xt{constructor(e){this.colorList=qt.defaultColors;this.dirty=xt.observable.box(!1);this.id="";this.containerId=()=>this.id;this.initSize=()=>{const{minimumSize:e,maximumSize:t}=this.state,{size:r}=this;r===0&&this.changeSize(Pk(this.config,"defaultSize",[e,t]))};this.changeColor=e=>{this.state.color=e};this.changeSize=e=>{this.state.size=e};this.changeRelativeSize=e=>{const{maximumSize:t,minimumSize:r}=this.state;this.state.size=(t-r)*e/100+r};this.changeHardness=e=>{this.state.hardness=e};this.reset=()=>{this.pureReset(),this.addSnapshot(Ie.DELETE,this.locale.controls.buttonReset),this.editor.render()};this.editor=e,this.state=v(v({},Cg),{hardness:Pk(this.config,"defaultHardness",[Cg.minimumHardness,Cg.maximumHardness]),color:xt.toJS(Sn(this.config,"defaultColor",Cg.color))}),this.config.colors&&this.config.colors.length>0&&(this.colorList=Nn(xt.toJS(this.config.colors)))}addSnapshot(e,t){this.editor.addSnapshot(void 0,e,t)}clickableCanvas(e){this.editor.clickableCanvas(e)}beginStroke(e=[]){if(!this.drawingContainer){const t=this.editor.orderHelper.addSprite(S.BRUSH);this.drawingContainer=this.editor.engine.addDrawing({strokes:e},this.editor.imageContainer,t)}this.id=this.drawingContainer.getID(),this.drawingContainer.beginStroke({id:"imgly_brush_radial",color:xt.toJS(this.state.color),size:this.state.size,hardness:this.state.hardness})}strokePosition(e){if(this.drawingContainer){const t=this.editor.previewToWorld(e,!1);this.drawingContainer.addPointToCurrentStroke(t),this.editor.render()}}endStroke(){this.drawingContainer&&(this.drawingContainer.endStroke(),this.editor.render(),this.strokes=this.drawingContainer.getData(),this.addSnapshot(Ie.EDIT,this.locale.history.brushStroke),this.dirty.set(!0))}updateStateFromHistory(e){if(e=e||{strokes:[]},this.drawingContainer){if(this.strokes&&this.strokes.strokes.length===e.strokes.length)return;this.strokes=e,this.drawingContainer.setData(this.strokes),e.strokes.length!==0&&this.dirty.set(!0)}else{const t=this.editor.orderHelper.addSprite(S.BRUSH);this.drawingContainer=this.editor.engine.addDrawing({strokes:e.strokes},this.editor.imageContainer,t),this.strokes=this.drawingContainer.getData()}this.id=this.drawingContainer.getID()}pureReset(){this.dirty.set(!1),this.strokes={strokes:[]},this.drawingContainer&&(this.editor.engine.removeContainer(this.drawingContainer),this.drawingContainer=void 0)}get config(){return this.editor.configStore.config[S.BRUSH]}get locale(){return this.editor.configStore.locale[S.BRUSH]}get localeColor(){return this.editor.configStore.locale.common.color}get color(){return this.state.color}get size(){return this.state.size}get relativeSize(){const{size:e,maximumSize:t,minimumSize:r}=this.state;return(e-r)*100/(t-r)}get sizeOnScreenSpace(){const e=this.editor.engineMediator.engine.getSmallerOutputSide();return this.editor.worldToPreview(this.state.size*e)}get hardness(){return this.state.hardness}get isDirty(){return this.dirty.get()}}m([xt.observable],Xt.prototype,"state",2),m([xt.observable],Xt.prototype,"dirty",2),m([xt.action],Xt.prototype,"initSize",2),m([xt.action],Xt.prototype,"changeColor",2),m([xt.action],Xt.prototype,"changeSize",2),m([xt.action],Xt.prototype,"changeRelativeSize",2),m([xt.action],Xt.prototype,"changeHardness",2),m([xt.action],Xt.prototype,"clickableCanvas",1),m([xt.action],Xt.prototype,"beginStroke",1),m([xt.action],Xt.prototype,"strokePosition",1),m([xt.action],Xt.prototype,"endStroke",1),m([xt.action],Xt.prototype,"updateStateFromHistory",1),m([xt.action],Xt.prototype,"reset",2),m([xt.computed],Xt.prototype,"config",1),m([xt.computed],Xt.prototype,"locale",1),m([xt.computed],Xt.prototype,"localeColor",1),m([xt.computed],Xt.prototype,"color",1),m([xt.computed],Xt.prototype,"size",1),m([xt.computed],Xt.prototype,"relativeSize",1),m([xt.computed],Xt.prototype,"sizeOnScreenSpace",1),m([xt.computed],Xt.prototype,"hardness",1),m([xt.computed],Xt.prototype,"isDirty",1);const qn=_(Ge());var Gn;(function(e){e.LEADING="leading",e.CENTER="center",e.TRAILING="trailing"})(Gn||(Gn={}));const AAe={horizontalGuides:[],verticalGuides:[],rotationGuides:[]};class Ya{constructor(e){this.previewTopLeftPosition={x:0,y:0};this.getGuideValue=(e,t)=>{const{height:r,width:i}=this.editor.getPreviewSize(),{snapToLeft:o,snapToRight:n,snapToTop:s,snapToBottom:a}=this.configStore.config.snapping.position,l=Math.min(r,i);let c=0;return t==="bottom"?c=Math.round(r-l*a):t==="top"?c=Math.round(l*s):t==="right"?c=Math.round(i-l*n):t==="left"?c=Math.round(l*o):e==="vertical"&&t==="center"?c=Math.round(i/2):e==="horizontal"&&t==="center"&&(c=Math.round(r/2)),c};this.getVerticalGuidesFromConfig=()=>{const{snapToVerticalCenter:e,snapToLeft:t,snapToRight:r}=this.configStore.config.snapping.position,i=[];return e&&i.push({value:this.getGuideValue("vertical","center"),edge:Gn.CENTER,isVisible:!1,direction:"vertical"}),t&&i.push({value:this.getGuideValue("vertical","left"),edge:Gn.LEADING,isVisible:!1,direction:"vertical"}),r&&i.push({value:this.getGuideValue("vertical","right"),edge:Gn.TRAILING,isVisible:!1,direction:"vertical"}),i};this.getHorizontalGuidesFromConfig=()=>{const{snapToHorizontalCenter:e,snapToTop:t,snapToBottom:r}=this.configStore.config.snapping.position,i=[];return e&&i.push({value:this.getGuideValue("horizontal","center"),edge:Gn.CENTER,isVisible:!1,direction:"horizontal"}),t&&i.push({value:this.getGuideValue("horizontal","top"),edge:Gn.LEADING,isVisible:!1,direction:"horizontal"}),r&&i.push({value:this.getGuideValue("horizontal","bottom"),edge:Gn.TRAILING,isVisible:!1,direction:"horizontal"}),i};this.getRotationGuidesFromConfig=()=>{const{angles:e}=this.configStore.config.snapping.rotation,t=[];e.forEach(i=>{t.push(i),t.push(i+360),t.push(i-360)});const r=t.filter((i,o)=>t.indexOf(i)===o);return r.map(i=>({value:i*Math.PI/180,edge:Gn.CENTER,isVisible:!1,position:{x:0,y:0}}))};this.getSpriteDimensions=({leftTop:e,leftBottom:t,rightTop:r,rightBottom:i})=>{const o=Math.min(e.y,r.y,t.y,i.y),n=Math.max(e.y,r.y,t.y,i.y),s=Math.min(e.x,r.x,t.x,i.x),a=Math.max(e.x,r.x,t.x,i.x);return{height:Math.round(n-o),width:Math.round(a-s)}};this.mapRange=({value:e,fromMin:t,fromLength:r,toMin:i,toLength:o})=>(e-t)*o/r+i;this.updateGuides=()=>{this.state.horizontalGuides=this.getHorizontalGuidesFromConfig(),this.state.verticalGuides=this.getVerticalGuidesFromConfig()};this.mapToSnapSystem=(e,t,r,i)=>{if(t.length===0)return e;if(t[0]>e)return e-r;for(let o=0;o<t.length-1;o+=1){const n=t[o],s=t[o+1];let a=n+r,l=s-r,c=0;i&&(c=o*r*2,a+=c,l+=c+r*2);const d=1e-5;if(n<=e&&e<=s)return e<=n+d?n+c:e>=s-d?s+c+(i?r*2:0):this.mapRange({value:e,fromMin:n,fromLength:s-n,toMin:a,toLength:l-a})}return i?e+(t.length-1)*r*2+r:e};this.mapFromSnapSystem=(e,t,r,i)=>{if(t.length===0)return e;if(t[0]>e)return e>=t[0]-r?t[0]:e+r;let o=e;for(let s=0;s<t.length-1;s+=1){const a=t[s],l=t[s+1],c=a+r;let d=l-r,u=l;if(i&&(d+=r*2,u+=r*2,o=e-s*r*2),a<=o&&o<=u)return c<=o&&o<=d?this.mapRange({value:o,fromMin:c,fromLength:d-c,toMin:a,toLength:l-a}):o<c?a:l}o-=r*3;const n=t[t.length-1];return o<=n?n:o};this.centerSnapValue=(e,t)=>{const r=t*.5,{value:i,edge:o}=e;let n=i;return o===Gn.LEADING?n+=r:o===Gn.TRAILING&&(n-=r),n};this.mapSnappingGuidesToCenter=(e,t)=>{const r=[];return e.forEach(i=>{r.push(this.centerSnapValue(i,t))}),r};this.calcSnapThresholdInRadians=(e,t)=>e===0?0:t/e;this.calculatePreviewTopLeftPosition=()=>{const e=this.editor.engineMediator.preview.container.getPosition(),t=this.editor.getPreviewSize(),r=qt.devicePixelRatio;this.previewTopLeftPosition={x:e.x/r-t.width/2,y:e.y/r-t.height/2}};this.snapToRotation=(e,t,r)=>{const{rotationGuides:i}=this.state,{enabled:o,threshold:n}=this.configStore.config.snapping.rotation,{x:s,y:a}=this.previewTopLeftPosition,{width:l}=this.editor.getPreviewSize();let c=(e+Math.PI*2)%(Math.PI*2);if(o){const d=new O(t).magnitude,u=i.map(b=>b.value).sort((b,y)=>b-y),p=this.calcSnapThresholdInRadians(d,n);if(!this.rotationOffset){const b=this.mapToSnapSystem(e,u,p,!1);this.rotationOffset=b-c}c=this.mapFromSnapSystem(c+this.rotationOffset,u,p,!1);const h={x:r.position.x-s-l,y:r.position.y-a};return i.forEach(b=>{b.isVisible=b.value===c,b.position=h}),c}return e};this.snapToPosition=(e,t)=>{const{horizontalGuides:r,verticalGuides:i}=this.state,{enabled:o,threshold:n}=this.configStore.config.snapping.position,s=new O(this.previewTopLeftPosition),{height:a,width:l}=this.getSpriteDimensions(t),{x:c,y:d}=new O(e).subtract(s);if(o){const u=this.mapSnappingGuidesToCenter(r,a).sort((y,f)=>y-f),p=this.mapSnappingGuidesToCenter(i,l).sort((y,f)=>y-f);if(!this.positionOffset){const y=this.mapToSnapSystem(c,p,n,!0),f=this.mapToSnapSystem(d,u,n,!0);this.positionOffset=new O(y,f).subtract(new O(c,d))}let h=this.mapFromSnapSystem(c+this.positionOffset.x,p,n,!0),b=this.mapFromSnapSystem(d+this.positionOffset.y,u,n,!0);return h=Math.round(h),b=Math.round(b),r.forEach(y=>{const f=Math.round(this.centerSnapValue(y,a));y.isVisible=f===b}),i.forEach(y=>{const f=Math.round(this.centerSnapValue(y,l));y.isVisible=f===h}),new O(h,b).add(s)}return{x:c,y:d}};this.editor=e,this.configStore=e.configStore,this.state=qn.observable(AAe),this.rotationOffset=null,this.positionOffset=null,this.state.horizontalGuides=this.getHorizontalGuidesFromConfig(),this.state.verticalGuides=this.getVerticalGuidesFromConfig(),this.state.rotationGuides=this.getRotationGuidesFromConfig()}hidePositionGuides(){this.positionOffset=null,this.state.verticalGuides=this.state.verticalGuides.map(e=>v(v({},e),{isVisible:!1})),this.state.horizontalGuides=this.state.horizontalGuides.map(e=>v(v({},e),{isVisible:!1}))}hideRotationGuides(){this.rotationOffset=null,this.state.rotationGuides=this.state.rotationGuides.map(e=>v(v({},e),{isVisible:!1}))}get positionGuides(){const{verticalGuides:e,horizontalGuides:t}=this.state;return[...e,...t]}get rotationGuides(){return this.state.rotationGuides}}m([qn.observable],Ya.prototype,"state",2),m([qn.action],Ya.prototype,"snapToRotation",2),m([qn.action],Ya.prototype,"snapToPosition",2),m([qn.action],Ya.prototype,"hidePositionGuides",1),m([qn.action],Ya.prototype,"hideRotationGuides",1),m([qn.computed],Ya.prototype,"positionGuides",1),m([qn.computed],Ya.prototype,"rotationGuides",1);const ce=_(Ge());function A0(e,t=null){return new Promise((r,i)=>{const o=new Image;o.addEventListener("load",()=>{const n=document.createElement("canvas"),s=n.getContext("2d");n.width=o.width,n.height=o.height,t&&(n.width=t,n.height=t*o.height/o.width),s.drawImage(o,0,0,n.width,n.height),r(n.toDataURL(no.PNG))}),o.addEventListener("error",()=>{i()}),o.src=e})}const i$=e=>new Promise((t,r)=>{const i=new FileReader;i.onload=o=>se(void 0,null,function*(){try{const{result:n}=o.target,s=yield A0(n,150);t({stickerURI:n,thumbnailURI:s,name:e.name||"",type:e.type,identifier:wn()})}catch(n){r(n)}}),i.onerror=o=>{r(o)},i.readAsDataURL(e)}),He=_(Ge()),RAe="white",wo={identifier:"identity",opacity:1,tintColor:Wi[RAe],tintMode:"none",resizeMode:"keepAspect"},iD={},o$="identity",oD="imgly_sticker_custom";class it{constructor(e){this.state=He.observable.map(iD);this.customStickers=[];this.colorList=qt.defaultColors;this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.doesStickerAssetExist=e=>this.entityManager.items.findIndex(t=>t.identifier===e)!==-1;this.add=e=>{const t=this.entityManager.items.find(o=>o.identifier===e),r=t?t.tintMode:wo.tintMode,i=t?t.resizeMode:wo.resizeMode;this.editor.spriteStore.addSticker({state:{identifier:e,tintMode:r,tintColor:wo.tintColor,opacity:wo.opacity,resizeMode:i}})};this.duplicate=()=>{if(this.id){const e=this.editor.spriteStore.getDuplicateContainerTransform(this.id),t=this.editor.spriteStore.getDuplicateContainerFlip(this.id),{flipHorizontally:r,flipVertically:i}=this.editor.outputContainer.getData();this.editor.spriteStore.addSticker({state:{identifier:this.identifier,tintColor:He.toJS(this.tintColor),tintMode:this.tintMode,resizeMode:this.resizeMode,opacity:this.opacity,flipHorizontally:r!==t.flipHorizontally,flipVertically:i!==t.flipVertically},transform:e})}};this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)};this.flipHorizontally=()=>{this.id&&this.editor.spriteStore.flipHorizontally(this.id)};this.delete=()=>{if(this.id){const e=this.id;this.editor.spriteStore.removeSprite(e),this.state.delete(e),this.selectLast()}};this.updateStateFromHistory=(e,t)=>{this.setState(e,t),this.editor.spriteStore.setContainerProperties(e,t)};this.setState=(e,t)=>{const r=this.state.get(e);r?("opacity"in t&&(r.opacity=t.opacity),t.tintColor&&(r.tintColor=t.tintColor),t.tintMode&&(r.tintMode=t.tintMode),t.resizeMode&&(r.resizeMode=t.resizeMode),this.state.set(e,r)):this.state.set(e,{identifier:t.identifier,opacity:t.opacity,tintMode:t.tintMode,resizeMode:t.resizeMode,tintColor:t.tintColor?t.tintColor:wo.tintColor})};this.changeOpacity=e=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{opacity:e});const r=this.editor.spriteStore.getContainerProperties(this.id);t.opacity=r.opacity,this.state.set(this.id,t)}}};this.changeTintColor=e=>{if(this.id){const t=this.state.get(this.id);if(t){const{tintMode:r}=this.entityManager.items.find(o=>o.identifier===this.identifier);this.editor.spriteStore.setContainerProperties(this.id,{tintColor:e,tintMode:r});const i=this.editor.spriteStore.getContainerProperties(this.id);t.tintColor=i.tintColor,t.tintMode=i.tintMode||wo.tintMode,this.state.set(this.id,t)}}};this.tintColorSnapshot=()=>{this.addSnapshot(Ie.EDIT,this.locale.history.color)};this.addFiles=e=>se(this,null,function*(){if(this.editor.modalStore.showInfoModal("loading"),e.length){let t=0;const r=[];for(t=0;t<e.length;t+=1)r.push(i$(e[t]));try{const i=yield Promise.all(r);this.addCustomStickerAsset(i),this.editor.configStore.events.onStickerUploadedAdd(i.map(({identifier:o,stickerURI:n},s)=>({identifier:o,stickerURI:n,file:e[s]})))}catch(i){this.editor.modalStore.hideModal(),this.editor.modalStore.showInfoModal("stickerLoading")}}});this.addCustomStickerAsset=e=>se(this,null,function*(){const t=[];e.forEach(({stickerURI:n,thumbnailURI:s,name:a,identifier:l,type:c})=>{t.push({stickerURI:n,thumbnailURI:s,name:a,tintMode:this.customStickerTintMode,resizeMode:"keepAspect",identifier:l}),this.customStickers.push({identifier:l,type:c,stickerURI:n,name:a})});const r=this.locale.categories[oD];this.editor.assetProvider.addCustomStickerAsset(t,oD,r);const i=this.editor.assetProvider.getAssets("sticker"),{config:o}=this;this.entityManager=new mr(i,v(v({},o),{categoryKey:"thumbnailURI",itemKey:"stickerURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("sticker")})),this.selectedCategory=oD,this.editor.modalStore.hideModal()});this.toolSnapshot=()=>{this.addSnapshot(Ie.EDIT,this.locale.history.opacity)};this.addSnapshot=(e,t)=>{this.currentSticker&&this.editor.spriteStore.addSnapshot(e,t)};this.toggleCategorySelection=e=>{this.selectedCategory=this.selectedCategory===e?o$:e};this.pureReset=()=>{this.state=He.observable.map(iD)};this.editor=e,this.selectedCategory=o$;const{config:t}=this,r=this.editor.assetProvider.getAssets("sticker");this.entityManager=new mr(r,v(v({},t),{categoryKey:"thumbnailURI",itemKey:"stickerURI",locale:v(v({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("sticker")})),wo.tintColor=He.toJS(Sn(this.config,"defaultTintColor",wo.tintColor)),this.config.colors&&this.config.colors.length>0&&(this.colorList=Nn(He.toJS(this.config.colors)))}get isStickerSelected(){return this.editor.spriteStore.isSpriteSticker}get isCustomStickerEnabled(){return this.config.enableCustomUpload}get customStickerTintMode(){return this.config.customStickerTintMode}get currentSticker(){if(this.isStickerSelected){const e=this.state.get(this.id);if(e)return e}return}get identifier(){if(this.isStickerSelected){const e=this.state.get(this.id);if(e)return e.identifier}return"none"}get id(){return this.isStickerSelected?this.editor.spriteStore.id:void 0}get opacity(){return this.currentSticker?this.currentSticker.opacity:wo.opacity}get tintMode(){return this.currentSticker?this.currentSticker.tintMode:wo.tintMode}get resizeMode(){return this.currentSticker?this.currentSticker.resizeMode:wo.resizeMode}get tintable(){return this.currentSticker?this.currentSticker.tintMode==="solid"||this.currentSticker.tintMode==="colorized":!1}get tintColor(){return this.currentSticker?this.currentSticker.tintColor:wo.tintColor}get config(){return this.editor.configStore.config[S.STICKER]}get locale(){return this.editor.configStore.locale[S.STICKER]}get localeColor(){return this.editor.configStore.locale.common.color}get selectedCategoryIdentifier(){return this.selectedCategory}get items(){return this.entityManager.items}get categories(){return this.entityManager.categories}}m([He.observable],it.prototype,"selectedCategory",2),m([He.observable],it.prototype,"entityManager",2),m([He.action],it.prototype,"selectLast",2),m([He.action],it.prototype,"add",2),m([He.action],it.prototype,"duplicate",2),m([He.action],it.prototype,"bringToFront",2),m([He.action],it.prototype,"flipHorizontally",2),m([He.action],it.prototype,"delete",2),m([He.action],it.prototype,"updateStateFromHistory",2),m([He.action],it.prototype,"setState",2),m([He.action],it.prototype,"changeOpacity",2),m([He.action],it.prototype,"changeTintColor",2),m([He.action],it.prototype,"addFiles",2),m([He.action],it.prototype,"addCustomStickerAsset",2),m([He.action],it.prototype,"toggleCategorySelection",2),m([He.action],it.prototype,"pureReset",2),m([He.computed],it.prototype,"isStickerSelected",1),m([He.computed],it.prototype,"isCustomStickerEnabled",1),m([He.computed],it.prototype,"customStickerTintMode",1),m([He.computed],it.prototype,"currentSticker",1),m([He.computed],it.prototype,"identifier",1),m([He.computed],it.prototype,"id",1),m([He.computed],it.prototype,"opacity",1),m([He.computed],it.prototype,"tintMode",1),m([He.computed],it.prototype,"resizeMode",1),m([He.computed],it.prototype,"tintable",1),m([He.computed],it.prototype,"tintColor",1),m([He.computed],it.prototype,"config",1),m([He.computed],it.prototype,"locale",1),m([He.computed],it.prototype,"localeColor",1),m([He.computed],it.prototype,"selectedCategoryIdentifier",1),m([He.computed],it.prototype,"items",1),m([He.computed],it.prototype,"categories",1);const xe=_(Ge()),FAe="imgly_font_open_sans_bold",Ct={text:"Write Something",identifier:FAe,fontSize:73.3,defaultFontSize:73.3,fontFamily:"Open Sans",fontStyle:"",fontWeight:"bold",lineHeight:1,alignment:"center",textColor:Wi.white,backgroundColor:Wi.transparent||[0,0,0,0],width:0},nD={},n$={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"SemiBold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular",lighter:"Lighter"};class ke{constructor(e){this.state=xe.observable.map(nD);this.colorList=qt.defaultColors;this.backgroundColorList=qt.defaultBackgroundColors;this.loadingObservable=xe.observable.box(!1);this.loadfonts=e=>{if(this.fontsLoaded)e();else{const t=this.editor.assetProvider.getFontManager(),r=this.editor.assetProvider.getFontAssetsForText().map(i=>i.identifier);t.loadFontsWithIdentifiers(r).then(()=>{this.loadingObservable.set(!0),e()}).catch(i=>{console.error(i),this.editor.modalStore.showActionModal({type:dt.ERROR,identifier:"fontLoading",error:i})})}};this.doesTextAssetExist=e=>this.editor.assetProvider.getFontAssets().findIndex(t=>t.identifier===e)!==-1;this.validFontWithConfig=e=>this.fonts.find(t=>t.identifier===e)||this.fonts[0];this.addOrselect=()=>{this.state.size?this.selectLast():this.add()};this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.add=()=>{const e=()=>{this.editor.spriteStore.addText({state:{identifier:Ct.identifier,text:Ct.text,textColor:Ct.textColor,backgroundColor:Ct.backgroundColor,lineHeight:Ct.lineHeight,alignment:Ct.alignment,fontSize:0}})};this.loadfonts(e)};this.duplicate=()=>{if(this.id){const e=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addText({state:{identifier:this.identifier,text:this.text,textColor:xe.toJS(this.textColor),lineHeight:this.lineHeight,alignment:this.alignment,fontSize:this.fontSize,backgroundColor:xe.toJS(this.backgroundColor),width:this.width},transform:e})}};this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)};this.delete=()=>{if(this.id){const e=this.id;this.editor.spriteStore.removeSprite(e),this.state.delete(e),this.selectLast()}};this.setEditMode=e=>{this.editor.spriteStore.setEditMode(e)};this.changeFont=e=>{const t=this.fonts.find(r=>r.identifier===e);this.changeIdentifier(t,this.id),this.id&&this.addSnapshot(Ie.EDIT,this.locale.history.fontFamily)};this.changeIdentifier=(e,t)=>{xe.runInAction(()=>{if(e&&t){const r=this.state.get(t);if(r){this.editor.spriteStore.setContainerProperties(t,{fontIdentifier:e.identifier},!0);const i=this.editor.spriteStore.getContainerProperties(t);r.identifier=i.fontIdentifier,r.fontFamily=e.fontFamily,r.fontStyle=e.fontStyle,r.fontWeight=e.fontWeight,r.fontSize=i.fontSize,r.width=i.width,r.defaultFontSize=r.fontSize,this.state.set(t,r)}}})};this.changeFontSize=(e,t=!1)=>{if(this.id){const r=this.state.get(this.id);r&&(r.fontSize=e,t&&(r.defaultFontSize=e),this.state.set(this.id,r))}};this.updateDefaultFontSize=()=>{if(this.id){const e=this.state.get(this.id);e&&(e.defaultFontSize=e.fontSize,this.state.set(this.id,e))}};this.changeSize=(e,t)=>{const r=this.state.get(e);r&&(r.width=t.width,r.fontSize=t.fontSize,r.defaultFontSize=t.fontSize,this.state.set(e,r))};this.changeWidth=e=>{if(this.id){const t=this.state.get(this.id);t&&(t.width=e,this.state.set(this.id,t))}};this.changeText=e=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{text:e},!0);let r=this.editor.spriteStore.getContainerProperties(this.id);const i=this.editor.outputContainer.getSizeInOutputSpace(),o=this.editor.spriteStore.getSize(this.id);this.config.disableAutoScaling||o.height>i.height&&this.editor.spriteStore.setContainerProperties(this.id,{fontSize:this.calculateFitFontSize(this.id,i.height)},!0),r=this.editor.spriteStore.getContainerProperties(this.id),t.text=r.text,t.fontSize=r.fontSize,t.defaultFontSize=r.fontSize,this.state.set(this.id,t),this.addSnapshot(Ie.EDIT,this.locale.history.edit)}}};this.calculateFitFontSize=(e,t)=>{if(!ke.measureContext){const p=document.createElement("canvas");ke.measureContext=p.getContext("2d")}const r=this.editor.spriteStore.getContainerProperties(e),i=this.editor.engine.assetProvider.getFontManager().getFontWithId(r.fontIdentifier),o=this.config.minFontSizeForAutoScaling,n=Ed(ke.measureContext,r.text,i,r.fontSize,r.lineHeight,r.width,i.textMetrics),s=Math.min(Math.floor(r.fontSize*(t/n.height)),1),a=Math.round(r.fontSize);let l=0,c=a-s,d=Math.floor((a-s)*2),u=c;for(;l<=d;){c=l+Math.floor((d-l)/2);const p=Ed(ke.measureContext,r.text,i,c,r.lineHeight,r.width,i.textMetrics);if(t<p.height)d=c-1,u=c-1;else if(t>p.height){if(l=c+1,s+c>=a)return a}else{u=c;break}}return o&&u<o?o:u};this.changeLineHeight=e=>{if(this.id){const t=this.state.get(this.id);if(t&&e){this.editor.spriteStore.setContainerProperties(this.id,{lineHeight:e},!0);const r=this.editor.spriteStore.getContainerProperties(this.id);t.lineHeight=r.lineHeight,this.state.set(this.id,t)}}};this.changeColor=e=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{textColor:e});const r=this.editor.spriteStore.getContainerProperties(this.id);t.textColor=r.textColor,this.state.set(this.id,t)}}};this.changeBackgroundColor=e=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{backgroundColor:e});const r=this.editor.spriteStore.getContainerProperties(this.id);t.backgroundColor=r.backgroundColor,this.state.set(this.id,t)}}};this.colorSnapshot=()=>{this.addSnapshot(Ie.EDIT,this.locale.history.textColor)};this.backgroundColorSnapshot=()=>{this.addSnapshot(Ie.EDIT,this.locale.history.backgroundColor)};this.changeAlignment=e=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{alignment:e});const r=this.editor.spriteStore.getContainerProperties(this.id);t.alignment=r.alignment,this.state.set(this.id,t),this.addSnapshot(Ie.EDIT,this.locale.history.alignment)}}};this.toolSnapshot=()=>{this.addSnapshot(Ie.EDIT,this.locale.history.lineSpacing)};this.addSnapshot=(e,t)=>{this.currentText&&this.editor.spriteStore.addSnapshot(e,t)};this.updateStateFromHistory=(e,t)=>{this.setState(e,t),this.editor.spriteStore.setContainerProperties(e,t)};this.setState=(e,t)=>{const r=this.state.get(e);if(r)t.alignment&&(r.alignment=t.alignment),t.text&&(r.text=t.text),t.lineHeight&&(r.lineHeight=t.lineHeight),t.textColor&&(r.textColor=t.textColor),t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.fontIdentifier&&(r.identifier=t.fontIdentifier),t.fontSize&&(r.fontSize=t.fontSize,r.defaultFontSize=t.fontSize),t.width&&(r.width=t.width);else{const i=this.validFontWithConfig(t.fontIdentifier);i&&this.state.set(e,{text:t.text,identifier:i.identifier,alignment:t.alignment,textColor:t.textColor?t.textColor:Ct.textColor,backgroundColor:t.backgroundColor?t.backgroundColor:Ct.backgroundColor,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontSize:t.fontSize,fontWeight:i.fontWeight,lineHeight:t.lineHeight,width:t.width,defaultFontSize:t.fontSize})}};this.setFontSize=e=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{fontSize:e},!0);const r=this.editor.spriteStore.getContainerProperties(this.id);t.fontSize=r.fontSize,t.defaultFontSize=r.fontSize,this.state.set(this.id,t)}}};this.pureReset=()=>{this.state=xe.observable.map(nD)};this.editor=e,this.fonts.find(t=>t.identifier===Ct.identifier)||(Ct.identifier=this.fonts[0].identifier),Ct.textColor=xe.toJS(Sn(this.config,"defaultColor",Ct.textColor)),Ct.backgroundColor=xe.toJS(Sn(this.config,"defaultBackgroundColor",Ct.backgroundColor)),Ct.text=this.locale.canvasControls.placeholderText,this.config.colors&&this.config.colors.length>0&&(this.colorList=Nn(xe.toJS(this.config.colors))),this.config.backgroundColors&&this.config.backgroundColors.length>0&&(this.backgroundColorList=Nn(xe.toJS(this.config.backgroundColors)))}static defaultText(){return Ct.text}static getDisplayFontStyle(e){const t=e.fontWeight&&n$[e.fontWeight].toLowerCase()!=="regular"?n$[e.fontWeight]:"",r=e.fontStyle&&e.fontStyle.toLowerCase()!=="normal"?e.fontStyle:"";return`${e.fontFamily.toLowerCase().includes(t.toLowerCase())?"":t} ${r}`.trim()}get isEditMode(){return this.editor.spriteStore.isEditMode}get isTextSelected(){return this.editor.spriteStore.isSpriteText}get fontsLoaded(){return this.loadingObservable.get()}get currentText(){if(this.isTextSelected){const e=this.state.get(this.id);if(e)return e}return}get text(){return this.currentText?this.currentText.text:Ct.text}get fontSize(){return this.currentText?this.currentText.fontSize:Ct.fontSize}get defaultFontSize(){return this.currentText?this.currentText.defaultFontSize:Ct.defaultFontSize}get width(){return this.currentText?this.currentText.width:Ct.width}get fontFamily(){return this.currentText?this.currentText.fontFamily:Ct.fontFamily}get fontStyle(){return this.currentText?this.currentText.fontStyle:Ct.fontStyle}get fontWeight(){return this.currentText?this.currentText.fontWeight:Ct.fontWeight}get lineHeight(){return this.currentText?this.currentText.lineHeight:Ct.lineHeight}get identifier(){return this.currentText?this.currentText.identifier:Ct.identifier}get id(){return this.isTextSelected?this.editor.spriteStore.id:void 0}get alignment(){return this.currentText?this.currentText.alignment:Ct.alignment}get textColor(){return this.currentText?this.currentText.textColor:Ct.textColor}get backgroundColor(){return this.currentText?this.currentText.backgroundColor:Ct.backgroundColor}get config(){return this.editor.configStore.config[S.TEXT]}get locale(){return this.editor.configStore.locale[S.TEXT]}get localeColor(){return this.editor.configStore.locale.common.color}get rawOptions(){return this.editor.assetProvider.getFontAssetsForText()}get fonts(){return this.rawOptions.reduce((e,t)=>this.rawOptions.find(r=>r.identifier===t.identifier)?[...e,{identifier:t.identifier,fontFamily:t.fontFamily,fontStyle:t.fontStyle||"",fontWeight:t.fontWeight||""}]:e,[])}get fontFamilies(){return[...new Set(this.fonts)]}}m([xe.action],ke.prototype,"addOrselect",2),m([xe.action],ke.prototype,"selectLast",2),m([xe.action],ke.prototype,"add",2),m([xe.action],ke.prototype,"duplicate",2),m([xe.action],ke.prototype,"bringToFront",2),m([xe.action],ke.prototype,"delete",2),m([xe.action],ke.prototype,"setEditMode",2),m([xe.action],ke.prototype,"changeFont",2),m([xe.action],ke.prototype,"changeIdentifier",2),m([xe.action],ke.prototype,"changeFontSize",2),m([xe.action],ke.prototype,"updateDefaultFontSize",2),m([xe.action],ke.prototype,"changeSize",2),m([xe.action],ke.prototype,"changeWidth",2),m([xe.action],ke.prototype,"changeText",2),m([xe.action],ke.prototype,"changeLineHeight",2),m([xe.action],ke.prototype,"changeColor",2),m([xe.action],ke.prototype,"changeBackgroundColor",2),m([xe.action],ke.prototype,"changeAlignment",2),m([xe.action],ke.prototype,"updateStateFromHistory",2),m([xe.action],ke.prototype,"setState",2),m([xe.action],ke.prototype,"setFontSize",2),m([xe.action],ke.prototype,"pureReset",2),m([xe.computed],ke.prototype,"isEditMode",1),m([xe.computed],ke.prototype,"isTextSelected",1),m([xe.computed],ke.prototype,"fontsLoaded",1),m([xe.computed],ke.prototype,"currentText",1),m([xe.computed],ke.prototype,"text",1),m([xe.computed],ke.prototype,"fontSize",1),m([xe.computed],ke.prototype,"defaultFontSize",1),m([xe.computed],ke.prototype,"width",1),m([xe.computed],ke.prototype,"fontFamily",1),m([xe.computed],ke.prototype,"fontStyle",1),m([xe.computed],ke.prototype,"fontWeight",1),m([xe.computed],ke.prototype,"lineHeight",1),m([xe.computed],ke.prototype,"identifier",1),m([xe.computed],ke.prototype,"id",1),m([xe.computed],ke.prototype,"alignment",1),m([xe.computed],ke.prototype,"textColor",1),m([xe.computed],ke.prototype,"backgroundColor",1),m([xe.computed],ke.prototype,"config",1),m([xe.computed],ke.prototype,"locale",1),m([xe.computed],ke.prototype,"localeColor",1),m([xe.computed],ke.prototype,"rawOptions",1),m([xe.computed],ke.prototype,"fonts",1),m([xe.computed],ke.prototype,"fontFamilies",1);const Ve=_(Ge()),PAe="imgly_text_design_blocks",fr={identifier:PAe,color:Wi.white,isInverted:!1,text:"Write Something With Style",seed:0,padding:0,width:0},sD={imgly_text_design_blocks:835,imgly_text_design_rotated:6,imgly_text_design_blocks_light:3,imgly_text_design_equal_width:727,imgly_text_design_masked:259,imgly_text_design_celebrate:579,imgly_text_design_sunshine:77,imgly_text_design_masked_badge:683,imgly_text_design_blocks_condensed:673,imgly_text_design_celebrate_simple:425,imgly_text_design_equal_width_fat:961,imgly_text_design_watercolor:671,imgly_text_design_particles:683,imgly_text_design_masked_speech_bubble:317,imgly_text_design_masked_speech_bubble_comic:229,imgly_text_design_multiline:831},aD={};class Ze{constructor(e){this.state=Ve.observable.map(aD);this.colorList=qt.defaultColors;this.fontsLoaded=!1;this.loadfonts=e=>{if(this.fontsLoaded)e();else{const t=this.editor.assetProvider.getFontManager(),r=this.editor.assetProvider.getFontAssetsForTextDesign().map(i=>i.identifier);t.loadFontsWithIdentifiers(r).then(()=>{this.fontsLoaded=!0,e()}).catch(i=>{console.error(i),this.editor.modalStore.showActionModal({type:dt.ERROR,identifier:"fontLoading",error:r[0]})})}};this.doesTextDesignAssetExist=e=>this.entityManager.items.findIndex(t=>t.identifier===e)!==-1;this.addOrselect=()=>{this.state.size?this.selectLast():this.add()};this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.add=()=>{const e=()=>{this.editor.spriteStore.addTextDesign({state:{identifier:fr.identifier,text:fr.text,color:fr.color,isInverted:fr.isInverted,seed:sD[fr.identifier]||fr.seed,padding:0}})};this.loadfonts(e)};this.updateStateFromHistory=(e,t)=>{const r=this.state.get(e);t.identifier===r.identifier?(this.setState(e,t),this.editor.spriteStore.setContainerProperties(e,t)):this.changeIdentifier(t.identifier,!1,t.seed,e)};this.setState=(e,t)=>{const r=this.state.get(e);r?(t.inverted&&(r.isInverted=t.inverted),t.seed&&(r.seed=t.seed),t.color&&(r.color=t.color),t.padding&&(r.padding=t.padding),t.width&&(r.width=t.width)):this.state.set(e,{width:t.width,text:t.text,isInverted:t.inverted,identifier:t.identifier,seed:t.seed,color:t.color?t.color:fr.color,padding:t.padding})};this.changeText=e=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{text:e},!0);const r=this.editor.spriteStore.getContainerProperties(this.id);t.text=r.text,this.state.set(this.id,t),this.addSnapshot(Ie.EDIT,this.locale.history.edit)}}};this.setEditMode=e=>{this.editor.spriteStore.setEditMode(e)};this.duplicate=()=>{if(this.id){const e=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addTextDesign({state:{identifier:this.identifier,text:this.text,color:Ve.toJS(this.color),isInverted:this.isInverted,seed:this.seed,padding:this.padding,width:this.width},transform:e})}};this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)};this.addSnapshot=(e,t)=>{this.currentTextDesign&&this.editor.spriteStore.addSnapshot(e,t)};this.delete=(e=this.id)=>{e&&(this.editor.spriteStore.removeSprite(e),this.state.delete(e),this.selectLast())};this.changeSeed=()=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{seed:-1},!0);const t=this.editor.spriteStore.getContainerProperties(this.id);e.seed=t.seed,this.state.set(this.id,e),this.addSnapshot(Ie.EDIT,this.locale.history.shuffle)}}};this.changeIdentifier=(e,t=!0,r=null,i=this.id)=>{if(i&&e!==this.identifier){const o=this.state.get(i),n=this.editor.spriteStore.getContainerTransform(i);this.editor.spriteStore.addTextDesign({spriteId:i,state:{identifier:e,text:o.text,color:Ve.toJS(o.color),isInverted:o.isInverted,seed:r||sD[e]||o.seed,padding:o.padding,width:o.width},transform:n},t,!0)}};this.changeColor=e=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{color:e});const r=this.editor.spriteStore.getContainerProperties(this.id);t.color=r.color,this.state.set(this.id,t)}}};this.colorSnapshot=()=>{this.addSnapshot(Ie.EDIT,this.locale.history.color)};this.invertBackground=()=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{inverted:!e.isInverted},!0);const t=this.editor.spriteStore.getContainerProperties(this.id);e.isInverted=t.inverted,this.state.set(this.id,e),this.addSnapshot(Ie.EDIT,this.locale.history.invert)}}};this.changeWidth=e=>{if(this.id){const t=this.state.get(this.id);t&&(t.width=e,this.state.set(this.id,t))}};this.changePadding=e=>{if(this.id){const t=this.state.get(this.id);t&&(t.padding=e,this.state.set(this.id,t))}};this.pureReset=()=>{this.state=Ve.observable.map(aD)};this.editor=e;const t=this.editor.assetProvider.getAssets("textdesign");this.entityManager=new mr(t,v(v({},this.config),{categoryKey:"",itemKey:"thumbnailURI",flattenCategories:!0,locale:{},getAssetPath:this.editor.getAssetPath("textdesign")})),this.entityManager.items.find(r=>r.identifier===fr.identifier)||(fr.identifier=this.entityManager.items[0].identifier),fr.text=this.locale.canvasControls.placeholderText,fr.color=Ve.toJS(Sn(this.config,"defaultColor",fr.color)),this.config.colors&&this.config.colors.length>0&&(this.colorList=Nn(Ve.toJS(this.config.colors)))}static defaultText(){return fr.text}get isTextDesignSelected(){return this.editor.spriteStore.isSpriteTextDesign}get isEditMode(){return this.editor.spriteStore.isEditMode}get currentTextDesign(){if(this.isTextDesignSelected&&this.id){const e=this.state.get(this.id);if(e)return e}return}get id(){return this.isTextDesignSelected?this.editor.spriteStore.id:void 0}get text(){return this.currentTextDesign?this.currentTextDesign.text:fr.text}get seed(){return this.currentTextDesign?this.currentTextDesign.seed:fr.seed}get padding(){return this.currentTextDesign?this.currentTextDesign.padding:fr.padding}get width(){return this.currentTextDesign?this.currentTextDesign.width:fr.width}get identifier(){return this.currentTextDesign?this.currentTextDesign.identifier:null}get isInverted(){return this.currentTextDesign?this.currentTextDesign.isInverted:fr.isInverted}get color(){return this.currentTextDesign?this.currentTextDesign.color:fr.color}get config(){return this.editor.configStore.config[S.TEXT_DESIGN]}get locale(){return this.editor.configStore.locale[S.TEXT_DESIGN]}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}}m([Ve.action],Ze.prototype,"addOrselect",2),m([Ve.action],Ze.prototype,"selectLast",2),m([Ve.action],Ze.prototype,"add",2),m([Ve.action],Ze.prototype,"updateStateFromHistory",2),m([Ve.action],Ze.prototype,"setState",2),m([Ve.action],Ze.prototype,"changeText",2),m([Ve.action],Ze.prototype,"setEditMode",2),m([Ve.action],Ze.prototype,"duplicate",2),m([Ve.action],Ze.prototype,"bringToFront",2),m([Ve.action],Ze.prototype,"delete",2),m([Ve.action],Ze.prototype,"changeSeed",2),m([Ve.action],Ze.prototype,"changeIdentifier",2),m([Ve.action],Ze.prototype,"changeColor",2),m([Ve.action],Ze.prototype,"invertBackground",2),m([Ve.action],Ze.prototype,"changeWidth",2),m([Ve.action],Ze.prototype,"changePadding",2),m([Ve.action],Ze.prototype,"pureReset",2),m([Ve.computed],Ze.prototype,"isTextDesignSelected",1),m([Ve.computed],Ze.prototype,"isEditMode",1),m([Ve.computed],Ze.prototype,"currentTextDesign",1),m([Ve.computed],Ze.prototype,"id",1),m([Ve.computed],Ze.prototype,"text",1),m([Ve.computed],Ze.prototype,"seed",1),m([Ve.computed],Ze.prototype,"padding",1),m([Ve.computed],Ze.prototype,"width",1),m([Ve.computed],Ze.prototype,"identifier",1),m([Ve.computed],Ze.prototype,"isInverted",1),m([Ve.computed],Ze.prototype,"color",1),m([Ve.computed],Ze.prototype,"config",1),m([Ve.computed],Ze.prototype,"locale",1),m([Ve.computed],Ze.prototype,"localeColor",1),m([Ve.computed],Ze.prototype,"items",1);const MAe=e=>({height:e.y,width:e.x}),BAe={},R0="none",LAe={position:{x:0,y:0},rotation:0};class pe{constructor(e){this.state=ce.observable.map(BAe);this.selectedId=ce.observable.box(R0);this.editMode=ce.observable.box(!1);this.dragMode=ce.observable.box(!1);this.minLength=0;this.addSticker=(e,t=!0)=>se(this,null,function*(){yield this.addStickerAsync(e,t)});this.addStickerAsync=(o,...n)=>se(this,[o,...n],function*({spriteId:e,state:t,transform:r},i=!0){return new Promise((s,a)=>{r=this.getInitialTransform(r);const{identifier:l}=t,c=this.editor.orderHelper.addSprite(l);this.editor.engine.addStickerFromAssets(l,this.editor.engineMediator.image.container,c).then(d=>se(this,null,function*(){e&&d.setData({id:e});const u=d.getID();this.container[u]=d,this.editor.orderHelper.renameSprite(l,u);const p=this.getSize(u);p.width*=d.getScale().x,p.height*=d.getScale().y,d.setPivot(.5,.5);let h;if(r.scale)h=r.scale;else if(r.size)h={x:r.size.width/p.width,y:r.size.height/p.height};else{const w=this.editor.shortestOutputSide*.4,T=pe.magnitude(w)/pe.sizeMagnitude(d.getSizeInWorldSpace());h={x:T,y:T}}const{flipHorizontally:b,flipVertically:y}=this.editor.outputContainer.getData();d.setFlipHorizontally(b),d.setFlipVertically(y),d.setTransform({position:r.position,scale:h,rotation:r.rotation}),t.flipHorizontally!==void 0&&d.setFlipHorizontally(t.flipHorizontally!==b),t.flipVertically!==void 0&&d.setFlipVertically(t.flipVertically!==y),this.setContainerProperties(u,v({},t));const f=d.getData();this.setInitialSpriteState(u,S.STICKER),this.stickerToolStore.setState(u,v(v({},f),{identifier:l})),yield this.editor.renderPromise(),i&&(this.selectedId.set(u),this.addSnapshot(Ie.ADD,this.stickerLocale.add)),s()})).catch(d=>{console.error(d),a()})})});this.addText=(e,t=!0)=>se(this,null,function*(){yield this.addTextAsync(e,t)});this.addTextAsync=({spriteId:e,state:t,transform:r},i=!0)=>new Promise((o,n)=>{r=this.getInitialTransform(r);const s=this.editor.orderHelper.addSprite(t.identifier),a=this.editor.shortestOutputSide,l={fontIdentifier:t.identifier,text:t.text,width:t.width||a*.6,fontSize:t.fontSize||a*.1,lineHeight:t.lineHeight,alignment:t.alignment,textColor:t.textColor,backgroundColor:t.backgroundColor};this.editor.engine.addTextWithFontLoading(l,this.editor.engineMediator.image.container,s).then(c=>se(this,null,function*(){e&&c.setData({id:e});const d=c.getID();this.container[d]=c,this.editor.orderHelper.renameSprite(t.identifier,this.id);const{flipHorizontally:u,flipVertically:p}=this.editor.outputContainer.getData();c.setFlipHorizontally(u),c.setFlipVertically(p),c.setPivot(.5,.5),c.setPosition(r.position),c.setRotation(r.rotation),this.setInitialSpriteState(d,S.TEXT);const h=c.getData();this.textToolStore.setState(d,v({},h)),yield this.editor.renderPromise(),i&&(this.selectedId.set(d),this.addSnapshot(Ie.ADD,this.textLocale.add)),o()})).catch(c=>{console.error(c),n()})});this.addTextDesign=(e,t=!0,r=!1)=>se(this,null,function*(){yield this.addTextDesignAsync(e,t,r)});this.addTextDesignAsync=({spriteId:e,state:t,transform:r},i=!0,o=!1)=>new Promise((n,s)=>{r=this.getInitialTransform(r);const a=this.editor.orderHelper.addSprite(t.identifier),l=this.editor.shortestOutputSide,c={width:t.width||l*.6,text:t.text,color:t.color,inverted:t.isInverted,seed:t.seed,padding:t.padding};this.editor.engine.addTextDesignAsync(t.identifier,c,this.editor.engineMediator.image.container,a).then(d=>se(this,null,function*(){e&&(o&&(this.pureRemoveSprite(e),this.textDesignToolStore.state.delete(e)),d.setData({id:e}));const u=d.getID();this.container[u]=d,this.editor.orderHelper.renameSprite(t.identifier,this.id);const{flipHorizontally:p,flipVertically:h}=this.editor.outputContainer.getData();d.setFlipHorizontally(p),d.setFlipVertically(h),d.setPivot(.5,.5),d.setPosition(r.position),d.setRotation(r.rotation),this.setInitialSpriteState(u,S.TEXT_DESIGN);const b=d.getData();this.textDesignToolStore.setState(u,v(v({},b),{identifier:t.identifier})),yield this.editor.renderPromise(),i&&(this.selectedId.set(u),this.addSnapshot(Ie.ADD,this.textDesignLocale.add)),n()})).catch(d=>{console.error(d),s()})});this.spriteLocalTransform=()=>({position:this.editor.previewToOutput(this.position),size:this.size,rotation:this.rotation});this.clickableCanvas=e=>{this.editor.clickableCanvas(e)};this.setContainerProperties=(e,t,r=!1)=>{this.container[e].setData(t),r&&this.updatePositionAndSize(),this.editor.render()};this.setContainerPosition=(e,t)=>{this.container[e].setPosition(t)};this.pureRemoveSprite=e=>{this.editor.engine.removeContainer(this.container[e]);const t=this.container[e].getIndexInParent();return t===-1?(delete this.container[e],this.state.delete(e),this.editor.orderHelper.removeSprite(e),!0):!1};this.deleteSprite=(e=this.id)=>{const t=this.state.get(e);t.tool===S.STICKER?this.stickerToolStore.delete():t.tool===S.TEXT?this.textToolStore.delete():t.tool===S.TEXT_DESIGN&&this.textDesignToolStore.delete()};this.removeSprite=e=>{const t=this.pureRemoveSprite(e);t&&(this.selectLast(),this.spriteSnapshot("delete"),this.editor.render())};this.addSnapshot=(e,t)=>{this.editor.addSnapshot(void 0,e,t)};this.spriteSnapshot=e=>{this.addSnapshot(Ie.EDIT,this.historyLocale[e])};this.updateStateFromHistory=e=>se(this,null,function*(){const t=Object.keys(this.container),r=e.spriteIdList;if(r.length!==t.length){const i=t.filter(n=>r.indexOf(n)===-1),o=r.filter(n=>t.indexOf(n)===-1);i.forEach(n=>{this.pureRemoveSprite(n)});for(let n=0;n<o.length;n+=1){const s=o[n],a=e.common?e.common[s]:void 0,l=e.text?e.text[s]:void 0,c=e.sticker?e.sticker[s]:void 0,d=e.textdesign?e.textdesign[s]:void 0;if(a){const u={spriteId:s,transform:{size:a.size?MAe(O.fromSize(a.size)):void 0,position:new O(a.position),rotation:a.rotation}};l?yield this.addNewText(u,l):d?yield this.addNewTextDesign(u,d):c&&(yield this.addNewSticker(u,v(v({},c),{flipHorizontally:a.flipHorizontally,flipVertically:a.flipVertically})))}}}else this.updateSpriteStateFromHistory(e)});this.addNewText=(e,t)=>se(this,null,function*(){if(this.textToolStore.doesTextAssetExist(t.identifier))yield this.addTextAsync(v(v({},e),{state:t}),!1);else throw new Error(`Text identifier ${t.identifier} doesn't exist`)});this.addNewTextDesign=(e,t)=>se(this,null,function*(){if(this.textDesignToolStore.doesTextDesignAssetExist(t.identifier))yield this.addTextDesignAsync(v(v({},e),{state:t}),!1);else throw new Error(`TextDesign identifier ${t.identifier} doesn't exist`)});this.addNewSticker=(e,t)=>se(this,null,function*(){if(this.stickerToolStore.doesStickerAssetExist(t.identifier))yield this.addStickerAsync(v(v({},e),{state:t}),!1);else throw new Error(`Sticker identifier ${t.identifier} doesn't exist`)});this.updateSpriteStateFromHistory=e=>se(this,null,function*(){Object.keys(this.container).forEach(t=>{const r=e.common?e.common[t]:void 0,i=e.sticker?e.sticker[t]:void 0,o=e.text?e.text[t]:void 0,n=e.textdesign?e.textdesign[t]:void 0,s=this.state.get(t);if(s&&r){this.state.set(t,s);const a=this.container[t];a.setPosition(new O(r.position)),a.setRotation(r.rotation),s.rotation=a.getRotation(),r.flipHorizontally!==void 0&&a.setFlipHorizontally(r.flipHorizontally),r.flipVertically!==void 0&&a.setFlipVertically(r.flipVertically),i?(a.setSizeInWorldSpace(r.size),this.stickerToolStore.updateStateFromHistory(t,i)):o?this.textToolStore.updateStateFromHistory(t,v(v({},o),{fontIdentifier:o.identifier})):n&&this.textDesignToolStore.updateStateFromHistory(t,v(v({},n),{inverted:n.isInverted})),this.updatePositionAndSize(t)}})});this.getSpriteHistoryState=()=>{const e=ce.toJS(this.state),t=ce.toJS(this.textToolStore.state),r=ce.toJS(this.textDesignToolStore.state),i={common:e,[S.STICKER]:ce.toJS(this.stickerToolStore.state),[S.TEXT]:t,[S.TEXT_DESIGN]:r,spriteIdList:Object.keys(this.container)};return Object.keys(i.common).forEach(o=>{i.common[o].size=this.container[o].getSizeInWorldSpace(),i.common[o].position=this.container[o].getPosition(),i.common[o].order=this.container[o].getIndexInParent()}),i};this.updateStateFromSerialization=(e,t)=>se(this,null,function*(){if(t&&t.length)try{const r=yield Promise.all(t.map(a=>se(this,[a],function*({svg:i,raster:o,name:n,identifier:s}){const l=(i==null?void 0:i.data)?no.SVG:o.type,c=`data:${l};base64,${(i==null?void 0:i.data)||o.data}`,d=yield A0(c,150);return{stickerURI:c,thumbnailURI:d,name:n,type:l,identifier:s}})));yield this.stickerToolStore.addCustomStickerAsset(r)}catch(r){this.editor.modalStore.hideModal(),this.editor.modalStore.showInfoModal("stickerLoading")}for(let r=0;r<e.spriteIdList.length;r+=1){const i=e.spriteIdList[r],o=e.common?e.common[i]:void 0,n=e.sticker?e.sticker[i]:void 0,s=e.text?e.text[i]:void 0,a=e.textdesign?e.textdesign[i]:void 0;if(o){let{size:l}=o;l&&(l={width:this.editor.worldToPreview(o.size.width),height:this.editor.worldToPreview(o.size.height)});const{flipHorizontally:c,flipVertically:d}=this.editor.outputContainer.getData(),u=this.editor.outputContainer.getRotation(),p=d!==c?o.rotation-u:o.rotation+u,h=d!==c?-p:p,b={spriteId:i,transform:{size:l,position:o.position,rotation:h}};if(s){const y=this.textToolStore.validFontWithConfig(s.identifier);s.identifier=y==null?void 0:y.identifier,yield this.addNewText(b,s)}else a?yield this.addNewTextDesign(b,a):n&&(yield this.addNewSticker(b,v(v({},n),{flipHorizontally:o.flipHorizontally,flipVertically:o.flipVertically})))}}});this.serializableState=()=>se(this,null,function*(){const e=this.editor.spriteStore.getSpriteHistoryState();Object.keys(e.common).forEach(r=>{const{flipHorizontally:i,flipVertically:o}=this.editor.outputContainer.getData(),n=this.editor.outputContainer.getRotation(),s=o!==i?-e.common[r].rotation:e.common[r].rotation;e.common[r].rotation=o!==i?s+n:s-n});const t=yield Promise.all(this.editor.spriteStore.stickerToolStore.customStickers.map(s=>se(this,[s],function*({identifier:r,type:i,stickerURI:o,name:n}){const a={identifier:r,name:n,raster:{data:"",type:no.JPEG}};if(i===no.SVG&&(a.svg={data:o.split(",")[1]}),i===no.JPEG||i===no.PNG)[,a.raster.data]=o.split(","),a.raster.type=i;else{const l=yield A0(o);[,a.raster.data]=l.split(","),a.raster.type=no.PNG}return a})));return{sprite:e,customStickers:t}});this.updateCanvasControls=()=>{Object.keys(this.container).forEach(e=>{this.updatePositionAndSize(e,!0);const t=this.state.get(e);if(t){if(t.tool===S.TEXT){const r=this.getContainerProperties(e);this.textToolStore.changeSize(e,r)}else if(t.tool===S.TEXT_DESIGN){const r=this.getContainerProperties(e);this.textToolStore.changeWidth(r.width)}}})};this.setEditMode=e=>{this.currentSprite&&([S.TEXT,S.TEXT_DESIGN].indexOf(this.tool)!==-1&&(e?this.editor.modalStore.showTextEditModal():this.editor.modalStore.hideModal(),this.editMode.set(e)))};this.setDragMode=e=>{this.dragMode.set(e)};this.setPosition=e=>{const t=this.currentSprite,r=this.container[this.id];if(t&&r){r.setPosition(this.editor.previewToWorld(e));const{position:i}=this.getSizePositionFromContainer();t.position.x=i.x,t.position.y=i.y,this.state.set(this.id,t),this.editor.render()}};this.setSize=e=>{const t=this.currentSprite;t&&(t.size.width=e.width,t.size.height=e.height,this.state.set(this.id,t))};this.setRotation=e=>{const t=this.currentSprite;if(t){const{flipHorizontally:r,flipVertically:i}=this.editor.outputContainer.getData(),o=this.editor.outputContainer.getRotation(),n=bg({rotation:e+o,flipHorizontally:r,flipVertically:i});this.container[this.id].setRotation(n),t.rotation=this.container[this.id].getRotation(),this.state.set(this.id,t),this.editor.render()}};this.onCanvasClick=e=>{this.isEditMode||this.selectHighestOrderSprite(e)};this.select=e=>{const t=this.state.get(e);if(t){const r=this.editor.activeStore.tool;r!==t.tool&&this.editor.activeStore.selectTool(t.tool),this.selectedId.set(e)}};this.selectLast=()=>{const e=this.editor.orderHelper.getLastSpriteId();e&&this.select(e)};this.selectNext=()=>{if(this.currentSprite){const e=this.container[this.id],t=e.getIndexInParent();if(t){const r=Object.keys(this.container).find(i=>this.container[i].getIndexInParent()===t-1);r&&this.select(r)}}};this.deselect=()=>{this.selectedId.set(R0)};this.bringToFront=e=>{const t=this.editor.orderHelper.bringToFront(e);this.container[e].setIndexInParent(t),this.spriteSnapshot("order"),this.editor.render()};this.flipHorizontally=e=>{const t=this.state.get(e),r=this.container[e];r.setFlipHorizontally(!r.getFlipHorizontally()),t.flipHorizontally=r.getFlipHorizontally(),this.spriteSnapshot("flip"),this.state.set(e,t),this.editor.render()};this.pureReset=()=>{this.selectedId.set(R0),Array.from(this.state.keys()).forEach(e=>{this.pureRemoveSprite(e)}),this.stickerToolStore.pureReset(),this.textToolStore.pureReset(),this.textDesignToolStore.pureReset()};this.selectHighestOrderSprite=e=>{const t=this.editor.brushToolStore.containerId();if(e=e.filter(o=>o!==t),e.length<1){this.deselect();return}let r="",i=0;e.forEach(o=>{const n=this.container[o],s=n&&n.getIndexInParent()||0;s>=i&&(i=s,r=o)}),this.select(r)};this.onCornerDrag=({x:e,y:t})=>{if(this.currentSprite){const r=new O(this.currentSprite.position),i=new O(e,t),o=i.subtract(r).magnitude,n=this.getSize(),s=o*2/pe.sizeMagnitude(n);if(o>this.minLength)if(this.isSpriteSticker)if(this.stickerToolStore.resizeMode!=="unrestricted")this.setStickerSize({width:n.width*s,height:n.height*s});else{const a=this.rotationWRTOutputRotation,l=i.subtract(r),c=Math.cos(a),d=Math.sin(a),u=Math.max(Math.abs(l.x*c*2+l.y*d*2),this.minLength),p=Math.max(Math.abs(l.x*-d*2+l.y*c*2),this.minLength);this.setStickerSize({width:u,height:p})}else this.isSpriteText?this.setTextSize(n.width*s):this.isSpriteTextDesign&&this.setTextDesignScale(s);this.editor.render()}};this.onWidthDrag=({x:e,y:t})=>{const r=new O(this.currentSprite.position),i=new O(e,t),o=i.subtract(r).magnitude,n=this.editor.previewToWorld(2*o);if(n>this.minLength&&(this.setContainerProperties(this.id,{width:n},!0),this.isSpriteText)){const s=this.getContainerProperties(this.id);this.textToolStore.changeWidth(s.width)}};this.onPaddingDrag=({x:e,y:t})=>{if(this.isSpriteTextDesign){let r=this.getContainerProperties(this.id);const i=new O(this.currentSprite.position),o=new O(e,t),n=o.subtract(i).magnitude,s=Math.max(this.editor.previewToWorld(n)-r.width/2,0);this.setContainerProperties(this.id,{padding:s},!0),this.isSpriteTextDesign&&(r=this.getContainerProperties(this.id),this.textDesignToolStore.changePadding(r.padding))}};this.correctTextFlip=()=>{const{flipHorizontally:e,flipVertically:t}=this.editor.outputContainer.getData();Object.values(this.container).forEach(r=>{(r.type==="text"||r.type==="text-design")&&(r.setFlipHorizontally(e),r.setFlipVertically(t))})};this.reverseTextHorizontally=()=>{Object.values(this.container).forEach(e=>{(e.type==="text"||e.type==="text-design")&&e.setFlipHorizontally(!e.getFlipHorizontally())})};this.reverseTextVertically=()=>{Object.values(this.container).forEach(e=>{(e.type==="text"||e.type==="text-design")&&e.setFlipVertically(!e.getFlipVertically())})};this.getOutputProperties=()=>this.editor.outputContainer.getData();this.getContainerProperties=e=>this.container[e].getData();this.getContainerTransform=e=>this.container[e].getTransform();this.getDuplicateContainerTransform=e=>{const t=this.container[e].getTransform(),r=this.editor.shortestOutputSide*.1,i=new O(t.position).add(new O(r,r));return v(v({},t),{position:i})};this.getDuplicateContainerFlip=e=>{const t=this.container[e].getFlipHorizontally(),r=this.container[e].getFlipVertically();return{flipHorizontally:t,flipVertically:r}};this.updatePositionAndSize=(e=this.id,t=!1)=>{const{position:r,size:i}=this.getSizePositionFromContainer(e),o=this.state.get(e);if(o){if(o.position.x=r.x,o.position.y=r.y,o.size.width=i.width,o.size.height=i.height,t){const n=this.container[e].getRotation();this.container[e].setRotation(n),o.rotation=this.container[e].getRotation()}this.state.set(e,o)}};this.getInitialTransform=e=>{const t=this.editor.outputToWorld(LAe.position);if(!e){const r=this.editor.outputContainer.getRotation();return{rotation:r,position:t}}return v({position:t},e)};this.setInitialSpriteState=(e,t)=>{const r=this.container[e],{position:i,size:o}=this.getSizePositionFromContainer(e),n=r.getRotation(),s=t!==S.STICKER?!1:r.getFlipHorizontally(),a=t!==S.STICKER?!1:r.getFlipVertically();this.state.set(e,{tool:t,position:i,rotation:n,size:o,flipHorizontally:s,flipVertically:a})};this.setStickerSize=e=>{const t=this.container[this.id];t.setSizeInWorldSpace(this.editor.previewSizeToWorld(e));const r=this.currentSprite;r&&(r.size=this.editor.worldSizeToPreview(t.getSizeInWorldSpace()),this.state.set(this.id,r))};this.setTextSize=e=>{let t=this.getContainerProperties(this.id);const r={width:this.editor.previewToWorld(e)},i=r.width/t.width,o={fontSize:Math.round(t.fontSize*i)},n=this.isSpriteText?v(v({},r),o):r;r.width>this.minLength&&o.fontSize&&(this.setContainerProperties(this.id,n,!0),t=this.getContainerProperties(this.id),this.textToolStore.changeFontSize(t.fontSize,!0),this.textToolStore.changeWidth(t.width))};this.setTextDesignScale=e=>{let t=this.getContainerProperties(this.id);const r=t.width*e;if(r>this.minLength){this.setContainerProperties(this.id,{width:r},!0);const{width:i}=this.getContainerProperties(this.id);this.textDesignToolStore.changeWidth(i),t=this.getContainerProperties(this.id),this.textDesignToolStore.changePadding(t.padding)}};this.getSizePositionFromContainer=(e=this.id)=>{const t=this.container[e];if(t){const r=this.editor.worldToPreview(t.getPosition()),i=this.editor.worldSizeToPreview(t.getSizeInWorldSpace());return{position:r,size:i}}return{position:{x:0,y:0},size:{height:1,width:1}}};this.getSize=(e=this.id)=>{const t=this.container[e];return t?this.editor.worldSizeToPreview(t.getSizeInWorldSpace()):{width:0,height:0}};this.editor=e,this.container={},this.stickerToolStore=new it(e),this.textToolStore=new ke(e),this.textDesignToolStore=new Ze(e),this.rect=new wt(this.editor,this),this.minLength=this.editor.configStore.measurements.canvasControls.sprite.minSize/Math.sqrt(2)}static magnitude(e,t){return new O(e,t||e).magnitude}static sizeMagnitude(e){return Math.sqrt(e.width*e.width+e.height*e.height)}get currentSprite(){return this.isSpriteSelected?this.state.get(this.id):void 0}get padding(){return this.textDesignToolStore.padding}get isEditMode(){return this.editMode.get()}get isDragMode(){return this.dragMode.get()}get id(){return this.selectedId.get()}get isSpriteSelected(){return this.id!==R0}get position(){return this.currentSprite?this.currentSprite.position:void 0}get tool(){return this.currentSprite?this.currentSprite.tool:void 0}get size(){return this.currentSprite?this.currentSprite.size:void 0}get rotation(){return this.currentSprite?this.currentSprite.rotation:void 0}get rotationWRTOutputRotation(){if(this.currentSprite){const{flipHorizontally:e,flipVertically:t}=this.editor.outputContainer.getData(),r=this.editor.outputContainer.getRotation();return bg({rotation:this.currentSprite.rotation-r,flipHorizontally:e,flipVertically:t})}return}get flipHorizontal(){return this.currentSprite?this.currentSprite.flipHorizontally:void 0}get isSpriteSticker(){return this.tool===S.STICKER}get isSpriteText(){return this.tool===S.TEXT}get isSpriteTextDesign(){return this.tool===S.TEXT_DESIGN}get spritePosition(){if(this.currentSprite){const{x:e,y:t}=this.currentSprite.position,{height:r,width:i}=this.currentSprite.size;return{x:Math.round(e-i/2),y:Math.round(t-r/2)}}return}get currentRect(){return this.currentSprite?this.rect:void 0}get leftTopPosition(){return this.currentSprite?this.rect.leftTop:void 0}get leftBottomPosition(){return this.currentSprite?this.rect.leftBottom:void 0}get leftMidPosition(){return this.currentSprite?this.rect.leftMid:void 0}get leftMidPadPosition(){if(this.currentSprite){const{leftMid:e}=this.rect;return{x:e.x-this.editor.worldToPreview(this.padding),y:e.y}}return}get rightTopPosition(){return this.currentSprite?this.rect.rightTop:void 0}get rightBottomPosition(){return this.currentSprite?this.rect.rightBottom:void 0}get rightMidPosition(){return this.currentSprite?this.rect.rightMid:void 0}get rightMidPadPosition(){if(this.currentSprite){const{rightMid:e}=this.rect;return{x:e.x+this.editor.worldToPreview(this.padding),y:e.y}}return}get leftBottomHandlePosition(){return this.currentSprite?this.rect.leftBottomHandle:void 0}get rightBottomHandlePosition(){return this.currentSprite?this.rect.rightBottomHandle:void 0}get historyLocale(){return this.isSpriteSticker?this.stickerLocale:this.isSpriteText?this.textDesignLocale:this.textLocale}get stickerLocale(){return this.editor.configStore.locale[S.STICKER].history}get textLocale(){return this.editor.configStore.locale[S.TEXT].history}get textDesignLocale(){return this.editor.configStore.locale[S.TEXT_DESIGN].history}}m([ce.action],pe.prototype,"addSticker",2),m([ce.action],pe.prototype,"addStickerAsync",2),m([ce.action],pe.prototype,"addText",2),m([ce.action],pe.prototype,"addTextAsync",2),m([ce.action],pe.prototype,"addTextDesign",2),m([ce.action],pe.prototype,"addTextDesignAsync",2),m([ce.action],pe.prototype,"clickableCanvas",2),m([ce.action],pe.prototype,"setContainerProperties",2),m([ce.action],pe.prototype,"setContainerPosition",2),m([ce.action],pe.prototype,"pureRemoveSprite",2),m([ce.action],pe.prototype,"deleteSprite",2),m([ce.action],pe.prototype,"removeSprite",2),m([ce.action],pe.prototype,"addSnapshot",2),m([ce.action],pe.prototype,"updateStateFromHistory",2),m([ce.action],pe.prototype,"addNewText",2),m([ce.action],pe.prototype,"addNewTextDesign",2),m([ce.action],pe.prototype,"addNewSticker",2),m([ce.action],pe.prototype,"updateSpriteStateFromHistory",2),m([ce.action],pe.prototype,"updateStateFromSerialization",2),m([ce.action],pe.prototype,"updateCanvasControls",2),m([ce.action],pe.prototype,"setEditMode",2),m([ce.action],pe.prototype,"setDragMode",2),m([ce.action],pe.prototype,"setPosition",2),m([ce.action],pe.prototype,"setSize",2),m([ce.action],pe.prototype,"setRotation",2),m([ce.action],pe.prototype,"onCanvasClick",2),m([ce.action],pe.prototype,"select",2),m([ce.action],pe.prototype,"selectLast",2),m([ce.action],pe.prototype,"selectNext",2),m([ce.action],pe.prototype,"deselect",2),m([ce.action],pe.prototype,"bringToFront",2),m([ce.action],pe.prototype,"flipHorizontally",2),m([ce.action],pe.prototype,"pureReset",2),m([ce.action],pe.prototype,"onCornerDrag",2),m([ce.action],pe.prototype,"onWidthDrag",2),m([ce.action],pe.prototype,"onPaddingDrag",2),m([ce.action],pe.prototype,"correctTextFlip",2),m([ce.action],pe.prototype,"reverseTextHorizontally",2),m([ce.action],pe.prototype,"reverseTextVertically",2),m([ce.computed],pe.prototype,"currentSprite",1),m([ce.computed],pe.prototype,"padding",1),m([ce.computed],pe.prototype,"isEditMode",1),m([ce.computed],pe.prototype,"isDragMode",1),m([ce.computed],pe.prototype,"id",1),m([ce.computed],pe.prototype,"isSpriteSelected",1),m([ce.computed],pe.prototype,"position",1),m([ce.computed],pe.prototype,"tool",1),m([ce.computed],pe.prototype,"size",1),m([ce.computed],pe.prototype,"rotation",1),m([ce.computed],pe.prototype,"rotationWRTOutputRotation",1),m([ce.computed],pe.prototype,"flipHorizontal",1),m([ce.computed],pe.prototype,"isSpriteSticker",1),m([ce.computed],pe.prototype,"isSpriteText",1),m([ce.computed],pe.prototype,"isSpriteTextDesign",1),m([ce.computed],pe.prototype,"spritePosition",1),m([ce.computed],pe.prototype,"currentRect",1),m([ce.computed],pe.prototype,"leftTopPosition",1),m([ce.computed],pe.prototype,"leftBottomPosition",1),m([ce.computed],pe.prototype,"leftMidPosition",1),m([ce.computed],pe.prototype,"leftMidPadPosition",1),m([ce.computed],pe.prototype,"rightTopPosition",1),m([ce.computed],pe.prototype,"rightBottomPosition",1),m([ce.computed],pe.prototype,"rightMidPosition",1),m([ce.computed],pe.prototype,"rightMidPadPosition",1),m([ce.computed],pe.prototype,"leftBottomHandlePosition",1),m([ce.computed],pe.prototype,"rightBottomHandlePosition",1),m([ce.computed],pe.prototype,"historyLocale",1),m([ce.computed],pe.prototype,"stickerLocale",1),m([ce.computed],pe.prototype,"textLocale",1),m([ce.computed],pe.prototype,"textDesignLocale",1);const J=_(Ge()),Ye=_(Ge()),s$=_(Ge()),Wn={position:{x:0,y:0},size:{height:0,width:0},lockResolution:!1,forceDimensions:!1,ratio:"*"},a$={identifier:"identity",outputRotation:0,rotationInDegrees:0,flipHorizontally:!1,flipVertically:!1,cropState:s$.observable.map({})};class Xe{constructor(e,t){this.minCropSize=0;this.state=a$,this.configStore=e.configStore,this.minCropSize=this.configStore.measurements.crop.minSize,this.defaults=t}changeIdentifier(e){this.state.identifier=e;const t=this.state.cropState.get(e);t||this.state.cropState.set(e,v({},Wn))}changeRatio(e){const t=this.state.cropState.get(this.identifier);t&&this.state.cropState.set(this.identifier,v(v({},t),{ratio:e}))}changeSize(e){const t=this.state.cropState.get(this.identifier);t&&(e.width&&e.width>0&&(t.size.width=Math.round(e.width)),e.height&&e.height>0&&(t.size.height=Math.round(e.height)),this.state.cropState.set(this.identifier,t))}changeHeight(e){const t=this.state.cropState.get(this.identifier);t&&(e&&(t.size.height=Math.round(e),this.state.cropState.set(this.identifier,t)))}changeWidth(e){const t=this.state.cropState.get(this.identifier);t&&(e&&(t.size.width=Math.round(e),this.state.cropState.set(this.identifier,t)))}changePositionX(e,t){const r=this.state.cropState.get(this.identifier);return r&&e<=t-this.minCropSize&&e>=0?(r.position.x=Math.round(e),this.state.cropState.set(this.identifier,r),!0):!1}changePositionY(e,t){const r=this.state.cropState.get(this.identifier);return r&&e<=t-this.minCropSize&&e>=0?(r.position.y=Math.round(e),this.state.cropState.set(this.identifier,r),!0):!1}changePosition(e,t){const r=this.state.cropState.get(this.identifier);return r&&(e.x<=t.width-this.minCropSize&&e.x>=0&&e.y<=t.height-this.minCropSize&&e.y>=0)?(r.position.x=Math.round(e.x),r.position.y=Math.round(e.y),this.state.cropState.set(this.identifier,r),!0):!1}changeLockResolution(e){const t=this.state.cropState.get(this.identifier);t&&(t.lockResolution=e!==void 0?e:!t.lockResolution,this.state.cropState.set(this.identifier,t))}changeForceDimensions(e){const t=this.state.cropState.get(this.identifier);t&&(t.forceDimensions=e,this.state.cropState.set(this.identifier,t))}setRotation(e){this.state.rotationInDegrees=e}resetRotation(){this.state.rotationInDegrees=0}resetOutputRotation(){this.state.outputRotation=0}resetFlip(){this.state.flipHorizontally=!1,this.state.flipVertically=!1}updateFlip({flipHorizontally:e,flipVertically:t}){this.state.flipHorizontally=e,this.state.flipVertically=t}setOutputRotation(e){this.state.outputRotation=e}flipHorizontally(){this.state.flipHorizontally=!this.state.flipHorizontally}flipVertically(){this.state.flipVertically=!this.state.flipVertically}get flipCenter(){const{width:e,height:t}=this.defaults.maxCropMaskSize;return new O(e/2,t/2)}get isFlippedHorizontal(){return this.state.flipHorizontally}get isFlippedVertical(){return this.state.flipVertically}get identifier(){return this.state.identifier}get height(){return this.selectedCrop?this.selectedCrop.size.height:Wn.size.height}get width(){return this.selectedCrop?this.selectedCrop.size.width:Wn.size.width}get position(){return this.selectedCrop?this.selectedCrop.position:Wn.position}get ratio(){return this.selectedCrop?this.selectedCrop.ratio:Wn.ratio}get size(){return this.selectedCrop?this.selectedCrop.size:Wn.size}get x(){return this.selectedCrop?this.selectedCrop.position.x:Wn.position.x}get y(){return this.selectedCrop?this.selectedCrop.position.y:Wn.position.y}get lockResolution(){return this.selectedCrop?this.selectedCrop.lockResolution:Wn.lockResolution}get forceDimensions(){return this.selectedCrop?this.selectedCrop.forceDimensions:Wn.forceDimensions}get selectedCrop(){return this.state.cropState.get(this.identifier)}get rotationInDegrees(){return this.state.rotationInDegrees}get outputRotation(){return this.state.outputRotation}}m([Ye.observable],Xe.prototype,"state",2),m([Ye.action],Xe.prototype,"changeIdentifier",1),m([Ye.action],Xe.prototype,"changeRatio",1),m([Ye.action],Xe.prototype,"changeSize",1),m([Ye.action],Xe.prototype,"changeHeight",1),m([Ye.action],Xe.prototype,"changeWidth",1),m([Ye.action],Xe.prototype,"changePositionX",1),m([Ye.action],Xe.prototype,"changePositionY",1),m([Ye.action],Xe.prototype,"changePosition",1),m([Ye.action],Xe.prototype,"changeLockResolution",1),m([Ye.action],Xe.prototype,"changeForceDimensions",1),m([Ye.action],Xe.prototype,"setRotation",1),m([Ye.action],Xe.prototype,"resetRotation",1),m([Ye.action],Xe.prototype,"resetOutputRotation",1),m([Ye.action],Xe.prototype,"resetFlip",1),m([Ye.action],Xe.prototype,"updateFlip",1),m([Ye.action],Xe.prototype,"setOutputRotation",1),m([Ye.action],Xe.prototype,"flipHorizontally",1),m([Ye.action],Xe.prototype,"flipVertically",1),m([Ye.computed],Xe.prototype,"flipCenter",1),m([Ye.computed],Xe.prototype,"isFlippedHorizontal",1),m([Ye.computed],Xe.prototype,"isFlippedVertical",1),m([Ye.computed],Xe.prototype,"identifier",1),m([Ye.computed],Xe.prototype,"height",1),m([Ye.computed],Xe.prototype,"width",1),m([Ye.computed],Xe.prototype,"position",1),m([Ye.computed],Xe.prototype,"ratio",1),m([Ye.computed],Xe.prototype,"size",1),m([Ye.computed],Xe.prototype,"x",1),m([Ye.computed],Xe.prototype,"y",1),m([Ye.computed],Xe.prototype,"lockResolution",1),m([Ye.computed],Xe.prototype,"forceDimensions",1),m([Ye.computed],Xe.prototype,"selectedCrop",1),m([Ye.computed],Xe.prototype,"rotationInDegrees",1),m([Ye.computed],Xe.prototype,"outputRotation",1);const Tg=_(Ge());class l${constructor(e){this.transforms={output:JSON.stringify(Dt.IDENTITY),preview:JSON.stringify(Dt.IDENTITY)};this.editor=e,this.overlayOpacity=0,this.frameOpacity=0}static rotateOutput(e,t){e%=360;switch(e){case 90:case-270:return t.swapped.multiply(-1,1);case 180:case-180:return t.multiply(-1);case 270:case-90:return t.swapped.multiply(1,-1);default:return t}}onLeave(){const{flipHorizontally:e,flipVertically:t,rotation:r,outputRotation:i}=this.transformToolStore.rotateFlipState;this.editor.overlayToolStore.identifier!=="identity"&&this.editor.overlayToolStore.changeOpacity(this.overlayOpacity),this.editor.frameToolStore.identifier!=="identity"&&this.editor.frameToolStore.changeOpacity(this.frameOpacity);const o=this.editor.previewToWorld(new O(this.transformToolStore.leftTopRespectFlip).add(new O(this.transformToolStore.rightBottomRespectFlip)).divide(2).add(new O(this.transformToolStore.unRotatedDefaults.cropMaskPosition)),!0),n=this.engineMediator.preview.container,{outputContainer:s}=this.editor;s.setResolution(Tg.toJS(this.transformToolStore.localOutputImageSize)),s.setData({flipVertically:t,flipHorizontally:e});const a=n.getScale();this.editor.overlayToolStore.correctOverlayFlip(),this.saveTransforms();let l=1;if(this.transformToolStore.lockResolution){const{cropMaskSize:h,defaultImageSize:b}=this.transformToolStore,y=this.transformToolStore.maxCropMaskSize,f={height:h.height*b.height/y.height,width:h.width*b.width/y.width};l=f.width/this.transformToolStore.localOutputImageSize.width}const c=Math.abs(a.x),d=l/(c/this.transformToolStore.defaultScale),u={x:d,y:d},p=-(r-i);s.setTransform({scale:u,position:o,rotation:p}),this.editor.engineMediator.preview.updateTransform(0,!1),this.editor.scale.setInitialTransform(),this.editor.spriteStore.updateCanvasControls(),this.editor.focusToolStore.updateCanvasControls()}onEnter(){this.editor.overlayToolStore.identifier!=="identity"&&(this.overlayOpacity=this.editor.overlayToolStore.opacity,this.editor.overlayToolStore.changeOpacity(0)),this.editor.frameToolStore.identifier!=="identity"&&(this.frameOpacity=this.editor.frameToolStore.opacity,this.editor.frameToolStore.changeOpacity(0)),this.editor.scale.setScaleToDefault();const e=this.engineMediator.preview.container,{outputContainer:t}=this.editor,r=JSON.parse(this.transforms.preview);t.setResolution(Tg.toJS(this.transformToolStore.defaultImageSize)),e.setTransform(r),t.setTransform(JSON.parse(this.transforms.output));const i=r.scale;t.setData({flipVertically:!1,flipHorizontally:!1}),this.transformToolStore.transformStore.updateFlip({flipVertically:i.y<0,flipHorizontally:i.x<0}),this.engineMediator.preview.savePreviewTransform(r);const{scale:o}=this.engineMediator.preview.calculateTransform();this.editor.scale.setInitialTransform(o.x)}rotateOutputContainer(e=!1){this.editor.outputContainer.rotate90(e),this.transformToolStore.transformStore.setOutputRotation(this.editor.outputContainer.getRotation());const{rotation:t}=this.transformToolStore.rotateFlipState;this.engineMediator.preview.updateTransform(t),Tg.runInAction(()=>{this.editor.scale.setInitialTransform();const r=this.getScaleWithFlip(t);this.engineMediator.preview.container.setScale(r),this.transformToolStore.setCropDefaults(!0),this.transformToolStore.updateCropMask()}),this.editor.render()}applyPreviewTransform(){const{rotation:e,flipHorizontally:t,flipVertically:r}=this.transformToolStore.rotateFlipState,i=this.editor.scale.getPositionWithOffset(),o=this.getScaleWithFlip();let n=e;t&&(n=wh(n)),r&&(n=wh(n));const s={position:i,rotation:n,scale:o};this.engineMediator.preview.savePreviewTransform(s),this.engineMediator.preview.container.setTransform(s)}getScaleWithFlip(e=this.transformToolStore.rotateFlipState.rotation){const{flipHorizontally:t,flipVertically:r}=this.transformToolStore.rotateFlipState,i=t?-1:1,o=r?-1:1,n=this.editor.scale.calculateScale(e);return{x:n*i,y:n*o}}saveTransforms(){const e=JSON.stringify(this.engineMediator.preview.container.getTransform()),t=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:e,output:t}}saveTransformsBasedOnFlip(){const e=this.engineMediator.preview.container.getTransform(),{scale:t}=e,{flipVertically:r,flipHorizontally:i}=this.editor.outputContainer.getData(),o=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:JSON.stringify(v(v({},e),{scale:{x:i?-t.x:t.x,y:r?-t.y:t.y}})),output:o}}get engineMediator(){return this.editor.engineMediator}get transformToolStore(){return this.editor.transformToolStore}}const c$="identity";class ne{constructor(e){this.unRotatedDefaults={cropMaskPosition:{x:0,y:0},scale:1};this.defaultAngle=0;this.dragMode=J.observable.box(!1);this.minCropSize=0;this.localSnapshotEnabled=!0;this.defaults={cropMaskPosition:{x:0,y:0},maxCropMaskSize:{width:0,height:0},imageSize:{width:0,height:0},scale:1};this.localOutputSize={width:0,height:0};this.checkIfTransformThumbnailExits=e=>{let t=this.editor.configStore.config.assetBaseUrl;const{length:r}=t;if(t[r-1]!=="/"&&(t+="/"),`${t}transform/`===e)return!1;const i=new Image;try{return i.src=e,!0}catch(o){return!1}};this.reset=()=>{this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.editor.spriteStore.correctTextFlip(),this.editor.overlayToolStore.correctOverlayFlip(),this.setDefaultAngle(0);const e=this.editor.outputContainer.getRotation();e!==0&&this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop(),this.editor.render()};this.changeLocalOutputSize=e=>{this.localOutputSize.height=Math.round(e.height),this.localOutputSize.width=Math.round(e.width)};this.changeDefaultScale=e=>{this.defaults.scale=e};this.changeLocalOutputHeight=e=>{this.localOutputSize.height=Math.round(e)};this.changeLocalOutputWidth=e=>{this.localOutputSize.width=Math.round(e)};this.changeLockResolution=()=>{this.transformStore.changeLockResolution(),this.addLocalSnapshot()};this.rotateClockwise=()=>{this.rotateOutputContainer(this.isFlippedVertical!==this.isFlippedHorizontal)};this.rotateAntiClockwise=()=>{this.rotateOutputContainer(this.isFlippedVertical===this.isFlippedHorizontal)};this.flipHorizontally=(e=!0)=>{this.transformStore.flipHorizontally(),this.editor.spriteStore.reverseTextHorizontally(),this.transformRender(e),e&&this.addLocalSnapshot()};this.flipVertically=(e=!0)=>{this.transformStore.flipVertically(),this.editor.spriteStore.reverseTextVertically(),this.transformRender(e),e&&this.addLocalSnapshot()};this.applyDefaultCrop=(e=!1)=>{if(this.identifier==="identity"){const{identifier:t}=this.getMatchingItem();this.changeIdentifier(t,e)}};this.updateCropMask=()=>{this.changeIdentifier(this.identifier,!0)};this.onLeftTop=({x:e,y:t})=>{const r=this.getRatio(),i=this.rightBottom,{minCropMaskSize:o,maxCropMaskSize:n}=this,s=Math.min(Math.max(0,e),i.x-o.width),a=Math.min(Math.max(0,t),i.y-o.height),l=i.x-s,c=i.y-a,d={width:Math.max(this.minCropSize,Math.min(l,n.width-s)),height:Math.max(this.minCropSize,Math.min(c,n.height-a))};if(r==="*")this.changePosition({x:s,y:a})&&this.changeCropAndOutputSize(d);else{const u=this.proportionalSize(r,d),p=new O(i).rounded.subtract({x:u.width,y:u.height});this.changePosition(p)&&this.changeCropAndOutputSize(u)}};this.onLeftBottom=({x:e,y:t})=>{const r=this.getRatio(),i=this.rightTop,{minCropMaskSize:o,maxCropMaskSize:n}=this,s=Math.min(Math.max(0,e),i.x-o.width),a=Math.max(0,t,i.y+o.height),l=i.x-s,c=a-i.y,d={width:Math.max(1,Math.min(l,n.width-s)),height:Math.max(1,Math.min(c,n.height-i.y))};if(r==="*"){const u=this.changeCropAndOutputSize(d);u&&this.changePositionX(s)}else{const u=this.proportionalSize(r,d);this.changePositionX(Math.round(i.x)-u.width)&&this.changeCropAndOutputSize(u)}};this.onRightTop=({x:e,y:t})=>{const r=this.getRatio(),i=this.leftBottom,{minCropMaskSize:o,maxCropMaskSize:n}=this,s=Math.max(0,e,i.x+o.width),a=Math.min(Math.max(0,t),i.y-o.height),l=s-i.x,c=i.y-a,d={width:Math.max(1,Math.min(l,n.width-i.x)),height:Math.max(1,Math.min(c,n.height-a))};if(r==="*")this.changePositionY(a)&&this.changeCropAndOutputSize(d);else{const u=this.proportionalSize(r,d);this.changePositionY(Math.round(i.y)-u.height)&&this.changeCropAndOutputSize(u)}};this.onRightBottom=({x:e,y:t})=>{const r=this.getRatio(),i=this.leftTop,{minCropMaskSize:o,maxCropMaskSize:n}=this,s=Math.max(0,e,i.x+o.width),a=Math.max(0,t,i.y+o.height),l=s-i.x,c=a-i.y,d={width:Math.max(1,Math.min(l,n.width-i.x)),height:Math.max(1,Math.min(c,n.height-i.y))};if(r==="*")this.changeCropAndOutputSize(d);else{const u=this.proportionalSize(r,d);this.changeCropAndOutputSize(u)}};this.onPixelWidth=e=>{const t=JSON.stringify(J.toJS(this.localOutputSize)),r=this.entityManager.items.find(o=>o.identifier===this.identifier),i=this.defaults.imageSize;if(r&&r.ratio){let o=e,n=this.localOutputSize.height,{ratio:s}=r;if(s==="*"&&this.lockResolution&&(s=this.localOutputSize.width/this.localOutputSize.height),s==="*"&&!this.lockResolution)o=Math.max(Math.min(e,i.width),this.minCropSize),this.changeLocalOutputWidth(o);else{const a=ne.placeCropMask(s,i);o=Math.max(Math.min(o,a.width),this.minCropSize),n=o/s,this.changeLocalOutputSize({height:n,width:o})}return this.lockResolution||this.updatePreviewSizeWRTImageSize(),this.checkAndAddSnapshot(JSON.parse(t)),Math.round(o)}return e};this.onPixelHeight=e=>{const t=JSON.stringify(J.toJS(this.localOutputSize)),r=this.entityManager.items.find(o=>o.identifier===this.identifier),i=this.defaults.imageSize;if(r&&r.ratio){let o=e,n=this.localOutputSize.width,{ratio:s}=r;if(s==="*"&&this.lockResolution&&(s=this.localOutputSize.width/this.localOutputSize.height),s==="*"&&!this.lockResolution)o=Math.max(Math.min(e,i.height),this.minCropSize),this.changeLocalOutputHeight(o);else{const a=ne.placeCropMask(s,i);o=Math.max(Math.min(o,a.height),this.minCropSize),n=o*s,this.changeLocalOutputSize({height:o,width:n})}return this.lockResolution||this.updatePreviewSizeWRTImageSize(),this.checkAndAddSnapshot(JSON.parse(t)),Math.round(o)}return e};this.closestRatioReducer=e=>(t,r)=>r===null||Math.abs(e-t.ratio)<Math.abs(e-r.ratio)?-1:1;this.closestDimensionsReducer=e=>(t,r)=>{if(r===null)return-1;const i=Math.abs(t.dimensions.x/t.dimensions.y),o=Math.abs(r.dimensions.x/r.dimensions.y);return i===o?t.dimensions.x*t.dimensions.y>r.dimensions.x*r.dimensions.y?-1:1:Math.abs(e-i)<Math.abs(e-o)?-1:1};this.getMatchingItem=()=>{const e=this.entityManager.items.findIndex(a=>a.identifier==="imgly_transform_common_custom");if(e!==-1)return this.entityManager.items[e];const t=this.entityManager.items.findIndex(a=>a.ratio==="*");if(t!==-1)return this.entityManager.items[t];const r=J.toJS(this.editor.outputContainer.getResolution()),i=Math.abs(r.width/r.height),[o]=this.entityManager.items.filter(a=>a.ratio&&typeof a.ratio=="number").sort(this.closestRatioReducer(i)),[n]=this.entityManager.items.filter(a=>a.dimensions&&!a.ratio).sort(this.closestDimensionsReducer(i));if(!o||!n||!o.ratio&&!n.dimensions)return this.entityManager.items[0];if(!n||!n.dimensions)return o;if(!o||!o.ratio)return n;const s=Math.abs(n.dimensions.x/n.dimensions.y);return s===o.ratio||Math.abs(i-o.ratio)<Math.abs(i-s)?o:n};this.getTransform=e=>{let t=this.entityManager.items.find(r=>r.identifier===e);return t||(t=this.getMatchingItem()),t};this.editor=e,this.selectedCategory=c$,this.transformStore=new Xe(e,this.defaults),this.transformations=new l$(e);const n=this.config,{enableRotation:t,enableFlip:r}=n,i=ai(n,["enableRotation","enableFlip"]),o=this.editor.assetProvider.getAssets("transform");this.entityManager=new mr(o,v(v({},i),{categoryKey:"",itemKey:"thumbnailURI",locale:v(v({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("transform")})),this.rect=new wt(this.editor,this.transformStore,"topLeft",!1,!1),this.rectForUi=new wt(this.editor,this.transformStore,"topLeft",!1,!0),this.minCropSize=this.editor.configStore.measurements.crop.minSize}static inRadians(e){return e*Math.PI/180}static placeCropMask(e,t){if(t.height*e>t.width){const i=t.width/e;return{height:i,width:t.width,yChanged:!0}}const r=t.height*e;return{height:t.height,width:r,yChanged:!1}}changeIdentifier(e,t=!1){this.transformStore.changeIdentifier(e);const r=this.getCropMask(e,this.defaults.imageSize);r&&(this.transformStore.changeRatio(r.ratio),this.changeLocalOutputSize(r),this.updatePreviewSizeWRTImageSize(),r.yChanged!==void 0&&this.updateInitialCropMaskPosition(r.yChanged),r.dimensions&&this.changeLocalOutputSize({width:r.dimensions.x,height:r.dimensions.y}),t&&this.addLocalSnapshot())}setDragMode(e){this.dragMode.set(e)}getCropMask(e,t){const r=this.getTransform(e);if(r){const{ratio:i,forceDimensions:o,lockDimensions:n,dimensions:s=null}=r;if(o&&this.transformStore.changeForceDimensions(o),n&&this.transformStore.changeLockResolution(n),i)switch(i){case"*":return this.changePosition({x:0,y:0}),v(v({},t),{yChanged:void 0,ratio:"*",dimensions:s});default:return v(v({},ne.placeCropMask(r.ratio,t)),{ratio:r.ratio,dimensions:s})}else{const{x:a,y:l}=r.dimensions;return v(v({},ne.placeCropMask(a/l,t)),{ratio:null,dimensions:s})}}return null}setCropDefaults(e=!1){const t=this.editor.outputContainer.getResolution();this.setDefaultImageSize(t);const r=this.editor.getPreviewSize(),{position:i}=this.editor.engineMediator.preview.previewTransformWithoutDpr;this.setMaxCropSize(r),this.setDefaultCropPosition({x:i.x-r.width/2,y:i.y-r.height/2}),this.changeDefaultScale(this.editor.scale.defaultScale),e||(this.unRotatedDefaults.cropMaskPosition=this.defaultCropMaskPosition,this.unRotatedDefaults.scale=this.defaultScale)}setDefaultImageSize(e){this.defaults.imageSize=v({},J.toJS(e)),this.lockResolution||(this.localOutputSize=v({},J.toJS(e)))}setMaxCropSize(e){this.defaults.maxCropMaskSize.height=e.height,this.defaults.maxCropMaskSize.width=e.width}setDefaultCropPosition(e){this.defaults.cropMaskPosition.x=e.x,this.defaults.cropMaskPosition.y=e.y}resetCrop(){this.state.cropState=J.observable.map({}),this.state.identifier="identity"}toggleCategorySelection(e){this.selectedCategory=this.selectedCategory===e?c$:e}pureReset(){this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.editor.spriteStore.correctTextFlip(),this.editor.overlayToolStore.correctOverlayFlip(),this.resetCrop()}changePosition(e){return this.transformStore.changePosition(e,this.defaults.maxCropMaskSize)}changePositionX(e){return this.transformStore.changePositionX(e,this.defaults.maxCropMaskSize.width)}changePositionY(e){return this.transformStore.changePositionY(e,this.defaults.maxCropMaskSize.height)}changeCropAndOutputHeight(e){return e&&e>=this.minCropSize?(this.transformStore.changeHeight(e),this.lockResolution||this.changeLocalOutputHeight(e*this.defaults.imageSize.height/this.defaults.maxCropMaskSize.height),!0):!1}changeCropAndOutputWidth(e){return e&&e>=this.minCropSize?(this.transformStore.changeWidth(e),this.lockResolution||this.changeLocalOutputWidth(e*this.defaults.imageSize.width/this.defaults.maxCropMaskSize.width),!0):!1}changeCropAndOutputSize(e){const t=this.changeCropAndOutputHeight(e.height),r=this.changeCropAndOutputWidth(e.width);return{widthChanged:t,heightChanged:r}}transformRender(e=!0){this.transformations.applyPreviewTransform(),e&&this.editor.render()}addLocalSnapshot(e=`Local ${this.locale.title}`){if(this.localSnapshotEnabled){const t=this.state,{cropState:r}=t,i=ai(t,["cropState"]);this.editor.addLocalTransformSnapshot(v(v(v({},i),this.cropState),{localOutputSize:J.toJS(this.localOutputSize),outputSize:this.engineMediator.output.container.getResolution(),defaults:J.toJS(this.defaults),previewTransform:this.engineMediator.preview.container.getTransform(),outputTransform:this.engineMediator.output.container.getTransform()}),e)}}updateLocalStateFromHistory(e){const{tool:t}=this.editor.activeStore;t===S.TRANSFORM&&(this.transformStore.changeLockResolution(e.lockResolution),this.transformStore.changeForceDimensions(e.forceDimensions),this.transformStore.changeIdentifier(e.identifier),this.transformStore.setRotation(e.rotationInDegrees),this.setDefaultAngle(e.rotationInDegrees),this.transformStore.setOutputRotation(e.outputRotation),this.transformStore.updateFlip(e),this.engineMediator.output.container.setRotation(e.outputRotation),this.setDefaultImageSize(e.defaults.imageSize),this.localOutputSize=e.defaults.imageSize,this.changeLocalOutputSize(e.localOutputSize),this.transformStore.changeSize(e.size),this.changePosition(e.position),this.setMaxCropSize(e.defaults.maxCropMaskSize),this.setDefaultCropPosition(e.defaults.cropMaskPosition),this.changeDefaultScale(e.defaults.scale),this.engineMediator.output.container.setResolution(e.outputSize),this.engineMediator.preview.container.setTransform(e.previewTransform),this.engineMediator.output.container.setTransform(e.outputTransform))}updateStateFromHistory(e){const{tool:t}=this.editor.activeStore;t!==S.TRANSFORM&&(this.engineMediator.output.container.setTransform(e.outputTransform),this.engineMediator.preview.container.setTransform(e.previewTransform),this.engineMediator.output.container.setResolution(e.outputSize),this.changeLocalOutputSize(e.outputSize))}get serializableState(){const{flipHorizontally:e,flipVertically:t}=this.rotateFlipState,r=this.editor.engineMediator.output.container.getRotation()*180/Math.PI%360,{identifier:i,rotationInDegrees:o}=this,n=o*Math.PI/180;let s=r+o;s=Math.round(s/90)*90,s=s<0?s+360:s,s=(360-s)%360;const{start:a,end:l}=this.convertUIToOperationOptions(n,s);return{flipHorizontally:e,flipVertically:t,rotation:n,start:a,end:l,identifier:i,outputRotation:s}}getStartEndForOperation(e){const{leftTop:t,rightBottom:r,maxCropMaskSize:i}=this,o=t.y,n=t.x,s=r.x,a=r.y;switch(e){case 270:return{leftTop:{x:i.height-a,y:n},rightBottom:{x:i.height-o,y:s}};case 180:return{leftTop:{x:i.width-s,y:i.height-a},rightBottom:{x:i.width-n,y:i.height-o}};case 90:return{leftTop:{x:o,y:i.width-s},rightBottom:{x:a,y:i.width-n}};default:return{leftTop:{x:n,y:o},rightBottom:{x:s,y:a}}}}getStartEndForUI(e,t,r){const{maxCropMaskSize:i}=this,o=t.y,n=t.x,s=r.x,a=r.y;switch(e){case 90:return{leftTop:{x:o,y:i.height-s},rightBottom:{x:a,y:i.height-n}};case 180:return{leftTop:{x:i.width-s,y:i.height-a},rightBottom:{x:i.width-n,y:i.height-o}};case 270:return{leftTop:{x:i.width-a,y:n},rightBottom:{x:i.width-o,y:s}};default:return{leftTop:{x:n,y:o},rightBottom:{x:s,y:a}}}}convertOperationOptionsToUI({start:e,end:t,rotation:r,outputRotation:i}){const o=i===90||i===270,n=o?O.fromSize(this.defaultImageSize).swapped:O.fromSize(this.defaultImageSize),s=Math.cos(r),a=Math.sin(r),l=this.calculateScale(r),c=new O(Math.min(e.x,t.x),Math.min(e.y,t.y)),d=new O(Math.max(e.x,t.x),Math.max(e.y,t.y)),u=d.subtract(c).divide(2),p=c.add(u).multiply(n),h=p.subtract(n.multiply(.5)),b=new O(h.x*s-h.y*a,h.x*a+h.y*s).multiply(l),y=n.multiply(.5).add(b),f=y.divide(n),w=f.subtract(u.multiply(l)),T=f.add(u.multiply(l)),C=o?O.fromSize(this.maxCropMaskSize).swapped:O.fromSize(this.maxCropMaskSize),F=w.multiply(C),k=T.multiply(C),{leftTop:E,rightBottom:W}=this.getStartEndForUI(i,F,k);return{start:new O(E),end:new O(W)}}convertUIToOperationOptions(e,t){const r=t===90||t===270,i=r?O.fromSize(this.defaultImageSize).swapped:O.fromSize(this.defaultImageSize),o=r?O.fromSize(this.maxCropMaskSize).swapped:O.fromSize(this.maxCropMaskSize),n=Math.cos(-e),s=Math.sin(-e),a=this.calculateScale(e,r),{leftTop:l,rightBottom:c}=this.getStartEndForOperation(t),d=new O(l).divide(o),u=new O(c).divide(o),p=u.subtract(d).divide(2),h=d.add(p).multiply(i),b=h.subtract(i.multiply(.5)),y=new O(b.x*n-b.y*s,b.x*s+b.y*n).divide(a),f=i.multiply(.5).add(y),w=f.divide(i),T=w.subtract(p.divide(a)),C=w.add(p.divide(a));return{start:T,end:C}}calculateScale(e,t=!1){const r=t?O.fromSize(this.defaultImageSize).swapped:O.fromSize(this.defaultImageSize),i=new O(Math.abs(r.x*Math.cos(e))+Math.abs(r.y*Math.sin(e)),Math.abs(r.x*Math.sin(e))+Math.abs(r.y*Math.cos(e))),o=r.subtract(i.clone()).divide(2).abs;return o.y>o.x?o.y*2/r.y+1:o.x*2/r.x+1}updateStateFromSerialization(e,t){this.localSnapshotEnabled=t,this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.setDefaultAngle(0),this.editor.outputContainer.getRotation()!==0&&this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop();const r=Math.round(e.rotation*180/Math.PI);this.transformStore.setRotation(r>180?r-360:r),this.applyOutputRotationFromSerialization(e),e.identifier&&this.transformStore.changeIdentifier(e.identifier);let i=e.outputRotation<0?e.outputRotation+360:e.outputRotation;if(i=(360-i)%360,e.start&&e.end){(e.end.x===0||e.end.y===0)&&(e.end.x=1,e.end.y=1);const{start:o,end:n}=this.convertOperationOptionsToUI({start:new O(e.start),end:new O(e.end),rotation:e.rotation,outputRotation:i});this.changePositionX(o.x),this.changePositionY(o.y);const s=n.x-o.x,a=n.y-o.y;this.transformStore.changeSize({width:s,height:a});const{maxCropMaskSize:l,imageSize:c}=this.defaults,d={height:a*c.height/l.height,width:s*c.width/l.width};this.changeLocalOutputSize(d)}this.editor.outputContainer.setData({flipHorizontally:e.flipHorizontally,flipVertically:e.flipVertically}),e.flipHorizontally&&this.flipHorizontally(!1),e.flipVertically&&this.flipVertically(!1),this.editor.overlayToolStore.correctOverlayFlip(),this.localSnapshotEnabled=!0}applyOutputRotationFromSerialization(e){if(e.outputRotation!==void 0)switch(e.outputRotation){case 90:this.transformations.rotateOutputContainer();break;case 180:this.transformations.rotateOutputContainer(),this.transformations.rotateOutputContainer();break;case 270:this.transformations.rotateOutputContainer(!0);break;default:break}this.transformations.rotateOutputContainer(!0),this.transformations.rotateOutputContainer()}setDefaultAngle(e){this.defaultAngle=e}updateCanvasControls(e){const t=J.toJS(this.cropMaskPosition),r=J.toJS(this.cropMaskSize),i=J.toJS(this.defaults.maxCropMaskSize);this.changeCropAndOutputSize({height:i.height*r.height/e.height,width:i.width*r.width/e.width}),this.changePosition({y:i.height*t.y/e.height,x:i.width*t.x/e.width})}onLeave(){this.transformations.onLeave()}onEnter(){this.transformations.onEnter()}saveTransforms(){this.transformations.saveTransforms()}saveTransformsBasedOnFlip(){this.transformations.saveTransformsBasedOnFlip()}setRotation(e){this.transformStore.setRotation(e),this.transformRender()}rotateOutputContainer(e=!1){return se(this,null,function*(){this.setDragMode(!0),this.transformations.rotateOutputContainer(e),yield this.editor.wait(),this.setDragMode(!1)})}applyInitialCrop(){const{identifier:e}=this.getMatchingItem();this.changeIdentifier(e,!1)}clickableCanvas(e){this.editor.clickableCanvas(e)}proportionalSize(e,t,r=this.defaults.maxCropMaskSize,i=this.minCropSize){const o={width:t.height*e,height:t.height};return(o.width>r.width||o.width<i||o.height<i)&&(o.width=t.width,o.height=t.width/e),o.width=Math.round(o.width),o.height=Math.round(o.height),o}checkAndAddSnapshot(e){const t=J.toJS(this.localOutputSize);(e.width!==t.width||e.height!==t.height)&&this.addLocalSnapshot()}updateInitialCropMaskPosition(e){const{cropMaskSize:t}=this,r=this.defaults.maxCropMaskSize;e?this.changePosition({x:0,y:Math.abs(r.height-t.height)/2}):this.changePosition({x:Math.abs(r.width-t.width)/2,y:0})}updatePreviewSizeWRTImageSize(){const e=J.toJS(this.localOutputSize),t=J.toJS(this.defaults.imageSize),r=J.toJS(this.defaults.maxCropMaskSize),i={height:r.height*e.height/t.height,width:r.width*e.width/t.width};this.transformStore.changeSize(i)}getScaleWithFlip(e=this.rotateFlipState.rotation){return this.transformations.getScaleWithFlip(e)}get cropState(){return this.transformStore.selectedCrop}get identifier(){return this.transformStore.identifier}get ratio(){return this.transformStore.ratio}get height(){return this.transformStore.height}get width(){return this.transformStore.width}get localOutputImageSize(){return this.localOutputSize}get localOutputHeight(){return this.localOutputSize.height}get localOutputWidth(){return this.localOutputSize.width}get lockResolution(){return this.transformStore.lockResolution}get forceDimensions(){return this.transformStore.forceDimensions}get rotationInDegrees(){return this.transformStore.rotationInDegrees}get outputRotation(){return this.transformStore.outputRotation}get isDragMode(){return this.dragMode.get()}get rotateFlipState(){const{flipHorizontally:e,flipVertically:t,rotationInDegrees:r,outputRotation:i}=this.transformStore.state;return{flipHorizontally:e,flipVertically:t,rotation:ne.inRadians(r),outputRotation:i}}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config[S.TRANSFORM]}get locale(){return this.editor.configStore.locale[S.TRANSFORM]}get isOptionSelected(){return this.identifier!=="identity"}get leftTop(){return this.rect.leftTop}get leftBottom(){return this.rect.leftBottom}get rightTop(){return this.rect.rightTop}get rightBottom(){return this.rect.rightBottom}get isFlippedHorizontal(){return this.transformStore.isFlippedHorizontal}get isFlippedVertical(){return this.transformStore.isFlippedVertical}get leftTopRespectFlip(){return this.rectForUi.leftTop}get leftBottomRespectFlip(){return this.rectForUi.leftBottom}get rightTopRespectFlip(){return this.rectForUi.rightTop}get rightBottomRespectFlip(){return this.rectForUi.rightBottom}get cropMaskPosition(){return this.transformStore.position}get cropMaskSize(){return this.transformStore.size}get state(){return this.transformStore.state}get defaultImageSize(){return this.defaults.imageSize}get maxCropMaskSize(){return this.defaults.maxCropMaskSize}get minCropMaskSize(){const e=this.getRatio();return e==="*"||e===1?{width:this.minCropSize,height:this.minCropSize}:e>1?{width:this.minCropSize*e,height:this.minCropSize}:{width:this.minCropSize,height:this.minCropSize*e}}get defaultCropMaskPosition(){return this.defaults.cropMaskPosition}get defaultScale(){return this.defaults.scale}get engineMediator(){return this.editor.engineMediator}getRatio(){const e=this.getTransform(this.identifier);if(e){if(Object.prototype.hasOwnProperty.call(e,"ratio"))return this.lockResolution?this.localOutputWidth/this.localOutputHeight:e.ratio;const{x:t,y:r}=e.dimensions;return t/r}return"*"}}m([J.observable],ne.prototype,"selectedCategory",2),m([J.observable],ne.prototype,"defaults",2),m([J.observable],ne.prototype,"localOutputSize",2),m([J.action],ne.prototype,"changeIdentifier",1),m([J.action],ne.prototype,"setDragMode",1),m([J.action],ne.prototype,"setCropDefaults",1),m([J.action],ne.prototype,"setDefaultImageSize",1),m([J.action],ne.prototype,"setMaxCropSize",1),m([J.action],ne.prototype,"setDefaultCropPosition",1),m([J.action],ne.prototype,"resetCrop",1),m([J.action],ne.prototype,"toggleCategorySelection",1),m([J.action],ne.prototype,"pureReset",1),m([J.action],ne.prototype,"reset",2),m([J.action],ne.prototype,"changePosition",1),m([J.action],ne.prototype,"changePositionX",1),m([J.action],ne.prototype,"changePositionY",1),m([J.action],ne.prototype,"changeCropAndOutputHeight",1),m([J.action],ne.prototype,"changeCropAndOutputWidth",1),m([J.action],ne.prototype,"changeCropAndOutputSize",1),m([J.action],ne.prototype,"onLeave",1),m([J.action],ne.prototype,"onEnter",1),m([J.action],ne.prototype,"changeLocalOutputSize",2),m([J.action],ne.prototype,"changeDefaultScale",2),m([J.action],ne.prototype,"changeLocalOutputHeight",2),m([J.action],ne.prototype,"changeLocalOutputWidth",2),m([J.action],ne.prototype,"changeLockResolution",2),m([J.action],ne.prototype,"setRotation",1),m([J.action],ne.prototype,"rotateClockwise",2),m([J.action],ne.prototype,"rotateAntiClockwise",2),m([J.action],ne.prototype,"rotateOutputContainer",1),m([J.action],ne.prototype,"flipHorizontally",2),m([J.action],ne.prototype,"flipVertically",2),m([J.action],ne.prototype,"applyDefaultCrop",2),m([J.action],ne.prototype,"applyInitialCrop",1),m([J.action],ne.prototype,"updateCropMask",2),m([J.action],ne.prototype,"clickableCanvas",1),m([J.action],ne.prototype,"onLeftTop",2),m([J.action],ne.prototype,"onLeftBottom",2),m([J.action],ne.prototype,"onRightTop",2),m([J.action],ne.prototype,"onRightBottom",2),m([J.action],ne.prototype,"proportionalSize",1),m([J.action],ne.prototype,"onPixelWidth",2),m([J.action],ne.prototype,"onPixelHeight",2),m([J.action],ne.prototype,"updateInitialCropMaskPosition",1),m([J.action],ne.prototype,"updatePreviewSizeWRTImageSize",1),m([J.computed],ne.prototype,"cropState",1),m([J.computed],ne.prototype,"identifier",1),m([J.computed],ne.prototype,"ratio",1),m([J.computed],ne.prototype,"height",1),m([J.computed],ne.prototype,"width",1),m([J.computed],ne.prototype,"localOutputImageSize",1),m([J.computed],ne.prototype,"localOutputHeight",1),m([J.computed],ne.prototype,"localOutputWidth",1),m([J.computed],ne.prototype,"lockResolution",1),m([J.computed],ne.prototype,"forceDimensions",1),m([J.computed],ne.prototype,"rotationInDegrees",1),m([J.computed],ne.prototype,"outputRotation",1),m([J.computed],ne.prototype,"isDragMode",1),m([J.computed],ne.prototype,"rotateFlipState",1),m([J.computed],ne.prototype,"selectedCategoryIdentifier",1),m([J.computed],ne.prototype,"categories",1),m([J.computed],ne.prototype,"items",1),m([J.computed],ne.prototype,"config",1),m([J.computed],ne.prototype,"locale",1),m([J.computed],ne.prototype,"isOptionSelected",1),m([J.computed],ne.prototype,"leftTop",1),m([J.computed],ne.prototype,"leftBottom",1),m([J.computed],ne.prototype,"rightTop",1),m([J.computed],ne.prototype,"rightBottom",1),m([J.computed],ne.prototype,"isFlippedHorizontal",1),m([J.computed],ne.prototype,"isFlippedVertical",1),m([J.computed],ne.prototype,"leftTopRespectFlip",1),m([J.computed],ne.prototype,"leftBottomRespectFlip",1),m([J.computed],ne.prototype,"rightTopRespectFlip",1),m([J.computed],ne.prototype,"rightBottomRespectFlip",1),m([J.computed],ne.prototype,"cropMaskPosition",1),m([J.computed],ne.prototype,"cropMaskSize",1),m([J.computed],ne.prototype,"state",1),m([J.computed],ne.prototype,"defaultImageSize",1),m([J.computed],ne.prototype,"maxCropMaskSize",1),m([J.computed],ne.prototype,"minCropMaskSize",1),m([J.computed],ne.prototype,"defaultCropMaskPosition",1),m([J.computed],ne.prototype,"defaultScale",1);class qt{constructor(e){this.checkImageResize=()=>{this.engine.on(uc.BEGAN_IMAGE_DOWNSCALING,()=>{this.modalStore.showInfoModal("resizing")}),this.engine.on(uc.IMAGE_DOWNSCALED,({width:e,height:t})=>{const{maxMegaPixels:r}=this.configStore.config.engine.downscaleOptions,i=m_.isMobile()?r.mobile:r.desktop;this.modalStore.hideModal(),this.modalStore.showActionModal({type:dt.WARNING,identifier:"imageResized",handleConfirm:()=>{this.modalStore.hideModal()},error:{megapixels:`${i}`,width:`${e}`,height:`${t}`}})})};this.init=e=>{const t=this.historyStore.isDirty();t?this.modalStore.showActionModal({type:dt.WARNING,identifier:"discardChanges",handleConfirm:()=>{this.setImage(e),this.resetToolStates()},handleDismiss:()=>{this.setImage(e,!0)}}):this.setImage(e,!0).then(()=>{const{engine:r,displayCanvasRendererWarning:i}=this.configStore.config;r.preferredRenderer==="canvas"&&i&&this.modalStore.showActionModal({type:dt.WARNING,identifier:"unsupportedWebGLRenderer",handleConfirm:()=>{this.modalStore.hideModal()}})}),this.historyStore.reset(),this.libraryStore.fetchImages()};this.setImage=(e,t=!1)=>se(this,null,function*(){try{this.modalStore.showInfoModal(this.configStore.config.displayResizeWarning?"resizing":"loading"),this.scale.defaultScale=1,this.scale.resetOffset(),yield this.activeStore.setImage(e),yield this.engineMediator.image.addImageToContainer(),this.engineMediator.output.applyNewImageTransform(),this.engineMediator.preview.updateTransform(),this.scale.setInitialTransform(),this.transformToolStore.setCropDefaults(),this.historyStore.addInitialSnapshot();const{flipHorizontally:r,flipVertically:i}=this.transformToolStore.rotateFlipState;this.outputContainer.setData({flipVertically:i,flipHorizontally:r}),t?(this.focusToolStore.updateCanvasControls(),this.spriteStore.updateCanvasControls(),this.transformToolStore.resetCrop(),this.transformToolStore.applyDefaultCrop(),this.transformToolStore.saveTransformsBasedOnFlip(),this.transformToolStore.onEnter(),this.transformToolStore.setRotation(this.transformToolStore.rotationInDegrees),this.transformToolStore.onLeave(),this.transformToolStore.onEnter(),this.transformToolStore.onLeave()):this.transformToolStore.saveTransforms(),this.snappingStore.calculatePreviewTopLeftPosition(),yield this.renderPromise(),this.configStore.config.filter.enablePreviewThumbnails&&this.configStore.config.engine.preferredRenderer==="webgl"&&this.filterToolStore.setImageAndGetPreviews();const o=this.activeStore.tool;o?this.configStore.events.onImageLoaded():this.onReady(),this.modalStore.identifier==="imageResized"||this.modalStore.hideModal()}catch(r){this.configStore.events.onErrorImageLoading(r),this.modalStore.hideModal(),this.modalStore.showActionModal({type:dt.ERROR,identifier:r.identifier?r.identifier:"rendering",error:r,handleConfirm:()=>{window.location.reload()}})}});this.onToolChange=(e,t=null,r=!0)=>{if(e===t)return;if(this.engineMediator.preview.container){if([e,t].indexOf(S.TRANSFORM)!==-1){const{canvasSize:i}=this.canvasStore,o=this.configStore.measurements.basicToolControlBar.controlsBarHeight;if(e===S.TRANSFORM){this.transformToolStore.onLeave(),this.historyStore.removeTransformLocalSnapshots();const n=this.engineMediator.preview.container.getScale().x,s=this.engineMediator.output.container.getResolution(),{defaultImageSize:a}=this.transformToolStore,l=n!==1||a.width!==s.width||a.height!==s.height;l&&this.addSnapshot(void 0,Ie.EDIT,this.configStore.locale.transform.title),this.snappingStore.calculatePreviewTopLeftPosition(),this.configStore.isLayoutAdvanced||(this.canvasStore.state.canvasSize.height=i.height+o,this.resize(!0))}else t===S.TRANSFORM&&(this.configStore.isLayoutAdvanced||(this.canvasStore.state.canvasSize.height=i.height-o,this.resize(),this.render()),this.transformToolStore.onEnter(),this.transformToolStore.addLocalSnapshot(),this.historyStore.saveTransformLocalSnapshotIndex())}else this.scale.resetOffset(),this.scale.resetPosition(),this.scale.setScaleToDefault(),this.scale.scaleRender(!0);r&&this.render()}};this.resize=(e=!1)=>{try{this.transformToolStore.applyDefaultCrop(),this.canvasStore.updateCanvasDimensions();const t=Eh.toJS(this.transformToolStore.maxCropMaskSize),r=this.activeStore.tool===S.TRANSFORM;(!r||e)&&this.transformToolStore.onEnter();const i=this.engineMediator.preview.container.getRotation(),o=this.engineMediator.preview.updateTransform(i);if(o){this.scale.setInitialTransform(),this.transformToolStore.setCropDefaults(),this.transformToolStore.updateCanvasControls(t),this.focusToolStore.updateCanvasControls(),this.spriteStore.updateCanvasControls();const n=this.transformToolStore.getScaleWithFlip(i);this.engineMediator.preview.container.setScale(n),(!r||e)&&(this.transformToolStore.onLeave(),this.transformToolStore.onEnter(),this.transformToolStore.onLeave()),this.snappingStore.calculatePreviewTopLeftPosition(),this.render()}}catch(t){this.modalStore.showActionModal({type:dt.ERROR,identifier:"rendering",handleConfirm:()=>{window.location.reload()}})}};this.export=(r={})=>{var{preventExportEvent:e}=r,t=ai(r,["preventExportEvent"]);return new Promise((i,o)=>{this.modalStore.showInfoModal("exporting");const n=this.activeStore.tool===S.TRANSFORM;n&&this.transformToolStore.onLeave();const{config:s}=this.configStore,a=v(v({},s.export.image),t),{exportType:l,format:c,quality:d,enableDownload:u}=a;this.engineMediator.engine.export(l,c,d).then(p=>{u&&this.triggerFileDownload(s.export.filename,c,l,p),e||this.configStore.events.onExport(p),i(p),n&&this.transformToolStore.onEnter(),this.modalStore.hideModal(),this.historyStore.isDirtySinceSave=!1}).catch(p=>{o(p),n&&this.transformToolStore.onEnter(),this.modalStore.hideModal()})})};this.serialize=({image:e}={image:!0})=>this.serializationMediator.serialize({image:e});this.deserialize=e=>this.serializationMediator.deserialize(e);this.close=()=>{this.historyStore.isDirtySinceSave&&this.configStore.config.displayCloseWarning?this.modalStore.showActionModal({type:dt.WARNING,identifier:"unsavedChanges",handleConfirm:()=>{this.configStore.events.onClose()}}):this.configStore.events.onClose()};this.hasChanges=()=>this.historyStore.isDirty();this.wait=(e=0)=>new Promise(t=>setTimeout(t,e));this.clickableCanvas=e=>se(this,null,function*(){e?(yield new Promise(t=>setTimeout(t,0)),this.canvasStore.enableCanvasClick()):this.canvasStore.disableCanvasClick()});this.onReady=()=>se(this,null,function*(){const{layout:e,forceCrop:t}=this.configStore.config;if(e==="advanced"&&this.activeStore.selectTool(this.configStore.defaultTool),t){const r=this.transformToolStore.localOutputImageSize,i=r.width/r.height,o=this.transformToolStore.entityManager.items.map(n=>n.ratio?n.ratio:n.dimensions.x/n.dimensions.y);o.indexOf("*")!==-1?console.error('ForceCrop will not work if "*" is one of the ratios'):o.indexOf(parseFloat(i.toFixed(2)))===-1&&this.activeStore.selectTool(S.TRANSFORM)}this.configStore.events.onEditorReady()});this.addSnapshot=(e,t,r)=>{this.historyStore.addSnapshot(e,t,r)};this.addLocalTransformSnapshot=(e,t,r=Ie.EDIT)=>{this.historyStore.addSnapshot({localTransform:e},r,t)};this.resetToolStates=()=>{this.filterToolStore.pureReset(),this.focusToolStore.pureReset(),this.adjustmentsToolStore.pureReset(),this.overlayToolStore.pureReset(),this.frameToolStore.pureReset(),this.brushToolStore.pureReset(),this.spriteStore.pureReset(),this.transformToolStore.pureReset(),this.historyStore.reset(),this.render()};this.getAssetPath=e=>this.assetProvider.getPathForCategory(e);this.render=()=>se(this,null,function*(){yield this.renderPromise()});this.applyFlipToPreview=e=>this.engineMediator.previewSpaceToFlippedPreviewSpace(e);this.getPreviewSize=()=>{const{width:e,height:t}=this.engine.getOutputDimensions();return e&&t?{width:Math.round(this.worldToPreview(this.outputToWorld(e))),height:Math.round(this.worldToPreview(this.outputToWorld(t)))}:{height:t,width:e}};this.triggerFileDownload=(e,t,r,i)=>{const o=t===ar.JPEG&&r!==Dr.MSBLOB?".jpeg":".png",n=e+o,s=this.blobFromExportData(i);this.triggerBlobDownload(n,s)};this.triggerBlobDownload=(e,t)=>{if(navigator.msSaveBlob)navigator.msSaveBlob(t,e);else{const r=document.createElement("a"),i=URL.createObjectURL(t);r.href=i,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),u9()||URL.revokeObjectURL(i)}};this.blobFromExportData=e=>typeof e=="string"?tD(e):e instanceof HTMLImageElement?tD(e.src):e;this.configStore=new Qo;const t=this.configStore.saveConfig(e);if(this.engineMediator=new d$(this),this.serializationMediator=new eD(this),this.spriteStore=new pe(this),this.scale=new yr(this),this.filterToolStore=new cr(this),this.adjustmentsToolStore=new ft(this),this.focusToolStore=new je(this),this.overlayToolStore=new _r(this),this.frameToolStore=new er(this),this.brushToolStore=new Xt(this),this.transformToolStore=new ne(this),this.libraryStore=new tn(this),this.modalStore=new jn(this),this.snappingStore=new Ya(this),this.activeStore=new Fs(this),this.canvasStore=new _o(this),this.historyStore=new Th(this),this.modalStore.showInfoModal("loading"),this.libraryStore.initProvider(t),this.configStore.config.displayResizeWarning&&this.checkImageResize(),this.configStore.config.filter.enablePreviewThumbnails&&this.configStore.config.engine.preferredRenderer==="webgl"){const r=this.configStore.config.engine;this.previewThumbnails=new rD(v(v({},r),{license:this.configStore.config.license,assetProvider:this.configStore.assetProvider}))}}static get defaultColors(){return Object.keys(Wi).map(e=>{const t=Wi[e];return{identifier:e,color:t,colorString:$a(t)}})}static get defaultBackgroundColors(){return Object.keys(GE).map(e=>{const t=GE[e];return{identifier:e,color:t,colorString:$a(t)}})}static get devicePixelRatio(){return window.devicePixelRatio||1}get shortestOutputSide(){const e=this.outputContainer.getBounds();return Math.min(e.width,e.height)}get assetProvider(){return this.configStore.assetProvider}get engine(){return this.engineMediator.engine}get imageContainer(){return this.engineMediator.image.container}get orderHelper(){return this.engineMediator.orderHelper}renderPromise(){return this.engineMediator.render(this.engineMediator.preview.container)}previewToWorld(e,t){return Bo(e)?this.engineMediator.previewSpaceToWorldSpace(e,t):this.engineMediator.previewSpaceToWorldSpace(e,t)}worldToPreview(e){return Bo(e)?this.engineMediator.worldSpaceToPreviewSpace(e):this.engineMediator.worldSpaceToPreviewSpace(e)}worldSizeToPreview(e){return{width:this.engineMediator.worldSpaceToPreviewSpace(e.width),height:this.engineMediator.worldSpaceToPreviewSpace(e.height)}}previewSizeToWorld(e,t){return{width:this.engineMediator.previewSpaceToWorldSpace(e.width,t),height:this.engineMediator.previewSpaceToWorldSpace(e.height,t)}}outputToWorld(e){return Bo(e)?this.engineMediator.outputSpaceToWorldSpace(e):this.engineMediator.outputSpaceToWorldSpace(e)}previewToOutput(e){return Bo(e)?this.engineMediator.previewSpaceToOutputSpace(e):this.engineMediator.previewSpaceToOutputSpace(e)}get outputContainer(){return this.engineMediator.output.container}}m([Eh.action],qt.prototype,"resize",2),m([Eh.action],qt.prototype,"export",2),m([Eh.action],qt.prototype,"clickableCanvas",2);function lD(e,t){const r=e.width/e.height,i=t.width/t.height;return r>i?e.height/t.height:e.width/t.width}const zAe={transform:Dt.IDENTITY};class bc{constructor(e){this.initialTransform=Dt.IDENTITY;this.editor=e,this.state=rn.observable(zAe)}createPreview(e){this.container=this.editor.engine.createPreview(e)}updateTransform(e=0,t=!0){const r=this.calculateTransform(e);return r.scale.x?(t?this.saveInitialTransform(r):this.savePreviewTransform(r),this.container.setTransform(this.state.transform),!0):!1}saveInitialTransform(e){this.initialTransform=e,this.savePreviewTransform(e)}savePreviewTransform(e){rn.runInAction(()=>{this.state.transform.position=e.position,this.state.transform.scale=e.scale,this.state.transform.rotation=e.rotation;const t=qt.devicePixelRatio;this.previewTransformWithoutDpr={position:new O(e.position).divide(t),scale:new O(e.scale).divide(t),rotation:e.rotation}})}get transform(){return this.state.transform}get position(){return this.state.transform.position}get scale(){return this.state.transform.scale}get rotation(){return this.state.transform.rotation}calculateTransform(e=0){const t=qt.devicePixelRatio,{width:r,height:i}=this.editor.canvasStore.canvasSize,o=this.editor.engine.getOutputDimensions();let n=lD({width:r,height:i},o),s=.95;window.innerWidth<600&&(s=.98),n*=s;const a=i-o.height*n,l=this.editor.configStore.measurements.mainCanvasActionBar.height*2;a<l&&(n=lD({width:r,height:i-l},o),n*=s),n*=t;const c={x:r*t/2,y:i*t/2},d={x:n,y:n};return new Dt(c,d,e)}}m([rn.action],bc.prototype,"updateTransform",1),m([rn.action],bc.prototype,"savePreviewTransform",1),m([rn.computed],bc.prototype,"transform",1),m([rn.computed],bc.prototype,"position",1),m([rn.computed],bc.prototype,"scale",1),m([rn.computed],bc.prototype,"rotation",1);class Xa{constructor(){this.imageContainerOrder=[];this.spriteContainerOrder=[]}static checkTool(e){if([S.STICKER,S.TEXT,S.TEXT_DESIGN,S.BRUSH,S.FRAME].indexOf(e)!==-1)throw new Error("addIndex is used for non sprites, for sprites use addSprite")}static remove(e,t){const r=t.findIndex(i=>i===e);r!==-1&&t.splice(r,1);return}static indexForOrder(e,t,r){const i=e[r],o=t.findIndex(s=>s===r);if(o!==-1)return{index:o,order:t};const{length:n}=t;if(n){let s;for(s=0;s<n;s+=1){const a=t[s],l=e[a];if(i<l)return t=[...t.slice(0,s),r,...t.slice(s)],{index:s,order:t}}}return t.push(r),{index:t.length-1,order:t}}addIndex(e){Xa.checkTool(e);const{index:t,order:r}=Xa.indexForOrder(Xa.IMAGE_CONTAINER_INDEX,this.imageContainerOrder,e);return this.imageContainerOrder=r,t}removeIndex(e){Xa.checkTool(e),Xa.remove(e,this.imageContainerOrder)}addSprite(e){return this.spriteContainerOrder.push(e),this.imageContainerOrder.length+this.spriteContainerOrder.length-1}removeSprite(e){Xa.remove(e,this.spriteContainerOrder)}renameSprite(e,t){const r=this.spriteContainerOrder.findIndex(i=>i===e);r!==-1&&(this.spriteContainerOrder[r]=t)}bringToFront(e){const t=this.spriteContainerOrder.findIndex(r=>r===e);return t!==-1&&(this.spriteContainerOrder.splice(t,1),this.spriteContainerOrder.push(e)),this.getLastSpriteIndex()}getLastSpriteId(){const{length:e}=this.spriteContainerOrder;return this.spriteContainerOrder[e-1]}getSpriteIndex(e){const t=this.spriteContainerOrder.findIndex(r=>r===e);return t+this.imageContainerOrder.length-1}getLastSpriteIndex(){return this.imageContainerOrder.length+this.spriteContainerOrder.length-1}}Xa.IMAGE_CONTAINER_INDEX={[S.ART_FILTER]:0,[S.FILTER]:1,[S.ADJUSTMENT]:2,[S.FOCUS]:3,[S.OVERLAY]:4};class d${constructor(e){this.orderHelper=new Xa;const t=e.configStore.config.engine;this.engine=new vg(v(v({},t),{license:e.configStore.config.license,assetProvider:e.configStore.assetProvider})),this.image=new JK(e),this.output=new ZK(e),this.preview=new bc(e),this.editor=e}render(e){return this.engine.render(e)}previewSpaceToWorldSpace(e,t){const r=this.preview.previewTransformWithoutDpr;if(Bo(e)){const i=this.editor.engine.convertPointFromPreviewIntoWorldSpace(O.ZERO,r,t),o=this.editor.engine.convertPointFromPreviewIntoWorldSpace({x:e,y:0},r,t);return O.distance(new O(i),new O(o))}return this.editor.engine.convertPointFromPreviewIntoWorldSpace(e,r,t)}worldSpaceToPreviewSpace(e){const t=this.preview.previewTransformWithoutDpr;if(Bo(e)){const r=this.editor.engine.convertPointFromWorldIntoPreviewSpace(O.ZERO,t),i=this.editor.engine.convertPointFromWorldIntoPreviewSpace({x:e,y:0},t);return O.distance(new O(r),new O(i))}return this.editor.engine.convertPointFromWorldIntoPreviewSpace(e,t)}outputSpaceToWorldSpace(e){return Bo(e)?be.getScalarInWorldSpace(e,this.editor.engine.getOutputContainer()):be.getPointInWorldSpace(e,this.editor.engine.getOutputContainer())}previewSpaceToOutputSpace(e){const t=this.preview.previewTransformWithoutDpr;if(Bo(e)){const r=this.editor.engine.convertPointFromPreviewIntoOutputSpace(O.ZERO,t),i=this.editor.engine.convertPointFromPreviewIntoOutputSpace({x:e,y:0},t);return O.distance(new O(r),new O(i))}return this.editor.engine.convertPointFromPreviewIntoOutputSpace(e,t)}previewSpaceToFlippedPreviewSpace(e){return this.editor.engine.convertPointFromPreviewIntoFlippedPreviewSpace(e)}}const Si=_(Ge()),u$=[[0,0],[0,1],[1,0],[1,1]],NAe=[[0,1,2,3],[2,3,0,1],[1,0,3,2],[3,2,1,0]];class wt{constructor(e,t,r="center",i=!0,o=!1){this.considerRotation=!0;this.considerFlip=!0;this.store=t,this.m=r==="center"?wt.movePivotTo([.5,.5]):u$,this.considerRotation=i,this.considerFlip=o,this.configStore=e.configStore}static getFlippedEdgeIndex(e,t,r){return NAe[(t?1:0)+(r?2:0)][e]}static movePivotTo(e){return u$.map(t=>[t[0]-e[0],t[1]-e[1]])}get position(){return this.store.position}get size(){return this.store.size}get rotation(){return this.considerRotation?this.store.rotationWRTOutputRotation:0}get flipHorizontally(){return this.considerFlip?this.store.isFlippedHorizontal:!1}get flipVertically(){return this.considerFlip?this.store.isFlippedVertical:!1}get flipCenter(){return this.considerFlip?this.store.flipCenter:null}handleOrigin(e,t,r){const i=wt.getFlippedEdgeIndex(e,t,r),o=this.m[i][0]*this.size.width,n=this.m[i][1]*this.size.height;return{width:o,height:n}}get leftTop(){const{position:e,flipHorizontally:t,flipVertically:r}=this,i=this.handleOrigin(0,t,r);return wt.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get leftBottom(){const{position:e,flipHorizontally:t,flipVertically:r}=this,i=this.handleOrigin(1,t,r);return wt.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get rightTop(){const{position:e,flipHorizontally:t,flipVertically:r}=this,i=this.handleOrigin(2,t,r);return wt.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get rightBottom(){const{position:e,flipHorizontally:t,flipVertically:r}=this,i=this.handleOrigin(3,t,r);return wt.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get leftBottomHandle(){const{position:e,flipHorizontally:t,flipVertically:r}=this,i=this.handleOrigin(1,t,r);return i.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height,wt.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get rightBottomHandle(){const{position:e,flipHorizontally:t,flipVertically:r}=this,i=this.handleOrigin(3,t,r);return i.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height,wt.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get leftMid(){const e=new O(this.leftTop),t=new O(this.leftBottom);return e.add(t).divide(2)}get rightMid(){const e=new O(this.rightTop),t=new O(this.rightBottom);return e.add(t).divide(2)}}wt.coordinatesWithRotation=({width:e,height:t},r,i,o,n,s)=>{let a=e*Math.cos(r)-t*Math.sin(r)+s.x,l=e*Math.sin(r)+t*Math.cos(r)+s.y;return i&&(a=n.x*2-a),o&&(l=n.y*2-l),new O({x:a,y:l}).rounded},m([Si.computed],wt.prototype,"position",1),m([Si.computed],wt.prototype,"size",1),m([Si.computed],wt.prototype,"rotation",1),m([Si.computed],wt.prototype,"flipHorizontally",1),m([Si.computed],wt.prototype,"flipVertically",1),m([Si.computed],wt.prototype,"flipCenter",1),m([Si.computed],wt.prototype,"leftTop",1),m([Si.computed],wt.prototype,"leftBottom",1),m([Si.computed],wt.prototype,"rightTop",1),m([Si.computed],wt.prototype,"rightBottom",1),m([Si.computed],wt.prototype,"leftBottomHandle",1),m([Si.computed],wt.prototype,"rightBottomHandle",1),m([Si.computed],wt.prototype,"leftMid",1),m([Si.computed],wt.prototype,"rightMid",1);const Dh=(e,t=0,r=3)=>{const i=Math.tan(t),o=Math.sqrt(i**2+1);return{x:e.x+r/o,y:e.y+r*i/o}},F0={blurRadius:40,gradientSize:.2},UAe=v({start:{x:0,y:0},end:{x:0,y:0}},F0),jAe=v({center:{x:0,y:0},radius:0},F0),qAe=v({origin:{x:0,y:0},rotation:0,size:0},F0),GAe=F0,Pd={identifier:"identity",linear:UAe,radial:jAe,mirrored:qAe,gaussian:GAe},Hr=_(Ge());class Ci{constructor(e){this.selectFocus=(e,t)=>{Hr.runInAction(()=>{this.state.identifier=e,t&&(this.state[e].blurRadius=t)})};this.changeBlurRadius=(e,t)=>{e!=="identity"&&(this.state[e].blurRadius=t)};this.reset=()=>{this.indexInContainer===-1&&(this.state.identifier=Pd.identifier,this.state.identifier!=="identity"&&(this.state[this.state.identifier].blurRadius=Pd[this.state.identifier].blurRadius))};this.setLinear=({start:e,end:t})=>{this.state.linear.start.x=e.x,this.state.linear.start.y=e.y,this.state.linear.end.x=t.x,this.state.linear.end.y=t.y};this.setLinearStart=e=>{this.state.linear.start.x=e.x,this.state.linear.start.y=e.y};this.setLinearEnd=e=>{this.state.linear.end.x=e.x,this.state.linear.end.y=e.y};this.setRadialCenter=e=>{this.state.radial.center.x=e.x,this.state.radial.center.y=e.y};this.setRadialRadius=e=>{this.state.radial.radius=e};this.setMirroredOrigin=e=>{this.state.mirrored.origin.x=e.x,this.state.mirrored.origin.y=e.y};this.setMirroredRotation=e=>{this.state.mirrored.rotation=e};this.setMirroredSize=e=>{this.state.mirrored.size=e};this.getEffectProperties=()=>this.effect?this.effect.getProperties():null;this.setLinearFocus=e=>{this.effect=this.engineMediator.engine.addLinearBlur(e,this.imageContainer,this.order),this.updateLinearState(this.effect.getProperties())};this.setGaussianFocus=e=>{this.effect=this.engineMediator.engine.addGaussianBlur(e,this.imageContainer,this.order),this.updateGaussianState(this.effect.getProperties())};this.setRadialFocus=e=>{this.effect=this.engineMediator.engine.addRadialBlur(e,this.imageContainer,this.order),this.updateRadialState(this.effect.getProperties())};this.setMirroredFocus=e=>{this.effect=this.engineMediator.engine.addMirroredBlur(e,this.imageContainer,this.order),this.updateMirroredState(this.effect.getProperties())};this.updateFromEngineState=e=>{const t=this.getEffectProperties();if(t&&e!=="identity")switch(e){case Pe.LINEAR:this.updateLinearState(t);break;case Pe.RADIAL:this.updateRadialState(t);break;case Pe.MIRRORED:this.updateMirroredState(t);break;default:break}};this.updateGaussianState=e=>{this.changeBlurRadius(Pe.GAUSSIAN,e.blurRadius)};this.updateMirroredState=e=>{const t=this.editor.worldToPreview(e.mirrorAxisOrigin),r=new O(this.editor.worldToPreview(e.mirrorAxisDirection)),i=r.subtract(t),o=Math.atan2(i.y,i.x);this.setMirroredOrigin(this.editor.worldToPreview(e.mirrorAxisOrigin)),this.setMirroredRotation(o),this.setMirroredSize(this.editor.worldToPreview(e.clearAreaWidth)),this.changeBlurRadius(Pe.MIRRORED,e.blurRadius)};this.updateRadialState=e=>{this.setRadialCenter(this.editor.worldToPreview(e.center)),this.setRadialRadius(this.editor.worldToPreview(e.radius)),this.changeBlurRadius(Pe.RADIAL,e.blurRadius)};this.updateLinearState=e=>{this.setLinearStart(this.editor.worldToPreview(e.start)),this.setLinearEnd(this.editor.worldToPreview(e.end)),this.changeBlurRadius(Pe.LINEAR,e.blurRadius)};this.setEffectProperties=e=>this.effect?(this.effect.setProperties(e),this.effect.getProperties()):null;this.removeFocus=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.engineMediator.orderHelper.removeIndex(S.FOCUS))};this.editor=e,this.engineMediator=this.editor.engineMediator,this.state=Pd}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}get order(){return this.engineMediator.orderHelper.addIndex(S.FOCUS)}get imageContainer(){return this.engineMediator.image.container}}m([Hr.observable],Ci.prototype,"state",2),m([Hr.action],Ci.prototype,"selectFocus",2),m([Hr.action],Ci.prototype,"changeBlurRadius",2),m([Hr.action],Ci.prototype,"reset",2),m([Hr.action],Ci.prototype,"setLinear",2),m([Hr.action],Ci.prototype,"setLinearStart",2),m([Hr.action],Ci.prototype,"setLinearEnd",2),m([Hr.action],Ci.prototype,"setRadialCenter",2),m([Hr.action],Ci.prototype,"setRadialRadius",2),m([Hr.action],Ci.prototype,"setMirroredOrigin",2),m([Hr.action],Ci.prototype,"setMirroredRotation",2),m([Hr.action],Ci.prototype,"setMirroredSize",2),m([Hr.action],Ci.prototype,"updateFromEngineState",2);class je{constructor(e){this.selectFocus=e=>{if(e!==this.identifier){this.focusStore.removeFocus();const t=this.maxIntensity*.2,{width:r}=this.editor.engine.getOutputContainer().getBounds(),i=this.editor.shortestOutputSide*.2;switch(e){case Pe.LINEAR:const o=this.editor.outputToWorld({x:-r/2,y:0}),n=this.editor.outputToWorld({x:r/2,y:0});this.setLinearFocus({start:o,end:n,blurRadius:t});break;case Pe.RADIAL:const s=this.editor.outputToWorld({x:0,y:0});this.setRadialFocus({center:s,radius:i,blurRadius:t});break;case Pe.MIRRORED:const a=this.editor.outputToWorld({x:0,y:0}),l=i,c=this.editor.outputToWorld(Dh({x:0,y:0},0));this.setMirroredFocus({mirrorAxisOrigin:a,clearAreaWidth:l,blurRadius:t,mirrorAxisDirection:c});break;case Pe.GAUSSIAN:this.setGaussianFocus({blurRadius:t});break;default:break}this.focusStore.selectFocus(e,t),this.editor.render(),this.addSnapshot(Ie.ADD,S.FOCUS)}};this.changeIntensity=e=>{const t=this.focusStore.setEffectProperties({blurRadius:e});t&&(this.focusStore.changeBlurRadius(this.identifier,t.blurRadius),this.editor.render())};this.changeRelativeIntensity=e=>{const t=(this.maxIntensity-je.minIntensity)*e/100+je.minIntensity,r=this.focusStore.setEffectProperties({blurRadius:t});r&&(this.focusStore.changeBlurRadius(this.identifier,r.blurRadius),this.editor.render())};this.toolSnapshot=e=>{this.addSnapshot(Ie.EDIT,e)};this.addSnapshot=(e,t)=>{this.editor.addSnapshot(void 0,e,t)};this.clickableCanvas=e=>{this.editor.clickableCanvas(e)};this.pureReset=()=>{this.focusStore.removeFocus(),this.focusStore.reset()};this.reset=()=>{this.pureReset(),this.editor.render(),this.addSnapshot(Ie.DELETE,this.locale.controls.buttonReset)};this.setStart=e=>{const t=this.focusStore.setEffectProperties({start:this.editor.previewToWorld(e)});t&&(this.focusStore.setLinearStart(this.editor.worldToPreview(t.start)),this.editor.render())};this.setEnd=e=>{const t=this.focusStore.setEffectProperties({end:this.editor.previewToWorld(e)});t&&(this.focusStore.setLinearEnd(this.editor.worldToPreview(t.end)),this.editor.render())};this.setCenter=e=>{const t=this.focusStore.setEffectProperties({center:this.editor.previewToWorld(e)});t&&(this.focusStore.setRadialCenter(this.editor.worldToPreview(t.center)),this.editor.render())};this.setRadius=e=>{const t=this.focusStore.setEffectProperties({radius:this.editor.previewToWorld(e)});t&&(this.focusStore.setRadialRadius(this.editor.worldToPreview(t.radius)),this.editor.render())};this.setOrigin=e=>{const t=this.focusStore.setEffectProperties({mirrorAxisOrigin:this.editor.previewToWorld(e),mirrorAxisDirection:this.editor.previewToWorld(Dh(e,this.rotation))});t&&(this.focusStore.setMirroredOrigin(this.editor.worldToPreview(t.mirrorAxisOrigin)),this.editor.render())};this.setSize=e=>{const t=this.focusStore.setEffectProperties({clearAreaWidth:this.editor.previewToWorld(e)});t&&(this.focusStore.setMirroredSize(this.editor.worldToPreview(t.clearAreaWidth)),this.editor.render())};this.setRotation=e=>{this.focusStore.setEffectProperties({mirrorAxisDirection:this.editor.previewToWorld(Dh(this.origin,e))}),this.focusStore.setMirroredRotation(e),this.editor.render()};this.updateStateFromHistory=(e,t)=>{this.focusStore.removeFocus();const{magnitude:r}=t;qe.runInAction(()=>{switch(e.identifier){case Pe.LINEAR:this.focusStore.selectFocus(Pe.LINEAR),this.setLinearFocus({start:this.editor.previewToWorld(new O(e.linear.start).multiply(t)),end:this.editor.previewToWorld(new O(e.linear.end).multiply(t)),blurRadius:e.linear.blurRadius});break;case Pe.GAUSSIAN:this.focusStore.selectFocus(Pe.GAUSSIAN),this.setGaussianFocus({blurRadius:e.gaussian.blurRadius});break;case Pe.RADIAL:this.focusStore.selectFocus(Pe.RADIAL),this.setRadialFocus({center:this.editor.previewToWorld(new O(e.radial.center).multiply(t)),radius:this.editor.previewToWorld(e.radial.radius*r),blurRadius:e.radial.blurRadius});break;case Pe.MIRRORED:this.focusStore.selectFocus(Pe.MIRRORED),this.setMirroredFocus({mirrorAxisOrigin:this.editor.previewToWorld(new O(e.mirrored.origin).multiply(t)),clearAreaWidth:this.editor.previewToWorld(e.mirrored.size*r),blurRadius:e.mirrored.blurRadius,mirrorAxisDirection:this.editor.previewToWorld(Dh(e.mirrored.origin,e.mirrored.rotation))});break;case"identity":this.pureReset();break;default:break}})};this.updateStateFromSerialization=e=>se(this,null,function*(){if(je.doesFocusIdentifierExist(e.identifier))this.focusStore.removeFocus(),qe.runInAction(()=>{this.focusStore.selectFocus(e.identifier);switch(e.identifier){case Pe.LINEAR:this.setLinearFocus(e.linear);break;case Pe.GAUSSIAN:this.setGaussianFocus(e.gaussian);break;case Pe.RADIAL:this.setRadialFocus(e.radial);break;case Pe.MIRRORED:this.setMirroredFocus({mirrorAxisOrigin:e.mirrored.origin,clearAreaWidth:e.mirrored.size,blurRadius:e.mirrored.blurRadius,mirrorAxisDirection:Dh(e.mirrored.origin,e.mirrored.rotation)});break;default:break}});else throw new Error(`Focus identifier ${e.identifier} doesn't exist`)});this.updateCanvasControls=()=>{this.focusStore.updateFromEngineState(this.identifier)};this.getFocusStateForHistory=()=>{const e=this.editor.canvasStore.sizeVector,{linear:t}=this.focusStore.state,{radial:r}=this.focusStore.state,{mirrored:i}=this.focusStore.state,o=e,{magnitude:n}=o;return v(v({},this.focusStore.state),{linear:v(v({},t),{start:new O(t.start).divide(o),end:new O(t.end).divide(o)}),radial:v(v({},r),{center:new O(r.center).divide(o),radius:r.radius/n}),mirrored:v(v({},i),{origin:new O(i.origin).divide(o),size:i.size/n}),gaussian:v({},this.focusStore.state.gaussian)})};this.editor=e,this.focusStore=new Ci(this.editor);const t=this.editor.assetProvider.getAssets("focus");this.entityManager=new mr(t,v(v({},this.config),{categoryKey:"",itemKey:"thumbnailURI",flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("focus")}))}static get minIntensity(){return 0}static doesFocusIdentifierExist(e){return Object.keys(Pe).map(t=>Pe[t]).findIndex(t=>t===e)!==-1}get state(){return this.focusStore.state}get serializableState(){switch(this.identifier){case Pe.LINEAR:return{identifier:this.identifier,linear:this.focusStore.getEffectProperties()};case Pe.RADIAL:return{identifier:this.identifier,radial:this.focusStore.getEffectProperties()};case Pe.MIRRORED:const e=this.focusStore.getEffectProperties();return{identifier:this.identifier,mirrored:{blurRadius:e.blurRadius,origin:e.mirrorAxisOrigin,rotation:qe.toJS(this.state.mirrored.rotation),size:e.clearAreaWidth}};case Pe.GAUSSIAN:return{identifier:this.identifier,gaussian:this.focusStore.getEffectProperties()};default:return Pd}}get start(){return this.focusStore.state.linear.start}get startOnPreview(){const e=this.editor.applyFlipToPreview(this.focusStore.state.linear.start);return{x:Math.abs(e.x),y:Math.abs(e.y)}}get end(){return this.focusStore.state.linear.end}get endOnPreview(){const e=this.editor.applyFlipToPreview(this.focusStore.state.linear.end);return{x:Math.abs(e.x),y:Math.abs(e.y)}}get center(){return this.focusStore.state.radial.center}get radius(){return this.focusStore.state.radial.radius}get origin(){return this.focusStore.state.mirrored.origin}get rotation(){return this.focusStore.state.mirrored.rotation}get rotationOnPreview(){const{flipHorizontally:e,flipVertically:t}=this.editor.outputContainer.getData();return bg({rotation:this.focusStore.state.mirrored.rotation,flipHorizontally:e,flipVertically:t})}get size(){return this.focusStore.state.mirrored.size}get mirroredAreaWidth(){const{width:e,height:t}=this.editor.canvasStore.canvasSize;return Math.sqrt(e**2+t**2)*2}get identifier(){return this.state.identifier}get intensity(){return this.identifier==="identity"?Pd.gaussian.blurRadius:this.state[this.identifier].blurRadius}get relativeIntensity(){const{blurRadius:e}=this.identifier==="identity"?this.state.gaussian:this.state[this.identifier];return(e-je.minIntensity)*100/(this.maxIntensity-je.minIntensity)}get maxIntensity(){return this.editor.shortestOutputSide/10}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config[S.FOCUS]}get locale(){return this.editor.configStore.locale[S.FOCUS]}get items(){return this.entityManager.items}setGaussianFocus({blurRadius:e}){this.focusStore.setGaussianFocus({blurRadius:e})}setLinearFocus({start:e,end:t,blurRadius:r}){this.focusStore.setLinearFocus({start:e,end:t,blurRadius:r})}setRadialFocus({center:e,radius:t,blurRadius:r}){this.focusStore.setRadialFocus({center:e,radius:t,blurRadius:r})}setMirroredFocus({mirrorAxisOrigin:e,clearAreaWidth:t,blurRadius:r,mirrorAxisDirection:i}){this.focusStore.setMirroredFocus({mirrorAxisOrigin:e,clearAreaWidth:t,blurRadius:r,mirrorAxisDirection:i})}}m([qe.action],je.prototype,"selectFocus",2),m([qe.action],je.prototype,"changeIntensity",2),m([qe.action],je.prototype,"changeRelativeIntensity",2),m([qe.action],je.prototype,"clickableCanvas",2),m([qe.action],je.prototype,"pureReset",2),m([qe.action],je.prototype,"reset",2),m([qe.action],je.prototype,"setStart",2),m([qe.action],je.prototype,"setEnd",2),m([qe.action],je.prototype,"setCenter",2),m([qe.action],je.prototype,"setRadius",2),m([qe.action],je.prototype,"setOrigin",2),m([qe.action],je.prototype,"setSize",2),m([qe.action],je.prototype,"setRotation",2),m([qe.action],je.prototype,"updateStateFromHistory",2),m([qe.action],je.prototype,"updateStateFromSerialization",2),m([qe.action],je.prototype,"updateCanvasControls",2),m([qe.computed],je.prototype,"state",1),m([qe.computed],je.prototype,"start",1),m([qe.computed],je.prototype,"startOnPreview",1),m([qe.computed],je.prototype,"end",1),m([qe.computed],je.prototype,"endOnPreview",1),m([qe.computed],je.prototype,"center",1),m([qe.computed],je.prototype,"radius",1),m([qe.computed],je.prototype,"origin",1),m([qe.computed],je.prototype,"rotation",1),m([qe.computed],je.prototype,"rotationOnPreview",1),m([qe.computed],je.prototype,"size",1),m([qe.computed],je.prototype,"mirroredAreaWidth",1),m([qe.computed],je.prototype,"identifier",1),m([qe.computed],je.prototype,"intensity",1),m([qe.computed],je.prototype,"relativeIntensity",1),m([qe.computed],je.prototype,"maxIntensity",1),m([qe.computed],je.prototype,"isOptionSelected",1),m([qe.computed],je.prototype,"config",1),m([qe.computed],je.prototype,"locale",1),m([qe.computed],je.prototype,"items",1);const h$=ge.Button.TextSecondary,m$=p$.default.span`
  font-size: 14px;
  padding: 3px 1px 2px;
  color: ${e=>e.theme.canvasActionBar.foreground};
  display: flex;
  align-self: center;
`,WAe=({scale:e,active:t})=>{const{canZoomIn:r}=e,{canZoomOut:i}=e,{zoomLevel:o}=e,n=[S.TRANSFORM,S.BRUSH,S.FOCUS,S.STICKER,S.TEXT,S.TEXT_DESIGN].indexOf(t.tool)!==-1;return n?null:kg.default.createElement(ge.Bar.ButtonGroup,null,kg.default.createElement(h$,{ariaLabel:"Zoom out",isDisabled:!i,onClick:e.out},"-"),kg.default.createElement(m$,null,o," %"),kg.default.createElement(h$,{ariaLabel:"Zoom in",isDisabled:!r,onClick:e.in},"+"))};var f$=P("scale","active")(R(WAe));m$.defaultProps={theme:vo};const b$=g$.default(ge.Bar.ButtonGroup)`
  > :last-child {
    margin-left: 10px;
  }
  > :first-child {
    margin-left: 0;
  }
`,HAe=({config:e,editor:t,history:r,custom:i})=>{const o=e.locale.mainCanvasActions,{canUndo:n}=r,{canRedo:s}=r,a=e.config.mainCanvasActions,l=()=>{t.export()},c=()=>{if(t.activeStore.tool===S.TRANSFORM)return null;const b=i.getButton("mainCanvasActionUndo");return So.default.createElement(b,{key:"mainCanvasActionUndo",onClick:r.undo,isDisabled:!n,label:o.buttonUndo,ariaLabel:o.buttonUndo,icon:So.default.createElement(jf.undo,null)})},d=()=>{if(t.activeStore.tool===S.TRANSFORM)return null;const b=i.getButton("mainCanvasActionRedo");return So.default.createElement(b,{key:"mainCanvasActionRedo",onClick:r.redo,isDisabled:!s,label:o.buttonRedo,ariaLabel:o.buttonRedo,icon:So.default.createElement(jf.redo,null)})},u=()=>{const b=i.getButton("mainCanvasActionExport");return So.default.createElement(b,{key:"mainCanvasActionExport",onClick:l,label:o.buttonExport,ariaLabel:o.buttonExport,icon:So.default.createElement(jf.export,null)})},p=()=>{if(!e.displayCloseButton)return null;const b=i.getButton("mainCanvasActionClose");return So.default.createElement(b,{key:"mainCanvasActionClose","data-test":ee.MainBarButtonClose,onClick:t.close,label:o.buttonClose,ariaLabel:o.buttonClose,icon:So.default.createElement(jf.close,null)})},h=a.map(b=>{switch(b){case _e.UNDO:return c;case _e.REDO:return d;case _e.EXPORT:return u;case _e.CLOSE:return p;default:return null}});return So.default.createElement(ge.Bar.Index,null,So.default.createElement(b$,null,h[0]&&h[0]()||null,h[1]&&h[1]()||null),e.config.enableZoom?So.default.createElement(f$,null):null,So.default.createElement(b$,null,h[2]&&h[2]()||null,h[3]&&h[3]()||null))};var Ih=P("config","editor","history","custom")(R(HAe));const wD=_(require("react")),Og=_(require("react")),xD=_(Ge()),L$=_(require("styled-components")),xRe=L$.default.div`
  position: relative;
`;function VAe(e){return typeof e=="string"&&e.includes("%")}function KAe(e){return typeof e=="string"&&e.includes(".")&&parseFloat(e)===1}function xr(e,t){KAe(e)&&(e="100%");const r=VAe(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function P0(e){return e=parseFloat(e),(Number.isNaN(e)||e<0||e>1)&&(e=1),e}function Eg(e){return e<=1?`${Number(e)*100}%`:e}function yc(e){return e.length===1?`0${e}`:String(e)}function cD(e,t,r){return{r:xr(e,255)*255,g:xr(t,255)*255,b:xr(r,255)*255}}function dD(e,t,r){e=xr(e,255),t=xr(t,255),r=xr(r,255);const i=Math.max(e,t,r),o=Math.min(e,t,r);let n=0,s=0;const a=(i+o)/2;if(i===o)s=0,n=0;else{const l=i-o;s=a>.5?l/(2-i-o):l/(i+o);switch(i){case e:n=(t-r)/l+(t<r?6:0);break;case t:n=(r-e)/l+2;break;case r:n=(e-t)/l+4;break;default:break}n/=6}return{h:n,s,l:a}}function y$(e,t,r){let i,o,n;e=xr(e,360),t=xr(t,100),r=xr(r,100);function s(a,l,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+(l-a)*(6*c):c<1/2?l:c<2/3?a+(l-a)*(2/3-c)*6:a}if(t===0)o=r,n=r,i=r;else{const a=r<.5?r*(1+t):r+t-r*t,l=2*r-a;i=s(l,a,e+1/3),o=s(l,a,e),n=s(l,a,e-1/3)}return{r:i*255,g:o*255,b:n*255}}function uD(e,t,r){e=xr(e,255),t=xr(t,255),r=xr(r,255);const i=Math.max(e,t,r),o=Math.min(e,t,r);let n=0;const s=i,a=i-o,l=i===0?0:a/i;if(i===o)n=0;else{switch(i){case e:n=(t-r)/a+(t<r?6:0);break;case t:n=(r-e)/a+2;break;case r:n=(e-t)/a+4;break;default:break}n/=6}return{h:n,s:l,v:s}}function v$(e,t,r){e=xr(e,360)*6,t=xr(t,100),r=xr(r,100);const i=Math.floor(e),o=e-i,n=r*(1-t),s=r*(1-o*t),a=r*(1-(1-o)*t),l=i%6,c=[r,s,n,n,a,r][l],d=[a,r,r,s,n,n][l],u=[n,n,a,r,r,s][l];return{r:c*255,g:d*255,b:u*255}}function pD(e,t,r,i){const o=[yc(Math.round(e).toString(16)),yc(Math.round(t).toString(16)),yc(Math.round(r).toString(16))];return i&&o[0].charAt(0)===o[0].charAt(1)&&o[1].charAt(0)===o[1].charAt(1)&&o[2].charAt(0)===o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function $Ae(e){return Math.round(parseFloat(e)*255).toString(16)}function Vi(e){return parseInt(e,16)}function hD(e){return Vi(e)/255}function _$(e,t,r,i,o){const n=[yc(Math.round(e).toString(16)),yc(Math.round(t).toString(16)),yc(Math.round(r).toString(16)),yc($Ae(i))];return o&&n[0].charAt(0)===n[0].charAt(1)&&n[1].charAt(0)===n[1].charAt(1)&&n[2].charAt(0)===n[2].charAt(1)&&n[3].charAt(0)===n[3].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0)+n[3].charAt(0):n.join("")}const Oh={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},YAe="[-\\+]?\\d+%?",XAe="[-\\+]?\\d*\\.\\d+%?",vc=`(?:${XAe})|(?:${YAe})`,mD=`[\\s|\\(]+(${vc})[,|\\s]+(${vc})[,|\\s]+(${vc})\\s*\\)?`,fD=`[\\s|\\(]+(${vc})[,|\\s]+(${vc})[,|\\s]+(${vc})[,|\\s]+(${vc})\\s*\\)?`,Hn={CSS_UNIT:new RegExp(vc),rgb:new RegExp(`rgb${mD}`),rgba:new RegExp(`rgba${fD}`),hsl:new RegExp(`hsl${mD}`),hsla:new RegExp(`hsla${fD}`),hsv:new RegExp(`hsv${mD}`),hsva:new RegExp(`hsva${fD}`),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function on(e){return Boolean(Hn.CSS_UNIT.exec(String(e)))}function JAe(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;let t=!1;if(Oh[e])e=Oh[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};let r=Hn.rgb.exec(e);return r?{r:r[1],g:r[2],b:r[3]}:(r=Hn.rgba.exec(e),r?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Hn.hsl.exec(e),r?{h:r[1],s:r[2],l:r[3]}:(r=Hn.hsla.exec(e),r?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Hn.hsv.exec(e),r?{h:r[1],s:r[2],v:r[3]}:(r=Hn.hsva.exec(e),r?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Hn.hex8.exec(e),r?{r:Vi(r[1]),g:Vi(r[2]),b:Vi(r[3]),a:hD(r[4]),format:t?"name":"hex8"}:(r=Hn.hex6.exec(e),r?{r:Vi(r[1]),g:Vi(r[2]),b:Vi(r[3]),format:t?"name":"hex"}:(r=Hn.hex4.exec(e),r?{r:Vi(r[1]+r[1]),g:Vi(r[2]+r[2]),b:Vi(r[3]+r[3]),a:hD(r[4]+r[4]),format:t?"name":"hex8"}:(r=Hn.hex3.exec(e),r?{r:Vi(r[1]+r[1]),g:Vi(r[2]+r[2]),b:Vi(r[3]+r[3]),format:t?"name":"hex"}:!1)))))))))}function x$(e){let t={r:0,g:0,b:0},r=1,i=null,o=null,n=null,s=!1,a=!1;if(typeof e=="string"&&(e=JAe(e)),Array.isArray(e)){const[l,c,d]=e;on(l)&&on(c)&&on(d)&&(t=cD(l*255,c*255,d*255),s=!0,a="rgb"),e.length===4&&(r=e[3])}return typeof e=="object"&&(on(e.r)&&on(e.g)&&on(e.b)?(t=cD(e.r,e.g,e.b),s=!0,a=String(e.r).substr(-1)==="%"?"prgb":"rgb"):on(e.h)&&on(e.s)&&on(e.v)?(i=Eg(e.s),o=Eg(e.v),t=v$(e.h,i,o),s=!0,a="hsv"):on(e.h)&&on(e.s)&&on(e.l)&&(i=Eg(e.s),n=Eg(e.l),t=y$(e.h,i,n),s=!0,a="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(r=e.a)),r=P0(r),{ok:s,format:e.format||a,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}class nn{constructor(e="",t={}){if(e instanceof nn)return e;this.originalInput=e;const r=x$(e);this.originalInput=e,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=t.format||r.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}getAlpha(){return this.a}setAlpha(e){return this.a=P0(e),this.roundA=Math.round(100*this.a)/100,this}toHsv(){const e=uD(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}}toHsvString(){const e=uD(this.r,this.g,this.b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this.a===1?`hsv(${t}, ${r}%, ${i}%)`:`hsva(${t}, ${r}%, ${i}%, ${this.roundA})`}toHsl(){const e=dD(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}}toHslString(){const e=dD(this.r,this.g,this.b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this.a===1?`hsl(${t}, ${r}%, ${i}%)`:`hsla(${t}, ${r}%, ${i}%, ${this.roundA})`}toHex(e=!1){return pD(this.r,this.g,this.b,e)}toHexString(e=!1){return`#${this.toHex(e)}`}toHex8(e=!1){return _$(this.r,this.g,this.b,this.a,e)}toHex8String(e=!1){return`#${this.toHex8(e)}`}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbArray(){return[Math.round(this.r),Math.round(this.g),Math.round(this.b),this.a]}toRgbString(){const e=Math.round(this.r),t=Math.round(this.g),r=Math.round(this.b);return`rgba(${e}, ${t}, ${r}, ${this.roundA})`}toPercentageRgb(){const e=t=>`${Math.round(xr(t,255)*100)}%`;return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}}toPercentageRgbString(){const e=t=>Math.round(xr(t,255)*100);return this.a===1?`rgb(${e(this.r)}%, ${e(this.g)}%, ${e(this.b)}%)`:`rgba(${e(this.r)}%, ${e(this.g)}%, ${e(this.b)}%, ${this.roundA})`}toName(){if(this.a===0)return"transparent";if(this.a<1)return!1;const e=`#${pD(this.r,this.g,this.b,!1)}`;for(const t of Object.keys(Oh))if(Oh[t]===e)return t;return!1}toString(e){const t=Boolean(e);e=e||this.format;const r=this.a<1&&this.a>=0,i=!t&&r&&e&&(e.startsWith("hex")||e==="name");if(i)return e==="name"&&this.a===0?this.toName():this.toRgbString();switch(e){case"rgb":return this.toRgbString();case"prgb":return this.toPercentageRgbString();case"hex":case"hex6":return this.toHexString();case"hex3":return this.toHexString(!0);case"hex4":return this.toHex8String(!0);case"hex8":return this.toHex8String();case"hsl":return this.toHslString();case"hsv":return this.toHsvString();case"name":return this.toName();default:return this.toHexString()}}clone(){return new nn(this.toString())}}const tr=_(require("react")),Ms=_(require("styled-components")),Md=_(require("styled-components")),ZAe=Md.default.div`
  position: absolute;
  width: ${e=>e.theme.measurements.color.colorPicker.arrow.width}px;
  height: ${e=>e.theme.measurements.color.colorPicker.arrow.width/2}px;
  overflow: hidden;
  pointer-events: none;
  ${e=>e.direction==="bottom"?Md.css`
          bottom: 100%;
        `:Md.css`
          top: 100%;
        `}
  left: ${e=>e.arrowOffset}px;
  :after {
    content: '';
    position: absolute;
    width: ${e=>e.theme.measurements.color.colorPicker.arrow.width/2}px;
    height: ${e=>e.theme.measurements.color.colorPicker.arrow.width/2}px;
    left: 50%;
    ${e=>e.direction==="bottom"?Md.css`
            transform: translate(-50%, 50%) rotate(45deg);
          `:Md.css`
            transform: translate(-50%, -50%) rotate(45deg);
          `}
    background-color: ${e=>e.theme.colorPicker.listBackground};
    pointer-events: none;
  }
`;var w$=ZAe;const M0=_(require("react")),gD=_(require("styled-components")),QAe=gD.default.div`
  text-align: center;
  width: 28px;
  padding-left: 4px;
`,eRe=gD.default(A.Input.Text)`
  input {
    text-align: center;
    border-bottom: 1px solid
      ${e=>e.theme.colorPicker.inputBorderColor};
  }
`,tRe=({value:e,label:t,onChange:r})=>M0.default.createElement(QAe,null,M0.default.createElement(A.Input.Label,{label:t}),M0.default.createElement(eRe,{min:0,max:255,value:e,onChange:r}));var B0=tRe;const L0=_(require("react")),bD=_(require("styled-components")),rRe=bD.default.div`
  text-align: left;
  width: 62px;
`,iRe=bD.default(A.Input.Text)`
  input {
    text-align: left;
    border-bottom: 1px solid
      ${e=>e.theme.colorPicker.inputBorderColor};
  }
`,oRe=({value:e,label:t,onChange:r})=>L0.default.createElement(rRe,null,L0.default.createElement(A.Input.Label,{label:t}),L0.default.createElement(iRe,{value:e.toUpperCase(),onChange:r}));var S$=oRe;const Dg=_(require("react")),A$=_(require("styled-components")),C$=_(require("styled-components")),T$=C$.default.div.attrs(e=>({style:{left:e.position.x||`${0}px`,top:e.position.y||`${0}px`}}))`
  &&& {
    position: absolute;
    height: ${e=>e.theme.measurements.color.colorPicker.thumb.size}px;
    width: ${e=>e.theme.measurements.color.colorPicker.thumb.size}px;
    border-radius: 50%;
    border: 2px solid ${e=>e.theme.colorPicker.controlsColor};
    box-sizing: border-box;
    cursor: pointer;
    box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.11), 0 1px 3px 0 rgba(0, 0, 0, 0.46);
    z-index: 2;
    pointer-events: none;
  }
`;var Ah=T$;T$.defaultProps={theme:vo};const z0=_(require("react")),k$=_(Ik()),E$=_(require("react-dom")),D$=_(require("styled-components")),nRe=D$.default.div`
  position: relative;
  height: 14px;
  width: 100%;
`;class I$ extends z0.default.Component{constructor(e){super(e);this.onDragStart=e=>{this.setState({dragging:!0}),this.onPositionChange(e)};this.onPositionChange=e=>{const{onChange:t,config:r}=this.props,i=r.measurements.color.colorPicker.thumb.size/2,o=r.measurements.color.colorPicker.thumb.size;let n=0,s=0;n=e.clientX,s=e.clientY;const a=E$.default.findDOMNode(this);if(a&&a instanceof HTMLElement){const{top:l,left:c,width:d,height:u}=a.getBoundingClientRect();let p=n-c-i,h=s-l-i;p=Math.max(0,Math.min(d-o,p)),h=Math.max(0,Math.min(u-o,h)),t&&t({x:p,y:h}),this.setState({x:p,y:h})}};this.onDrag=e=>{this.state.dragging&&this.onPositionChange(e)};this.onDragStop=()=>{this.state.dragging&&this.setState({dragging:!1})};this.state={dragging:!1,x:e.defaultPosition.x,y:e.defaultPosition.y},this.debouncedOnDrag=k$.default(this.onDrag,10)}componentWillUnmount(){this.setState({dragging:!1})}render(){const{surface:e,setInnerRef:t,className:r,children:i}=this.props;return z0.default.createElement(nRe,{ref:t,className:r},z0.default.createElement(A.DraggableCore,{onStart:this.onDragStart,onDrag:this.debouncedOnDrag,onStop:this.onDragStop},e),i)}}I$.defaultProps={defaultPosition:{x:0,y:0}};var Rh=P("config","active")(R(I$));const O$=_(require("styled-components")),sRe=O$.css`
  position: absolute;
  top: 3px;
  left: 0;
  width: 100%;
  height: 8px;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
`;var Bd=sRe;const aRe=A$.default.div`
  ${Bd}
  background: linear-gradient(90deg, #F00 0%, #FF0 16.66%, #0F0 33.33%, #0FF 50%, #00F 66.66%, #F0F 83.33%, #F00 100%);
  height: 8px;
`;class lRe extends Dg.default.Component{constructor(e){super(e);this.onKnob=({x:e})=>{const{onChange:t,config:r}=this.props,{offsetWidth:i}=this.node,o=i-r.measurements.color.colorPicker.thumb.size,n=e*i/o,s=Math.max(0,Math.min(360,n/i*360));t(s),this.setState({x:e})};this.setPositionFromColor=e=>{const{config:t}=this.props,{offsetWidth:r}=this.node;let i=0;const o=r-t.measurements.color.colorPicker.thumb.size;this.node&&(i=e.toHsv().h*r/360),this.setState({x:i*o/r})};this.nodeRef=t=>{this.node=t},this.state={x:0}}render(){const{x:e}=this.state;return Dg.default.createElement(Rh,{surface:Dg.default.createElement(aRe,null),setInnerRef:this.nodeRef,onChange:this.onKnob},Dg.default.createElement(Ah,{position:{x:e,y:0}}))}}var R$=P("config")(R(lRe));const Fh=_(require("react")),yD=_(require("styled-components")),cRe=yD.default.div.attrs(e=>({style:{background:`linear-gradient(to left, ${e.transparentColor} 0%, ${e.opaqueColor} 100%)`}}))`
  ${Bd}
  z-index: 1;
`,dRe=yD.default.div.attrs(e=>({style:{backgroundImage:`url(${e.url})`}}))`
  ${Bd}
  z-index: 0;
  background-repeat: repeat-x;
  background-size: contain;
  background-position: left;
`;class uRe extends Fh.default.Component{constructor(e){super(e);this.onKnob=({x:e})=>{const{onChange:t,config:r}=this.props,{offsetWidth:i}=this.node,o=i-r.measurements.color.colorPicker.thumb.size,n=e*i/o,s=(i-n)/i,a=Math.round((s+Number.EPSILON)*100)/100,l=Math.min(1,Math.max(0,a));t(l),this.setState({x:e})};this.setPositionFromColor=e=>{const{config:t}=this.props,{offsetWidth:r}=this.node;let i=0;const o=r-t.measurements.color.colorPicker.thumb.size;this.node&&(i=(1-e.toHsv().a)*r),this.setState({x:i*o/r})};this.nodeRef=t=>{this.node=t},this.state={x:0}}render(){const{opaqueColor:e,transparentColor:t,config:r}=this.props,{x:i}=this.state,o=r.assetProvider.getPath("controls","/tiled-background.png");return Fh.default.createElement(Rh,{surface:Fh.default.createElement(cRe,{opaqueColor:e,transparentColor:t}),setInnerRef:this.nodeRef,onChange:this.onKnob},Fh.default.createElement(dRe,{url:o}),Fh.default.createElement(Ah,{position:{x:i,y:0}}))}}var F$=P("config")(R(uRe));const Ig=_(require("react")),vD=_(require("styled-components")),pRe=vD.default.div.attrs(e=>({style:{backgroundColor:`hsl(${e.hue}, 100%, 50%)`}}))`
  ${Bd}
  background: linear-gradient(to top, rgb(0, 0, 0), rgba(0, 0, 0, 0)),
   linear-gradient(to right, rgb(255, 255, 255), rgba(255, 255, 255, 0));
  height: ${e=>e.theme.measurements.color.colorPicker.saturationSlider.height}px;
  top: 0px;
`,hRe=vD.default(Rh)`
  height: ${e=>e.theme.measurements.color.colorPicker.saturationSlider.height}px;
  margin-top: 0px;
`;class mRe extends Ig.default.Component{constructor(e){super(e);this.setPositionFromColor=e=>{const{config:t}=this.props,r={x:0,y:0};if(this.node){const{s:i,v:o}=e.toHsv(),{offsetWidth:n,offsetHeight:s}=this.node,a=n-t.measurements.color.colorPicker.thumb.size,l=s-t.measurements.color.colorPicker.thumb.size,c=i*n,d=(1-o)*s;r.x=c*a/n,r.y=d*l/s}this.setState({position:r})};this.onChange=({x:e,y:t})=>{const{onChange:r,config:i}=this.props,{offsetHeight:o,offsetWidth:n}=this.node,s=n-i.measurements.color.colorPicker.thumb.size,a=o-i.measurements.color.colorPicker.thumb.size,l=e*n/s,c=t*o/a,d=Math.min(1,Math.max(0,l/n)),u=Math.min(1,Math.max(0,(o-c)/o));r(d,u),this.setState({position:{x:e,y:t}})};this.nodeRef=t=>{this.node=t},this.state={position:{x:0,y:0}}}render(){const{hue:e}=this.props,{position:t}=this.state;return Ig.default.createElement(hRe,{surface:Ig.default.createElement(pRe,{hue:e}),setInnerRef:this.nodeRef,onChange:this.onChange},Ig.default.createElement(Ah,{position:t}))}}var P$=P("config")(R(mRe));const fRe=Ms.default.div`
  position: absolute;
  left: ${e=>e.leftOffset}px;
  top: ${e=>e.topOffset}px;
  z-index: ${e=>e.theme.measurements.zIndex.input.list};
  display: none;
  opacity: 0;
  transition: opacity 0.3s ease-out;
  ${e=>e.show&&Ms.css`
      display: block;
      opacity: 1;
      transition: opacity 0.3s ease-out;
    `}
`,M$=Ms.default.div`
  &&& {
    position: absolute;
    ${e=>e.direction==="top"&&Ms.css`
        transform: translate(0, -100%);
      `}
    padding: 16px;
    box-sizing: border-box;
    box-shadow: ${e=>e.theme.colorPicker.listShadow};
    background: ${e=>e.theme.colorPicker.listBackground};
    border-radius: ${e=>e.theme.shape.radiusMedium}px;
    width: ${e=>e.theme.measurements.color.colorPicker.width}px;
    height: ${e=>e.theme.measurements.color.colorPicker.height}px;
    left: 8px;
    z-index: 1;
  }
`,gRe=Ms.default(R$)`
  margin-top: 8px;
`,bRe=Ms.default(F$)`
  margin-top: 8px;
`,yRe=Ms.default.div`
  display: flex;
  justify-content: space-between;
  margin-top: 30px;
`,vRe=Ms.default.div`
  display: flex;
`;class _D extends tr.default.Component{constructor(e){super(e);this.node=tr.default.createRef();this.saturationRef=null;this.hueRef=null;this.opacityRef=null;this.checkId=(e,t,r)=>{let i=e,o=0;for(;i.parentElement&&o<r;)if(i=i.parentElement,o+=1,i.id===t)return!0;return!1};this.handleOutsideClick=e=>{var o;const{onRequestClose:t,onAddSnapshot:r}=this.props,{color:i}=this.state;if((o=this.node.current)==null?void 0:o.contains(e.target))return;this.setState({hexInputValue:i.toHexString()}),t&&t(),r&&r()};this.onChange=e=>{const{onChange:t}=this.props;t({color:e.toRgbArray(),colorString:e.toRgbString()})};this.onHexValueChange=e=>{if(e.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i)){const t=new nn(e);this.onChange(t),this.setState({color:t,hue:t.toHsl().h}),this.saturationRef.current.setPositionFromColor(t),this.hueRef.current.setPositionFromColor(t)}this.setState({hexInputValue:e})};this.onAlphaChange=e=>{const{color:t}=this.state,r=t.setAlpha(e);this.onChange(r),this.setState({color:r,hexInputValue:r.toHexString()})};this.onHueChange=e=>{const{color:t}=this.state,{s:r,v:i,a:o}=t.toHsv(),n=new nn({h:e,s:r,v:i,a:o});this.onChange(n),this.setState({color:n,hexInputValue:n.toHexString(),hue:e})};this.onSaturationBrightnessChange=(e,t)=>{const{color:r,hue:i}=this.state,{a:o}=r.toHsv(),n=new nn({h:i,s:e,v:t,a:o});this.onChange(n),this.setState({color:n,hexInputValue:n.toHexString()})};this.onInputChange=e=>t=>{const{color:r}=this.state;if(t.match(/0*([0-9]|[1-8][0-9]|9[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/g)||!t.trim()){const i=r.toRgb();i[e]=parseInt(t,10)||0;const o=new nn(i);this.onChange(o),this.saturationRef.current.setPositionFromColor(o),this.hueRef.current.setPositionFromColor(o),this.setState({color:o,hexInputValue:o.toHexString(),hue:o.toHsl().h})}};const{color:t}=this.props,r=new nn(t);this.state={color:r,hue:r.toHsl().h,hexInputValue:r.toHexString()},this.saturationRef=tr.default.createRef(),this.hueRef=tr.default.createRef(),this.opacityRef=tr.default.createRef()}componentDidMount(){const{color:e}=this.state;document.addEventListener("mousedown",this.handleOutsideClick,!1),document.addEventListener("touchstart",this.handleOutsideClick,!1),document.addEventListener("keydown",this.handleOutsideClick,!1),this.saturationRef.current.setPositionFromColor(e),this.hueRef.current.setPositionFromColor(e),this.opacityRef.current.setPositionFromColor(e)}componentDidUpdate(e){const{color:t,show:r}=this.props;if(r&&!e.show){const i=new nn(t);this.saturationRef.current.setPositionFromColor(i),this.hueRef.current.setPositionFromColor(i),this.opacityRef.current.setPositionFromColor(i),this.setState({color:i,hue:i.toHsl().h,hexInputValue:i.toHexString()})}}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,!1),document.removeEventListener("touchstart",this.handleOutsideClick,!1),document.removeEventListener("keydown",this.handleOutsideClick,!1)}render(){const{show:e,showArrow:t,direction:r,arrowOffset:i,topOffset:o,leftOffset:n,labelHex:s,labelR:a,labelG:l,labelB:c,labelSliderHue:d,labelSliderOpacity:u}=this.props,{color:p,hexInputValue:h,hue:b}=this.state,{r:y,g:f,b:w}=p.toRgb(),T=p.clone().setAlpha(1).toRgbString(),C=p.clone().setAlpha(0).toRgbString();return tr.default.createElement("div",{ref:this.node},tr.default.createElement(fRe,{show:e,direction:r,leftOffset:n,topOffset:o},tr.default.createElement(M$,{direction:r},t&&tr.default.createElement(w$,{direction:r,arrowOffset:i}),tr.default.createElement(P$,{ref:this.saturationRef,hue:b,onChange:this.onSaturationBrightnessChange}),tr.default.createElement(A.Spacer,{count:2}),tr.default.createElement(A.Input.Label,{label:d}),tr.default.createElement(gRe,{ref:this.hueRef,onChange:this.onHueChange}),tr.default.createElement(A.Spacer,{count:2}),tr.default.createElement(A.Input.Label,{label:u}),tr.default.createElement(bRe,{ref:this.opacityRef,opaqueColor:T,transparentColor:C,onChange:this.onAlphaChange}),tr.default.createElement(yRe,null,tr.default.createElement(S$,{value:h,label:s,onChange:this.onHexValueChange}),tr.default.createElement(vRe,null,tr.default.createElement(B0,{value:y,label:a,onChange:this.onInputChange("r")}),tr.default.createElement(B0,{value:f,label:l,onChange:this.onInputChange("g")}),tr.default.createElement(B0,{value:w,label:c,onChange:this.onInputChange("b")}))))))}}_D.defaultProps={direction:"bottom",showArrow:!0};M$.defaultProps={theme:vo};let Ph=class extends Og.default.Component{constructor(e){super(e);this.onClick=e=>t=>{const{onAddSnapshot:r,config:i,onChange:o,colorPickerDirection:n,rect:s}=this.props,{activeIdentifier:a,showColorPicker:l,colorList:c}=this.state,d=c.find(u=>u.identifier===e);if(a===d.identifier&&!l){this.UIComponent||Promise.resolve().then(()=>_(B$())).then(({ColorPicker:K})=>{this.UIComponent=K,this.forceUpdate()});const{left:u,width:p,top:h,height:b}=t.currentTarget.getBoundingClientRect(),{left:y,top:f}=t.currentTarget.parentElement.getBoundingClientRect(),{colorPicker:w}=i.measurements.color,T=w.arrow.width/2;let C=u-y+p/2-2,F=n==="bottom"?h-f+b+T:h-f-T,k=-24;const E=w.width-w.arrow.width-12;C>E&&(k+=C-E,C-=k);let W=!0;if(n==="bottom"&&s){const K=s.height,D=s.top,B=h-D,Y=K-(B+b),de=i.measurements.color.colorPicker.height+T;Y<de&&(F=Y-de),B+F<B+b/2&&(F+=T,W=!1)}this.setState({showColorPicker:!0,showColorPickerArrow:W,arrowOffset:C,topOffset:F,leftOffset:k})}else l?this.setState({showColorPicker:!1}):(o(d.color),this.setState({activeIdentifier:e}),r&&r())};this.onChange=({color:e,colorString:t})=>{const{onChange:r}=this.props,{activeIdentifier:i,colorList:o}=this.state,n=o.findIndex(s=>s.identifier===i);if(n!==-1){const s=[...o];s[n]={identifier:o[n].identifier,colorString:t,color:e},this.setState({colorList:s})}r(e)};this.onChangeColorPicker=({color:e,colorString:t})=>{this.onChange({color:[e[0]/255,e[1]/255,e[2]/255,e[3]],colorString:t})};this.closeColorPicker=()=>{this.setState({showColorPicker:!1})};this.getColorPicker=()=>{const{activeColor:e,labelsColor:t,colorPickerDirection:r,onAddSnapshot:i}=this.props,{showColorPicker:o,showColorPickerArrow:n,arrowOffset:s,leftOffset:a,topOffset:l}=this.state;if(!this.UIComponent)return null;const c=this.UIComponent;return Og.default.createElement(c,{color:xD.toJS(e),show:o,showArrow:n,direction:r,arrowOffset:s,leftOffset:a,topOffset:l,labelHex:t.hex,labelR:t.r,labelG:t.g,labelB:t.b,labelSliderOpacity:t.sliderOpacity,labelSliderHue:t.sliderHue,onChange:this.onChangeColorPicker,onRequestClose:this.closeColorPicker,onAddSnapshot:i})};const{colors:t}=this.props;this.state={activeIdentifier:"",activeSprite:"",colorList:[...t],showColorPicker:!1,showColorPickerArrow:!1,arrowOffset:0,leftOffset:0,topOffset:0},this.UIComponent=null}static getDerivedStateFromProps({activeSprite:e,activeColor:t},{activeSprite:r,colorList:i}){if(e!==r||!e){const o=$a(xD.toJS(t)),n=i.find(({colorString:s})=>s===o);return{activeSprite:e,activeIdentifier:n?n.identifier:""}}return null}render(){const{isDisabled:e,custom:t,config:r}=this.props,{activeIdentifier:i,colorList:o}=this.state,n=t.getColorItem(),s=r.assetProvider.getPath("controls","/tiled-background.png"),a=o.map(l=>Og.default.createElement(n,{key:`${l.colorString}-item-${l.identifier}`,isActive:l.identifier===i,isDisabled:e,onClick:this.onClick(l.identifier),color:l.colorString,label:l.identifier,tiledBackgroundUrl:s}));return Og.default.createElement(xRe,{"data-test":ee.ColorList},a,this.getColorPicker())}};Ph.defaultProps={colorPickerDirection:"bottom",isDisabled:!1},Ph=m([P("config","custom"),R],Ph);const rr=e=>wD.default.createElement(zv.Consumer,null,({rect:t})=>wD.default.createElement(Ph,v(v({},e),{rect:t}))),Kn=_(require("react")),z$=_(require("react"));function Pr(){return z$.useContext(mf)}const Ns=_(require("react")),Ag=_(require("react")),SD=_(require("styled-components")),wRe=SD.default(ge.Controls.Container)`
  cursor: none;
`,SRe=SD.default.div`
  position: absolute;
  width: 20px;
  height: 20px;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  border-width: 2px;
  border-style: solid;
  box-shadow: 0 0 0 0.5px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 1);
`;class CRe extends Ag.default.Component{constructor(e){super(e);this.INITIAL_POSITION={x:void 0,y:void 0};this.state=v(v({},this.INITIAL_POSITION),{isDrawing:!1});this.containerElementRef=null;this.getCursorCoordinates=e=>{let t=0,r=0;if(e.type.indexOf("touch")!==-1){const s=e;if(!s.touches.length)return v(v({},this.INITIAL_POSITION),{height:0,width:0});t=s.touches[0].clientX,r=s.touches[0].clientY}else{const s=e;t=s.clientX,r=s.clientY}const i=this.containerElementRef.current.getBoundingClientRect(),o=t-i.left,n=r-i.top;return{x:o,y:n,height:i.height,width:i.width}};this.draw=e=>{e.preventDefault(),e.stopPropagation(),this.touchDraw(e)};this.touchDraw=e=>{const{x:t,y:r}=this.getCursorCoordinates(e);t!==void 0&&r!==void 0&&(this.setState({x:t,y:r}),this.state.isDrawing&&this.brushTool.strokePosition({x:t,y:r}))};this.start=()=>{this.brushTool.clickableCanvas(!1),this.setState({isDrawing:!0}),this.brushTool.beginStroke()};this.stop=e=>{this.state.isDrawing&&(e.preventDefault(),e.stopPropagation(),this.setState({isDrawing:!1}),this.brushTool.endStroke(),this.brushTool.clickableCanvas(!0))};this.setInitialPosition=()=>{this.setState(v({},this.INITIAL_POSITION))};this.mouseOut=e=>{const{config:t}=this.props;e.preventDefault(),e.stopPropagation();const r=this.brushTool.sizeOnScreenSpace/2,{x:i,y:o,height:n,width:s}=this.getCursorCoordinates(e);i&&o&&((i<0||o<0||i>s-r||o>n-r||o<t.measurements.mainCanvasActionBar.height)&&this.setInitialPosition())};this.touchEnd=e=>{e.preventDefault(),e.stopPropagation();const{x:t,y:r}=this.state;t&&r&&this.setInitialPosition()};this.getCursor=()=>{const{x:e,y:t}=this.state;if(e&&t){const r=$a(this.brushTool.color),i=`${this.brushTool.sizeOnScreenSpace}px`,o={left:`${this.state.x}px`,top:`${this.state.y}px`,borderColor:r,height:i,width:i};return Ag.default.createElement(SRe,{style:o,"data-test":ee.Cursor})}return null};this.containerElementRef=Ag.default.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,!1),document.addEventListener("touchend",this.stop,{passive:!1})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,!1),document.removeEventListener("touchend",this.stop,!1)}get brushTool(){return this.props.brushTool}render(){return Ag.default.createElement(wRe,{ref:this.containerElementRef,"data-test":ee.CursorContainer,onMouseMove:this.draw,onTouchMove:this.touchDraw,onMouseDown:this.start,onTouchStart:this.start,onMouseOut:this.mouseOut,onTouchEnd:this.touchEnd},this.getCursor())}}var N$=P("brushTool","config")(R(CRe));const q$=_(require("react")),Bs=_(require("react")),U$=_(require("styled-components")),sn=(e,t)=>e!==void 0&&t!==void 0&&!Number.isNaN(e)&&!Number.isNaN(t),CD=U$.default(ge.Controls.Knob)`
  margin-top: -${e=>e.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
  margin-left: -${e=>e.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
`,{Container:TRe}=ge.Controls;class kRe extends Bs.default.Component{constructor(){super(...arguments);this.start=(e,{x:t,y:r})=>{sn(t,r)&&this.focusTool.setStart({x:t,y:r})};this.end=(e,{x:t,y:r})=>{sn(t,r)&&this.focusTool.setEnd({x:t,y:r})};this.onKnob1DragStart=(e,t)=>{this.focusTool.clickableCanvas(!1),this.start(e,t)};this.onKnob1DragStop=(e,t)=>{this.addSnapshot(t,this.historyLocale.focusPosition),this.start(e,t),this.focusTool.clickableCanvas(!0)};this.onKnob2DragStart=(e,t)=>{this.focusTool.clickableCanvas(!1),this.end(e,t)};this.onKnob2DragStop=(e,t)=>{this.addSnapshot(t,this.historyLocale.focusPosition),this.end(e,t),this.focusTool.clickableCanvas(!0)};this.addSnapshot=({x:e,y:t},r)=>{sn(e,t)&&this.focusTool.toolSnapshot(r)};this.getLine=()=>{const{height:e,width:t}=this.props.canvas.canvasSize,r=this.focusTool.startOnPreview,i=this.focusTool.endOnPreview;return Bs.default.createElement("svg",{focusable:"false",height:e,width:t},Bs.default.createElement("line",{x1:r.x,y1:r.y,x2:i.x,y2:i.y,strokeWidth:"2",stroke:"currentColor"}))}}get focusTool(){return this.props.focusTool}get historyLocale(){return this.focusTool.locale.history}render(){return Bs.default.createElement(TRe,null,Bs.default.createElement(ge.Controls.Line,null,this.getLine()),Bs.default.createElement(A.Draggable,{bounds:"parent",position:this.focusTool.startOnPreview,onStart:this.onKnob1DragStart,onDrag:this.start,onStop:this.onKnob1DragStop},Bs.default.createElement(CD,null)),Bs.default.createElement(A.Draggable,{bounds:"parent",onStart:this.onKnob2DragStart,onDrag:this.end,onStop:this.onKnob2DragStop,position:this.focusTool.endOnPreview},Bs.default.createElement(CD,null)))}}CD.defaultProps={theme:vo};var j$=P("canvas","focusTool")(R(kRe));const Ld=_(require("react"));let Rg=class extends Ld.default.Component{constructor(){super(...arguments);this.getKnobPosition=()=>{const{focusTool:e}=this.props,{origin:t,size:r}=e,i=r/2,o=Math.PI/2+e.rotation;return{x:t.x+i*Math.cos(o),y:t.y+i*Math.sin(o)}};this.onArea=(e,{x:t,y:r})=>{const{editor:i}=this.props,o=i.configStore.measurements.canvasControls.knob.size;if(sn(t,r)){const{canvas:n,focusTool:s}=this.props,{size:a,mirroredAreaWidth:l}=s,c=t+l/2,d=r+a/2,u=new O(this.getKnobPosition()),p=new O({x:t,y:r}),h=p.subtract(new O(this.areaPosition)),b=u.add(h);b.x>o&&b.x<n.canvasSize.width-o&&(b.y>o&&b.y<n.canvasSize.height-o&&s.setOrigin({x:c,y:d}))}};this.onKnob=(e,{x:t,y:r})=>{const{focusTool:i}=this.props;if(sn(t,r)){i.clickableCanvas(!1);const o=new O(i.origin),n=new O(t,r),s=o.subtract(n),a=s.magnitude,l=Math.PI/2+Math.atan2(s.y,s.x);i.setSize(a*2),i.setRotation(l)}};this.onAreaDragStop=(e,t)=>{const{focusTool:r}=this.props;this.addSnapshot(t,r.locale.history.focusPosition),this.onArea(e,t),r.clickableCanvas(!0)};this.onKnobDragStop=(e,t)=>{const{focusTool:r}=this.props;this.addSnapshot(t,r.locale.history.focusSize),this.onKnob(e,t),r.clickableCanvas(!0)};this.addSnapshot=({x:e,y:t},r)=>{const{focusTool:i}=this.props;sn(e,t)&&i.toolSnapshot(r)}}get areaPosition(){const{focusTool:e}=this.props,{origin:t,size:r,mirroredAreaWidth:i}=e;return{x:t.x-i/2,y:t.y-r/2}}render(){const{x:e,y:t}=this.areaPosition,{focusTool:r}=this.props;return Ld.default.createElement(ge.Controls.Container,null,Ld.default.createElement(A.Draggable,{bounds:"parent",onStart:this.onKnob,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:this.getKnobPosition()},Ld.default.createElement(ge.Controls.Knob,null)),Ld.default.createElement(A.Draggable,{onStart:this.onArea,onDrag:this.onArea,onStop:this.onAreaDragStop,position:{x:e,y:t},rotation:r.rotation},Ld.default.createElement(ge.Controls.Area,{"data-test":ee.Focus,height:r.size,width:r.mirroredAreaWidth})))}};Rg=m([P("focusTool","canvas","editor"),R],Rg);const zd=_(require("react"));let Fg=class extends zd.default.Component{constructor(){super(...arguments);this.state={knobAngle:2.35};this.onCircle=(e,{x:t,y:r})=>{if(sn(t,r)){const{focusTool:i}=this.props;i.setCenter({x:t+i.radius,y:r+i.radius})}};this.onKnob=(e,{x:t,y:r})=>{if(sn(t,r)){const{focusTool:i}=this.props,o=new O(t,r),n=new O(i.center.x,i.center.y),s=n.subtract(o),a=s.magnitude,l=-Math.atan2(s.y,s.x);this.setState({knobAngle:l}),i.setRadius(a)}};this.onCircleDragStart=(e,t)=>{const{focusTool:r}=this.props;r.clickableCanvas(!1),this.onCircle(e,t)};this.onCircleDragStop=(e,t)=>{const{focusTool:r}=this.props;this.addSnapshot(t,r.locale.history.focusPosition),this.onCircle(e,t),r.clickableCanvas(!0)};this.onKnobDragStart=(e,t)=>{const{focusTool:r}=this.props;r.clickableCanvas(!1),this.onKnob(e,t)};this.onKnobDragStop=(e,t)=>{const{focusTool:r}=this.props;this.addSnapshot(t,r.locale.history.focusSize),this.onKnob(e,t),r.clickableCanvas(!0)};this.addSnapshot=({x:e,y:t},r)=>{const{focusTool:i}=this.props;sn(e,t)&&i.toolSnapshot(r)}}componentDidMount(){this.setState({knobAngle:2.35})}render(){const{focusTool:e}=this.props,{knobAngle:t}=this.state,{center:r,radius:i}=e,o={x:r.x-i,y:r.y-i},n=Math.PI-t,s={x:r.x+i*Math.cos(n),y:r.y+i*Math.sin(n)};return zd.default.createElement(ge.Controls.Container,null,zd.default.createElement(A.Draggable,{bounds:"parent",onStart:this.onKnobDragStart,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:s},zd.default.createElement(ge.Controls.Knob,null)),zd.default.createElement(A.Draggable,{onStart:this.onCircleDragStart,onDrag:this.onCircle,onStop:this.onCircleDragStop,position:o},zd.default.createElement(ge.Controls.Circle,{"data-test":ee.Focus,radius:i})))}};Fg=m([P("focusTool","canvas"),R],Fg);const G$=R(()=>{const{focusTool:e}=Pr(),{state:t}=e,r=()=>{switch(t.identifier){case Pe.LINEAR:return j$;case Pe.RADIAL:return Fg;case Pe.MIRRORED:return Rg;default:return null}},i=r();return e.isOptionSelected&&i?q$.default.createElement(i,null):null}),Ls=_(require("react")),jd=_(require("react")),Nd=_(require("react")),ERe=({stickerTool:e,custom:t})=>{const r=e.locale.canvasActions,i=c=>{c.stopPropagation(),e.delete()},o=c=>{c.stopPropagation(),e.bringToFront()},n=c=>{c.stopPropagation(),e.flipHorizontally()},s=({key:c,customButtonKey:d,onClick:u,label:p,icon:h})=>{const b=t.getButton(d);return Nd.default.createElement(b,{key:c,onClick:u,label:p,ariaLabel:p,icon:h})},a={[_e.BRING_TO_FRONT]:{key:_e.BRING_TO_FRONT,customButtonKey:"canvasActionBringToFront",onClick:o,label:r.buttonBringToFront,icon:Nd.default.createElement(nt.bringToFront,null)},[_e.FLIP]:{key:_e.FLIP,customButtonKey:"canvasActionFlip",onClick:n,label:r.buttonFlipHorizontal,icon:Nd.default.createElement(nt.flipHorizontal,null)},[_e.DUPLICATE]:{key:_e.DUPLICATE,customButtonKey:"canvasActionDuplicate",onClick:()=>e.duplicate(),label:r.buttonDuplicate,icon:Nd.default.createElement(nt.duplicate,null)},[_e.DELETE]:{key:_e.DELETE,customButtonKey:"canvasActionDelete",onClick:i,label:r.buttonDelete,icon:Nd.default.createElement(nt.delete,null)}},l=e.config.canvasActions.map(c=>a[c]?s(a[c]):null);return e.isStickerSelected?Nd.default.createElement(ge.Bar.ButtonGroup,null,l):null};var W$=P("stickerTool","custom")(R(ERe));const Ud=_(require("react")),DRe=({textTool:e,sprite:t,custom:r})=>{const i=e.locale.canvasActions,o=c=>{c.stopPropagation(),e.delete()},n=c=>{c.stopPropagation(),e.bringToFront()},s=({key:c,customButtonKey:d,onClick:u,label:p,icon:h})=>{const b=r.getButton(d);return Ud.default.createElement(b,{key:c,onClick:u,label:p,ariaLabel:p,icon:h})},a={[_e.EDIT]:{key:_e.EDIT,customButtonKey:"canvasActionEdit",onClick:()=>e.setEditMode(!0),label:i.buttonEdit,icon:Ud.default.createElement(nt.edit,null)},[_e.BRING_TO_FRONT]:{key:_e.BRING_TO_FRONT,customButtonKey:"canvasActionBringToFront",onClick:n,label:i.buttonBringToFront,icon:Ud.default.createElement(nt.bringToFront,null)},[_e.DUPLICATE]:{key:_e.DUPLICATE,customButtonKey:"canvasActionDuplicate",onClick:()=>e.duplicate(),label:i.buttonDuplicate,icon:Ud.default.createElement(nt.duplicate,null)},[_e.DELETE]:{key:_e.DELETE,customButtonKey:"canvasActionDelete",onClick:o,label:i.buttonDelete,icon:Ud.default.createElement(nt.delete,null)}},l=e.config.canvasActions.map(c=>a[c]?s(a[c]):null);return t.isSpriteText?Ud.default.createElement(ge.Bar.ButtonGroup,null,l):null};var H$=P("textTool","sprite","custom")(R(DRe));const _c=_(require("react")),IRe=({textDesignTool:e,custom:t})=>{const r=e.locale.canvasActions,i=c=>{c.stopPropagation(),e.delete()},o=c=>{c.stopPropagation(),e.bringToFront()},n=c=>{c.stopPropagation(),e.invertBackground()},s=({key:c,customButtonKey:d,onClick:u,label:p,icon:h})=>{const b=t.getButton(d);return _c.default.createElement(b,{key:c,onClick:u,label:p,ariaLabel:p,icon:h})},a={[_e.EDIT]:{key:_e.EDIT,customButtonKey:"canvasActionEdit",onClick:()=>e.setEditMode(!0),label:r.buttonEdit,icon:_c.default.createElement(nt.edit,null)},[_e.BRING_TO_FRONT]:{key:_e.BRING_TO_FRONT,customButtonKey:"canvasActionBringToFront",onClick:o,label:r.buttonBringToFront,icon:_c.default.createElement(nt.bringToFront,null)},[_e.INVERT]:{key:_e.INVERT,customButtonKey:"canvasActionInvert",onClick:n,label:r.buttonInvert,icon:_c.default.createElement(nt.flipHorizontal,null)},[_e.DUPLICATE]:{key:_e.DUPLICATE,customButtonKey:"canvasActionDuplicate",onClick:()=>e.duplicate(),label:r.buttonDuplicate,icon:_c.default.createElement(nt.duplicate,null)},[_e.DELETE]:{key:_e.DELETE,customButtonKey:"canvasActionDelete",onClick:i,label:r.buttonDelete,icon:_c.default.createElement(nt.delete,null)}},l=e.config.canvasActions.map(c=>a[c]?s(a[c]):null);return e.isTextDesignSelected?_c.default.createElement(ge.Bar.ButtonGroup,null,l):null};var V$=P("textDesignTool","custom")(R(IRe));let Pg=class extends jd.default.Component{constructor(e){super(e);this.actionsRef=null;this.spriteControlPosition=()=>{const{config:e,sprite:t,canvas:{canvasSize:r}}=this.props,{controlPadding:i,controlOffset:o}=e.measurements.canvasControls.sprite,{x:n,y:s}=t.position,{height:a,width:l}=t.currentSprite.size,c=t.rotationWRTOutputRotation,d=this.actionsRef.current;let u=new O(0,0);if(d){const b=d.getBoundingClientRect();u=new O(b.width/2+o,b.height+o)}const p=Math.abs(l*Math.sin(c))+Math.abs(a*Math.cos(c)),h=new O(n,s-p/2-i-o).clamp(u,new O(r.width,r.height).subtract(u));return{left:h.x,top:h.y}};this.getSpriteControls=()=>{const{sprite:e}=this.props;switch(e.tool){case S.TEXT:return jd.default.createElement(H$,null);case S.TEXT_DESIGN:return jd.default.createElement(V$,null);case S.STICKER:return jd.default.createElement(W$,null);default:return null}};this.actionsRef=jd.default.createRef(),this.state={isMounted:!1}}componentDidMount(){this.setState({isMounted:!0})}render(){const{sprite:e}=this.props,{isMounted:t}=this.state,r=!e.isDragMode&&!e.isEditMode,i=this.spriteControlPosition();return jd.default.createElement(ge.Controls.SpriteActionsWrapper,{"data-test":ee.SpriteActions,ref:this.actionsRef,show:r&&t,style:v({},i)},this.getSpriteControls())}};Pg=m([P("sprite","config","editor","canvas"),R],Pg);const Vn=_(require("react")),{Corner:N0}=ge.Controls,{Draggable:U0}=A;let TD=new O(0,0),kD=new O(0,0);const K$=R(()=>{const{config:e,sprite:t}=Pr(),{leftTopPosition:r,leftBottomPosition:i,rightTopPosition:o,rightBottomPosition:n}=t,{borderWidth:s}=e.measurements.canvasControls.corner,a=({clientX:u,clientY:p})=>{u!==void 0&&p!==void 0&&t.onCornerDrag(kD.subtract(TD.subtract(new O(u,p))))},l=u=>{switch(u){case"leftTop":return r;case"leftBottom":return i;case"rightTop":return o;case"rightBottom":return n;default:return r}},c=(u,p)=>{const{clientX:h,clientY:b}=u;TD=new O(h,b),kD=new O(l(p)),t.clickableCanvas(!1),t.setDragMode(!0)},d=()=>{t.clickableCanvas(!0),t.setDragMode(!1),t.spriteSnapshot("size"),TD=new O(0,0),kD=new O(0,0)};return Vn.default.createElement(Vn.default.Fragment,null,Vn.default.createElement(U0,{onStop:d,onDrag:a,onStart:u=>c(u,"leftTop")},Vn.default.createElement(N0,{"data-test":ee.SpriteTopLeft,vertical:"top",horizontal:"left",borderWidth:s})),Vn.default.createElement(U0,{onStop:d,onDrag:a,onStart:u=>c(u,"leftBottom")},Vn.default.createElement(N0,{"data-test":ee.SpriteBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:s})),Vn.default.createElement(U0,{onStop:d,onDrag:a,onStart:u=>c(u,"rightTop")},Vn.default.createElement(N0,{"data-test":ee.SpriteTopRight,vertical:"top",horizontal:"right",borderWidth:s})),Vn.default.createElement(U0,{onStop:d,onDrag:a,onStart:u=>c(u,"rightBottom")},Vn.default.createElement(N0,{"data-test":ee.SpriteBottomRight,vertical:"bottom",horizontal:"right",borderWidth:s})))}),qd=_(require("react")),ED=_(require("styled-components")),ORe=ED.default.img`
  position: absolute;
  left: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`,ARe=ED.default.img`
  position: absolute;
  right: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`;let DD=new O(0,0),ID=new O(0,0);const RRe=({sprite:e,config:t})=>{const r=e.leftMidPosition,i=e.rightMidPosition,o=t.assetProvider.getPath("controls","/arrow-left.png"),n=t.assetProvider.getPath("controls","/arrow-right.png"),s=(c,d)=>{e.setDragMode(!0),e.clickableCanvas(!1);const{clientX:u,clientY:p}=c;DD=new O(u,p),ID=new O(d==="left"?r:i)},a=()=>{e.clickableCanvas(!0),e.setDragMode(!1),e.addSnapshot(Ie.EDIT,e.textDesignLocale.padding),DD=new O(0,0),ID=new O(0,0)},l=({clientX:c,clientY:d})=>{if(c!==void 0&&d!==void 0){const u=ID.subtract(DD.subtract(new O(c,d)));e.onPaddingDrag(u)}};return qd.default.createElement(qd.default.Fragment,null,qd.default.createElement(A.Draggable,{onStart:c=>s(c,"left"),onDrag:l,onStop:a},qd.default.createElement(ORe,{src:o})),qd.default.createElement(A.Draggable,{onStart:c=>s(c,"right"),onDrag:l,onStop:a},qd.default.createElement(ARe,{src:n})))};var $$=P("sprite","config")(R(RRe));const OD=_(require("react")),Y$=_(require("styled-components")),X$=Y$.default(ge.Controls.Knob)`
  margin-left: -11px;
  margin-top: 0px;
  cursor: url(${e=>e.url}) 9 9, ew-resize;
  &:before {
    top: unset;
    bottom: 0px;
    left: calc(
      50% - ${e=>e.theme.measurements.canvasControls.knob.size/2}px
    );
  }
`;let AD=new O(0,0),RD=new O(0,0);const FRe=({config:e,sprite:t,snapping:r})=>{const i=t.rightBottomHandlePosition,o=t.leftBottomHandlePosition,n={x:(i.x+o.x)/2,y:(i.y+o.y)/2},s=({clientX:u,clientY:p})=>{AD=new O(u,p),RD=new O(n),t.setDragMode(!0),t.clickableCanvas(!1)},a=()=>{t.clickableCanvas(!0),t.setDragMode(!1),t.spriteSnapshot("rotation"),r.hideRotationGuides(),AD=new O(0,0),RD=new O(0,0)},l=({clientX:u,clientY:p})=>{if(u!==void 0&&p!==void 0){const h=RD.subtract(AD.subtract(new O(u,p))),b=t.position,y=new O(b.x,b.y),f=h.subtract(y),w=Math.atan2(f.y,f.x)-Math.PI/2,T=r.snapToRotation(w,f,t.currentRect);t.setRotation(T)}},c=u=>{l(u)},d=e.assetProvider.getPath("controls",`/${c9()?"rotate-windows":"rotate-osx"}.png`);return OD.default.createElement(A.Draggable,{onStart:s,onDrag:c,onStop:a},OD.default.createElement(X$,{url:d}))};X$.defaultProps={theme:vo};var J$=P("sprite","snapping","config")(R(FRe));const Gd=_(require("react")),j0=_(require("styled-components")),Z$=j0.default(ge.Controls.Width)`
  cursor: ew-resize;
  @media all and (min-width: 0) and (max-width: 599px) {
    display: none;
  }
`,Q$=j0.default(Z$)`
  left: -3px;
  top: calc(
    50% - ${e=>e.theme.measurements.canvasControls.width.size/2}px
  );
`,eY=j0.default(Z$)`
  right: -3px;
  top: calc(
    50% - ${e=>e.theme.measurements.canvasControls.width.size/2}px
  );
`;let FD=new O(0,0),PD=new O(0,0);const PRe=({sprite:e,textTool:t})=>{const r=e.leftMidPadPosition,i=e.rightMidPadPosition,o=(a,l)=>{e.setDragMode(!0),e.clickableCanvas(!1);const{clientX:c,clientY:d}=a;FD=new O(c,d),PD=new O(l==="left"?r:i)},n=()=>{e.clickableCanvas(!0),e.setDragMode(!1),e.addSnapshot(Ie.EDIT,e.textLocale.width),t.updateDefaultFontSize(),FD=new O(0,0),PD=new O(0,0)},s=({clientX:a,clientY:l})=>{if(a!==void 0&&l!==void 0){const c=PD.subtract(FD.subtract(new O(a,l)));e.onWidthDrag(c)}};return Gd.default.createElement(Gd.default.Fragment,null,Gd.default.createElement(A.Draggable,{onStart:a=>o(a,"left"),onDrag:s,onStop:n},Gd.default.createElement(Q$,null)),Gd.default.createElement(A.Draggable,{onStart:a=>o(a,"right"),onDrag:s,onStop:n},Gd.default.createElement(eY,null)))};Q$.defaultProps={theme:vo};eY.defaultProps={theme:vo};var tY=P("sprite","textTool")(R(PRe));const{Draggable:MRe}=A;let MD=new O(0,0),BD=new O(0,0);const rY=R(()=>{const{active:e,config:t,snapping:r,sprite:i}=Pr(),o=({clientX:f,clientY:w})=>{const T=BD.subtract(MD.subtract(new O(f,w))),{x:C,y:F}=r.snapToPosition({x:T.x,y:T.y},i.currentRect);i.setPosition({x:C,y:F})},n=f=>{const{clientX:w,clientY:T}=f;MD=new O(w,T),BD=new O(i.position),i.setDragMode(!0),r.updateGuides()},s=()=>{MD=new O(0,0),BD=new O(0,0),i.setDragMode(!1),i.spriteSnapshot("position"),r.hidePositionGuides()},a=f=>{f.preventDefault(),f.stopPropagation(),i.setEditMode(!0)},l=()=>{const f=e.tool,w=i.tool;return i.isSpriteSelected&&f===w};if(!l())return null;const{isSpriteText:c}=i,d=i.isSpriteTextDesign&&i.textDesignToolStore.isInverted,{height:u,width:p}=i.size,h=i.spritePosition,b=i.rotationWRTOutputRotation,{controlPadding:y}=t.measurements.canvasControls.sprite;return Ls.default.createElement(ge.Controls.Container,null,Ls.default.createElement(MRe,{onStart:n,onDrag:o,onStop:s,rotation:b,position:h},Ls.default.createElement(ge.Controls.Sprite,{"data-test":ee.Sprite,onDoubleClick:a,height:u,width:p},c&&Ls.default.createElement(tY,null)||null,d&&Ls.default.createElement($$,null)||null,Ls.default.createElement(K$,null),Ls.default.createElement(ge.Controls.RotateHandle,{x:p/2+y/2},Ls.default.createElement(J$,null)))),Ls.default.createElement(Pg,null))}),Za=_(require("react")),ni=_(require("react")),Ja=_(require("styled-components")),{GridLine:q0}=ge.Crop,BRe=ge.Crop.Mask,{Draggable:Mg}=A,xc=3,LRe=Ja.default(cd)`
  left: ${xc}px;
  top: ${xc}px;
  @media all and (min-width: 0) and (max-width: 599px) {
    left: 6px;
    top: 6px;
  }
`,zRe=Ja.default(cd)(e=>{const{desktop:t}=e.theme.measurements.canvasControls.corner.touchable,r=t/4-e.borderWidth;return Ja.css`
    left: ${r-t}px;
    top: ${xc}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: 6px;
    }
  `}),NRe=Ja.default(cd)(e=>{const{desktop:t}=e.theme.measurements.canvasControls.corner.touchable,r=t/4-e.borderWidth;return Ja.css`
    left: ${r-t}px;
    top: ${r-t}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: -30px;
    }
  `}),URe=Ja.default(cd)(e=>{const{desktop:t}=e.theme.measurements.canvasControls.corner.touchable,r=t/4-e.borderWidth;return Ja.css`
    top: ${r-t}px;
    left: ${xc}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      top: -30px;
      left: 6px;
    }
  `}),jRe=({transformTool:e})=>{const{leftTopRespectFlip:t,leftBottomRespectFlip:r,rightTopRespectFlip:i,rightBottomRespectFlip:o}=e,{height:n,width:s}=e.cropMaskSize,{maxCropMaskSize:a,defaultCropMaskPosition:l}=e,{isFlippedHorizontal:c,isFlippedVertical:d}=e,u=a.width/2,p=a.height/2,h=v(v({},a),{left:l.x,top:l.y}),b={height:n,width:s},y=e.isDragMode?{transition:"unset"}:{},f=Q=>c?u*2-Q:Q,w=Q=>d?p*2-Q:Q,T=(Q,oe,ae)=>{const ze=f(Q),St=w(oe);switch(wt.getFlippedEdgeIndex(ae,c,d)){case 0:e.onLeftTop({x:ze,y:St});break;case 1:e.onLeftBottom({x:ze,y:St});break;case 2:e.onRightTop({x:ze,y:St});break;case 3:e.onRightBottom({x:ze,y:St});break}},C=(Q,oe,ae)=>{e.setDragMode(!0),e.clickableCanvas(!1),T(Q,oe,ae)},F=(Q,oe,ae)=>{T(Q,oe,ae)},k=(Q,oe,ae)=>{e.setDragMode(!1),T(Q,oe,ae),e.clickableCanvas(!0),e.addLocalSnapshot()},E=(Q,{x:oe,y:ae})=>{C(oe,ae,0)},W=(Q,{x:oe,y:ae})=>{F(oe,ae,0)},K=(Q,{x:oe,y:ae})=>{k(oe,ae,0)},D=(Q,{x:oe,y:ae})=>{C(oe,ae,1)},B=(Q,{x:oe,y:ae})=>{F(oe,ae,1)},Y=(Q,{x:oe,y:ae})=>{k(oe,ae,1)},de=(Q,{x:oe,y:ae})=>{C(oe,ae,2)},he=(Q,{x:oe,y:ae})=>{F(oe,ae,2)},ue=(Q,{x:oe,y:ae})=>{k(oe,ae,2)},ct=(Q,{x:oe,y:ae})=>{C(oe,ae,3)},H=(Q,{x:oe,y:ae})=>{F(oe,ae,3)},L=(Q,{x:oe,y:ae})=>{k(oe,ae,3)},M=(Q,oe)=>{const ae=f(Q+s/2)-s/2,ze=w(oe+n/2)-n/2;e.changePosition({x:ae,y:ze})},q=(Q,{x:oe,y:ae})=>{e.setDragMode(!0),e.clickableCanvas(!1),M(oe,ae)},G=(Q,{x:oe,y:ae})=>{M(oe,ae)},we=(Q,{x:oe,y:ae})=>{e.setDragMode(!1),M(oe,ae),e.clickableCanvas(!0),e.addLocalSnapshot()};return ni.default.createElement("div",{style:v(v({},h),{position:"absolute"})},ni.default.createElement(Mg,{bounds:"parent",position:t,onStart:q,onDrag:G,onStop:we},ni.default.createElement(BRe,{style:v(v({},b),y)})),ni.default.createElement(q0,{style:v({left:t.x+s/3,top:t.y,height:n,width:1},y)}),ni.default.createElement(q0,{style:v({left:t.x+s/3*2,top:t.y,height:n,width:1},y)}),ni.default.createElement(q0,{style:v({left:t.x,top:t.y+n/3,height:1,width:s},y)}),ni.default.createElement(q0,{style:v({left:t.x,top:t.y+n/3*2,height:1,width:s},y)}),ni.default.createElement(Mg,{bounds:"parent",position:v({},t),onStart:E,onDrag:W,onStop:K},ni.default.createElement(LRe,{"data-test":ee.CropTopLeft,vertical:"top",horizontal:"left",borderWidth:xc,style:y})),ni.default.createElement(Mg,{bounds:"parent",position:r,onStart:D,onDrag:B,onStop:Y},ni.default.createElement(URe,{"data-test":ee.CropBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:xc,style:y})),ni.default.createElement(Mg,{bounds:"parent",position:i,onStart:de,onDrag:he,onStop:ue},ni.default.createElement(zRe,{"data-test":ee.CropTopRight,vertical:"top",horizontal:"right",borderWidth:xc,style:y})),ni.default.createElement(Mg,{bounds:"parent",position:o,onStart:ct,onDrag:H,onStop:L},ni.default.createElement(NRe,{"data-test":ee.CropBottomRight,vertical:"bottom",horizontal:"right",borderWidth:xc,style:y})))};var iY=P("transformTool")(R(jRe));const Sc=_(require("react")),Mh=_(require("styled-components")),zs=_(require("react")),wc=_(require("styled-components")),oY=wc.default.div`
  overflow: hidden;
  display: none;
  position: relative;
  transform: unset !important;
  vertical-align: bottom;
  ${e=>e.isVisible&&wc.css`
      display: inline-block;
    `}
`,qRe=wc.default.div`
  position: relative;
  cursor: pointer;
  display: flex;
  align-self: center;
`,GRe=wc.default.div`
  font-size: 15px;
  display: none;
  width: 33px;
  text-align: right;
  color: ${e=>e.theme.foreground};
  z-index: 1;
  margin: 2px;
  ${e=>e.isVisible&&wc.css`
      display: inline-block;
    `}
`,WRe=wc.default.div`
  transform: translate(0, 0) !important;
`;class HRe extends zs.default.Component{constructor(){super(...arguments);this.SLIDER_WIDTH=213;this.MAX_ROTATION=45;this.DEGREES_PER_PIXEL=this.MAX_ROTATION*2/this.SLIDER_WIDTH;this.drag=(e,{x:t})=>{const{flipHorizontally:r,flipVertically:i}=this.transformTool.rotateFlipState;r!==i&&(t*=-1);const o=this.transformTool.defaultAngle-t*this.DEGREES_PER_PIXEL,n=Math.min(this.MAX_ROTATION,Math.max(o,this.MAX_ROTATION*-1));this.transformTool.setRotation(parseInt(`${n}`,10))};this.stop=()=>{this.transformTool.setDefaultAngle(this.transformTool.rotationInDegrees),this.transformTool.addLocalSnapshot()}}get transformTool(){return this.props.transformTool}render(){const{config:e,canvasWidth:t,transformTool:r}=this.props,{flipHorizontally:i,flipVertically:o}=this.transformTool.rotateFlipState,n=!e.isLayoutAdvanced||e.isLayoutAdvanced&&t>e.measurements.canvas.transform.minSliderWidth,s=!e.isLayoutAdvanced||e.isLayoutAdvanced&&t>e.measurements.canvas.transform.minValueWidth,a=this.transformTool.rotationInDegrees-this.transformTool.defaultAngle,l=i===o?a*-1:a,c=i!==o?r.rotationInDegrees*-1:r.rotationInDegrees;return zs.default.createElement(qRe,{"data-test":ee.RotateSlider},zs.default.createElement(A.Draggable,{axis:"x",position:{x:0,y:0},onStart:this.drag,onDrag:this.drag,onStop:this.stop,updateOnPosition:!0,disabled:!n},zs.default.createElement(WRe,null,zs.default.createElement(oY,{isVisible:n},zs.default.createElement(nt.dots,{width:90,height:15,x:l})),zs.default.createElement(GRe,{isVisible:s},c,"\xB0"),zs.default.createElement(oY,{isVisible:n},zs.default.createElement(nt.dots,{width:90,height:15,x:l})))))}}var nY=P("transformTool","config")(R(HRe));const VRe=Mh.default(nt.rotate)`
  height: 16px;
  width: 16px;
  transform: scaleX(-1);
`,KRe=Mh.default(nt.rotate)`
  height: 16px;
  width: 16px;
`,$Re=Mh.default(nt.flipHorizontal)`
  height: 16px;
  width: 16px;
`,YRe=Mh.default(nt.flipVertical)`
  height: 16px;
  width: 16px;
`,XRe=Mh.default.div`
  display: inline-flex;
  transform: scale(0.9);
`,JRe=({transformTool:e,config:t,custom:r,canvas:i})=>{const o=e.locale.transformActions,n=i.canvasSize.width,s=!t.isLayoutAdvanced||t.isLayoutAdvanced&&n>t.measurements.canvas.transform.minFlipWidth,a=({customButtonKey:h,onClick:b,label:y,icon:f})=>{const w=r.getButton(h);return Sc.default.createElement(w,{key:y,onClick:b,label:y,ariaLabel:y,icon:f,style:{margin:"0 5px"}})},l=a({label:o.buttonFlipHorizontal,icon:Sc.default.createElement($Re,null),onClick:()=>{e.flipHorizontally()},customButtonKey:"transformActionFlipHorizontal"}),c=a({label:o.buttonFlipVertical,icon:Sc.default.createElement(YRe,null),onClick:()=>{e.flipVertically()},customButtonKey:"transformActionFlipVertical"}),d=a({label:o.buttonRotateClockwise,icon:Sc.default.createElement(VRe,null),onClick:e.rotateClockwise,customButtonKey:"transformActionRotateClockwise"}),u=a({label:o.buttonRotateAntiClockwise,icon:Sc.default.createElement(KRe,null),onClick:e.rotateAntiClockwise,customButtonKey:"transformActionRotateAntiClockwise"}),p=t.isLayoutAdvanced?{transform:"rotate(180deg)"}:{};return Sc.default.createElement(XRe,{style:p,"data-test":ee.FlipRotateControls},e.config.enableFlip&&s&&l||null,e.config.enableFlip&&s&&c||null,e.config.enableRotation&&Sc.default.createElement(nY,{canvasWidth:n})||null,e.config.enableRotation&&u||null,e.config.enableRotation&&d||null)};var Bg=P("transformTool","config","custom","canvas")(R(JRe));const ZRe=ge.Bar.Index,{Backdrop:G0}=ge.Crop,QRe=({transformTool:e,canvas:t,config:r})=>{const{leftTopRespectFlip:i,leftBottomRespectFlip:o,rightTopRespectFlip:n}=e,{height:s}=e.cropMaskSize,{height:a,width:l}=t.canvasSize,{defaultCropMaskPosition:c}=e,d=e.isDragMode?{transition:"unset"}:{};return Za.default.createElement(ge.Controls.Container,null,Za.default.createElement(G0,{style:v({left:0,top:0,width:l,height:i.y+c.y},d)}),Za.default.createElement(G0,{style:v({left:0,top:i.y+c.y,width:c.x+i.x,height:s},d)}),Za.default.createElement(G0,{style:v({left:n.x+c.x,top:n.y+c.y,width:l-n.x-c.x,height:s},d)}),Za.default.createElement(G0,{style:v({left:0,top:o.y+c.y,width:l,height:a-o.y-c.y+r.measurements.basicToolControlBar.controlsBarHeight},d)}),Za.default.createElement(iY,null),r.isLayoutAdvanced?Za.default.createElement(ZRe,{bottom:!0},Za.default.createElement(Bg,null)):null)};var sY=P("transformTool","canvas","config")(R(QRe));const W0=_(require("react")),H0=_(require("styled-components")),eFe=H0.default(ge.Controls.Container)`
  ${e=>e.activeCursor?H0.css`
          cursor: move;
        `:""}
  z-index: ${e=>e.theme.measurements.zIndex.canvas.crop.dragImage};
`;class tFe extends W0.default.Component{constructor(e){super(e);this.INITIAL_POSITION={x:void 0,y:void 0};this.state=v(v({},this.INITIAL_POSITION),{isDragging:!1});this.containerRef=null;this.getCursorCoordinates=e=>{let t=0,r=0;if(e.type.indexOf("touch")!==-1){const s=e;if(!s.touches.length)return this.INITIAL_POSITION;t=s.touches[0].clientX,r=s.touches[0].clientY}else{const s=e;t=s.clientX,r=s.clientY}const i=this.containerRef.current.getBoundingClientRect(),o=t-i.left,n=r-i.top;return{x:o,y:n}};this.move=e=>{if(this.scale.canDrag){const{x:t,y:r}=this.getCursorCoordinates(e);if(t!==void 0&&r!==void 0&&this.state.isDragging){const i={x:this.state.x-t,y:this.state.y-r};this.scale.setOffset(i)}}};this.touchDrag=e=>{if(this.scale.canDrag){const{x:t,y:r}=this.getCursorCoordinates(e);t!==void 0&&r!==void 0&&this.setState({x:t,y:r,isDragging:!0})}};this.drag=e=>{e.preventDefault(),this.touchDrag(e)};this.stop=()=>{this.scale.canDrag&&(this.scale.savePosition(),this.setState(v(v({},this.INITIAL_POSITION),{isDragging:!1})))};this.touchEnd=e=>{e.preventDefault(),e.stopPropagation();const{x:t,y:r}=this.state;t&&r&&this.setState(v(v({},this.INITIAL_POSITION),{isDragging:!1}))};this.containerRef=W0.default.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,!1),document.addEventListener("touchend",this.stop,{passive:!0})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,!1),document.removeEventListener("touchend",this.stop,!1)}get scale(){return this.props.scale}render(){return W0.default.createElement(eFe,{ref:this.containerRef,onMouseMove:this.move,onTouchMove:this.move,onMouseDown:this.drag,onTouchStart:this.touchDrag,onMouseUp:this.stop,onTouchEnd:this.touchEnd,activeCursor:this.scale.canDrag})}}var aY=P("scale")(R(tFe));const lY=R(({children:e})=>{const t=Ns.useRef(null),{active:r,sprite:i,canvas:o}=Pr(),n=()=>{switch(r.tool){case S.FOCUS:return Ns.default.createElement(G$,null);case S.TEXT:case S.TEXT_DESIGN:case S.STICKER:return Ns.default.createElement(rY,null);case S.BRUSH:return Ns.default.createElement(N$,null);case S.TRANSFORM:return Ns.default.createElement(sY,null);default:return Ns.default.createElement(ge.Controls.Container,null,Ns.default.createElement(aY,null))}},s=c=>{if(c.preventDefault(),c.stopPropagation(),o.isCanvasClickable){let{clientX:d}=c,{clientY:u}=c;if(c.type.indexOf("touch")!==-1){const y=c;if(!y.touches.length)return;d=y.touches[0].clientX,u=y.touches[0].clientY}const p=t.current.getBoundingClientRect(),h=d-p.left,b=u-p.top;o.getContainersAtPreviewPoint({x:h,y:b})}},a=c=>{c.code==="Tab"&&i.selectLast()},{canvasSize:l}=o;return Ns.default.createElement(ge.Controls.Wrapper,{"aria-hidden":!0,ref:t,onClick:s,onKeyDown:a,height:l.height,width:l.width},e,n())}),V0=_(require("react")),Wd=_(require("styled-components")),cY=_(require("react")),dY=_(require("styled-components")),rFe=dY.default.div`
  display: ${({isVisible:e})=>e?"block":"none"};
  position: absolute;
  z-index: ${e=>e.theme.measurements.zIndex.canvas.snappingGuide};
`,iFe=({isVisible:e,className:t})=>cY.default.createElement(rFe,{isVisible:e,className:t});var LD=iFe;const oFe=Wd.default(LD)`
  background: ${e=>e.theme.snapping.positionGuideColor};
  ${e=>e.direction==="horizontal"?Wd.css`
        width: 100%;
        height: 2px;
        top: ${()=>e.position}px;
      `:Wd.css`
      width: 2px;
      height: 100%;
      left: ${()=>e.position}px;
    `}
`,nFe=Wd.default(LD)`
  border: none;
  border-top: 2px dashed ${e=>e.theme.snapping.rotationGuideColor};
  background: transparent;
  left: ${({position:e})=>e.x}px;
  top: ${({position:e})=>e.y}px;
  transform: rotate(${({rotation:e})=>e}rad);
  width: 200%;
`,sFe=Wd.default.div`
  position: absolute;
  width: ${({width:e})=>e}px;
  height: ${({height:e})=>e}px;
  top: ${({top:e})=>e}px;
  left: ${({left:e})=>e}px;
  overflow: hidden;
`,aFe=({snapping:e,editor:t})=>{const{width:r,height:i}=t.getPreviewSize(),{x:o,y:n}=e.previewTopLeftPosition,s=e.positionGuides.map(({direction:l,value:c,isVisible:d},u)=>V0.default.createElement(oFe,{key:`positionGuide-${u}`,direction:l,position:c,isVisible:d})),a=e.rotationGuides.find(({isVisible:l})=>l);return V0.default.createElement(sFe,{width:r,height:i,left:o,top:n},s,V0.default.createElement(nFe,{key:"rotationGuide",rotation:a?a.value:0,position:a?a.position:{x:0,y:0},isVisible:!!a}))};var uY=P("snapping","editor")(R(aFe));const pY=_(require("react")),hY=_(require("styled-components")),lFe=hY.default.img`
  z-index: 5;
  position: absolute;
  bottom: 30px;
  right: 30px;
`,mY=()=>pY.default.createElement(lFe,{alt:"watermark","data-test":ee.Watermark,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKoAAAAvCAYAAABzC1HpAAAAAXNSR0IArs4c6QAAE7NJREFUeAHtnFlQVdeax2UQBAEFFUUccJ7nAVEDGqNeZxOjiRq9uVpJ3apUP3TnPZXHVKUqlYcMLzGxTXc00XSMxjjjiAMqKijOAiLiBIID89C//9J1antyjp6g1zZde1cd9t5rr/Fb/+//DXtr0EcffbS4WbNmvfi5hyuBl1UCF4KZmQvSl3V73HlZCfQSUN3DlcBLLwEXqC/9FrkTlARcoLo4+EtIwAXqX2Kb3Em6QHUx8JeQgAvUv8Q2uZN87kA9dOhQjzVr1kzyJ9qLFy+29ffMLXcl4E8CzxWot27diszIyJh67dq1XuvWrUt1DnrkyJGkr7/+ehHlS69fvx7lfOZeuxJ4mgRC0tLSJjytUqDPAeGUmJiYkpkzZ24+cODAqxUVFTVhYWFVP/7446zz588P6dWrV3ZVVVV4cHBwZVJS0u1A+3XruRJoEqM2NDQ027lz56CrV6+2siLMyclJhFGTpk+fvicxMfHu1KlTf83KypqwevXqpdHR0Xfee++9FdOmTTvWoUOHQhg1wbZzz64EApFAaCCVvOvcvHkzClM++ejRow0tW7Ys7datWy6g7QFjHo+Nja1S/QEDBhTjjx4pKCjoO3/+/PSQkJBGlbdr1+7W6dOnh5aWlkbU1NSEwLj1rVq1qrLPVcc9XAl4S6BJph9QxgLAJFjyG9i1EkAOuHfvXrvXX399U0RERJ0dBOAWHTt2bNCDBw8aAXD57t27h5w5c2bY3bt3O1A+6sSJEyN0xk1IyczMHAzb5lGv0rZ3z64ErASaxKj4nuEwYDX+aA0+7hmYMaywsLCrZVPbuVgSZs0CkCknT55MiYqKKh00aNBR/NPi1q1bV+ASVOOzhl66dKn9li1b5nXs2LHctnXPrgScEmgSUOvr6x/zbfFN4zHpN5wd2+uuXbsWHz58OGrYsGG78VuP23J7joyMrMNnbRcXF1cYHh5eb8vdsysBpwSaBNTmzZvXNzY2esAKcEOJ5BucHdvrffv2jYFBs32B1Na5fPlyn549e56298/jjA/d7cqVK4mDBw8+hwty63n0+SL6KC4ujiYXPRiLUzZx4kQjE1yjnjdu3OgwZMiQM927dy95EfN42cYIGKgS4NmzZ7ty7lhSUpKA39nmk08++Q/Mu/FJAW+t9+IImhJg227Lli1b4f3M3p87dy7+zp07ibQ/acuedEYpgkiDTZS7Yetp7DZt2pSMHj36DIFZtcoPHjw4ARclNjQ0tP7/Cqhbt24dRuDZ3s7TnlHqxlmzZu2S62TL7JkAtT8yScbXL7dAxSK9Wl1dHdWiRYvKFwnU8vLy8L179yrwbSsiio+Pv/7KK6/kyApqvr/88svY+/fvx9i5YxGrkf+dUaNGncNCPhZr7Nmzpx/7EUHmJ8vWJ86Jpf/klJSUoxDVE9OVAQFVgNu4ceNCJlHMZK/CUplc32My9xFgc5irw/Hjx9NYUIZzgrBpWp8+fTKdZXaS9kwQNVz9woCvskEDWcj2Tp06+fVVWVxcXl7eUNvenvPz85uhSEPfeeedNfKVtbF6hl9839ZpylkKytr/BuBr6XsDWQqflsNX38gtGYWK9PUMRT/gC6iUm3kDSs+8qXezkoPsylX1RZ/BP/zww0zO4aQDtz1JXr7GDqSsqKgohjeMiwHfg4SEhDzk2eLUqVNj2EsBMV99kBsfhayvMb9S3Qu0xCr9SFWOJ3bZRL08lesg4O4LqYnMDFCV9Vm/fv0b9FeM8j0RpGofEFD79etXTN60DNNzZOzYsRfV0HmIsVhYZwKicYsWLdqhZ5irXsg2etKkSR4NcrbRNcBqj3/aCwCsREtr1F5515EjR6ZbNvFuA/uajVS5XAoEWQlrdRIrs8lxMFJv5ngG5m2uOgD1gc5NPQj0OiLUzmqv4DDQfsT8FqSwfUHbtm2v27aAsKp9+/b37L3zDOv8AajLly9f76yDzGL49VQZaw53Pnte19u3b5/AnpS///77q+26AWu6jSPEtrh/IcQeR52AVDkAnwtJTe3du/d3kJCxcLRtiQyMonEdsnbt2tlSxgULFmyFrZ867YCAqo4A6zGi92RfQNUoAHI/Wv4ubJdFwr8MhkwViDZs2JDmbxa8aoXxe2ahsWbT3nrrrXTMXP6uXbvmqo0vsJLa8gB1ypQphsG18M8///zf5DeXlZXF3r5921OHOdTAiMn4eImAthwG2udkMvzjNmQk+gDG9mJN2KmAcXO0ZtyWlrDIMM0lKCiogfX9bfbs2ekSvl56YM4GyhUCLNH0eWfcuHHHLLuprdrpwKqcTk1NPfvw7vG/Yi6UWim7NmQ9CgBqjGoAEqNgKGCL33//PY3x6+fNm7eLOTYgn3G2F15Zj2GuB617k5ub24EUYE/axbP2Klj44vjx48/b+vv37++DLOLHjBlzEms2CGDFLV26dKM3WJBHQo8ePbItSNXeglTXuH9Gxqz7MSKQbMDCTr0qR67d7LpFWuTcTd2ffvppCnsWuWTJktXOPtWvvyMgoKoxVJ7Dpo0mF9p/woQJud4d6m0UFH48PT09TQJn4fWwRj4bGgIrDef5WYT/GIsQMBTLfPz888/B5GD3YTrCWNxIGOgKCuFzY6ljAKCNw2wYPwighNngjrJSJ+synxkwm2kDgJuxyZVz5sw5oPmjTEmsZ5ZlX5UBvN7KYrz99ts7L1y40BHgd1S5+oe5uymlBphCYY2Z3HfXMx1sXFdcoIELFy78T4GVdh6gspkeM/6w9sO/8tFY+wI7P8ZNss9RKiMr5NMRczpA5XV1dXtYQ0vm2MfWYw498Wf36F5+IIHYVCsLlaEIfZFHBj7xYd3z/DX6Cae8J+uIxb83L2j0zHnAdg9YT2/GOmWJxPncyhh5/2Ft8jdRqBrqxKqNrEttbW2E3LBff/11DHNOgpR+8E5nOvv3vg4YqPLNkpOTdxGkTMFHzbMgcXb42muvZX7zzTfLZConT578P0OHDjVUDxOFMdlQGGG/s76utVmbNm2a/v3338/kpUEcQr8nX9CfplnTiKbX024kihBMH2bjxHoI6Sr+agc7DmmzK7DNeX0sg7BawFzmta9YGEd+ukCK332JtWXiNowQUGk/hDUcGDhwYAH+VhECT5QfPWPGjM1iHsA9VCBlDnW020ZZAwCYLADAWCMAeTrto+0cCKrm8TO31G2EldfAsjfpZ5xAylrvQQRbWX9L5DtNFS37oJiGubTxlNUCoLouXbpkA6LBgKyS7yp+lmIwXgRzmCKQdu7c+TR7lMN9ihQIFysZS5L5iB2D1L/myvr2Y45LtCbvA8bdi7s3Z9WqVcvpLxdrcYRU4x1b75Fla4RUKmyZ86y5IW/jflnrwouiLljRPsxlrbU8zjZPuv7jDJ9QG4Eydm040d40aYl3VdE+iz+EUKsQlAGp6vTv3/8sGtxPEb53Gy0eYK5l4W1ZXPW777673h9I1RYTYjYOQYcBolQClvFsZjs9I+rfof5gWMNmKNeDxYsXb0bol2BzI2Q22rAwLkYvAZdmjbD5Vr3yxUwZplVfzDdOLgLgN34pa7sFQMr0jMBgkM6MlS3TJtOKQuSrTCZcZzsHXQOeEPuTwqKMYpsWKIX5F8AjRozYN3z48Cu8DMlXfR2WhS1QkYlhLoENOZkMC/3cFeBVH1AO0BjIvppX1tvp6xq+Y6aeaUzGikEpgiU3lSGrdECeKdno3vvQfDDN32ElT4iVsSB/h7H723qybMi3whfI5RbxIicKmZmg2FoXlCmB+rUQg99g2fbvfQ4YqLBPX8zoHDEIEwlasWLFfF/Aw787iTBrqe9ZFCZ2NEItZ6ETvCegewECd2Ibm6zgysNEvuoCVANCbRzgyGPRl/Glst58881VjH1KbQCJAbOcdStIa16t7wfTxKmuvlWwJoh5eyJ6rs3LBwn8UT3jX0lBYfXWKsPFuaazDsYxbTmbdtpIldNPneZmfwSb3wrwAEd9GGWH8YtUl400bXTNnMx4FvCs19zrmbUqMs+61yHfXGfAcd1mJrzW08Canf0/5oaprffBK+37gH435LFC0b2shiyR6mkfJF/vNrrH2kRJabC6RrGZm5EhLtd6yQeim+GL6Hz1ZcsCMv1ywGEgrPnkXzDnhZiBM/gaqaQXFuKzlcgs2Q6ZYJA0GDM6Ef9qoEyzNhbtXIV5X8Jie/jSYjEA7HiaaDMVwfxm+/M+W+Dg854nYtzt/Vz3jGc2xClI2pky+UmqYwEvFte9Dvw/E8jomk0yWs/GGCHbdjKxPDYAQ/k8bRnTtKWeaWf7B2D35LOpT+dhN09lKI+Rn/X7VIZJfmyejOUBhZWBc32MZ+bpXA9zNW6OXCJlGQiyEtS3DuIDD8gflvj/CyE8gPUPszfzYNfWyuVKWZyK4mwNVgZJQQnkDNvj0kTpXgqKe4jHtmkBQfZYLFmGs92TrgNiVCL5bgxUw8+whTSWiPugqJ9FFGJ+cuyvb9++2ZiN/ZiddJjitD5WIa2VQb0KUhkZRJqp/rSJPg/gz3RjPMN23hOXSbHMaH047zq6txsJAMzm2lSKnlFmTD8bbzZKSiSTqGe4EsakA7bb8sFhs+ZSOj2jzNSHsRR8GHeAuRozr/kCMhN0sRkFqm+BIzBpvfanNehgHp4gBh8yUWVkILrrrE2VP6prFMUqnccXtGVOGdj1wORxGkM/5aXVh4JTmKwZcvAwKooQMFDVB4plFNEqsNbnVBTV0aFPPxUgg4PDNo6R+wJWzHgQUhHuYQZzS1YwaxoF8CcgRoUNtxAMDNWHI5BergC1Y8eOZDbtJqZhj79xcMYHs5i7mPVTqkPAcIr2w3EhhsDOJ7zbaWHKDhBQDEcbTT7WWQdhRcDYBlSW4ZzP7bUFKhtpgMqmGQbUc4QzHpBUw3L5CGsMII388ssvl0vobKRhHJRsv+pa/1TXfOU1Fp82VP4om1wA+yaRrptAUNNDyqjquDA3sBYmz2yBCqt1/vTTT/9dfdiDiHclrHRTlkg+I0HVbOZVyoa2VR0pB67V3Ef5UzN3ANAHeZaS+skRQ6oewB7422+/1cvXJKecp6yD+vjiiy/+ATDruNa8mjFnw1xiNt3DulUwvSEd3XsfemWL4rUGVBfFxGR7OrHW8QRVp5BdnepLxrhdRY8sjHFbUNhO2dnZKci9BIwctf3KwjlBrcCOFFkn3MNp9Pm9XAxb1985IKCqMe/qT5BLzd+2bdur33777TIJkyj+v/11LDYi1TSWV25bYQjDQNJqXpftYWOmM/lIgF6mfhRBItQYgNiBdrEwQKGvfqnjSW4DamNifdWzAQN+lQmg5INSv1CgYax2AiqKUMrG7mUTxsFQ0fppA5nfdvzwy+pXm4IfepZItS/tlJc0Jpq3ZztwfWbJp1afqqvMgYIyrVHHo0DNXHv9aUTJquSX68UGZtJE6lIYNncd6bOZagvQDYOxkRdQ7njmF2UVDiXLQbZpmrNcLfVPOu8C8zxKoDcC2caqjPnehxy2wG7mgyHGMPJjXcZ3VB1fB8+rAGuyglX7HEuRjY/pISVkHEH6bqR+tg7t7pDkz3JkGMwjQN2SZx6fWDJ64403fl+5cuUS3MeZvFRYY+Vm+/I+B/GfpH3sXfi0eyLASWhnLN+jrvNXF4d5HKyT4KvOZ5999k+0zoAIoDYHnHEs8CjaewMXokjA8tcvPlIMi2r0lduzbaTlbFaYMwUi884mxgPY+04NBmxhbHAsgqymfpm3wGRC2Yx4gFXpHFPltGsFC0cCphIBz46vs+YA2Jo7y3SNCayTG2TLVQ8XIhrFuS2XinmHokBtAEYJczLspZcSqi/f0LajTmvAEuIs07NH2YTWkECFctu2vs6SAUFcK/m/yN+4Fs7nzmvVlT+qMejnjp2LrUPQG8XePdRKCtmzCu86tq7WiNJ43BlbLtlDTpHyXW2Zv3OTgIppWYofesDfWyotgsDpH3Pnzl1j35g4J/DVV18txrwe4JcHeNrCTvM//PDDr5113GtXAk4JBGz6bSMxGkzRmug/35Y5z7BPO175zUZjS32BVHUxWZFkCwyr4BY0WL/T2Y977UrAKYE/DVQi1CRo/B7+Sxf5bPI/cQMiMN9RmKPumPvOmKOTmKuhArW3+cHMRcrfkmnTRORjYW6NiXNOzL12JeCUwJ8GKgFHDb5IuaJnfJQwOfjyGeUwEyVm8Jpxm3xATH8kQVMKb4a2Ogckj6oUUBAB2SL8slz6qnTm/px13WtXAlYCfxqoemVov4ixnShPyX8u8QFpqBPWocb/PEZEt5io9oKNohUokGMbTvsNRLZh+Kd9xcAEOFdtX+7ZlYAvCfxpoPrqhAizWu4AH3O0JRVyXflT0iepRIJFfAwyhXfi/yWWpXwkqZlSG4SROskVeIkKPYloX/27Za4EmvTPpX2JTZ+j4ZN24nVrCn5oIknmbXwltJ9P1KJxE5IB6E0S+ZPJQW50fnGD2W8gteN5Femrb7fMlYAnD/asoiAHWUBerA1fSh374IMPvlPqSX3yUmA3IC3n3e5CEtVZ/jIBzzq+2/7/twSalEf1JRIliJWw9vds8+bNybzqO2TfUvmq55a5EvAngefio6pzfyC1z3j9dtDfJNxyVwJPk8BzM/1PG8h97krgWSTgAvVZpOe2fWEScIH6wkTtDvQsEnCB+izSc9u+MAm4QH1honYHehYJ8Jo+OP9ZOnDbuhL4V0tAGDVfh3/88cfmn9D+qwd0+3cl0BQJgM+a/wXEHL3v2Wd6kwAAAABJRU5ErkJggg=="}),Qa=_(require("react")),zD=24;class cFe extends Qa.default.Component{constructor(e){super(e);this.init=()=>{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then(e=>{this.video.srcObject=e}).catch(()=>{this.props.modal.showActionModal({type:dt.ERROR,identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{this.props.active.selectWebcam(!1)}})}):this.props.modal.showActionModal({type:dt.ERROR,identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{this.props.active.selectWebcam(!1)}})};this.stop=()=>{const{active:e}=this.props,t=this.video.srcObject,r=t.getTracks();r.forEach(i=>{i.stop()}),this.video.srcObject=null,e.selectWebcam(!1)};this.captureAndCloseWebcam=()=>{this.canvas.width=this.video.videoWidth,this.canvas.height=this.video.videoHeight,this.canvas.getContext("2d").drawImage(this.video,0,0),this.props.active.newImage(this.canvas.toDataURL("image/webp")),this.stop()};this.videoRef=Qa.default.createRef()}componentDidMount(){this.canvas=document.createElement("canvas"),this.video=this.videoRef.current,this.init()}render(){const{editor:e}=this.props,{height:t,width:r}=e.getPreviewSize(),{measurements:i}=e.configStore,o=this.props.canvas.canvasSize.height,n=(o-t)/2,s=n<zD+i.buttons.float.size?o-zD*2-i.buttons.float.size/2:o-n+zD,a=this.props.active.webcamLabel;return Qa.default.createElement(ge.Wrapper,null,Qa.default.createElement(ge.Bar.Index,{transparentBackgound:!0,style:{justifyContent:"flex-end"}},Qa.default.createElement(ge.Bar.ButtonGroup,null,Qa.default.createElement(ba,{ariaLabel:a,onClick:this.stop},a))),Qa.default.createElement(ge.Webcam,{style:{height:t,width:r},autoPlay:!0,ref:this.videoRef}),Qa.default.createElement(ge.Button.Float,{ariaLabel:"Click and Save",style:{top:s},onClick:this.captureAndCloseWebcam}))}}var fY=P("active","canvas","modal","editor")(R(cFe));const Lg=_(require("react"));class dFe extends Lg.Component{constructor(e){super(e);this.wrapperElementRef=null;this.timeout=null;this.updateDimensions=(e=!0)=>{e?(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.update(e)},100)):this.update(e)};this.update=(e=!0)=>{const t=this.wrapperElementRef.current;this.props.canvas.saveDimensions({width:t&&t.clientWidth||0,height:t&&t.clientHeight||0,render:e})};this.wrapperElementRef=Lg.default.createRef(),this.resizeObserver=new yf(()=>{this.updateDimensions(!1)})}componentDidMount(){this.updateDimensions(!1),window.addEventListener("resize",()=>this.updateDimensions(!0)),this.wrapperElementRef.current&&this.resizeObserver.observe(this.wrapperElementRef.current)}componentWillUnmount(){window.removeEventListener("resize",()=>this.updateDimensions(!0)),this.timeout&&clearTimeout(this.timeout)}render(){return Lg.default.createElement(ge.Container,{"data-test":ee.CanvasContainer,ref:this.wrapperElementRef},this.props.children)}}var gY=P("canvas")(R(dFe));const Bh=R(()=>{const e=Kn.useRef(null),{canvas:t,active:r,config:i}=Pr();Kn.useEffect(()=>{const n=e.current;t.setCanvasElement(n)},[]);const{licenseChecker:o}=i;return Kn.default.createElement(gY,null,o&&o.isWhiteLabel()?null:Kn.default.createElement(mY,null),r.isWebcam?Kn.default.createElement(fY,null):null,Kn.default.createElement(ge.Element,{ref:e,"aria-label":"Canvas","data-test":ee.Canvas}),Kn.default.createElement(lY,null,Kn.default.createElement(uY,null)))});class zg{constructor(e={},t={}){this.getAdvancedCategoryCard=()=>this.components.advancedUICategoryCard;this.getAdvancedItemCard=()=>this.components.advancedUIItemCard;this.getAdvancedToolbarItem=()=>this.components.advancedUIToolbarItem;this.getDialog=()=>this.components.dialog;this.getButton=e=>this.components.buttons[e];this.getColorItem=()=>this.components.colorItem;this.getCheckbox=()=>this.components.checkbox;const r={dialog:A.Dialog,colorItem:A.ColorItem,checkbox:A.Input.Checkbox,buttons:{mainCanvasActionUndo:ge.Button.TextSecondary,mainCanvasActionRedo:ge.Button.TextSecondary,mainCanvasActionExport:ap,mainCanvasActionClose:ba,canvasActionEdit:ge.Controls.SpriteActionButton,canvasActionBringToFront:ge.Controls.SpriteActionButton,canvasActionDuplicate:ge.Controls.SpriteActionButton,canvasActionDelete:ge.Controls.SpriteActionButton,canvasActionInvert:ge.Controls.SpriteActionButton,canvasActionFlip:ge.Controls.SpriteActionButton,transformActionFlipHorizontal:xs,transformActionFlipVertical:xs,transformActionRotateClockwise:xs,transformActionRotateAntiClockwise:xs,textAlignment:xs,toolControlBarPrimaryButton:sp,toolControlBarSecondaryButton:ba}};this.components=yo([r,t,e])}}const el=_(require("react")),uFe=({modal:e,textTool:t,textDesignTool:r,config:i,custom:o})=>{const{type:n,identifier:s,isVisible:a,modalProps:l,positionOffset:c}=e,{headerLabel:d,bodyLabel:u,confirmLabel:p,dismissLabel:h,handleClose:b,handleConfirm:y,handleDismiss:f}=l,w=o.getDialog();if(n===dt.INFO)return el.default.createElement(A.InfoModal,{headerLabel:d,bodyLabel:u},el.default.createElement(w,{type:n,isVisible:a,identifier:s,position:c,handleClose:b,headerLabel:d,bodyLabel:u}));if(n===dt.TEXT_EDIT){const{buttonSave:T,buttonClose:C}=t.locale.canvasControls,F={type:n,isVisible:e.isVisible,confirmLabel:T,dismissLabel:C,headerLabel:t.locale.canvasControls.inputText,maxLength:i.config.text.maxCharacterLimit};if(t.isTextSelected)return el.default.createElement(A.TextEditModal,v(v({},F),{defaultText:ke.defaultText(),handleConfirm:t.changeText,handleDismiss:t.setEditMode,text:t.text}),el.default.createElement(w,{type:n,isVisible:a,identifier:s,position:c,handleClose:b,confirmLabel:T,dismissLabel:C,headerLabel:t.locale.canvasControls.inputText}));if(r.isTextDesignSelected)return el.default.createElement(A.TextEditModal,v(v({},F),{defaultText:Ze.defaultText(),handleConfirm:r.changeText,handleDismiss:r.setEditMode,text:r.text}),el.default.createElement(w,{type:n,isVisible:a,identifier:s,position:c,handleClose:b,confirmLabel:T,dismissLabel:C,headerLabel:t.locale.canvasControls.inputText}))}return el.default.createElement(A.ActionModal,{type:n,headerLabel:d,bodyLabel:u,confirmLabel:p,dismissLabel:h,handleClose:b,handleConfirm:y,handleDismiss:f},el.default.createElement(w,{type:n,isVisible:a,identifier:s,position:c,confirmLabel:p,dismissLabel:h,headerLabel:d,bodyLabel:u,handleClose:b}))};var Lh=P("textTool","textDesignTool","modal","config","custom")(R(uFe));const Hd=_(require("react")),UD=_(require("styled-components")),Ng=_(require("react")),bY=_(require("styled-components")),pFe=bY.default.div`
  position: absolute;
  right: 8px;
  top: 8px;
`;class hFe extends Ng.default.Component{constructor(e){super(e);this.onChange=e=>{this.setState({value:e.replace(/[^\d.,-]/g,""),isSubmitted:!1})};this.onSubmit=()=>{const{getCorrectValue:e}=this.props,{isSubmitted:t,value:r}=this.state;t||this.setState({value:e(parseInt(r,10)||0).toString(),isSubmitted:!0})};this.state={isSubmitted:!1,value:e.value.toString()}}componentDidUpdate(e){const{value:t}=this.props;e.value!==t&&this.setState({value:t.toString()})}render(){const{id:e,isDisabled:t,label:r}=this.props,{value:i}=this.state;return Ng.default.createElement(A.Input.Text,{id:e,value:i,isDisabled:t,onChange:this.onChange,onBlur:this.onSubmit,onKeyUp:k9(this.onSubmit)},Ng.default.createElement(pFe,null,Ng.default.createElement(A.Input.Label,{label:r,htmlFor:e})))}}var ND=hFe;const mFe=UD.default.div`
  display: inline-flex;
  justify-content: space-between;
  max-width: ${e=>e.theme.measurements.advancedUIToolControlBar.width}px;
`,fFe=UD.default.span`
  font-size: ${e=>e.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.body.case};
  margin-top: 10px;
  margin-right: 13px;
`,gFe="photoeditorsdk-transformScaleWidth",bFe="photoeditorsdk-transformScaleHeight",yFe=({showLabel:e=!0,label:t,isDisabled:r,valueHeight:i,valueWidth:o,labelWidth:n,labelHeight:s,onSubmitWidth:a,onSubmitHeight:l})=>Hd.default.createElement("div",null,Hd.default.createElement(A.Input.Label,{label:t,show:e}),Hd.default.createElement(mFe,null,Hd.default.createElement(ND,{id:gFe,value:o,getCorrectValue:a,label:n,isDisabled:r}),Hd.default.createElement(fFe,null,"x"),Hd.default.createElement(ND,{id:bFe,value:i,getCorrectValue:l,label:s,isDisabled:r})));var Ug=yFe;const TY=_(require("react")),yY=_(require("react")),vY=_(require("styled-components")),vFe=vY.default(jo)`
  width: ${e=>e.theme.measurements.advancedCard.large.width}px;
  height: ${e=>e.theme.measurements.advancedCard.large.height}px;
  margin-bottom: ${e=>e.theme.measurements.advancedSpacer}px;
  color: ${e=>e.theme.card.foreground};
`,_Fe=r=>{var{isActive:e}=r,t=ai(r,["isActive"]);return yY.default.createElement(vFe,v({},t))};var _Y=_Fe;const xY=_(require("styled-components")),wY=xY.default(jo)`
  width: ${e=>e.theme.measurements.advancedCard.medium.width}px;
  height: ${e=>e.theme.measurements.advancedCard.medium.height}px;
  margin-bottom: ${e=>e.theme.measurements.advancedSpacer}px;
  color: ${e=>e.theme.card.foreground};
  &:nth-child(2n + 1) {
    margin-right: ${e=>e.theme.measurements.advancedSpacer}px;
  }
`,SY=_(require("styled-components")),CY=SY.default(jo)`
  width: ${e=>e.theme.measurements.advancedCard.small.width}px;
  height: ${e=>e.theme.measurements.advancedCard.small.height}px;
  margin-bottom: ${e=>e.theme.measurements.advancedSpacer}px;
  color: ${e=>e.theme.card.foreground};
  &:nth-child(3n + 1),
  &:nth-child(3n + 2) {
    margin-right: ${e=>e.theme.measurements.advancedSpacer}px;
  }
`,jg=e=>{const t=e.type===Ee.LARGE,r=e.type===Ee.SMALL;let i=wY;return t?i=_Y:r&&(i=CY),TY.default.createElement(i,v({},e))};const kY=_(require("styled-components")),K0=kY.default.div.attrs(e=>({"data-test":e["data-test"]||ee.CardContainer}))`
  display: flex;
  flex-wrap: wrap;
  /* width - padding on both sides */
  width: ${e=>e.theme.measurements.advancedUIToolControlBar.width-48}px;
`;const EY=_(require("react")),qg=_(require("styled-components")),xFe=qg.default.div`
  display: flex;
  flex-direction: column;
  flex-shrink: 0;

  position: relative;
  width: ${e=>e.theme.measurements.advancedUIToolControlBar.width}px;
  /* for Firefox */
  min-height: 0;
  margin-bottom: ${e=>e.theme.measurements.advancedUIToolControlBar.marginBottom}px;

  z-index: ${e=>e.theme.measurements.zIndex.toolControlBar};

  background: ${e=>e.theme.toolControlBar.background};
  transition: width 0.4s ease-in;
  ${e=>e.reverse?qg.css`
          border-left: 1px solid ${e.theme.toolControlBar.borderColor};
        `:qg.css`
          border-right: 1px solid ${e.theme.toolControlBar.borderColor};
        `}
`,DY=({reverse:e=!1,children:t})=>EY.default.createElement(xFe,{"data-test":ee.ToolControlBar,reverse:e},t),zh=_(require("styled-components")),IY=zh.default.div.attrs(()=>({"data-test":ee.CategoryItemsContainer}))`
  transition: max-height 0.8s ease-out, transform 0.8s ease-out;
  background: ${e=>e.theme.toolControlBar.background};
  visibility: hidden;
  opacity: 0;
  transform-origin: 0 0;
  display: none;
  flex-wrap: wrap;

  ${({show:e})=>e&&zh.css`
      opacity: 1;
      visibility: visible;
      ${Ht()?zh.css`
            display: block;
          `:zh.css`
            display: flex;
          `}
    `}
`,Gg=_(require("react")),Wg=_(require("styled-components")),wFe=Wg.default.div`
  position: relative;
  flex-grow: 0;
  flex-shrink: 0;
  ${e=>e.shouldAnimateHeight&&Wg.css`
      height: ${e.height}px;
    `}
  opacity: ${({opacity:e})=>e};
  visibility: ${({visibility:e})=>e};
  overflow: ${({shouldAnimateOverflow:e,overflow:t})=>e?t:void 0};
  transition: ${({shouldAnimateHeight:e})=>e?"opacity 0.5s ease-in, height 0.4s ease-out":"opacity 0.5s ease-in"};
  background: ${e=>e.theme.toolControlBar.background};
  color: ${e=>e.theme.toolControlBar.inputLabelForeground};
`,SFe=Wg.default.div`
  position: relative;
  padding: ${e=>e.theme.measurements.advancedUIToolControlBar.padding};
`;class OY extends Gg.default.Component{constructor(e){super(e);this.contentRef=null;this.enableOverflow=()=>{const{show:e}=this.props;e&&this.contentRef.current&&this.setState({overflow:!0})};this.contentRef=Gg.default.createRef(),this.state={height:0,mounted:!1,overflow:!1}}componentDidMount(){const{overflowAfterExpand:e}=this.props;this.contentRef.current&&(e&&this.contentRef.current.addEventListener("transitionend",this.enableOverflow),this.setState({height:this.contentRef.current.scrollHeight,mounted:!0}))}componentWillUnmount(){this.contentRef.current&&this.contentRef.current.removeEventListener("transitionend",this.enableOverflow)}render(){const{show:e,shouldAnimateOverflow:t,shouldAnimateHeight:r,children:i}=this.props,{height:o,mounted:n,overflow:s}=this.state,a=n&&(e&&t||!t),l=a?o:0,c=a?1:0,d=a?"visible":"hidden";return Gg.default.createElement(wFe,{"data-test":ee.ToolControlBarControls,ref:this.contentRef,height:l,opacity:c,visibility:d,overflow:s?"visible":"hidden",shouldAnimateHeight:r,shouldAnimateOverflow:t},Gg.default.createElement(SFe,null,i))}}OY.defaultProps={show:!0,shouldAnimateOverflow:!0,shouldAnimateHeight:!0};var AY=OY;const $0=_(require("styled-components")),jD=$0.default(Cn)`
  position: relative;
  padding: ${e=>e.theme.measurements.advancedUIToolControlBar.padding};
  width: ${e=>e.theme.measurements.advancedUIToolControlBar.width}px;

  box-sizing: border-box;

  /* for Firefox */
  min-height: 0;

  transition: height 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);
  background: ${e=>e.theme.toolControlBar.background};
  color: ${e=>e.theme.toolControlBar.inputLabelForeground};

  /* compensate the padding in IE and Edge */
  ${()=>Ht()||Mo()?$0.css`
        > ul {
          padding-right: 34px;
          margin-right: -34px;
        }
      `:""}
`;jD.defaultProps={direction:"vertical"};const Y0=_(require("styled-components")),CFe=Y0.default.div`
  &:after {
    content: '';
    position: absolute;
    bottom: 0px;
    ${e=>e.full?Y0.css`
            left: -${3*e.theme.measurements.advancedSpacer/2}px;
            width: calc(
              100% + ${3*e.theme.measurements.advancedSpacer}px
            );
          `:`
      left: ${3*e.theme.measurements.advancedSpacer/2}px;
      width: calc(100% - ${3*e.theme.measurements.advancedSpacer}px);
    `}
    border-bottom: 2px solid ${e=>e.theme.toolControlBar.separatorColor};
  }
`;var X0=CFe;const RY=_(require("styled-components")),TFe=RY.default.h2`
  color: ${e=>e.theme.toolControlBar.titleForeground};
  font-size: ${e=>e.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.headline2.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.headline2.case};
  font-weight: 500;
  min-height: ${e=>2*e.theme.measurements.advancedSpacer}px;
`;var J0=TFe;const tl=_(require("react")),FY=_(require("styled-components")),kFe=FY.default.div`
  display: flex;
  flex-direction: column;
  position: relative;
  width: 100%;
  flex: 1 0 auto;
`,PY=({name:e,isFirstCategory:t,isLastCategory:r,children:i})=>tl.default.createElement(kFe,null,!t&&tl.default.createElement(A.Spacer,{count:2}),tl.default.createElement(J0,{"data-test":e},e),tl.default.createElement(K0,{"data-test":ee.CategoryItemsContainer},i),!r&&tl.default.createElement(tl.default.Fragment,null,tl.default.createElement(A.Spacer,{count:2}),tl.default.createElement(X0,{full:!0}))),MY=_(require("styled-components")),EFe=MY.default.h1`
  /* Center text horizontally and vertically */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 0;
  padding: 0 4px;
  margin: 0;
  min-height: ${e=>e.theme.measurements.mainCanvasActionBar.height-2}px;
  font-size: ${e=>e.theme.measurements.fontSystem.headline1.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.headline1.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.headline1.case};
  background: ${e=>e.theme.toolControlBar.background};
  color: ${e=>e.theme.toolControlBar.titleForeground};
  border-bottom: 1px solid ${e=>e.theme.toolControlBar.separatorColor};
  font-weight: 500;
  text-align: center;
`;var BY=EFe;const qD=_(require("react")),Nh=_(require("styled-components")),DFe=Nh.default.div`
  display: flex;
  flex: 1 0 auto;
  flex-direction: column;
  align-items: center;
  height: 100%;
  width: ${e=>e.theme.measurements.advancedUIToolbar.width}px;

  z-index: ${e=>e.theme.measurements.zIndex.toolbar};

  background-color: ${e=>e.theme.toolbar.background};
  color: ${e=>e.theme.toolbar.foreground};
  ${e=>{const t=e.theme.toolbar.border?e.theme.toolbar.border:Nh.css`
          1px solid ${e.theme.toolbar.borderColor};
        `;return e.reverse?Nh.css`
          border-left: ${t};
        `:Nh.css`
          border-right: ${t};
        `}}
  margin-bottom: ${e=>e.theme.measurements.advancedUIToolbar.marginBottom}px;
`,LY=({reverse:e,children:t})=>qD.default.createElement(DFe,{reverse:e,"data-test":ee.Toolbar},qD.default.createElement(Cn,{direction:"vertical"},t)),GD=_(require("react")),Vd=_(require("styled-components")),IFe=Vd.default(Uo)`
  width: inherit;
  height: inherit;
  padding: 0;
  margin: 0;
  ${Ht()?Vd.css`
        background-color: transparent;
      `:Vd.css`
        background-color: inherit;
      `}

  ${e=>e.isActive&&Vd.css`
      background-color: ${e.theme.toolbar.activeBackground};
      color: ${e.theme.toolbar.activeForeground};
    `}
`,OFe=Vd.default.li.attrs({"aria-haspopup":!0,"aria-hidden":!0,role:"menuitem"})`
  height: ${e=>e.theme.measurements.advancedUIToolbar.itemHeight}px;
  cursor: pointer;
  position: relative;
`,zY=e=>GD.default.createElement(OFe,null,GD.default.createElement(IFe,v(v({},e),{"data-test":ee.ToolbarItem}))),NY=_(require("styled-components")),AFe=NY.default.li.attrs({role:"none"})`
  height: ${e=>e.theme.measurements.advancedUIToolbar.seperatorHeight}px;
  cursor: pointer;
  position: relative;
`;var UY=AFe;const WD=_(require("react")),rl=_(require("styled-components")),RFe=rl.default.div`
  ${Ht()?rl.css`
        position: -ms-device-fixed;
      `:rl.css`
        position: fixed;
      `}
  position: -ms-device-fixed;
  top: ${e=>e.position.y-5}px;
  left: ${e=>e.position.x+e.theme.measurements.advancedUIToolbar.width-10}px;
  z-index: ${e=>e.theme.measurements.zIndex.toolbar};
  transition: opacity 0.5s ease-in-out, left 0.25s ease-in-out,
    right 0.25s ease-in-out, visibility 0.5s ease-in-out;
  pointer-events: none;
  opacity: 0;
  visibility: hidden;
  cursor: pointer;

  &:before {
    content: ' ';
    position: absolute;
    top: 10px;
    left: -8px;
    width: 0;
    height: 0;
    border-right: 8px solid ${e=>e.theme.tooltip.background};
    border-bottom: 6px solid transparent;
    border-top: 6px solid transparent;
  }

  &:after {
    content: '${e=>e.label}';
    position: absolute;
    transition: margin-left 0.15s ease-in-out, opacity 0.15s ease-in-out;
    color: ${e=>e.theme.tooltip.foreground};
    background: ${e=>e.theme.tooltip.background};
    padding: 8px 12px;
    text-align: center;
    vertical-align: super;
    font-size: ${e=>e.theme.measurements.fontSystem.label.size}px;
    letter-spacing: ${e=>e.theme.measurements.fontSystem.label.letterSpacing}px;
    text-transform: ${e=>e.theme.measurements.fontSystem.label.case};
    border-radius: ${e=>e.theme.shape.radiusSmall}px;
    white-space: nowrap;
  }

  ${e=>e.reverse&&rl.css`
      left: unset;
      right: ${e.position.x+e.theme.measurements.advancedUIToolbar.width-10}px;
      direction: rtl;

      &:before {
        border-left: 8px solid ${e.theme.tooltip.background};
        border-right: none;
        right: -8px;
        left: unset;
        top: 10px;
      }
    `}

  ${e=>e.show&&!e.reverse&&rl.css`
      opacity: 1;
      visibility: visible;
      left: ${e.position.x+e.theme.measurements.advancedUIToolbar.width+16}px;
    `}

  ${e=>e.show&&e.reverse&&rl.css`
      opacity: 1;
      visibility: visible;
      right: ${e.position.x+e.theme.measurements.advancedUIToolbar.width+16}px;
    `}
`,FFe=rl.default.span`
  display: none;
`,jY=({show:e,reverse:t,position:r,children:i})=>{const o=typeof i=="string"?i:"";return WD.default.createElement(RFe,{"data-test":ee.Tooltip,show:e,reverse:t,position:r,label:o},WD.default.createElement(FFe,null,o))};jY.defaultProps={show:!1};var qY=jY;const X={Card:jg,CardContainer:K0,Toolbar:{Index:LY,Item:zY,Separator:UY,Tooltip:qY},Itemsbar:jD,BarSeparator:"",ItemsSeparator:X0,Controlsbar:AY,Sidebar:{Index:DY,Heading:BY,SubHeading:J0,TextCategory:PY,ExpandableContainer:IY}},Br=_(require("react")),kX=_(require("styled-components")),Q0=_(require("react")),Hg=_(require("react"));let Z0=class extends Hg.default.Component{constructor(){super(...arguments);this.renderIcon=e=>{const t=Z_[e];return Hg.default.createElement(t,null)||null};this.update=e=>{this.props.active.selectTool(e)}}getToolTitle(e){return this.props.config.locale[e].title}render(){const e=this.props.active.tool,{tool:t,custom:r}=this.props;if(t){const i=r.getAdvancedToolbarItem();return Hg.default.createElement(i,{key:t,isActive:t===e,isReverse:this.props.isReverse,icon:this.renderIcon(t),onClick:()=>this.update(t),tool:t,label:this.getToolTitle(t)})}return Hg.default.createElement(X.Toolbar.Separator,null)}};Z0=m([P("active","config","custom"),R],Z0);var GY=Z0;let Uh=class extends Q0.default.Component{render(){const{config:e}=this.props,t=e.config.order==="reverse";return Q0.default.createElement(X.Toolbar.Index,{reverse:t},e.tools.map((r,i)=>Q0.default.createElement(GY,{key:r||i,tool:r,isReverse:t})))}};Uh=m([P("config"),R],Uh);const zt=_(require("react")),$d=_(require("react")),ew=_(require("react")),PFe=({adjustmentsTool:e,custom:t})=>{const r=e.locale.controls,i=t.getButton("toolControlBarSecondaryButton"),o=()=>{e.reset()};return ew.default.createElement(X.Controlsbar,{show:e.isDirty},ew.default.createElement(i,{tool:S.ADJUSTMENT,label:r.buttonReset,ariaLabel:r.buttonReset,onClick:o,fullWidth:!0}),ew.default.createElement(X.ItemsSeparator,null))};var WY=P("adjustmentsTool","custom")(R(PFe));const Kd=_(require("react")),HY=_(require("styled-components")),MFe=HY.default(A.Input.Slider)`
  padding-bottom: 16px;
`,BFe=({adjustmentsTool:e})=>{const{categories:t,items:r,config:i,locale:o}=e,n=()=>{e.toolSnapshot()},s=(c,d)=>{e.editAdjustments({type:c,value:d})},a=c=>{const d=e.locale.categories[c.identifier]||c.name;return Kd.default.createElement(MFe,{identifier:c.identifier,adjust:!0,key:c.identifier,label:d,value:e[c.identifier],onChange:u=>s(c.identifier,u),onMouseUp:n,onTouchEnd:n,snap:0})},l=(c,d)=>{const u=o.categories[c.identifier]||c.name;return c.items?Kd.default.createElement(X.Sidebar.TextCategory,{key:c.identifier,name:u,isFirstCategory:d===0,isLastCategory:d===t.length-1},c.items.map(a)):null};return i.flattenCategories?Kd.default.createElement(Kd.default.Fragment,null,r.map(a)):Kd.default.createElement(Kd.default.Fragment,null,t.map(l))};var VY=P("adjustmentsTool")(R(BFe));const LFe=({adjustmentsTool:e,displayTitle:t})=>$d.default.createElement($d.default.Fragment,null,t&&$d.default.createElement(X.Sidebar.Heading,null,e.locale.title),$d.default.createElement(WY,null),$d.default.createElement(X.Itemsbar,null,$d.default.createElement(VY,null)));var KY=P("adjustmentsTool")(R(LFe));const Vg=_(require("react")),Ki=_(require("react")),zFe=({brushTool:e,custom:t})=>{const{colorList:r}=e,i=e.locale.controls,o=e.localeColor.colorPicker,n=t.getButton("toolControlBarSecondaryButton");return Ki.default.createElement(Ki.default.Fragment,null,Ki.default.createElement(X.Controlsbar,{show:e.isDirty},Ki.default.createElement(n,{tool:S.BRUSH,ariaLabel:i.buttonReset,onClick:e.reset,fullWidth:!0,label:i.buttonReset}),Ki.default.createElement(X.ItemsSeparator,null)),Ki.default.createElement(X.Controlsbar,{overflowAfterExpand:!0},Ki.default.createElement(A.Input.Selection,{label:i.selectColor},Ki.default.createElement(rr,{activeColor:e.color,colors:r,labelsColor:o,onChange:e.changeColor})),Ki.default.createElement(A.Spacer,{count:2}),Ki.default.createElement(A.Input.Slider,{"data-test":ee.BrushSize,label:i.sliderSize,value:e.relativeSize,min:1,max:100,divider:1,onChange:e.changeRelativeSize}),Ki.default.createElement(A.Spacer,{count:3}),Ki.default.createElement(A.Input.Slider,{"data-test":ee.BrushHardness,label:i.sliderHardness,value:e.hardness,min:0,max:1,onChange:e.changeHardness}),Ki.default.createElement(A.Spacer,null)))},$Y=P("brushTool","custom")(R(zFe)),NFe=({brushTool:e,displayTitle:t})=>Vg.default.createElement(Vg.default.Fragment,null,t&&Vg.default.createElement(X.Sidebar.Heading,null,e.locale.title),Vg.default.createElement($Y,null)),YY=P("brushTool")(R(NFe)),Tc=_(require("react")),Cc=_(require("react")),UFe=({filterTool:e,custom:t})=>{const r=e.locale.controls,i=e.state,o=t.getButton("toolControlBarSecondaryButton"),n=()=>{e.toolSnapshot()},s=()=>{e.reset()};return Cc.default.createElement(X.Controlsbar,{show:e.isOptionSelected},Cc.default.createElement(A.Input.Form,null,Cc.default.createElement(o,{tool:S.FILTER,ariaLabel:r.buttonReset,onClick:s,fullWidth:!0,label:r.buttonReset}),Cc.default.createElement(A.Spacer,{count:2}),Cc.default.createElement(A.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:r.sliderIntensity,value:i.intensity,min:0,max:1,onChange:e.changeIntensity,onMouseUp:n,onTouchEnd:n,snap:i.isDuotone?.5:null}),Cc.default.createElement(A.Spacer,null)),Cc.default.createElement(X.ItemsSeparator,null))};var XY=P("filterTool","custom")(R(UFe));const $i=_(require("react")),jFe=({filterTool:e,custom:t})=>{const{categories:r,config:i,items:o,locale:n}=e,s=t.getAdvancedItemCard(),a=t.getAdvancedCategoryCard(),l=(u,p)=>{const h=n.items[u.identifier]||u.name;return $i.default.createElement(s,{tool:S.FILTER,type:Ee.MEDIUM,onClick:()=>e.selectFilter(u.identifier,u.defaultIntensity),key:u.identifier,image:u.thumbnailURI,label:h,style:{animationDelay:`${We(p)}s`},isActive:e.identifier===u.identifier},$i.default.createElement(Mt,{withBackground:!0},h))},c=(u,p)=>{const{selectedCategoryIdentifier:h}=e,b=h===u.identifier,y=n.categories[u.identifier]||u.name;return u.items?$i.default.createElement("div",{key:u.identifier},$i.default.createElement(a,{isActive:b,tool:S.FILTER,type:Ee.LARGE,onClick:()=>e.toggleCategorySelection(u.identifier),image:u.thumbnailURI,label:y,style:{animationDelay:`${We(p)}s`}},$i.default.createElement(Mt,{withBackground:!0,caret:!0,isActive:b},y)),$i.default.createElement(X.Sidebar.ExpandableContainer,{show:b},u.items.map(l))):null},d=(u,p)=>{const h=n.categories[u.identifier]||u.name;return u.items?$i.default.createElement(X.Sidebar.TextCategory,{key:u.identifier,name:h,isFirstCategory:p===0,isLastCategory:p===r.length-1},u.items.map(l)):null};return i.flattenCategories?$i.default.createElement($i.default.Fragment,null,o.map(l)):i.categoryHeaderType===Vt.CARD?$i.default.createElement($i.default.Fragment,null,r.map(c)):i.categoryHeaderType===Vt.TEXT?$i.default.createElement($i.default.Fragment,null,r.map(d)):null};var JY=P("filterTool","custom")(R(jFe));const qFe=({filterTool:e,displayTitle:t})=>Tc.default.createElement(Tc.default.Fragment,null,t&&Tc.default.createElement(X.Sidebar.Heading,null,e.locale.title),Tc.default.createElement(XY,null),Tc.default.createElement(X.Itemsbar,{key:"filterToolItemsbar"},Tc.default.createElement(X.CardContainer,null,Tc.default.createElement(JY,null))));var ZY=P("filterTool")(R(qFe));const jh=_(require("react")),kc=_(require("react")),QY=R(()=>{const{focusTool:e,custom:t}=Pr(),r=e.locale.controls,i=t.getButton("toolControlBarSecondaryButton"),o=()=>{e.toolSnapshot(r.sliderIntensity)},n=()=>{e.reset()};return kc.default.createElement(X.Controlsbar,{show:e.isOptionSelected},kc.default.createElement(A.Input.Form,null,kc.default.createElement(i,{tool:S.FOCUS,ariaLabel:r.buttonReset,onClick:n,fullWidth:!0,label:r.buttonReset}),kc.default.createElement(A.Spacer,{count:2}),kc.default.createElement(A.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:r.sliderIntensity,value:e.relativeIntensity,min:0,max:100,divider:1,onChange:e.changeRelativeIntensity,onMouseUp:o,onTouchEnd:o})),kc.default.createElement(A.Spacer,{count:1}),kc.default.createElement(X.ItemsSeparator,null))}),Kg=_(require("react")),GFe=({focusTool:e,custom:t})=>{const{items:r}=e,i=(o,n)=>{const s=e.locale.items[o.identifier]||o.name,a=t.getAdvancedItemCard();return Kg.default.createElement(a,{tool:S.FOCUS,type:Ee.LARGE,onClick:()=>e.selectFocus(o.identifier),key:o.identifier,image:o.thumbnailURI,label:s,style:{animationDelay:`${We(n)}s`},isActive:o.identifier===e.identifier},Kg.default.createElement(Mt,{withBackground:!0},s))};return Kg.default.createElement(X.Itemsbar,null,Kg.default.createElement(X.CardContainer,null,r.map(i)))};var eX=P("focusTool","custom")(R(GFe));const tX=R(({displayTitle:e})=>{const{focusTool:t}=Pr();return jh.default.createElement(jh.default.Fragment,null,e&&jh.default.createElement(X.Sidebar.Heading,null,t.locale.title),jh.default.createElement(QY,null),jh.default.createElement(eX,null))}),qh=_(require("react")),$n=_(require("react")),WFe=({frameTool:e,custom:t})=>{const r=e.locale.controls,i=e.localeColor.colorPicker,{tintable:o,colorList:n}=e,s=t.getButton("toolControlBarSecondaryButton"),a=()=>{e.reset()},l=c=>{e.toolSnapshot(c)};return $n.default.createElement(X.Controlsbar,{show:e.isOptionSelected,overflowAfterExpand:!0},$n.default.createElement(s,{tool:S.FRAME,ariaLabel:r.buttonReset,onClick:a,fullWidth:!0,label:r.buttonReset}),$n.default.createElement(A.Spacer,{count:2}),$n.default.createElement(A.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:r.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:()=>{l(r.sliderOpacity)},onTouchEnd:()=>{l(r.sliderOpacity)}}),$n.default.createElement(A.Spacer,{count:2}),$n.default.createElement(A.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:r.sliderSize,value:e.size,min:e.minSize,max:e.maxSize,divider:1,onChange:e.changeWidth,onMouseUp:()=>{l(r.sliderSize)},onTouchEnd:()=>{l(r.sliderSize)}}),$n.default.createElement(A.Spacer,{count:2}),$n.default.createElement(A.Input.Selection,{isDisabled:!o,label:r.selectColor},$n.default.createElement(rr,{activeColor:e.color,colors:n,labelsColor:i,isDisabled:!o,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot})),$n.default.createElement(X.ItemsSeparator,null))},rX=P("frameTool","custom")(R(WFe)),$g=_(require("react")),HFe=({frameTool:e,custom:t})=>{const{items:r}=e,i=e.state?e.state.identifier:null,o=(n,s)=>{const a=e.locale.items[n.identifier]||n.name,l=t.getAdvancedItemCard();return $g.default.createElement(l,{tool:S.FRAME,type:Ee.MEDIUM,onClick:()=>e.selectFrame(n.identifier),key:n.identifier,image:n.thumbnailURI,label:a,style:{backgroundSize:"75%",animationDelay:`${We(s)}s`},isActive:n.identifier===i},$g.default.createElement(Mt,{hidden:!0},a))};return $g.default.createElement(X.Itemsbar,null,$g.default.createElement(X.CardContainer,null,r.map(o)))};var iX=P("frameTool","custom")(R(HFe));const VFe=({frameTool:e,displayTitle:t})=>qh.default.createElement(qh.default.Fragment,null,t&&qh.default.createElement(X.Sidebar.Heading,null,e.locale.title),qh.default.createElement(rX,null),qh.default.createElement(iX,null)),oX=P("frameTool")(R(VFe)),Ec=_(require("react")),Co=_(require("react")),sX=_(require("react")),tw=_(require("react")),nX=()=>{const[e,t]=tw.useState([]);return tw.useEffect(()=>{var r;if(typeof window!==void 0&&((r=window.navigator)==null?void 0:r.mediaDevices)){let i=!0;const o=()=>{window.navigator.mediaDevices.enumerateDevices().then(n=>{i&&t(n.map(({deviceId:s,groupId:a,kind:l,label:c})=>({deviceId:s,groupId:a,kind:l,label:c})))}).catch(()=>null)};return window.navigator.mediaDevices.addEventListener("devicechange",o),o(),()=>{i=!1,window.navigator.mediaDevices.removeEventListener("devicechange",o)}}return null},[]),e},rw=R(({tool:e,fullWidth:t=!1,icon:r,label:i,onClick:o})=>{const{custom:n}=Pr(),s=nX();if(!s.some(({kind:l})=>l==="videoinput"))return null;const a=n.getButton("toolControlBarSecondaryButton");return sX.default.createElement(a,{tool:e,label:i,ariaLabel:i,onClick:o,fullWidth:t,icon:r})});const KFe=({library:e,active:t,custom:r})=>{const i=e.locale.controls.placeholderSearch,{config:o,libraryProvider:n}=e,s=r.getButton("toolControlBarPrimaryButton"),a=u=>{const{files:p}=u.target;if(p.length){const h=new FileReader;h.onload=b=>{t.newImage(b.target.result)},h.readAsDataURL(p[0])}},l=()=>{t.selectWebcam(!0)},c=()=>{const u=document.getElementById("fileUpload");u&&u.click()},d=u=>{e.fetchImages(u)};return Co.default.createElement(X.Controlsbar,{shouldAnimateHeight:!1,shouldAnimateOverflow:!1},n&&Co.default.createElement(Co.default.Fragment,null,Co.default.createElement(A.Input.Search,{onChange:d,placeholder:i}),Co.default.createElement(A.Spacer,{count:2})),o.enableUpload&&Co.default.createElement(Co.default.Fragment,null,Co.default.createElement(s,{tool:S.LIBRARY,ariaLabel:e.locale.controls.buttonUpload,onClick:c,fullWidth:!0,label:e.locale.controls.buttonUpload},Co.default.createElement(A.Input.File,{onChange:a})),Co.default.createElement(A.Spacer,null)),o.enableWebcam&&Co.default.createElement(rw,{tool:S.LIBRARY,onClick:l,fullWidth:!0,label:e.locale.controls.buttonWebcamOpen}),Co.default.createElement(X.ItemsSeparator,null))};var aX=P("library","active","custom")(R(KFe));const Mr=_(require("react")),$Fe=({active:e,library:t,custom:r})=>{const{query:i,config:o,selectedCategoryIdentifier:n,categories:s,items:a}=t,l=r.getAdvancedCategoryCard(),c=r.getAdvancedItemCard(),d=(h,b)=>Mr.default.createElement(c,{tool:S.LIBRARY,type:Ee.MEDIUM,onClick:()=>e.newImage(h.rawUrl),key:`${h.identifier}-${b}`,image:h.thumbnailURI,label:h.name,style:{animationDelay:`${We(b)}s`},authorAvatar:h.authorAvatar,authorName:h.authorName},h.authorAvatar&&Mr.default.createElement(Ol,{url:h.authorAvatar}),h.authorName&&Mr.default.createElement(Mt,{withBackground:!0},h.authorName)),u=(h,b)=>{const y=n===h.identifier;return h.items?Mr.default.createElement("div",{key:h.identifier},Mr.default.createElement(l,{isActive:y,tool:S.LIBRARY,type:Ee.LARGE,onClick:()=>t.toggleCategorySelection(h.identifier),image:h.thumbnailURI,label:h.name,style:{animationDelay:`${We(b)}s`}},Mr.default.createElement(Mt,{withBackground:!0,caret:!0,isActive:y},h.name)),Mr.default.createElement(X.Sidebar.ExpandableContainer,{show:y},h.items.map(d))):null},p=(h,b)=>h.items?Mr.default.createElement(X.Sidebar.TextCategory,{key:h.identifier,name:h.name,isFirstCategory:b===0,isLastCategory:b===s.length-1},h.items.map(d)):null;return i?a.length?Mr.default.createElement(Mr.default.Fragment,null,a.map(d)):Mr.default.createElement("p",{"data-test":ee.NoResult},t.locale.controls.noResults):o.flattenCategories?Mr.default.createElement(Mr.default.Fragment,null,a.map(d)):o.categoryHeaderType===Vt.CARD?Mr.default.createElement(Mr.default.Fragment,null,s.map(u)):o.categoryHeaderType===Vt.TEXT?Mr.default.createElement(Mr.default.Fragment,null,s.map(p)):null},lX=P("library","active","custom")(R($Fe)),YFe=({library:e,displayTitle:t})=>Ec.default.createElement(Ec.default.Fragment,null,t&&Ec.default.createElement(X.Sidebar.Heading,null,e.locale.title),Ec.default.createElement(aX,null),Ec.default.createElement(X.Itemsbar,null,Ec.default.createElement(X.CardContainer,null,Ec.default.createElement(lX,null)))),cX=P("library")(R(YFe)),Gh=_(require("react")),il=_(require("react")),XFe=({overlayTool:e,custom:t})=>{const r=e.locale.controls,{allBlendModes:i}=e,{blendMode:o}=e,n=t.getButton("toolControlBarSecondaryButton"),s=()=>{e.toolSnapshot()},a=c=>{e.changeBlendMode(c)},l=()=>{e.reset()};return il.default.createElement(X.Controlsbar,{show:e.isOptionSelected},il.default.createElement(n,{tool:S.OVERLAY,ariaLabel:r.buttonReset,onClick:l,fullWidth:!0,label:r.buttonReset}),il.default.createElement(A.Spacer,{count:2}),il.default.createElement(A.Input.CarouselSlider,{label:r.carouselBlendMode,defaultIdentifier:o,onSelect:a,list:i}),il.default.createElement(A.Spacer,{count:2}),il.default.createElement(A.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:r.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:s,onTouchEnd:s}),il.default.createElement(A.Spacer,null),il.default.createElement(X.ItemsSeparator,null))};var dX=P("overlayTool","custom")(R(XFe));const Yg=_(require("react")),JFe=({overlayTool:e,custom:t})=>{const{items:r,locale:i,identifier:o,selectOverlay:n}=e,s=(a,l)=>{const c=i.items[a.identifier]||a.name,d=t.getAdvancedItemCard();return Yg.default.createElement(d,{tool:S.OVERLAY,type:Ee.MEDIUM,onClick:()=>n(a.identifier),key:a.identifier,image:a.thumbnailURI,label:c,style:{animationDelay:`${We(l)}s`},isActive:a.identifier===o},Yg.default.createElement(Mt,{withBackground:!0},c))};return Yg.default.createElement(X.Itemsbar,null,Yg.default.createElement(X.CardContainer,null,r.map(s)))};var uX=P("overlayTool","custom")(R(JFe));const ZFe=({overlayTool:e,displayTitle:t})=>Gh.default.createElement(Gh.default.Fragment,null,t&&Gh.default.createElement(X.Sidebar.Heading,null,e.locale.title),Gh.default.createElement(dX,null),Gh.default.createElement(uX,null));var pX=P("overlayTool")(R(ZFe));const Dc=_(require("react")),Yn=_(require("react")),hX=_(require("styled-components")),QFe=hX.default.input.attrs({type:"file",id:"fileUpload",accept:"image/*",multiple:!0})`
  ${Y_.VisuallyHidden}
`,ePe=({stickerTool:e,custom:t})=>{const{colorList:r}=e,i=e.locale.controls,o=e.localeColor.colorPicker,n=t.getButton("toolControlBarPrimaryButton"),s=()=>{e.toolSnapshot()},a=()=>{const u=document.getElementById("fileUpload");u&&(u.value=null,u.click())},l=u=>{const{files:p}=u.target;e.addFiles(p)},c=()=>e.isCustomStickerEnabled?Yn.default.createElement(n,{tool:S.STICKER,ariaLabel:i.buttonUpload,onClick:a,fullWidth:!0,label:i.buttonUpload},Yn.default.createElement(QFe,{onChange:l})):null,d=!e.isStickerSelected||!e.tintable&&e.isStickerSelected;return Yn.default.createElement(X.Controlsbar,{shouldAnimateHeight:!1,shouldAnimateOverflow:!1,overflowAfterExpand:!0},Yn.default.createElement(A.Input.Form,null,c(),Yn.default.createElement(A.Spacer,{count:2}),Yn.default.createElement(A.Input.Slider,{isDisabled:!e.isStickerSelected,label:i.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:s,onTouchEnd:s}),Yn.default.createElement(A.Spacer,{count:2}),Yn.default.createElement(A.Input.Selection,{isDisabled:d,label:i.selectColor},Yn.default.createElement(rr,{activeSprite:e.id,activeColor:e.tintColor,colors:r,labelsColor:o,isDisabled:d,onChange:e.changeTintColor,onAddSnapshot:e.tintColorSnapshot}))),Yn.default.createElement(X.ItemsSeparator,null))},mX=P("stickerTool","custom")(R(ePe)),Yi=_(require("react")),tPe=({stickerTool:e,custom:t})=>{const{categories:r,selectedCategoryIdentifier:i,config:o,items:n,locale:s}=e,a=t.getAdvancedCategoryCard(),l=t.getAdvancedItemCard(),c=(p,h)=>{const b=s.items[p.identifier]||p.name;return Yi.default.createElement(l,{key:p.identifier,tool:S.STICKER,type:Ee.SMALL,onClick:()=>e.add(p.identifier),image:p.thumbnailURI,label:b,style:{backgroundSize:"75%",animationDelay:`${y_(h)}s`}},Yi.default.createElement(Mt,{hidden:!0},b))},d=(p,h)=>{const b=i===p.identifier,y=s.categories[p.identifier]||p.name;return p.items?Yi.default.createElement("div",{key:p.identifier},Yi.default.createElement(a,{isActive:b,tool:S.STICKER,type:Ee.LARGE,onClick:()=>e.toggleCategorySelection(p.identifier),image:p.thumbnailURI,label:y,style:{animationDelay:`${We(h)}s`}},Yi.default.createElement(Mt,{withBackground:!0,caret:!0,isActive:b},y)),Yi.default.createElement(X.Sidebar.ExpandableContainer,{show:b,key:`${p.identifier}-items`},p.items.map(c))):null},u=(p,h)=>{const b=s.categories[p.identifier]||p.name;return p.items?Yi.default.createElement(X.Sidebar.TextCategory,{key:p.identifier,name:b,isFirstCategory:h===0,isLastCategory:h===r.length-1},p.items.map(c)):null};return o.flattenCategories?Yi.default.createElement(Yi.default.Fragment,null,n.map(c)):o.categoryHeaderType===Vt.CARD?Yi.default.createElement(Yi.default.Fragment,null,r.map(d)):o.categoryHeaderType===Vt.TEXT?Yi.default.createElement(Yi.default.Fragment,null,r.map(u)):null};var fX=P("stickerTool","custom")(R(tPe));const rPe=({stickerTool:e,displayTitle:t})=>Dc.default.createElement(Dc.default.Fragment,null,t&&Dc.default.createElement(X.Sidebar.Heading,null,e.locale.title),Dc.default.createElement(mX,null),Dc.default.createElement(X.Itemsbar,null,Dc.default.createElement(X.CardContainer,null,Dc.default.createElement(fX,null)))),gX=P("stickerTool")(R(rPe)),Jg=_(require("react")),Pt=_(require("react")),Xg=_(require("styled-components")),bX=Xg.default.div`
  position: relative;
`,iPe=Xg.default.div`
  display: flex;
  justify-content: space-between;
`,oPe=Xg.default(A.Input.NumericInput)`
  max-width: 50%;
  margin-right: 16px;
`,nPe=Xg.default(A.Input.Selection)`
  width: 50%;
`,sPe=({textTool:e,custom:t})=>{const r=e.locale.controls,i=e.localeColor.colorPicker,{fontFamilies:o,alignment:n,isTextSelected:s,fontFamily:a,fontStyle:l,fontWeight:c,colorList:d,backgroundColorList:u}=e,p=["left","center","right"],h=t.getButton("textAlignment"),b=t.getButton("toolControlBarPrimaryButton"),y=()=>{e.toolSnapshot()},f=()=>{e.add()},w=k=>{const E=k?parseFloat(k):0;e.setFontSize(Math.max(10,Math.min(690,E)))},T=()=>p.map(k=>{const E=Q_[k];return Pt.default.createElement(h,{tool:k,isDisabled:!s,ariaLabel:`Align ${k}`,isActive:k===n,key:k,style:{padding:"1px 3px 2px"},icon:Pt.default.createElement(E,null),onClick:()=>e.changeAlignment(k)})}),C=o.map(k=>({label:`${k.fontFamily} ${ke.getDisplayFontStyle(k)}`,fontWeight:k.fontWeight,fontStyle:k.fontStyle,fontFamily:k.fontFamily,value:k.identifier})),F=C.filter(({value:k})=>k===e.identifier)[0];return Pt.default.createElement(X.Controlsbar,{show:!0,overflowAfterExpand:!0,shouldAnimateHeight:!1},Pt.default.createElement(A.Input.Form,null,Pt.default.createElement(b,{tool:S.TEXT,ariaLabel:r.buttonNew,onClick:f,fullWidth:!0,label:r.buttonNew}),Pt.default.createElement(A.Spacer,{count:2}),Pt.default.createElement(A.Input.Dropdown,{isDisabled:!s,style:{fontFamily:a,fontStyle:l,fontWeight:c},itemStyle:k=>({fontFamily:k.fontFamily,fontStyle:k.fontStyle,fontWeight:k.fontWeight}),label:r.dropdownFontFamily,list:C,onSelect:e.changeFont,selectedItem:F.label}),Pt.default.createElement(A.Spacer,{count:2}),Pt.default.createElement(iPe,null,Pt.default.createElement(oPe,{value:e.fontSize.toFixed(0),onSubmit:w,label:r.textFontSize,isDisabled:!s}),Pt.default.createElement(nPe,{isDisabled:!s,inline:!0,label:r.selectAlignment,"data-test":ee.TextAlignment},T())),Pt.default.createElement(A.Spacer,{count:2}),Pt.default.createElement(bX,null,Pt.default.createElement(X.ItemsSeparator,{full:!0})),Pt.default.createElement(A.Spacer,{count:2}),Pt.default.createElement(A.Input.Selection,{isDisabled:!s,label:r.selectFontColor},Pt.default.createElement(rr,{activeSprite:e.id,activeColor:e.textColor,colors:d,labelsColor:i,isDisabled:!s,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot})),Pt.default.createElement(A.Spacer,{count:2}),Pt.default.createElement(A.Input.Selection,{isDisabled:!s,label:r.selectBackgroundColor},Pt.default.createElement(rr,{activeSprite:e.id,activeColor:e.backgroundColor,colors:u,labelsColor:i,isDisabled:!s,onChange:e.changeBackgroundColor,onAddSnapshot:e.backgroundColorSnapshot})),Pt.default.createElement(A.Spacer,{count:2}),Pt.default.createElement(bX,null,Pt.default.createElement(X.ItemsSeparator,{full:!0})),Pt.default.createElement(A.Spacer,{count:2}),Pt.default.createElement(A.Input.Slider,{isDisabled:!s,label:r.sliderLineSpacing,value:e.lineHeight,min:.5,max:3,onChange:e.changeLineHeight,onMouseUp:y,onTouchEnd:y,snap:1,divider:1,decimal:1}),Pt.default.createElement(A.Spacer,{count:1})))},yX=P("textTool","custom")(R(sPe)),aPe=({textTool:e,displayTitle:t})=>Jg.default.createElement(Jg.default.Fragment,null,t&&Jg.default.createElement(X.Sidebar.Heading,null,e.locale.title),Jg.default.createElement(yX,null)),vX=P("textTool")(R(aPe)),Wh=_(require("react")),Us=_(require("react")),lPe=({textDesignTool:e,custom:t})=>{const r=e.locale.controls,i=e.localeColor.colorPicker,{colorList:o}=e,n=e.isTextDesignSelected,s=t.getButton("toolControlBarPrimaryButton"),a=t.getButton("toolControlBarSecondaryButton"),l=()=>{e.add()},c=()=>{e.changeSeed()};return Us.default.createElement(X.Controlsbar,{shouldAnimateOverflow:!1,shouldAnimateHeight:!1},Us.default.createElement(A.Input.Form,null,Us.default.createElement(s,{tool:S.TEXT_DESIGN,ariaLabel:r.buttonNew,onClick:l,fullWidth:!0,label:r.buttonNew}),Us.default.createElement(A.Spacer,{count:2}),Us.default.createElement(a,{tool:S.TEXT_DESIGN,ariaLabel:r.buttonShuffle,isDisabled:!n,onClick:c,fullWidth:!0,label:r.buttonShuffle}),Us.default.createElement(A.Spacer,{count:2}),Us.default.createElement(A.Input.Selection,{isDisabled:!n,label:r.selectColor},Us.default.createElement(rr,{activeSprite:e.id,activeColor:e.color,colors:o,labelsColor:i,isDisabled:!n,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))),Us.default.createElement(X.ItemsSeparator,null))},_X=P("textDesignTool","custom")(R(lPe)),Zg=_(require("react")),cPe=({textDesignTool:e,custom:t})=>{const{items:r,identifier:i}=e,o=s=>{e.changeIdentifier(s)},n=(s,a)=>{const l=t.getAdvancedItemCard();return Zg.default.createElement(l,{key:s.identifier,tool:S.TEXT_DESIGN,type:Ee.MEDIUM,onClick:()=>o(s.identifier),image:s.thumbnailURI,label:s.name||"",style:{animationDelay:`${We(a)}s`,backgroundSize:"60%"},isDisabled:!e.isTextDesignSelected,isActive:i===s.identifier},Zg.default.createElement(Mt,{hidden:!0},s.name))};return Zg.default.createElement(X.Itemsbar,null,Zg.default.createElement(X.CardContainer,null,r.map(n)))};var xX=P("textDesignTool","custom")(R(cPe));const dPe=({textDesignTool:e,displayTitle:t})=>Wh.default.createElement(Wh.default.Fragment,null,t&&Wh.default.createElement(X.Sidebar.Heading,null,e.locale.title),Wh.default.createElement(_X,null),Wh.default.createElement(xX,null)),wX=P("textDesignTool")(R(dPe)),Ic=_(require("react")),js=_(require("react")),uPe=({transformTool:e,custom:t})=>{const r=e.locale.controls,{forceDimensions:i,lockResolution:o,localOutputHeight:n,localOutputWidth:s}=e,a=t.getButton("toolControlBarSecondaryButton"),l=()=>{e.reset()},c=t.getCheckbox();return js.default.createElement(X.Controlsbar,{shouldAnimateHeight:!1},js.default.createElement(A.Input.Form,null,js.default.createElement(a,{tool:S.TRANSFORM,ariaLabel:r.buttonReset,onClick:l,fullWidth:!0,label:r.buttonReset}),js.default.createElement(A.Spacer,{count:2}),js.default.createElement(c,{isDisabled:i,value:o,label:r.checkboxKeepResolution,checkMarkPosition:"right",onClick:e.changeLockResolution,style:{paddingTop:"5px",justifyContent:"space-between"}}),js.default.createElement(A.Spacer,{count:2}),js.default.createElement(Ug,{isDisabled:i,showLabel:!0,valueHeight:n,valueWidth:s,onSubmitWidth:e.onPixelWidth,onSubmitHeight:e.onPixelHeight,label:r.inputCropSize,labelHeight:r.inputHeight,labelWidth:r.inputWidth}),js.default.createElement(A.Spacer,{count:1})),js.default.createElement(X.ItemsSeparator,null))};var SX=P("transformTool","custom")(R(uPe));const si=_(require("react")),HD=_(require("react-dom/server")),pPe=({transformTool:e,custom:t,editor:r})=>{const{categories:i,items:o,identifier:n,config:s,locale:a}=e,l=t.getAdvancedItemCard(),c=t.getAdvancedCategoryCard(),d=(h,b)=>{const{theme:y,measurements:f}=r.configStore,w=a.items[h.identifier]||h.name;let T=h.thumbnailURI||"",C="80%";if(!e.checkIfTransformThumbnailExits(h.thumbnailURI)){const F=h.identifier.includes("imgly_transform_common"),k=nt.crops[h.identifier]||nt.crops.imgly_transform_common_custom,E=si.default.createElement(k,{width:f.advancedCard.medium.width-(F?42:0),height:f.advancedCard.medium.height-(F?42:0),main:y.transform.crops.main,highlight:y.transform.crops.highlight,shadow:y.transform.crops.shadow});T=`'data:image/svg+xml,${encodeURIComponent(HD.renderToStaticMarkup(E))}'`,C=Ht()||Mo()?"auto":"unset"}return si.default.createElement(l,{key:h.identifier,tool:S.TRANSFORM,type:Ee.MEDIUM,onClick:()=>e.changeIdentifier(h.identifier,!0),image:T,label:w,style:{backgroundSize:C,animationDelay:`${We(b)}s`},isActive:h.identifier===n},si.default.createElement(Mt,null,w))},u=(h,b)=>{const{theme:y,measurements:f}=r.configStore,w=e.selectedCategoryIdentifier===h.identifier,T=a.categories[h.identifier]||h.name;let C=h.thumbnailURI||"";if(!h.items)return null;if(!e.checkIfTransformThumbnailExits(h.thumbnailURI)){const F=nt.categories[h.identifier]||nt.crops.imgly_transform_common_custom,k=si.default.createElement(F,{width:f.advancedCard.large.width-42,height:f.advancedCard.large.height-42,main:y.transform.crops.main,highlight:y.transform.crops.highlight,shadow:y.transform.crops.shadow});C=`'data:image/svg+xml,${encodeURIComponent(HD.renderToStaticMarkup(k))}'`}return si.default.createElement("div",{key:h.identifier},si.default.createElement(c,{type:Ee.LARGE,onClick:()=>e.toggleCategorySelection(h.identifier),key:h.identifier,image:C,style:{animationDelay:`${We(b)}s`},label:h.name,tool:S.TRANSFORM},si.default.createElement(Mt,{caret:!0,isActive:w},T)),si.default.createElement(X.Sidebar.ExpandableContainer,{show:w},h.items.map(d)))},p=(h,b)=>{const y=a.categories[h.identifier]||h.name;return h.items?si.default.createElement(X.Sidebar.TextCategory,{key:h.identifier,name:y,isFirstCategory:b===0,isLastCategory:b===i.length-1},h.items.map(d)):null};return s.flattenCategories?si.default.createElement(si.default.Fragment,null,o.map(d)):s.categoryHeaderType===Vt.CARD?si.default.createElement(si.default.Fragment,null,i.map(u)):s.categoryHeaderType===Vt.TEXT?si.default.createElement(si.default.Fragment,null,i.map(p)):null};var CX=P("transformTool","custom","editor")(R(pPe));const hPe=({transformTool:e,displayTitle:t})=>Ic.default.createElement(Ic.default.Fragment,null,t&&Ic.default.createElement(X.Sidebar.Heading,null,e.locale.title),Ic.default.createElement(SX,null),Ic.default.createElement(X.Itemsbar,null,Ic.default.createElement(X.CardContainer,null,Ic.default.createElement(CX,null))));var TX=P("transformTool")(R(hPe));let Hh=class extends zt.default.Component{render(){const{config:e,active:t}=this.props,r=t.tool,i=e.config.displayToolControlBarTitle;return zt.default.createElement(X.Sidebar.Index,{reverse:e.config.order==="reverse"},zt.default.createElement(A.Switch.Index,{type:r},zt.default.createElement(A.Switch.Case,{value:S.LIBRARY},zt.default.createElement(cX,{displayTitle:i})),zt.default.createElement(A.Switch.Case,{value:S.FILTER},zt.default.createElement(ZY,{displayTitle:i})),zt.default.createElement(A.Switch.Case,{value:S.FOCUS},zt.default.createElement(tX,{displayTitle:i})),zt.default.createElement(A.Switch.Case,{value:S.ADJUSTMENT},zt.default.createElement(KY,{displayTitle:i})),zt.default.createElement(A.Switch.Case,{value:S.OVERLAY},zt.default.createElement(pX,{displayTitle:i})),zt.default.createElement(A.Switch.Case,{value:S.STICKER},zt.default.createElement(gX,{displayTitle:i})),zt.default.createElement(A.Switch.Case,{value:S.TEXT},zt.default.createElement(vX,{displayTitle:i})),zt.default.createElement(A.Switch.Case,{value:S.TEXT_DESIGN},zt.default.createElement(wX,{displayTitle:i})),zt.default.createElement(A.Switch.Case,{value:S.FRAME},zt.default.createElement(oX,{displayTitle:i})),zt.default.createElement(A.Switch.Case,{value:S.BRUSH},zt.default.createElement(YY,{displayTitle:i})),zt.default.createElement(A.Switch.Case,{value:S.TRANSFORM},zt.default.createElement(TX,{displayTitle:i}))))}};Hh=m([P("active","config"),R],Hh);const EX=kX.default.div`
  position: absolute;
  height: 100%;
  width: ${e=>e.theme.measurements.advancedUIToolbar.width+e.theme.measurements.advancedUIToolControlBar.width}px;
  top: 0;
  background: ${e=>e.theme.webcam.backdrop};
  z-index: ${e=>e.theme.measurements.zIndex.disable};
`;let Qg=class extends Br.default.Component{static getDerivedStateFromError(e){return console.error(e),{hasError:!0}}render(){const{config:e,active:t}=this.props;return e.isOrderDefault?Br.default.createElement(A.Container,{"data-test":ee.EditorContainer},t.isWebcam?Br.default.createElement(EX,{style:{left:0}}):null,Br.default.createElement(Lh,null),Br.default.createElement(Uh,null),Br.default.createElement(Hh,null),Br.default.createElement(Hl,null,Br.default.createElement(Ih,null),Br.default.createElement(Bh,null))):Br.default.createElement(A.Container,{"data-test":ee.EditorContainer},t.isWebcam?Br.default.createElement(EX,{style:{right:0}}):null,Br.default.createElement(Lh,null),Br.default.createElement(Hl,null,Br.default.createElement(Ih,null),Br.default.createElement(Bh,null)),Br.default.createElement(Hh,null),Br.default.createElement(Uh,null))}};Qg=m([P("config","active"),R],Qg);const Vh=_(require("react")),DX=_(require("styled-components"));class fPe extends Vh.default.Component{constructor(e){super(e);this.ref=null;this.updatePosition=()=>{const{isReverse:e}=this.props,t={x:0,y:0};if(this.ref.current){const{top:r,height:i,left:o,right:n}=this.ref.current.getBoundingClientRect();t.y=r+i/4,t.x=e?window.innerWidth-n:o}this.setState({tooltipPosition:t})};this.mouseOver=e=>{this.updatePosition(),this.setState({hoverTool:e})};this.mouseOut=()=>{this.setState({hoverTool:null})};this.state={hoverTool:null,tooltipPosition:{x:0,y:0}},this.ref=Vh.default.createRef()}componentDidMount(){this.updatePosition()}componentDidUpdate(e){const{isReverse:t}=this.props;t!==e.isReverse&&this.updatePosition()}render(){const{tool:e,isActive:t,isReverse:r,icon:i,label:o,onClick:n,className:s,children:a}=this.props,{hoverTool:l,tooltipPosition:c}=this.state;return Vh.default.createElement(mPe,{ref:this.ref,onMouseOver:()=>this.mouseOver(e),onMouseOut:()=>this.mouseOut(),className:s},Vh.default.createElement(X.Toolbar.Item,{ariaLabel:o,isActive:t,onClick:()=>n(e)},i,a),Vh.default.createElement(X.Toolbar.Tooltip,{position:c,reverse:r,show:l===e},o))}}var Kh=fPe;const mPe=DX.default.div`
  position: relative;
`;class tb extends eb.default.Component{componentDidMount(){const{editor:e,storeProps:t}=this.props;this.editor=e,this.storeProps=t;const r=new zg(this.editor.configStore.config.custom.components,{advancedUICategoryCard:X.Card,advancedUIItemCard:X.Card,advancedUIToolbarItem:Kh}),i={getAdvancedCategoryCard:r.getAdvancedCategoryCard,getAdvancedItemCard:r.getAdvancedItemCard,getAdvancedToolbarItem:r.getAdvancedToolbarItem,getDialog:r.getDialog,getButton:r.getButton,getColorItem:r.getColorItem,getCheckbox:r.getCheckbox};this.storeProps.custom=i,this.forceUpdate()}render(){return this.storeProps?eb.default.createElement(ff,v({},this.storeProps),eb.default.createElement(IX.ThemeProvider,{theme:v(v({},this.editor.configStore.theme),{measurements:this.editor.configStore.measurements})},eb.default.createElement(Qg,null))):null}}document.onkeydown=e=>{e.keyCode===13&&document.activeElement&&document.activeElement.click()};const mw=_(require("react")),oI=_(require("react-dom"));class dMe extends so{constructor(e,t){super();this.dispose=()=>{this.container&&(oI.default.unmountComponentAtNode(this.container),this.removeAllListeners(fe.EXPORT),this.removeAllListeners(fe.HISTORY_CHANGE),this.removeAllListeners(fe.EDITOR_READY),this.removeAllListeners(fe.ERROR_IMAGE_LOADING),this.removeAllListeners(fe.IMAGE_LOAD),this.removeAllListeners(fe.TOOL_ENTER),this.removeAllListeners(fe.STICKER_UPLOAD_ADD))};this.serialize=e=>this.editor.serialize(e);this.deserialize=e=>this.editor.deserialize(e);this.export=e=>this.editor.export(e);this.close=()=>this.editor.close();this.setImage=e=>this.editor.setImage(e);this.reset=()=>{this.editor.resetToolStates(),this.editor.resize()};this.container=t,this.editor=new qt(v({},e)),this.editor.configStore.events.on(fe.EXPORT,r=>{this.emit(fe.EXPORT,r)}),this.editor.configStore.events.on(fe.CLOSE,()=>{this.dispose(),this.emit(fe.CLOSE)}),this.editor.configStore.events.on(fe.HISTORY_CHANGE,()=>{this.emit(fe.HISTORY_CHANGE)}),this.editor.configStore.events.on(fe.STICKER_UPLOAD_ADD,r=>{this.emit(fe.STICKER_UPLOAD_ADD,r)})}hasChanges(){return this.editor.hasChanges()}}class pMe{constructor(){this.container=null}init(e){return new Promise((t,r)=>{this.container=typeof e.container=="string"?document.querySelector(e.container):e.container,this.container?(this.editorApi=new dMe(e,this.container),oI.default.render(mw.default.createElement(uMe,{editor:this.editorApi.editor}),this.container),this.editorApi.editor.configStore.events.on(fe.EDITOR_READY,()=>{setTimeout(()=>{this.editorApi.emit(fe.EDITOR_READY)},0),t(this.editorApi)}),this.editorApi.editor.configStore.events.on(fe.ERROR_IMAGE_LOADING,i=>{setTimeout(()=>{this.editorApi.emit(fe.ERROR_IMAGE_LOADING,i)},0),t(this.editorApi)}),this.editorApi.editor.configStore.events.on(fe.IMAGE_LOAD,()=>{setTimeout(()=>{this.editorApi.emit(fe.IMAGE_LOAD)},0),t(this.editorApi)}),this.editorApi.editor.configStore.events.on(fe.TOOL_ENTER,i=>{setTimeout(()=>{this.editorApi.emit(fe.TOOL_ENTER,i)},0),t(this.editorApi)})):r(new Error("Provide a container"))})}}const vb=_(require("react")),LJ=_(require("styled-components")),Jn=_(require("react")),BJ=_(require("styled-components")),cb=_(require("react")),PX=_(require("react")),OX=_(require("styled-components")),AX=OX.default(jo)`
  margin: 2px;
  min-width: ${e=>e.theme.measurements.basicCard.large.width}px;
  height: ${e=>e.theme.measurements.basicCard.large.height}px;
  color: ${e=>e.theme.card.foreground};
`,RX=_(require("styled-components")),FX=RX.default(jo)`
  margin: 2px;
  min-width: ${e=>e.theme.measurements.basicCard.medium.width}px;
  height: ${e=>e.theme.measurements.basicCard.medium.height}px;
  color: ${e=>e.theme.card.foreground};
`,VD=e=>{const t=e.type===Ee.LARGE;let r=FX;return t&&(r=AX),PX.default.createElement(r,v({},e))};VD.defaultProps={type:Ee.MEDIUM};const MX=_(require("styled-components")),BX=MX.default(Cn)`
  transition-property: width;
  transition-duration: 0.4s;
  transition-timing-function: ease-in;
  height: ${e=>e.theme.measurements.basicToolControlBar.itemsBarHeight}px;
`;const LX=_(require("styled-components")),zX=LX.default(Mt)`
  &&& {
    min-height: 32px;
    font-size: ${e=>e.theme.measurements.fontSystem.basicUICardLabel.size}px;
    letter-spacing: ${e=>e.theme.measurements.fontSystem.basicUICardLabel.letterSpacing}px;
    text-transform: ${e=>e.theme.measurements.fontSystem.basicUICardLabel.case};
  }
`;const NX=_(require("styled-components")),UX=NX.default.div`
  display: flex;
  /* This fixes an IE11 issue where the items are behind the category */
  flex: 1 0 auto;
`,rb=_(require("styled-components")),jX=rb.default.div`
  position: relative;
  display: flex;
  flex-shrink: 0;
  height: auto;
  transition: max-height 0.4s ease-in-out;
  ${e=>e.show?rb.css`
          max-height: 80px;
        `:rb.css`
          max-height: 0px;
        `}
`;var qX=jX;jX.defaultProps={show:!0};const GX=_(require("styled-components")),gPe=GX.default.div`
  text-align: -moz-center;
  text-align: center;
  text-align: -webkit-center;
  margin: 0 10vw;
  height: auto;
  box-shadow: ${e=>e.theme.toolControlBar.shadow};
  @media all and (min-width: 0) and (max-width: 599px) {
    margin: 0 5vw;
  }
`;var WX=gPe;const HX=_(require("styled-components")),bPe=HX.default.div`
  width: 100px;
  @media all and (min-width: 0) and (max-width: 599px) {
    width: 42px;
  }
`;var VX=bPe;const iw=_(require("styled-components")),KX=iw.default.div.attrs(()=>({"data-test":ee.ToolControlBarControls}))`
  position: absolute;
  left: 0%;
  transform: translateY(0%) scaleY(0);
  justify-content: center;
  padding: 0 5vw;
  width: 90%;
  height: ${e=>e.theme.measurements.basicToolControlBar.controlsBarHeight}px;
  display: flex;
  align-items: center;
  transition: transform 0.4s ease-in-out;
  z-index: ${e=>e.theme.measurements.zIndex.controlsBar};
  background: ${e=>e.theme.toolControlBar.background};
  color: ${e=>e.theme.toolControlBar.inputLabelForeground};

  ${({show:e})=>e&&iw.css`
      transform: translateY(-100%) scaleY(1);
    `}
`,$h=_(require("react")),QX=_(require("styled-components")),$X=_(require("react")),YX=_(require("styled-components")),yPe=YX.default.div`
  display: flex;
  justify-content: center;
  align-items: center;
`,vPe=({label:e,className:t,children:r})=>$X.default.createElement(yPe,{"aria-label":e,className:t},r);var KD=vPe;const Ti=_(require("react")),XD=_(require("styled-components")),XX=_(require("styled-components")),_Pe=XX.default.div`
  display: flex;
  justify-content: center;
  align-items: center;
  animation: ${Vj.scale} 0.2s linear;
  animation-fill-mode: both;
  height: 40px;
  min-width: 350px;
  @media all and (min-width: 0) and (max-width: 599px) {
    min-width: 280px;
  }
`;var JX=_Pe;const $D=_(require("react")),ow=_(require("styled-components")),ZX=ow.css`
  background: ${e=>e.theme.tabTitle.activeBackground};
  color: ${e=>e.theme.tabTitle.activeForeground};
  border-bottom: 1px solid ${e=>e.theme.tabTitle.activeBorderColor};
`,xPe=ow.default(Dn)`
  display: inline-flex;
  align-items: center;
  font-size: ${e=>e.theme.measurements.fontSystem.basicUITabLabel.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.basicUITabLabel.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.basicUITabLabel.case};
  color: ${e=>e.theme.tabTitle.foreground};
  border-radius: 0px;
  padding: 1px 12px 2px;
  background: ${e=>e.theme.tabTitle.background};

  ${({isActive:e})=>e&&ZX}

  &:active {
    ${ZX}
  }

  @media all and (min-width: 0) and (max-width: 599px) {
    max-width: 150px;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
`;class YD extends $D.default.Component{constructor(){super(...arguments);this.onClick=()=>{const{label:e,onClick:t}=this.props;t(e)}}render(){const{activeTab:e,label:t}=this.props;return $D.default.createElement(xPe,{ariaLabel:t,isActive:e===t,onClick:this.onClick},t)}}const wPe=XD.default(Uo)`
  display: inline-flex;
  padding: 0 4px;
  height: 20px;
  font-size: 16px;
`,SPe=XD.default(Mf)`
  display: inline-flex;
  justify-content: center;
  transform: translate(-100%, -100%);
  @media all and (min-width: 0) and (max-width: 499px) {
    left: 0;
    right: 0;
    transform: translateY(-120%);
    background: transparent;
    button {
      &:first-child {
        border-bottom-right-radius: 0;
        border-top-right-radius: 0;
      }
      &:last-child {
        border-bottom-left-radius: 0;
        border-top-left-radius: 0;
      }
      &:not(:first-child):not(:last-child) {
        border-radius: 0;
      }
    }
  }
`;class CPe extends Ti.default.Component{constructor(e){super(e);this.onTabClick=e=>{this.setState({activeTab:e,toggleExtend:!1})};this.getDropUp=()=>{const{length:e}=this.props,{toggleExtend:t}=this.state,r=Ti.default.Children.toArray(this.props.children),i=Ti.default.Children.count(this.props.children),o=r.slice(e,i);return Ti.default.createElement(SPe,{show:t},o.map(n=>{const s=n.props.label||"";return Ti.default.createElement(Dn,{onClick:()=>this.onTabClick(s),key:s,ariaLabel:"More Options"},s)}))};this.extend=()=>{this.setState(({toggleExtend:e})=>({toggleExtend:!e}))};this.getExtension=()=>Ti.default.createElement(wPe,{onClick:this.extend,ariaLabel:"Select Next"},"...");const t=Ti.default.Children.count(this.props.children),r=Ti.default.Children.toArray(this.props.children);this.state={activeTab:t&&(r[0].props&&r[0].props.label)||"",toggleExtend:!1}}render(){const{length:e}=this.props,{activeTab:t,toggleExtend:r}=this.state,i=Ti.default.Children.toArray(this.props.children).slice(0,e),o=Ti.default.Children.count(this.props.children)>e;return Ti.default.createElement("div",null,i.map(n=>{if(n){const s=n.props.label||"";return Ti.default.createElement(YD,{activeTab:t,key:s,label:s,onClick:this.onTabClick})}return null}),o?this.getExtension():null,r?this.getDropUp():null,Ti.default.Children.map(this.props.children,n=>!n||n.props&&n.props.label!==t?null:Ti.default.createElement(JX,{key:n.props.label},n.props.children)))}}var ib=CPe;const TPe=QX.default.div`
  position: relative;
  white-space: nowrap;
  display: flex;
  transition: all 0.2s linear;
`;class ob extends $h.default.Component{constructor(e){super(e);this.updateLength=()=>{const{maxWidth:e,children:t}=this.props;let r=0;if(e)r=e;else{const n=window.innerWidth,s=n>600?300:200;r=n-s}const i=$h.default.Children.count(t),o=r-i*ob.TAB_WIDTH;if(o<0){const n=Math.round(Math.abs(o/ob.TAB_WIDTH));this.setState({length:i-n})}};this.state={length:$h.default.Children.count(this.props.children)}}componentDidMount(){window.addEventListener("resize",this.updateLength),this.updateLength()}componentWillUnmount(){window.removeEventListener("resize",this.updateLength)}render(){const{children:e}=this.props,{length:t}=this.state;return t?$h.default.createElement(TPe,null,$h.default.createElement(ib,{length:t},e)):null}}ob.TAB_WIDTH=120;const nw=_(require("styled-components")),kPe=nw.default.div`
  &:after {
    content: '';
    position: absolute;
    bottom: 0px;
    ${e=>e.full?nw.css`
            left: -24px;
            width: calc(100% + 48px);
          `:`
      left: 24px;
      width: calc(100% - 48px);
    `}
    border-bottom: 1px solid ${e=>e.theme.toolControlBar.separatorColor};
  }
`;var eJ=kPe;const tJ=_(require("styled-components")),EPe=tJ.default(A.Input.Slider).attrs(()=>({centerSlider:!0}))`
  max-width: 224px;
`;var rJ=EPe;const sw=_(require("styled-components")),DPe=sw.default.div`
  visibility: hidden;
  opacity: 0;
  display: none;

  ${({show:e})=>e&&sw.css`
      opacity: 1;
      visibility: visible;
      display: flex;
    `}
`;var iJ=DPe;const nb=_(require("styled-components")),JD=nb.default.div`
  display: flex;
  flex-shrink: 0;
  justify-content: center;
  position: relative;
  width: 100%;
  height: ${e=>e.theme.measurements.basicToolControlBar.itemsBarHeight}px;
  z-index: ${e=>e.theme.measurements.zIndex.toolControlBar};

  ${e=>e.show?nb.css`
          transition-timing-function: ease-in;
          transition-duration: 0.3s;
          transition-property: all;
          padding: 2px 0px;
          max-height: ${e.theme.measurements.basicToolControlBar.itemsBarHeight}px;
          background: ${e.theme.toolControlBar.background};
          color: ${e.theme.toolControlBar.inputLabelForeground};
        `:nb.css`
          max-height: 0px;
        `}
`;JD.defaultProps={show:!0};const oJ=_(require("styled-components")),IPe=oJ.default.div`
  height: ${e=>e.theme.measurements.basicToolControlBar.itemsBarHeight}px;
  width: 2px;
  margin: 0 10px;
  display: inline-flex;
  position: relative;
  &:after {
    content: ' ';
    right: 0px;
    position: absolute;
    top: 8px;
    height: calc(100% - 16px);
    border-right: 1px solid
      ${e=>e.theme.toolControlBar.separatorColor};
  }
`;var nJ=IPe;const ZD=_(require("react")),sb=_(require("styled-components")),Yd=_(require("styled-components")),sJ=Yd.default.span`
  display: flex;
  cursor: pointer;
  z-index: ${e=>e.theme.measurements.zIndex.label};
  transition: bottom 0.3s linear;
`,aJ=Yd.css`
  background-color: ${e=>e.theme.toolbar.activeBackground};
  color: ${e=>e.theme.toolbar.activeForeground};
`,aw=Yd.default(ei)`
  display: block;
  height: 100%;
  width: 100%;
  color: ${e=>e.theme.toolbar.foreground};
  background-color: ${e=>e.theme.toolbar.background};
  border: unset;
  box-shadow: unset;
  font-size: ${e=>e.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.label.case};
  font-family: '${e=>e.theme.typography.fontFamily}', sans-serif;

  ${({isActive:e})=>e&&aJ}

  &:active {
    ${aJ}
  }

  svg {
    display: flex;
    transition: visibility 0s, opacity 0.5s linear;
    visibility: visible;
    opacity: 1;
  }
`,lJ=Yd.default.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
`,lw=Yd.default.div.attrs({role:"none"})`
  display: flex;
  height: ${e=>e.theme.measurements.basicUIToolbar.openHeight-2}px;
  text-align: center;
  min-width: 100px;
  /* Allow the text to grow in this limit */
  max-width: 150px;
  position: relative;
  /* Position inline-block box at the top of the line box */
  vertical-align: top;
  /* Allow text to wrap again, overwriting the Toolbar style */
  white-space: normal;
  margin: 1px;
`,OPe=sb.default.div`
  display: flex;
  flex-shrink: 0;
  justify-content: center;
  position: relative;
  width: 100%;
  transition: height 0.2s ease-out, display 0.1s fade-out;
  background-color: ${e=>e.theme.toolbar.background};
  color: ${e=>e.theme.toolbar.foreground};
  z-index: ${e=>e.theme.measurements.zIndex.toolbar};

  ${e=>e.show?sb.css`
          height: ${e.theme.measurements.basicUIToolbar.closeHeight}px;
          ${aw} {
            svg {
              visibility: hidden;
              opacity: 0;
              height: 0;
            }
          }
          ${lw} {
            height: ${e.theme.measurements.basicUIToolbar.closeHeight}px;
          }
        `:sb.css`
          height: ${e.theme.measurements.basicUIToolbar.openHeight}px;
        `}
`,cJ=({show:e=!1,children:t})=>ZD.default.createElement(OPe,{"data-test":ee.Toolbar,show:e},ZD.default.createElement(Cn,null,t)),ab=_(require("react")),dJ=({children:e,label:t,isActive:r,onClick:i})=>ab.default.createElement(lw,{"aria-haspopup":!0,"aria-expanded":r},ab.default.createElement(aw,{"data-test":ee.ToolbarItem,ariaLabel:t,onClick:i,isActive:r},ab.default.createElement(lJ,null,e,ab.default.createElement(sJ,null,t)))),lb=_(require("styled-components")),APe=lb.default.li.attrs({role:"none"})`
  ${e=>e.active?lb.css`
          height: ${e.theme.measurements.basicUIToolbar.closeHeight}px;
        `:lb.css`
          height: ${e.theme.measurements.basicUIToolbar.openHeight}px;
        `}
  width: 2px;
  display: inline-block;
  position: relative;
  &:after {
    content: ' ';
    right: 0px;
    position: absolute;
    top: 8px;
    height: calc(100% - 16px);
    border-right: 1px solid
      ${e=>e.theme.toolControlBar.separatorColor};
  }
`;var uJ=APe;const N={CardContainer:BX,ExpandableContainer:iJ,CategoryContainer:UX,Card:VD,CardAvatar:Ol,CardLabel:zX,Toolbar:{Index:cJ,Item:dJ,Separator:uJ},BarSeparator:eJ,ItemsSeparator:nJ,Itemsbar:JD,Controlsbar:qX,ControlsbarContainer:KX,ResponsiveTabWrapper:ob,Slider:rJ,TabWrapper:ib,Tab:KD,Other:{ControlsWrapper:WX,EmptyDiv:VX}},RPe=({config:e,active:t})=>{const{tools:r}=e,i=t.tool,o=a=>{const l=Z_[a];return cb.default.createElement(l,null)||null},n=a=>e.locale[a].title,s=(a,l)=>a&&cb.default.createElement(N.Toolbar.Item,{onClick:()=>t.selectTool(a),key:a,label:n(a),isActive:i===a},o(a))||cb.default.createElement(N.Toolbar.Separator,{key:a+l,active:!!i});return cb.default.createElement(N.Toolbar.Index,{show:!!i},r.map(s))},pJ=P("config","active")(R(RPe)),Nt=_(require("react")),qs=_(require("react")),FPe=({adjustmentsTool:e,custom:t})=>{const r=e.selectedAdjustmentType.toLowerCase(),i=t.getButton("toolControlBarSecondaryButton"),o=()=>{e.toolSnapshot()};return qs.default.createElement(N.ControlsbarContainer,{show:Boolean(r)},qs.default.createElement(i,{tool:S.ADJUSTMENT,ariaLabel:e.locale.controls.buttonReset,onClick:e.reset,icon:qs.default.createElement(Kt.reset,null),label:e.locale.controls.buttonReset}),qs.default.createElement(N.Other.ControlsWrapper,null,qs.default.createElement(A.Spacer,{count:2}),qs.default.createElement(N.Slider,{"aria-hidden":!r,adjust:!0,style:{width:"280px"},label:e.selectedOptionLabel,value:e[r],onChange:n=>e.editAdjustments({type:r,value:n}),onMouseUp:o,onTouchEnd:o,snap:0}),qs.default.createElement(A.Spacer,{count:2}),qs.default.createElement(N.BarSeparator,null)),qs.default.createElement(N.Other.EmptyDiv,null))};var hJ=P("adjustmentsTool","custom")(R(FPe));const ki=_(require("react")),PPe=N.TabWrapper,{Tab:QD}=N,MPe=({brushTool:e,custom:t})=>{const{colorList:r,locale:i,localeColor:o}=e,n=i.controls,s=o.colorPicker,a=t.getButton("toolControlBarSecondaryButton");return ki.default.createElement(N.ControlsbarContainer,{style:{justifyContent:"center"},show:!0},ki.default.createElement(a,{tool:S.BRUSH,ariaLabel:n.buttonReset,onClick:e.reset,icon:ki.default.createElement(Kt.reset,null),isDisabled:!e.isDirty,label:n.buttonReset}),ki.default.createElement(N.Other.ControlsWrapper,null,ki.default.createElement(A.Input.Form,null,ki.default.createElement(PPe,null,ki.default.createElement(QD,{label:n.tabColor},ki.default.createElement(A.Spacer,{count:1}),ki.default.createElement(A.Input.Selection,{showLabel:!1,label:n.selectColor},ki.default.createElement(rr,{activeColor:e.color,colors:r,labelsColor:s,colorPickerDirection:"top",onChange:e.changeColor}))),ki.default.createElement(QD,{label:n.tabSize},ki.default.createElement(N.Slider,{style:{width:"280px"},showLabel:!1,label:n.sliderSize,value:e.relativeSize,min:1,max:100,divider:1,onChange:e.changeRelativeSize})),ki.default.createElement(QD,{label:n.tabHardness},ki.default.createElement(N.Slider,{style:{width:"280px"},showLabel:!1,label:n.sliderHardness,value:e.hardness,min:0,max:1,onChange:e.changeHardness}))))))},mJ=P("brushTool","custom")(R(MPe)),Gs=_(require("react")),BPe=({filterTool:e,custom:t})=>{const{state:r}=e,i=e.locale.controls,o=t.getButton("toolControlBarSecondaryButton"),n=()=>{e.toolSnapshot()};return Gs.default.createElement(N.ControlsbarContainer,{show:e.isOptionSelected},Gs.default.createElement(o,{tool:S.FILTER,ariaLabel:e.locale.controls.buttonReset,onClick:e.reset,icon:Gs.default.createElement(Kt.reset,null),label:e.locale.controls.buttonReset}),Gs.default.createElement(N.Other.ControlsWrapper,null,Gs.default.createElement(A.Spacer,{count:2}),Gs.default.createElement(N.Slider,{"aria-hidden":!e.isOptionSelected,style:{width:"280px"},label:i.sliderIntensity,value:r.intensity,min:0,max:1,onMouseUp:n,onTouchEnd:n,onChange:e.changeIntensity,snap:r.isDuotone?.5:null}),Gs.default.createElement(A.Spacer,{count:2}),Gs.default.createElement(N.BarSeparator,null)),Gs.default.createElement(N.Other.EmptyDiv,null))};var fJ=P("filterTool","custom")(R(BPe));const Ws=_(require("react")),gJ=R(()=>{const{focusTool:e,custom:t}=Pr(),r=e.locale.controls,i=t.getButton("toolControlBarSecondaryButton"),o=()=>{e.toolSnapshot(r.sliderIntensity)};return Ws.default.createElement(N.ControlsbarContainer,{show:e.isOptionSelected},Ws.default.createElement(i,{tool:S.FOCUS,ariaLabel:r.buttonReset,onClick:e.reset,icon:Ws.default.createElement(Kt.reset,null),label:r.buttonReset}),Ws.default.createElement(N.Other.ControlsWrapper,null,Ws.default.createElement(A.Spacer,{count:2}),Ws.default.createElement(N.Slider,{"aria-hidden":!e.isOptionSelected,style:{width:"280px"},label:r.sliderIntensity,value:e.relativeIntensity,min:0,max:100,divider:1,onChange:e.changeRelativeIntensity,onMouseUp:o,onTouchEnd:o}),Ws.default.createElement(A.Spacer,{count:2}),Ws.default.createElement(N.BarSeparator,null)),Ws.default.createElement(N.Other.EmptyDiv,null))}),Vr=_(require("react")),LPe=N.TabWrapper,{Tab:eI}=N,zPe=({frameTool:e,custom:t})=>{const r=e.locale.controls,i=e.localeColor.colorPicker,{tintable:o,colorList:n}=e,s=t.getButton("toolControlBarSecondaryButton"),a=l=>{e.toolSnapshot(l)};return Vr.default.createElement(N.ControlsbarContainer,{show:e.isOptionSelected},Vr.default.createElement(s,{tool:S.FRAME,ariaLabel:r.buttonReset,onClick:e.reset,icon:Vr.default.createElement(Kt.reset,null),label:r.buttonReset}),Vr.default.createElement(N.Other.ControlsWrapper,null,Vr.default.createElement(A.Spacer,null),Vr.default.createElement(LPe,null,Vr.default.createElement(eI,{label:r.tabOpacity},Vr.default.createElement(N.Slider,{"aria-hidden":!e.isOptionSelected,showLabel:!1,style:{width:"280px"},label:r.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:()=>{a(r.sliderOpacity)},onTouchEnd:()=>{a(r.sliderOpacity)}})),Vr.default.createElement(eI,{label:r.tabSize},Vr.default.createElement(N.Slider,{"aria-hidden":!e.isOptionSelected,showLabel:!1,style:{width:"280px"},label:r.sliderSize,value:e.size,min:e.minSize,max:e.maxSize,divider:1,onChange:e.changeWidth,onMouseUp:()=>{a(r.sliderSize)},onTouchEnd:()=>{a(r.sliderSize)}})),o&&Vr.default.createElement(eI,{label:r.tabColor},Vr.default.createElement(A.Spacer,{count:1}),Vr.default.createElement(A.Input.Selection,{label:r.selectColor,showLabel:!1},Vr.default.createElement(rr,{activeColor:e.color,colors:n,labelsColor:i,colorPickerDirection:"top",onChange:e.changeColor,onAddSnapshot:e.colorSnapshot})))||null),Vr.default.createElement(N.BarSeparator,null)),Vr.default.createElement(N.Other.EmptyDiv,null))},bJ=P("frameTool","canvas","custom")(R(zPe)),Hs=_(require("react")),cw=_(require("styled-components")),NPe=cw.default(N.ControlsbarContainer)`
  ${e=>e.firstChildMargin&&cw.css`
      > :first-child {
        margin-right: 16px;
      }
    `}
`,UPe=({library:e,active:t,custom:r})=>{const i=e.locale.controls.placeholderSearch,{config:o}=e,n=r.getButton("toolControlBarPrimaryButton"),s=d=>{e.fetchImages(d)},a=d=>{const{files:u}=d.target;if(u.length){const p=new FileReader;p.onload=h=>{t.newImage(h.target.result)},p.readAsDataURL(u[0])}},l=()=>{t.selectWebcam(!0)},c=()=>{const d=document.getElementById("fileUpload");d&&d.click()};return Hs.default.createElement(NPe,{firstChildMargin:o.enableWebcam&&!e.libraryProvider,show:!0},o.enableUpload&&Hs.default.createElement(n,{tool:S.LIBRARY,ariaLabel:e.locale.controls.buttonUpload,onClick:c,icon:Hs.default.createElement(Kt.uploadImage,null),label:e.locale.controls.buttonUpload},Hs.default.createElement(A.Input.File,{onChange:a})),e.libraryProvider&&Hs.default.createElement(N.Other.ControlsWrapper,null,Hs.default.createElement(A.Input.Search,{onChange:s,placeholder:i})),o.enableWebcam&&Hs.default.createElement(rw,{tool:S.LIBRARY,onClick:l,icon:Hs.default.createElement(Kt.openWebcam,null),label:e.locale.controls.buttonWebcamOpen}),Hs.default.createElement(N.BarSeparator,null))};var yJ=P("library","active","custom")(R(UPe));const To=_(require("react")),jPe=N.TabWrapper,{Tab:vJ}=N,qPe=({overlayTool:e,custom:t})=>{const{state:r}=e,i=e.locale.controls,{allBlendModes:o}=e,{blendMode:n}=e,s=t.getButton("toolControlBarSecondaryButton"),a=()=>{e.toolSnapshot()},l=c=>{e.changeBlendMode(c)};return To.default.createElement(N.ControlsbarContainer,{show:e.isOptionSelected},To.default.createElement(s,{tool:S.OVERLAY,ariaLabel:i.buttonReset,onClick:e.reset,icon:To.default.createElement(Kt.reset,null),label:i.buttonReset}),To.default.createElement(N.Other.ControlsWrapper,null,To.default.createElement(A.Spacer,null),To.default.createElement(jPe,null,To.default.createElement(vJ,{label:i.tabBlendMode},To.default.createElement(A.Input.CarouselSlider,{showLabel:!1,label:i.carouselBlendMode,defaultIdentifier:n,onSelect:l,list:o})),To.default.createElement(vJ,{label:i.tabOpacity},To.default.createElement(N.Slider,{"aria-hidden":!e.isOptionSelected,showLabel:!1,style:{width:"280px"},label:i.sliderOpacity,value:r.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:a,onTouchEnd:a}))),To.default.createElement(N.BarSeparator,null)),To.default.createElement(N.Other.EmptyDiv,null))};var _J=P("overlayTool","custom")(R(qPe));const dr=_(require("react")),xJ=_(require("styled-components")),GPe=N.TabWrapper,{Tab:wJ}=N,WPe=xJ.default.input.attrs({type:"file",id:"fileUpload",accept:"image/*",multiple:!0})`
  ${Y_.VisuallyHidden}
`,HPe=({stickerTool:e,custom:t})=>{const{colorList:r}=e,i=e.locale.controls,o=e.localeColor.colorPicker,n=t.getButton("toolControlBarPrimaryButton"),s=()=>{e.toolSnapshot()},a=()=>{const p=document.getElementById("fileUpload");p&&(p.value=null,p.click())},l=p=>{const{files:h}=p.target;e.addFiles(h)},c=()=>dr.default.createElement("div",null,dr.default.createElement(A.Spacer,{count:2}),dr.default.createElement(N.Slider,{isDisabled:!e.isStickerSelected,style:{width:"280px"},label:i.sliderOpacity,value:e.opacity,min:0,max:1,onMouseUp:s,onTouchEnd:s,onChange:e.changeOpacity}),dr.default.createElement(A.Spacer,{count:2})),d=()=>dr.default.createElement("div",null,dr.default.createElement(A.Spacer,null),dr.default.createElement(GPe,null,dr.default.createElement(wJ,{label:i.tabColor},dr.default.createElement(A.Spacer,{count:1}),dr.default.createElement(A.Input.Selection,{isDisabled:!e.isStickerSelected,showLabel:!1,label:i.selectColor},dr.default.createElement(rr,{activeSprite:e.id,activeColor:e.tintColor,colors:r,labelsColor:o,isDisabled:!e.isStickerSelected,colorPickerDirection:"top",onChange:e.changeTintColor,onAddSnapshot:e.tintColorSnapshot}))),dr.default.createElement(wJ,{label:i.tabOpacity},dr.default.createElement(N.Slider,{isDisabled:!e.isStickerSelected,showLabel:!1,style:{width:"280px"},label:i.sliderOpacity,value:e.opacity,min:0,max:1,onMouseUp:s,onTouchEnd:s,onChange:e.changeOpacity})))),u=()=>e.isCustomStickerEnabled?dr.default.createElement(n,{tool:S.STICKER,ariaLabel:i.buttonUpload,onClick:a,icon:dr.default.createElement(Kt.uploadImage,null),label:i.buttonUpload},dr.default.createElement(WPe,{onChange:l})):null;return dr.default.createElement(N.ControlsbarContainer,{show:!0},u(),dr.default.createElement(N.Other.ControlsWrapper,null,e.tintable&&d()||c(),dr.default.createElement(N.BarSeparator,null)),dr.default.createElement(N.Other.EmptyDiv,null))},SJ=P("stickerTool","custom")(R(HPe)),Gt=_(require("react")),CJ=_(require("styled-components")),VPe=N.ResponsiveTabWrapper,{Tab:db}=N,KPe=CJ.default(A.Input.NumericInput)`
  max-width: 55px;
  > div > input {
    text-align: center;
  }
`,$Pe=({textTool:e,custom:t})=>{const{colorList:r,backgroundColorList:i}=e,o=e.locale.controls,n=e.localeColor.colorPicker,s=["left","center","right"],a=t.getButton("textAlignment"),l=t.getButton("toolControlBarPrimaryButton"),c=()=>s.map(p=>{const h=Q_[p];return Gt.default.createElement(a,{tool:p,isDisabled:!e.isTextSelected,ariaLabel:`Align ${p}`,isActive:p===e.alignment,key:p,icon:Gt.default.createElement(h,null),onClick:()=>e.changeAlignment(p)})}),d=()=>{e.toolSnapshot()},u=p=>{const h=p?parseFloat(p):0;e.setFontSize(Math.max(10,Math.min(690,h)))};return Gt.default.createElement(N.ControlsbarContainer,{show:!0},Gt.default.createElement(l,{tool:S.TEXT,ariaLabel:o.buttonNew,onClick:e.add,icon:Gt.default.createElement(Kt.addText,null),label:o.buttonNew}),Gt.default.createElement(N.Other.ControlsWrapper,null,Gt.default.createElement(A.Spacer,null),Gt.default.createElement(VPe,null,Gt.default.createElement(db,{label:o.tabFontSize},Gt.default.createElement(KPe,{value:e.fontSize.toFixed(0),onSubmit:u,isDisabled:!e.isTextSelected})),Gt.default.createElement(db,{label:o.tabAlignment},Gt.default.createElement(A.Input.Selection,{isDisabled:!e.isTextSelected,showLabel:!1,label:o.selectAlignment},c())),Gt.default.createElement(db,{label:o.tabColor},Gt.default.createElement(A.Spacer,null),Gt.default.createElement(A.Input.Selection,{isDisabled:!e.isTextSelected,showLabel:!1,label:o.selectFontColor},Gt.default.createElement(rr,{activeSprite:e.id,activeColor:e.textColor,colors:r,labelsColor:n,colorPickerDirection:"top",isDisabled:!e.isTextSelected,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))),Gt.default.createElement(db,{label:o.tabBgColor},Gt.default.createElement(A.Spacer,null),Gt.default.createElement(A.Input.Selection,{isDisabled:!e.isTextSelected,showLabel:!1,label:o.selectBackgroundColor},Gt.default.createElement(rr,{activeSprite:e.id,activeColor:e.backgroundColor,colors:i,labelsColor:n,colorPickerDirection:"top",isDisabled:!e.isTextSelected,onChange:e.changeBackgroundColor,onAddSnapshot:e.backgroundColorSnapshot}))),Gt.default.createElement(db,{label:o.tabLineHeight},Gt.default.createElement(N.Slider,{isDisabled:!e.isTextSelected,showLabel:!1,label:o.sliderLineSpacing,value:e.lineHeight,min:.5,max:3,onChange:e.changeLineHeight,onMouseUp:d,onTouchEnd:d,snap:1,divider:1,decimal:1}))),Gt.default.createElement(N.BarSeparator,null)),Gt.default.createElement(N.Other.EmptyDiv,null))},TJ=P("textTool","custom")(R($Pe)),Vs=_(require("react")),YPe=({textDesignTool:e,custom:t})=>{const r=e.locale.controls,i=e.localeColor.colorPicker,{colorList:o}=e,n=t.getButton("toolControlBarSecondaryButton"),s=t.getButton("toolControlBarPrimaryButton");return Vs.default.createElement(N.ControlsbarContainer,{show:!0},Vs.default.createElement(s,{tool:S.TEXT_DESIGN,ariaLabel:r.buttonNew,onClick:e.add,icon:Vs.default.createElement(Kt.addText,null),label:r.buttonNew}),Vs.default.createElement(N.Other.ControlsWrapper,null,Vs.default.createElement(A.Input.Selection,{isDisabled:!e.isTextDesignSelected,label:r.selectColor},Vs.default.createElement(rr,{activeSprite:e.id,activeColor:e.color,colors:o,labelsColor:i,colorPickerDirection:"top",isDisabled:!e.isTextDesignSelected,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))),Vs.default.createElement(n,{tool:S.TEXT_DESIGN,ariaLabel:r.buttonShuffle,onClick:e.changeSeed,icon:Vs.default.createElement(Kt.shuffle,null),label:r.buttonShuffle}),Vs.default.createElement(N.BarSeparator,null))},kJ=P("textDesignTool","custom")(R(YPe)),Ei=_(require("react")),XPe=N.ResponsiveTabWrapper,{Tab:tI}=N,JPe=({transformTool:e,custom:t})=>{const r=e.locale.controls,{forceDimensions:i}=e,o=t.getCheckbox(),n=t.getButton("toolControlBarSecondaryButton");return Ei.default.createElement(N.ControlsbarContainer,{show:!0},Ei.default.createElement(n,{tool:S.TRANSFORM,ariaLabel:e.locale.controls.buttonReset,onClick:e.reset,icon:Ei.default.createElement(Kt.reset,null),label:e.locale.controls.buttonReset}),Ei.default.createElement(N.Other.ControlsWrapper,null,Ei.default.createElement(A.Spacer,null),Ei.default.createElement(XPe,null,Ei.default.createElement(tI,{label:r.tabCropSize},Ei.default.createElement(Ug,{isDisabled:i,showLabel:!1,valueHeight:e.localOutputHeight,valueWidth:e.localOutputWidth,onSubmitWidth:e.onPixelWidth,onSubmitHeight:e.onPixelHeight,label:r.inputCropSize,labelHeight:r.inputHeight,labelWidth:r.inputWidth})),Ei.default.createElement(tI,{label:r.tabFlipAndRotate},Ei.default.createElement(Bg,null)),Ei.default.createElement(tI,{label:r.tabResolution},Ei.default.createElement(o,{isDisabled:i,style:{paddingTop:"5px",justifyContent:"center"},value:e.lockResolution,checkMarkPosition:"left",label:r.checkboxKeepResolution,onClick:e.changeLockResolution}))),Ei.default.createElement(N.BarSeparator,null)),Ei.default.createElement(N.Other.EmptyDiv,null))};var EJ=P("transformTool","custom")(R(JPe));let ub=class extends Nt.default.Component{render(){const{active:e}=this.props,t=e.tool;return Nt.default.createElement(N.Controlsbar,{show:!!t},Nt.default.createElement(A.Switch.Index,{type:t},Nt.default.createElement(A.Switch.Case,{value:S.FILTER},Nt.default.createElement(fJ,null)),Nt.default.createElement(A.Switch.Case,{value:S.FOCUS},Nt.default.createElement(gJ,null)),Nt.default.createElement(A.Switch.Case,{value:S.ADJUSTMENT},Nt.default.createElement(hJ,null)),Nt.default.createElement(A.Switch.Case,{value:S.OVERLAY},Nt.default.createElement(_J,null)),Nt.default.createElement(A.Switch.Case,{value:S.STICKER},Nt.default.createElement(SJ,null)),Nt.default.createElement(A.Switch.Case,{value:S.TEXT},Nt.default.createElement(TJ,null)),Nt.default.createElement(A.Switch.Case,{value:S.TEXT_DESIGN},Nt.default.createElement(kJ,null)),Nt.default.createElement(A.Switch.Case,{value:S.LIBRARY},Nt.default.createElement(yJ,null)),Nt.default.createElement(A.Switch.Case,{value:S.FRAME},Nt.default.createElement(bJ,null)),Nt.default.createElement(A.Switch.Case,{value:S.BRUSH},Nt.default.createElement(mJ,null)),Nt.default.createElement(A.Switch.Case,{value:S.TRANSFORM},Nt.default.createElement(EJ,null))))}};ub=m([P("active","config"),R],ub);const ko=_(require("react")),Yh=_(require("react")),DJ=_(require("styled-components")),ZPe=DJ.default.div`
  position: relative;
  top: -8px;
  color: ${e=>e.theme.card.foreground};
`,QPe=({adjustmentsTool:e})=>{const t=(r,i)=>{const o=sq[r.identifier];return Yh.default.createElement(N.Card,{tool:S.ADJUSTMENT,type:Ee.MEDIUM,onClick:()=>e.toggleOptionSelection(r.identifier),isActive:r.identifier===e.selectedAdjustmentType,key:`${r.identifier}-${i}`,label:r.name,style:{animationDelay:`${We(i)}s`}},Yh.default.createElement(ZPe,null,Yh.default.createElement(o,null)),Yh.default.createElement(N.CardLabel,null,e.locale.items[r.identifier]||r.name))};return Yh.default.createElement(N.CardContainer,null,e.items.map(t))};var IJ=P("adjustmentsTool")(R(QPe));const Ks=_(require("react"));let pb=class extends Ks.default.Component{constructor(){super(...arguments);this.onCategoryClick=e=>{const{filterTool:t}=this.props;t.toggleCategorySelection(e)};this.renderItem=(e,t)=>{const{filterTool:r}=this.props;return Ks.default.createElement(N.Card,{tool:S.FILTER,type:Ee.MEDIUM,onClick:()=>r.selectFilter(e.identifier,e.defaultIntensity),isActive:r.identifier===e.identifier,key:`${e.identifier}-${t}`,image:e.thumbnailURI,label:e.name,style:{animationDelay:`${We(t)}s`}},Ks.default.createElement(N.CardLabel,{withBackground:!0},r.locale.categories[e.identifier]||r.locale.items[e.identifier]||e.name))};this.renderCategory=(e,t)=>{const{filterTool:r}=this.props,{selectedCategoryIdentifier:i}=r,o=i===e.identifier;return e.items?Ks.default.createElement(N.CategoryContainer,{key:e.identifier},Ks.default.createElement(N.Card,{tool:S.FILTER,type:Ee.LARGE,onClick:()=>this.onCategoryClick(e.identifier),image:e.thumbnailURI,label:e.name,style:{animationDelay:`${We(t)}s`}},Ks.default.createElement(N.CardLabel,{withBackground:!0},e.name)),Ks.default.createElement(N.ExpandableContainer,{show:o},e.items.map(this.renderItem))):null}}render(){const{filterTool:e}=this.props,{categories:t,config:r,items:i}=e;return r.flattenCategories?Ks.default.createElement(N.CardContainer,null,i.map(this.renderItem)):Ks.default.createElement(N.CardContainer,null,t.map(this.renderCategory))}};pb=m([P("filterTool","active"),R],pb);const dw=_(require("react")),eMe=({focusTool:e})=>{const t=i=>{e.selectFocus(i)},r=(i,o)=>dw.default.createElement(N.Card,{isActive:i.identifier===e.identifier,tool:S.FOCUS,type:Ee.MEDIUM,onClick:()=>t(i.identifier),key:`${i.identifier}-${o}`,image:i.thumbnailURI,label:i.name,style:{animationDelay:`${We(o)}s`}},dw.default.createElement(N.CardLabel,{withBackground:!0},e.locale.items[i.identifier]||i.name));return dw.default.createElement(N.CardContainer,null,e.items.map(r))};var OJ=P("focusTool")(R(eMe));const uw=_(require("react")),tMe=({frameTool:e})=>{const t=e.identifier,r=(i,o)=>uw.default.createElement(N.Card,{tool:S.FRAME,type:Ee.MEDIUM,onClick:()=>e.selectFrame(i.identifier),isActive:i.identifier===t,key:`${i.identifier}-${o}`,image:i.thumbnailURI,label:i.name,style:{animationDelay:`${We(o)}s`,backgroundSize:"60%"}}," ",uw.default.createElement(N.CardLabel,{hidden:!0},e.locale.items[i.identifier]||i.name));return uw.default.createElement(N.CardContainer,null,e.items.map(r))};var AJ=P("frameTool")(R(tMe));const Xn=_(require("react"));let hb=class extends Xn.default.Component{constructor(){super(...arguments);this.onCategoryClick=e=>{const{library:t}=this.props;t.toggleCategorySelection(e)};this.renderItem=(e,t)=>{const{active:r}=this.props;return Xn.default.createElement(N.Card,{tool:S.LIBRARY,type:Ee.MEDIUM,onClick:()=>r.newImage(e.rawUrl),key:`${e.identifier}-${t}`,image:e.thumbnailURI,label:e.name,style:{animationDelay:`${We(t)}s`}})};this.renderCategory=(e,t)=>{const{library:r}=this.props,{selectedCategoryIdentifier:i}=r,o=i===e.identifier;return e.items?Xn.default.createElement(N.CategoryContainer,{key:e.identifier},Xn.default.createElement(N.Card,{tool:S.LIBRARY,type:Ee.LARGE,onClick:()=>this.onCategoryClick(e.identifier),image:e.thumbnailURI,label:e.name,style:{animationDelay:`${We(t)}s`}},Xn.default.createElement(N.CardLabel,{withBackground:!0},e.name)),Xn.default.createElement(N.ExpandableContainer,{show:o},e.items.map(this.renderItem))):null}}render(){const{library:e}=this.props,{query:t,categories:r,items:i,locale:o,config:n}=e;return t?i.length?Xn.default.createElement(N.CardContainer,null,i.map(this.renderItem)):Xn.default.createElement("p",{"data-test":ee.NoResult},o.controls.noResults):n.flattenCategories?Xn.default.createElement(N.CardContainer,null,i.map(this.renderItem)):Xn.default.createElement(N.CardContainer,null,r.map(this.renderCategory))}};hb=m([P("library","active"),R],hb);const pw=_(require("react")),rMe=({overlayTool:e})=>{const{identifier:t,items:r,selectOverlay:i,locale:o}=e,n=(s,a)=>pw.default.createElement(N.Card,{tool:S.OVERLAY,type:Ee.MEDIUM,onClick:()=>i(s.identifier),isActive:s.identifier===t,key:`${s.identifier}-${a}`,image:s.thumbnailURI,label:s.name,style:{animationDelay:`${We(a)}s`}},pw.default.createElement(N.CardLabel,{withBackground:!0},o.items[s.identifier]||s.name));return pw.default.createElement(N.CardContainer,null,r.map(n))};var RJ=P("overlayTool")(R(rMe));const $s=_(require("react"));let mb=class extends $s.default.Component{constructor(){super(...arguments);this.onCategoryClick=e=>{const{stickerTool:t}=this.props;t.toggleCategorySelection(e)};this.renderItem=(e,t)=>{const{stickerTool:r}=this.props;return $s.default.createElement(N.Card,{tool:S.STICKER,type:Ee.MEDIUM,onClick:()=>r.add(e.identifier),key:`${e.identifier}-${t}`,image:e.thumbnailURI,label:e.name,style:{backgroundSize:"55%",animationDelay:`${y_(t)}s`}},$s.default.createElement(N.CardLabel,{hidden:!0},r.locale.items[e.identifier]||e.name))};this.renderCategory=(e,t)=>{const{stickerTool:r}=this.props,{selectedCategoryIdentifier:i,locale:o}=r,n=i===e.identifier;return e.items?$s.default.createElement(N.CategoryContainer,{key:e.identifier},$s.default.createElement(N.Card,{tool:S.STICKER,type:Ee.LARGE,onClick:()=>this.onCategoryClick(e.identifier),image:e.thumbnailURI,label:e.name,style:{animationDelay:`${We(t)}s`}},$s.default.createElement(N.CardLabel,{withBackground:!0},o.categories[e.identifier]||e.name)),$s.default.createElement(N.ExpandableContainer,{show:n},e.items.map(this.renderItem))):null}}render(){const{stickerTool:e}=this.props,{categories:t,items:r,config:i}=e;return i.flattenCategories?$s.default.createElement(N.CardContainer,null,r.map(this.renderItem)):$s.default.createElement(N.CardContainer,null,t.map(this.renderCategory))}};mb=m([P("stickerTool","active"),R],mb);const fb=_(require("react")),FJ=_(require("styled-components")),iMe=FJ.default.div`
  font-size: 20px;
  position: absolute;
  left: 50%;
  top: 50%;
  transform-origin: left top;
`;class oMe extends fb.default.Component{constructor(){super(...arguments);this.getWidth=({fontFamily:e,fontStyle:t,fontWeight:r},i)=>{const o=document.createElement("canvas"),n=o.getContext("2d");return n.font=`${t} ${r} 20px ${e}`,n.fillText(i,0,0),n.measureText(i).width};this.renderItem=(e,t)=>{const{config:r,textTool:i}=this.props,{fontFamily:o,fontWeight:n,fontStyle:s,identifier:a}=e,l=`${e.fontFamily} ${ke.getDisplayFontStyle(e)}`,c=this.getWidth(e,l),d=(r.measurements.basicCard.medium.width-20)/c;return fb.default.createElement(N.Card,{tool:S.TEXT,type:Ee.MEDIUM,onClick:()=>i.changeFont(a),isDisabled:!this.textTool.isTextSelected,isActive:i.identifier===a,key:`${e.identifier}-${t}`,label:l,style:{animationDelay:`${We(t)}s`}},fb.default.createElement(iMe,{style:{transform:`scale(${d}) translate(-50%, -50%)`,fontFamily:o,fontStyle:s,fontWeight:n}},l))}}get textTool(){return this.props.textTool}render(){const{textTool:e}=this.props,{fontsLoaded:t,fontFamilies:r}=e;return t?fb.default.createElement(N.CardContainer,null,r.map(this.renderItem)):null}}var PJ=P("textTool","config")(R(oMe));const hw=_(require("react")),nMe=({textDesignTool:e})=>{const{items:t,changeIdentifier:r,isTextDesignSelected:i,identifier:o}=e,n=(s,a)=>hw.default.createElement(N.Card,{tool:S.TEXT_DESIGN,type:Ee.MEDIUM,onClick:()=>r(s.identifier),isDisabled:!i,isActive:o===s.identifier,key:`${s.identifier}-${a}`,image:s.thumbnailURI,label:s.name,style:{animationDelay:`${We(a)}s`,backgroundSize:"60%"}},hw.default.createElement(N.CardLabel,{hidden:!0},s.name));return hw.default.createElement(N.CardContainer,null,t.map(n))};var MJ=P("textDesignTool")(R(nMe));const Xi=_(require("react")),rI=_(require("styled-components")),sMe=rI.default.div`
  svg {
    margin-bottom: 12px;
  }
`,aMe=rI.default.div`
  svg {
    width: ${e=>e.theme.measurements.basicCard.medium.height}px;
    height: ${e=>e.theme.measurements.basicCard.medium.height}px;
  }

  ${mi} {
    width: ${e=>e.theme.measurements.basicCard.medium.width-32}px;
    height: ${e=>e.theme.measurements.basicCard.medium.height-32}px;
    padding: 6px 0px 24px;
  }
`;let gb=class extends Xi.default.Component{constructor(){super(...arguments);this.onCategoryClick=e=>{const{transformTool:t}=this.props;t.toggleCategorySelection(e)};this.renderItem=(e,t)=>{const{transformTool:r,config:i}=this.props,{locale:o}=r,n=r.checkIfTransformThumbnailExits(e.thumbnailURI),s=nt.crops[e.identifier]||nt.crops.imgly_transform_common_custom,a=Xi.default.createElement(N.CardLabel,null,o.items[e.identifier]||e.name),l=n?a:Xi.default.createElement(aMe,null,Xi.default.createElement(s,{main:i.theme.transform.crops.main,highlight:i.theme.transform.crops.highlight,shadow:i.theme.transform.crops.shadow}),a);return Xi.default.createElement(N.Card,{tool:S.TRANSFORM,type:Ee.MEDIUM,onClick:()=>r.changeIdentifier(e.identifier,!0),key:`${e.identifier}-${t}`,image:e.thumbnailURI,label:e.name,style:{backgroundSize:"55%",animationDelay:`${We(t)}s`}},l)};this.renderCategory=(e,t)=>{const{transformTool:r}=this.props,{selectedCategoryIdentifier:i,locale:o}=r,n=i===e.identifier;if(!e.items)return null;const s=r.checkIfTransformThumbnailExits(e.thumbnailURI),a=Xi.default.createElement(N.CardLabel,null,o.categories[e.identifier]||e.name),l=s?a:Xi.default.createElement(sMe,null,nt.categories[e.identifier]&&Xi.default.createElement(nt.categories[e.identifier]),a);return Xi.default.createElement(N.CategoryContainer,{key:e.identifier},Xi.default.createElement(N.Card,{tool:S.TRANSFORM,type:Ee.LARGE,onClick:()=>this.onCategoryClick(e.identifier),image:s?e.thumbnailURI:"",label:e.name,style:{animationDelay:`${We(t)}s`}},l),Xi.default.createElement(N.ExpandableContainer,{show:n},e.items.map(this.renderItem)))}}render(){const{transformTool:e}=this.props,{categories:t,config:r,items:i}=e;return r.flattenCategories?Xi.default.createElement(N.CardContainer,null,i.map(this.renderItem)):Xi.default.createElement(N.CardContainer,null,t.map(this.renderCategory))}};gb=m([P("transformTool","config"),R],gb);let bb=class extends ko.default.Component{constructor(){super(...arguments);this.getToolItemsComponent=e=>{switch(e){case S.LIBRARY:return ko.default.createElement(hb,null);case S.FILTER:return ko.default.createElement(pb,null);case S.FOCUS:return ko.default.createElement(OJ,null);case S.ADJUSTMENT:return ko.default.createElement(IJ,null);case S.OVERLAY:return ko.default.createElement(RJ,null);case S.STICKER:return ko.default.createElement(mb,null);case S.TEXT:return ko.default.createElement(PJ,null);case S.TEXT_DESIGN:return ko.default.createElement(MJ,null);case S.FRAME:return ko.default.createElement(AJ,null);case S.TRANSFORM:return ko.default.createElement(gb,null);default:return null}}}render(){const{library:e,active:t}=this.props,r=t.tool;return r===S.BRUSH||r===S.LIBRARY&&!e.libraryProvider?null:ko.default.createElement(N.Itemsbar,{"data-test":ee.ToolControlBar,show:!!r},this.getToolItemsComponent(r))}};bb=m([P("active","library"),R],bb);const lMe=BJ.default.div`
  position: absolute;
  width: 100%;
  height: ${e=>e.theme.measurements.basicToolControlBar.maxHeight}px;
  bottom: 0;
  left: 0;
  background: ${e=>e.theme.webcam.backdrop};
  z-index: ${e=>e.theme.measurements.zIndex.disable};
`;let yb=class extends Jn.default.Component{static getDerivedStateFromError(e){return console.error(e),{hasError:!0}}render(){const{active:e}=this.props;return Jn.default.createElement(A.Container,{"data-test":ee.EditorContainer},e.isWebcam?Jn.default.createElement(lMe,null):null,Jn.default.createElement(Lh,null),Jn.default.createElement(Hl,null,Jn.default.createElement(Ih,null),Jn.default.createElement(Bh,null),Jn.default.createElement(ub,null),Jn.default.createElement(bb,null),Jn.default.createElement(pJ,null)))}};yb=m([P("active"),R],yb);class zJ extends vb.default.Component{componentDidMount(){const{editor:e,storeProps:t}=this.props;this.editor=e,this.storeProps=t;const r=new zg(this.editor.configStore.config.custom.components,{}),i={getDialog:r.getDialog,getButton:r.getButton,getColorItem:r.getColorItem,getCheckbox:r.getCheckbox};this.storeProps.custom=i,this.forceUpdate()}render(){return this.storeProps?vb.default.createElement(ff,v({},this.storeProps),vb.default.createElement(LJ.ThemeProvider,{theme:v(v({},this.editor.configStore.theme),{measurements:this.editor.configStore.measurements})},vb.default.createElement(yb,null))):null}}class uMe extends mw.default.Component{constructor(){super(...arguments);this.UIComponent=null}componentDidMount(){this.editor=this.props.editor,this.storeProps={filterTool:this.editor.filterToolStore,focusTool:this.editor.focusToolStore,adjustmentsTool:this.editor.adjustmentsToolStore,overlayTool:this.editor.overlayToolStore,frameTool:this.editor.frameToolStore,brushTool:this.editor.brushToolStore,transformTool:this.editor.transformToolStore,scale:this.editor.scale,sprite:this.editor.spriteStore,stickerTool:this.editor.spriteStore.stickerToolStore,textTool:this.editor.spriteStore.textToolStore,textDesignTool:this.editor.spriteStore.textDesignToolStore,library:this.editor.libraryStore,modal:this.editor.modalStore,snapping:this.editor.snappingStore,config:this.editor.configStore,active:this.editor.activeStore,canvas:this.editor.canvasStore,history:this.editor.historyStore,editor:this.editor},this.editor.configStore.config.layout==="basic"?Promise.resolve().then(()=>_(iI())).then(({BasicUI:e})=>{this.UIComponent=e,this.forceUpdate()}):(this.UIComponent=tb,this.forceUpdate())}componentWillUnmount(){this.editor.engine.dispose(),this.editor.configStore.events.removeAllListeners(fe.EXPORT),this.editor.configStore.events.removeAllListeners(fe.CLOSE),this.editor.configStore.events.removeAllListeners(fe.HISTORY_CHANGE),this.editor.configStore.events.removeAllListeners(fe.EDITOR_READY),this.editor.configStore.events.removeAllListeners(fe.ERROR_IMAGE_LOADING),this.editor.configStore.events.removeAllListeners(fe.IMAGE_LOAD),this.editor.configStore.events.removeAllListeners(fe.TOOL_ENTER),this.editor.configStore.events.removeAllListeners(fe.STICKER_UPLOAD_ADD)}render(){if(this.editor){const e=this.UIComponent;return this.storeProps&&e?mw.default.createElement(e,{editor:this.editor,storeProps:this.storeProps}):null}return null}}const nI={init:e=>{const t=new pMe;return t.init(e)}};const sI=_(require("react"));class aI extends sI.default.Component{constructor(e){super(e);this.ui=new so;this.serialize=e=>this.editor.serialize(e);this.deserialize=e=>this.editor.deserialize(e);this.export=e=>this.editor.export(e);this.close=()=>this.editor.close();this.setImage=e=>this.editor.setImage(e);this.reset=()=>{this.editor.resetToolStates(),this.editor.resize()};this.editor=new qt(v({},e)),this.editor.configStore.events.on(fe.EXPORT,t=>{this.ui.emit(fe.EXPORT,t)}),this.editor.configStore.events.on(fe.CLOSE,()=>{this.componentWillUnmount(),this.ui.emit(fe.CLOSE)}),this.editor.configStore.events.on(fe.HISTORY_CHANGE,()=>{this.ui.emit(fe.HISTORY_CHANGE)}),this.editor.configStore.events.on(fe.EDITOR_READY,()=>{this.ui.emit(fe.EDITOR_READY)}),this.editor.configStore.events.on(fe.ERROR_IMAGE_LOADING,t=>{this.ui.emit(fe.ERROR_IMAGE_LOADING,t)}),this.editor.configStore.events.on(fe.IMAGE_LOAD,()=>{this.ui.emit(fe.IMAGE_LOAD)}),this.editor.configStore.events.on(fe.TOOL_ENTER,t=>{this.ui.emit(fe.TOOL_ENTER,t)}),this.editor.configStore.events.on(fe.STICKER_UPLOAD_ADD,t=>{this.ui.emit(fe.STICKER_UPLOAD_ADD,t)}),this.storeProps={filterTool:this.editor.filterToolStore,focusTool:this.editor.focusToolStore,adjustmentsTool:this.editor.adjustmentsToolStore,overlayTool:this.editor.overlayToolStore,frameTool:this.editor.frameToolStore,brushTool:this.editor.brushToolStore,transformTool:this.editor.transformToolStore,scale:this.editor.scale,sprite:this.editor.spriteStore,stickerTool:this.editor.spriteStore.stickerToolStore,textTool:this.editor.spriteStore.textToolStore,textDesignTool:this.editor.spriteStore.textDesignToolStore,library:this.editor.libraryStore,modal:this.editor.modalStore,snapping:this.editor.snappingStore,config:this.editor.configStore,active:this.editor.activeStore,canvas:this.editor.canvasStore,history:this.editor.historyStore,editor:this.editor},this.editor.configStore.config.layout==="basic"?Promise.resolve().then(()=>_(iI())).then(({BasicUI:t})=>{this.UIComponent=t,this.forceUpdate()}):(this.UIComponent=tb,this.forceUpdate())}componentWillUnmount(){this.ui.removeAllListeners(fe.EXPORT),this.ui.removeAllListeners(fe.HISTORY_CHANGE),this.ui.removeAllListeners(fe.EDITOR_READY),this.ui.removeAllListeners(fe.ERROR_IMAGE_LOADING),this.ui.removeAllListeners(fe.IMAGE_LOAD),this.ui.removeAllListeners(fe.TOOL_ENTER),this.ui.removeAllListeners(fe.STICKER_UPLOAD_ADD)}hasChanges(){return this.editor.hasChanges()}render(){if(this.editor){const e=this.UIComponent;return this.storeProps&&e?sI.default.createElement(e,{editor:this.editor,storeProps:this.storeProps}):null}return null}}NJ.configure({isolateGlobalState:!0});const{Container:UJ,Input:hMe,ColorItem:jJ,ColorItemBase:qJ,ColorItemBackground:GJ,ColorItemTiledBackground:WJ,ColorItemActiveOverlay:HJ,Dialog:VJ,DialogBase:KJ,DialogContainer:$J,DialogBackdrop:YJ,DialogHeader:XJ,DialogBody:JJ,DialogFooter:ZJ,DialogSpinner:QJ}=A,{Label:eZ,Checkbox:tZ,CheckboxBase:rZ,CheckboxInput:iZ,CheckboxCheckMark:oZ}=hMe,nZ=jg,sZ=jg;return aZ();})();
/*
 * Based on https://github.com/exif-js/exif-js by Jacob Seidelin
 * Licensed under MIT
 * @license
 */
/*
 * Extracted from MinifyJpeg (Copyright (c) 2014 Hiroaki Matoba, MIT License):
 * https://github.com/hMatoba/MinifyJpeg
 * @license
 */
/*
 * http://paulirish.com/2011/requestanimationframe-for-smart-animating/
 * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
 * requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel
 * MIT license
 * @license
 */
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
/*!
 *  Secure Hash Algorithm (SHA256)
 *  http://www.webtoolkit.info/
 *
 *  Original code by Angel Marin, Paul Johnston.
 */
/*!
 * Copyright (c) 2003-2005  Tom Wu
 * All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 */
/*!
StackBlur - a fast almost Gaussian Blur For Canvas

Version:  0.5
Author:   Mario Klingemann
Contact:  mario@quasimondo.com
Website:  http://www.quasimondo.com/StackBlurForCanvas
Twitter:  @quasimondo

In case you find this class useful - especially in commercial projects -
I am not totally unhappy for a small donation to my PayPal account
mario@quasimondo.de

Or support me on flattr:
https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript

Copyright (c) 2010 Mario Klingemann

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
@license
*/
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/*! https://mths.be/punycode v1.3.2 by @mathias */
